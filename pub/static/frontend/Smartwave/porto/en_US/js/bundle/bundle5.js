require.config({"config": {
        "jsbuild":{"Magento_Tinymce3/tiny_mce/classes/Editor.js":"/**\n * Editor.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n\t// Shorten these names\n\tvar DOM = tinymce.DOM, Event = tinymce.dom.Event, extend = tinymce.extend,\n\t\tDispatcher = tinymce.util.Dispatcher, each = tinymce.each, isGecko = tinymce.isGecko,\n\t\tisIE = tinymce.isIE, isWebKit = tinymce.isWebKit, is = tinymce.is,\n\t\tThemeManager = tinymce.ThemeManager, PluginManager = tinymce.PluginManager,\n\t\tinArray = tinymce.inArray, grep = tinymce.grep, explode = tinymce.explode;\n\n\t/**\n\t * This class contains the core logic for a TinyMCE editor.\n\t *\n\t * @class tinymce.Editor\n\t * @example\n\t * // Add a class to all paragraphs in the editor.\n\t * tinyMCE.activeEditor.dom.addClass(tinyMCE.activeEditor.dom.select('p'), 'someclass');\n\t *\n\t * // Gets the current editors selection as text\n\t * tinyMCE.activeEditor.selection.getContent({format : 'text'});\n\t *\n\t * // Creates a new editor instance\n\t * var ed = new tinymce.Editor('textareaid', {\n\t *     some_setting : 1\n\t * });\n\t *\n\t * // Select each item the user clicks on\n\t * ed.onClick.add(function(ed, e) {\n\t *     ed.selection.select(e.target);\n\t * });\n\t *\n\t * ed.render();\n\t */\n\ttinymce.create('tinymce.Editor', {\n\t\t/**\n\t\t * Constructs a editor instance by id.\n\t\t *\n\t\t * @constructor\n\t\t * @method Editor\n\t\t * @param {String} id Unique id for the editor.\n\t\t * @param {Object} s Optional settings string for the editor.\n\t\t * @author Moxiecode\n\t\t */\n\t\tEditor : function(id, s) {\n\t\t\tvar t = this;\n\n\t\t\t/**\n\t\t\t * Editor instance id, normally the same as the div/textarea that was replaced.\n\t\t\t *\n\t\t\t * @property id\n\t\t\t * @type String\n\t\t\t */\n\t\t\tt.id = t.editorId = id;\n\n\t\t\tt.execCommands = {};\n\t\t\tt.queryStateCommands = {};\n\t\t\tt.queryValueCommands = {};\n\n\t\t\t/**\n\t\t\t * State to force the editor to return false on a isDirty call.\n\t\t\t *\n\t\t\t * @property isNotDirty\n\t\t\t * @type Boolean\n\t\t\t * @example\n\t\t\t * function ajaxSave() {\n\t\t\t *     var ed = tinyMCE.get('elm1');\n\t\t\t *\n\t\t\t *     // Save contents using some XHR call\n\t\t\t *     alert(ed.getContent());\n\t\t\t *\n\t\t\t *     ed.isNotDirty = 1; // Force not dirty state\n\t\t\t * }\n\t\t\t */\n\t\t\tt.isNotDirty = false;\n\n\t\t\t/**\n\t\t\t * Name/Value object containting plugin instances.\n\t\t\t *\n\t\t\t * @property plugins\n\t\t\t * @type Object\n\t\t\t * @example\n\t\t\t * // Execute a method inside a plugin directly\n\t\t\t * tinyMCE.activeEditor.plugins.someplugin.someMethod();\n\t\t\t */\n\t\t\tt.plugins = {};\n\n\t\t\t// Add events to the editor\n\t\t\teach([\n\t\t\t\t/**\n\t\t\t\t * Fires before the initialization of the editor.\n\t\t\t\t *\n\t\t\t\t * @event onPreInit\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @see #onInit\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onPreInit event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onPreInit.add(function(ed) {\n\t\t\t\t *           console.debug('PreInit: ' + ed.id);\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onPreInit',\n\n\t\t\t\t/**\n\t\t\t\t * Fires before the initialization of the editor.\n\t\t\t\t *\n\t\t\t\t * @event onBeforeRenderUI\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onBeforeRenderUI event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n \t\t\t\t *      ed.onBeforeRenderUI.add(function(ed, cm) {\n \t\t\t\t *          console.debug('Before render: ' + ed.id);\n \t\t\t\t *      });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onBeforeRenderUI',\n\n\t\t\t\t/**\n\t\t\t\t * Fires after the rendering has completed.\n\t\t\t\t *\n\t\t\t\t * @event onPostRender\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onPostRender event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onPostRender.add(function(ed, cm) {\n\t\t\t\t *           console.debug('After render: ' + ed.id);\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onPostRender',\n\n\t\t\t\t/**\n\t\t\t\t * Fires after the initialization of the editor is done.\n\t\t\t\t *\n\t\t\t\t * @event onInit\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @see #onPreInit\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onInit event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onInit.add(function(ed) {\n\t\t\t\t *           console.debug('Editor is done: ' + ed.id);\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onInit',\n\n\t\t\t\t/**\n\t\t\t\t * Fires when the editor instance is removed from page.\n\t\t\t\t *\n\t\t\t\t * @event onRemove\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onRemove event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onRemove.add(function(ed) {\n\t\t\t\t *           console.debug('Editor was removed: ' + ed.id);\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onRemove',\n\n\t\t\t\t/**\n\t\t\t\t * Fires when the editor is activated.\n\t\t\t\t *\n\t\t\t\t * @event onActivate\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onActivate event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onActivate.add(function(ed) {\n\t\t\t\t *           console.debug('Editor was activated: ' + ed.id);\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onActivate',\n\n\t\t\t\t/**\n\t\t\t\t * Fires when the editor is deactivated.\n\t\t\t\t *\n\t\t\t\t * @event onDeactivate\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onDeactivate event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onDeactivate.add(function(ed) {\n\t\t\t\t *           console.debug('Editor was deactivated: ' + ed.id);\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onDeactivate',\n\n\t\t\t\t/**\n\t\t\t\t * Fires when something in the body of the editor is clicked.\n\t\t\t\t *\n\t\t\t\t * @event onClick\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @param {Event} evt W3C DOM Event instance.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onClick event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onClick.add(function(ed, e) {\n\t\t\t\t *           console.debug('Editor was clicked: ' + e.target.nodeName);\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onClick',\n\n\t\t\t\t/**\n\t\t\t\t * Fires when a registered event is intercepted.\n\t\t\t\t *\n\t\t\t\t * @event onEvent\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @param {Event} evt W3C DOM Event instance.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onEvent event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onEvent.add(function(ed, e) {\n \t\t\t\t *          console.debug('Editor event occurred: ' + e.target.nodeName);\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onEvent',\n\n\t\t\t\t/**\n\t\t\t\t * Fires when a mouseup event is intercepted inside the editor.\n\t\t\t\t *\n\t\t\t\t * @event onMouseUp\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @param {Event} evt W3C DOM Event instance.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onMouseUp event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onMouseUp.add(function(ed, e) {\n\t\t\t\t *           console.debug('Mouse up event: ' + e.target.nodeName);\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onMouseUp',\n\n\t\t\t\t/**\n\t\t\t\t * Fires when a mousedown event is intercepted inside the editor.\n\t\t\t\t *\n\t\t\t\t * @event onMouseDown\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @param {Event} evt W3C DOM Event instance.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onMouseDown event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onMouseDown.add(function(ed, e) {\n\t\t\t\t *           console.debug('Mouse down event: ' + e.target.nodeName);\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onMouseDown',\n\n\t\t\t\t/**\n\t\t\t\t * Fires when a dblclick event is intercepted inside the editor.\n\t\t\t\t *\n\t\t\t\t * @event onDblClick\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @param {Event} evt W3C DOM Event instance.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onDblClick event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onDblClick.add(function(ed, e) {\n \t\t\t\t *          console.debug('Double click event: ' + e.target.nodeName);\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onDblClick',\n\n\t\t\t\t/**\n\t\t\t\t * Fires when a keydown event is intercepted inside the editor.\n\t\t\t\t *\n\t\t\t\t * @event onKeyDown\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @param {Event} evt W3C DOM Event instance.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onKeyDown event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onKeyDown.add(function(ed, e) {\n\t\t\t\t *           console.debug('Key down event: ' + e.keyCode);\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onKeyDown',\n\n\t\t\t\t/**\n\t\t\t\t * Fires when a keydown event is intercepted inside the editor.\n\t\t\t\t *\n\t\t\t\t * @event onKeyUp\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @param {Event} evt W3C DOM Event instance.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onKeyUp event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onKeyUp.add(function(ed, e) {\n\t\t\t\t *           console.debug('Key up event: ' + e.keyCode);\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onKeyUp',\n\n\t\t\t\t/**\n\t\t\t\t * Fires when a keypress event is intercepted inside the editor.\n\t\t\t\t *\n\t\t\t\t * @event onKeyPress\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @param {Event} evt W3C DOM Event instance.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onKeyPress event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onKeyPress.add(function(ed, e) {\n\t\t\t\t *           console.debug('Key press event: ' + e.keyCode);\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onKeyPress',\n\n\t\t\t\t/**\n\t\t\t\t * Fires when a contextmenu event is intercepted inside the editor.\n\t\t\t\t *\n\t\t\t\t * @event onContextMenu\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @param {Event} evt W3C DOM Event instance.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onContextMenu event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onContextMenu.add(function(ed, e) {\n\t\t\t\t *            console.debug('Context menu event:' + e.target);\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onContextMenu',\n\n\t\t\t\t/**\n\t\t\t\t * Fires when a form submit event is intercepted.\n\t\t\t\t *\n\t\t\t\t * @event onSubmit\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @param {Event} evt W3C DOM Event instance.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onSubmit event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onSubmit.add(function(ed, e) {\n\t\t\t\t *            console.debug('Form submit:' + e.target);\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onSubmit',\n\n\t\t\t\t/**\n\t\t\t\t * Fires when a form reset event is intercepted.\n\t\t\t\t *\n\t\t\t\t * @event onReset\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @param {Event} evt W3C DOM Event instance.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onReset event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onReset.add(function(ed, e) {\n\t\t\t\t *            console.debug('Form reset:' + e.target);\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onReset',\n\n\t\t\t\t/**\n\t\t\t\t * Fires when a paste event is intercepted inside the editor.\n\t\t\t\t *\n\t\t\t\t * @event onPaste\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @param {Event} evt W3C DOM Event instance.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onPaste event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onPaste.add(function(ed, e) {\n\t\t\t\t *            console.debug('Pasted plain text');\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onPaste',\n\n\t\t\t\t/**\n\t\t\t\t * Fires when the Serializer does a preProcess on the contents.\n\t\t\t\t *\n\t\t\t\t * @event onPreProcess\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @param {Object} obj PreProcess object.\n\t\t\t\t * @option {Node} node DOM node for the item being serialized.\n\t\t\t\t * @option {String} format The specified output format normally \"html\".\n\t\t\t\t * @option {Boolean} get Is true if the process is on a getContent operation.\n\t\t\t\t * @option {Boolean} set Is true if the process is on a setContent operation.\n\t\t\t\t * @option {Boolean} cleanup Is true if the process is on a cleanup operation.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onPreProcess event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onPreProcess.add(function(ed, o) {\n\t\t\t\t *            // Add a class to each paragraph in the editor\n\t\t\t\t *            ed.dom.addClass(ed.dom.select('p', o.node), 'myclass');\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onPreProcess',\n\n\t\t\t\t/**\n\t\t\t\t * Fires when the Serializer does a postProcess on the contents.\n\t\t\t\t *\n\t\t\t\t * @event onPostProcess\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @param {Object} obj PreProcess object.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onPostProcess event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onPostProcess.add(function(ed, o) {\n\t\t\t\t *            // Remove all paragraphs and replace with BR\n\t\t\t\t *            o.content = o.content.replace(/<p[^>]+>|<p>/g, '');\n\t\t\t\t *            o.content = o.content.replace(/<\\/p>/g, '<br />');\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onPostProcess',\n\n\t\t\t\t/**\n\t\t\t\t * Fires before new contents is added to the editor. Using for example setContent.\n\t\t\t\t *\n\t\t\t\t * @event onBeforeSetContent\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onBeforeSetContent event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onBeforeSetContent.add(function(ed, o) {\n\t\t\t\t *            // Replaces all a characters with b characters\n\t\t\t\t *            o.content = o.content.replace(/a/g, 'b');\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onBeforeSetContent',\n\n\t\t\t\t/**\n\t\t\t\t * Fires before contents is extracted from the editor using for example getContent.\n\t\t\t\t *\n\t\t\t\t * @event onBeforeGetContent\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @param {Event} evt W3C DOM Event instance.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onBeforeGetContent event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onBeforeGetContent.add(function(ed, o) {\n\t\t\t\t *            console.debug('Before get content.');\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onBeforeGetContent',\n\n\t\t\t\t/**\n\t\t\t\t * Fires after the contents has been added to the editor using for example onSetContent.\n\t\t\t\t *\n\t\t\t\t * @event onSetContent\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onSetContent event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onSetContent.add(function(ed, o) {\n\t\t\t\t *            // Replaces all a characters with b characters\n\t\t\t\t *            o.content = o.content.replace(/a/g, 'b');\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onSetContent',\n\n\t\t\t\t/**\n\t\t\t\t * Fires after the contents has been extracted from the editor using for example getContent.\n\t\t\t\t *\n\t\t\t\t * @event onGetContent\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onGetContent event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onGetContent.add(function(ed, o) {\n\t\t\t\t *           // Replace all a characters with b\n\t\t\t\t *           o.content = o.content.replace(/a/g, 'b');\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onGetContent',\n\n\t\t\t\t/**\n\t\t\t\t * Fires when the editor gets loaded with contents for example when the load method is executed.\n\t\t\t\t *\n\t\t\t\t * @event onLoadContent\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onLoadContent event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onLoadContent.add(function(ed, o) {\n\t\t\t\t *           // Output the element name\n\t\t\t\t *           console.debug(o.element.nodeName);\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onLoadContent',\n\n\t\t\t\t/**\n\t\t\t\t * Fires when the editor contents gets saved for example when the save method is executed.\n\t\t\t\t *\n\t\t\t\t * @event onSaveContent\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onSaveContent event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onSaveContent.add(function(ed, o) {\n\t\t\t\t *           // Output the element name\n\t\t\t\t *           console.debug(o.element.nodeName);\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onSaveContent',\n\n\t\t\t\t/**\n\t\t\t\t * Fires when the user changes node location using the mouse or keyboard.\n\t\t\t\t *\n\t\t\t\t * @event onNodeChange\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onNodeChange event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onNodeChange.add(function(ed, cm, e) {\n\t\t\t\t *           // Activates the link button when the caret is placed in a anchor element\n\t\t\t\t *           if (e.nodeName == 'A')\n\t\t\t\t *              cm.setActive('link', true);\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onNodeChange',\n\n\t\t\t\t/**\n\t\t\t\t * Fires when a new undo level is added to the editor.\n\t\t\t\t *\n\t\t\t\t * @event onChange\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onChange event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t * \t  ed.onChange.add(function(ed, l) {\n\t\t\t\t * \t\t  console.debug('Editor contents was modified. Contents: ' + l.content);\n\t\t\t\t * \t  });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onChange',\n\n\t\t\t\t/**\n\t\t\t\t * Fires before a command gets executed for example \"Bold\".\n\t\t\t\t *\n\t\t\t\t * @event onBeforeExecCommand\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onBeforeExecCommand event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onBeforeExecCommand.add(function(ed, cmd, ui, val) {\n\t\t\t\t *           console.debug('Command is to be executed: ' + cmd);\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onBeforeExecCommand',\n\n\t\t\t\t/**\n\t\t\t\t * Fires after a command is executed for example \"Bold\".\n\t\t\t\t *\n\t\t\t\t * @event onExecCommand\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onExecCommand event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onExecCommand.add(function(ed, cmd, ui, val) {\n\t\t\t\t *           console.debug('Command was executed: ' + cmd);\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onExecCommand',\n\n\t\t\t\t/**\n\t\t\t\t * Fires when the contents is undo:ed.\n\t\t\t\t *\n\t\t\t\t * @event onUndo\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @param {Object} level Undo level object.\n\t\t\t\t * @ example\n\t\t\t\t * // Adds an observer to the onUndo event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onUndo.add(function(ed, level) {\n\t\t\t\t *           console.debug('Undo was performed: ' + level.content);\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onUndo',\n\n\t\t\t\t/**\n\t\t\t\t * Fires when the contents is redo:ed.\n\t\t\t\t *\n\t\t\t\t * @event onRedo\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @param {Object} level Undo level object.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onRedo event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onRedo.add(function(ed, level) {\n\t\t\t\t *           console.debug('Redo was performed: ' +level.content);\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onRedo',\n\n\t\t\t\t/**\n\t\t\t\t * Fires when visual aids is enabled/disabled.\n\t\t\t\t *\n\t\t\t\t * @event onVisualAid\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onVisualAid event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onVisualAid.add(function(ed, e, s) {\n\t\t\t\t *           console.debug('onVisualAid event: ' + ed.id + \", State: \" + s);\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onVisualAid',\n\n\t\t\t\t/**\n\t\t\t\t * Fires when the progress throbber is shown above the editor.\n\t\t\t\t *\n\t\t\t\t * @event onSetProgressState\n\t\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t\t * @example\n\t\t\t\t * // Adds an observer to the onSetProgressState event using tinyMCE.init\n\t\t\t\t * tinyMCE.init({\n\t\t\t\t *    ...\n\t\t\t\t *    setup : function(ed) {\n\t\t\t\t *       ed.onSetProgressState.add(function(ed, b) {\n\t\t\t\t *            if (b)\n\t\t\t\t *                 console.debug('SHOW!');\n\t\t\t\t *            else\n\t\t\t\t *                 console.debug('HIDE!');\n\t\t\t\t *       });\n\t\t\t\t *    }\n\t\t\t\t * });\n\t\t\t\t */\n\t\t\t\t'onSetProgressState'\n\t\t\t], function(e) {\n\t\t\t\tt[e] = new Dispatcher(t);\n\t\t\t});\n\n\t\t\t/**\n\t\t\t * Name/value collection with editor settings.\n\t\t\t *\n\t\t\t * @property settings\n\t\t\t * @type Object\n\t\t\t * @example\n\t\t\t * // Get the value of the theme setting\n\t\t\t * tinyMCE.activeEditor.windowManager.alert(\"You are using the \" + tinyMCE.activeEditor.settings.theme + \" theme\");\n\t\t\t */\n\t\t\tt.settings = s = extend({\n\t\t\t\tid : id,\n\t\t\t\tlanguage : 'en',\n\t\t\t\tdocs_language : 'en',\n\t\t\t\ttheme : 'simple',\n\t\t\t\tskin : 'default',\n\t\t\t\tdelta_width : 0,\n\t\t\t\tdelta_height : 0,\n\t\t\t\tpopup_css : '',\n\t\t\t\tplugins : '',\n\t\t\t\tdocument_base_url : tinymce.documentBaseURL,\n\t\t\t\tadd_form_submit_trigger : 1,\n\t\t\t\tsubmit_patch : 1,\n\t\t\t\tadd_unload_trigger : 1,\n\t\t\t\tconvert_urls : 1,\n\t\t\t\trelative_urls : 1,\n\t\t\t\tremove_script_host : 1,\n\t\t\t\ttable_inline_editing : 0,\n\t\t\t\tobject_resizing : 1,\n\t\t\t\tcleanup : 1,\n\t\t\t\taccessibility_focus : 1,\n\t\t\t\tcustom_shortcuts : 1,\n\t\t\t\tcustom_undo_redo_keyboard_shortcuts : 1,\n\t\t\t\tcustom_undo_redo_restore_selection : 1,\n\t\t\t\tcustom_undo_redo : 1,\n\t\t\t\tdoctype : tinymce.isIE6 ? '<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\">' : '<!DOCTYPE>', // Use old doctype on IE 6 to avoid horizontal scroll\n\t\t\t\tvisual_table_class : 'mceItemTable',\n\t\t\t\tvisual : 1,\n\t\t\t\tfont_size_style_values : 'xx-small,x-small,small,medium,large,x-large,xx-large',\n\t\t\t\tfont_size_legacy_values : 'xx-small,small,medium,large,x-large,xx-large,300%', // See: http://www.w3.org/TR/CSS2/fonts.html#propdef-font-size\n\t\t\t\tapply_source_formatting : 1,\n\t\t\t\tdirectionality : 'ltr',\n\t\t\t\tforced_root_block : 'p',\n\t\t\t\thidden_input : 1,\n\t\t\t\tpadd_empty_editor : 1,\n\t\t\t\trender_ui : 1,\n\t\t\t\tinit_theme : 1,\n\t\t\t\tforce_p_newlines : 1,\n\t\t\t\tindentation : '30px',\n\t\t\t\tkeep_styles : 1,\n\t\t\t\tfix_table_elements : 1,\n\t\t\t\tinline_styles : 1,\n\t\t\t\tconvert_fonts_to_spans : true,\n\t\t\t\tindent : 'simple',\n\t\t\t\tindent_before : 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr',\n\t\t\t\tindent_after : 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr',\n\t\t\t\tvalidate : true,\n\t\t\t\tentity_encoding : 'named',\n\t\t\t\turl_converter : t.convertURL,\n\t\t\t\turl_converter_scope : t,\n\t\t\t\tie7_compat : true\n\t\t\t}, s);\n\n\t\t\t/**\n\t\t\t * URI object to document configured for the TinyMCE instance.\n\t\t\t *\n\t\t\t * @property documentBaseURI\n\t\t\t * @type tinymce.util.URI\n\t\t\t * @example\n\t\t\t * // Get relative URL from the location of document_base_url\n\t\t\t * tinyMCE.activeEditor.documentBaseURI.toRelative('/somedir/somefile.htm');\n\t\t\t *\n\t\t\t * // Get absolute URL from the location of document_base_url\n\t\t\t * tinyMCE.activeEditor.documentBaseURI.toAbsolute('somefile.htm');\n\t\t\t */\n\t\t\tt.documentBaseURI = new tinymce.util.URI(s.document_base_url || tinymce.documentBaseURL, {\n\t\t\t\tbase_uri : tinyMCE.baseURI\n\t\t\t});\n\n\t\t\t/**\n\t\t\t * URI object to current document that holds the TinyMCE editor instance.\n\t\t\t *\n\t\t\t * @property baseURI\n\t\t\t * @type tinymce.util.URI\n\t\t\t * @example\n\t\t\t * // Get relative URL from the location of the API\n\t\t\t * tinyMCE.activeEditor.baseURI.toRelative('/somedir/somefile.htm');\n\t\t\t *\n\t\t\t * // Get absolute URL from the location of the API\n\t\t\t * tinyMCE.activeEditor.baseURI.toAbsolute('somefile.htm');\n\t\t\t */\n\t\t\tt.baseURI = tinymce.baseURI;\n\n\t\t\t/**\n\t\t\t * Array with CSS files to load into the iframe.\n\t\t\t *\n\t\t\t * @property contentCSS\n\t\t\t * @type Array\n\t\t\t */\n\t\t\tt.contentCSS = [];\n\n\t\t\t// Call setup\n\t\t\tt.execCallback('setup', t);\n\t\t},\n\n\t\t/**\n\t\t * Renderes the editor/adds it to the page.\n\t\t *\n\t\t * @method render\n\t\t */\n\t\trender : function(nst) {\n\t\t\tvar t = this, s = t.settings, id = t.id, sl = tinymce.ScriptLoader;\n\n\t\t\t// Page is not loaded yet, wait for it\n\t\t\tif (!Event.domLoaded) {\n\t\t\t\tEvent.add(document, 'init', function() {\n\t\t\t\t\tt.render();\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttinyMCE.settings = s;\n\n\t\t\t// Element not found, then skip initialization\n\t\t\tif (!t.getElement())\n\t\t\t\treturn;\n\n\t\t\t// Is a iPad/iPhone and not on iOS5, then skip initialization. We need to sniff\n\t\t\t// here since the browser says it has contentEditable support but there is no visible\n\t\t\t// caret We will remove this check ones Apple implements full contentEditable support\n\t\t\tif (tinymce.isIDevice && !tinymce.isIOS5)\n\t\t\t\treturn;\n\n\t\t\t// Add hidden input for non input elements inside form elements\n\t\t\tif (!/TEXTAREA|INPUT/i.test(t.getElement().nodeName) && s.hidden_input && DOM.getParent(id, 'form'))\n\t\t\t\tDOM.insertAfter(DOM.create('input', {type : 'hidden', name : id}), id);\n\n\t\t\t/**\n\t\t\t * Window manager reference, use this to open new windows and dialogs.\n\t\t\t *\n\t\t\t * @property windowManager\n\t\t\t * @type tinymce.WindowManager\n\t\t\t * @example\n\t\t\t * // Shows an alert message\n\t\t\t * tinyMCE.activeEditor.windowManager.alert('Hello world!');\n\t\t\t *\n\t\t\t * // Opens a new dialog with the file.htm file and the size 320x240\n\t\t\t * // It also adds a custom parameter this can be retrieved by using tinyMCEPopup.getWindowArg inside the dialog.\n\t\t\t * tinyMCE.activeEditor.windowManager.open({\n\t\t\t *    url : 'file.htm',\n\t\t\t *    width : 320,\n\t\t\t *    height : 240\n\t\t\t * }, {\n\t\t\t *    custom_param : 1\n\t\t\t * });\n\t\t\t */\n\t\t\tif (tinymce.WindowManager)\n\t\t\t\tt.windowManager = new tinymce.WindowManager(t);\n\n\t\t\tif (s.encoding == 'xml') {\n\t\t\t\tt.onGetContent.add(function(ed, o) {\n\t\t\t\t\tif (o.save)\n\t\t\t\t\t\to.content = DOM.encode(o.content);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (s.add_form_submit_trigger) {\n\t\t\t\tt.onSubmit.addToTop(function() {\n\t\t\t\t\tif (t.initialized) {\n\t\t\t\t\t\tt.save();\n\t\t\t\t\t\tt.isNotDirty = 1;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (s.add_unload_trigger) {\n\t\t\t\tt._beforeUnload = tinyMCE.onBeforeUnload.add(function() {\n\t\t\t\t\tif (t.initialized && !t.destroyed && !t.isHidden())\n\t\t\t\t\t\tt.save({format : 'raw', no_events : true});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\ttinymce.addUnload(t.destroy, t);\n\n\t\t\tif (s.submit_patch) {\n\t\t\t\tt.onBeforeRenderUI.add(function() {\n\t\t\t\t\tvar n = t.getElement().form;\n\n\t\t\t\t\tif (!n)\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t// Already patched\n\t\t\t\t\tif (n._mceOldSubmit)\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t// Check page uses id=\"submit\" or name=\"submit\" for it's submit button\n\t\t\t\t\tif (!n.submit.nodeType && !n.submit.length) {\n\t\t\t\t\t\tt.formElement = n;\n\t\t\t\t\t\tn._mceOldSubmit = n.submit;\n\t\t\t\t\t\tn.submit = function() {\n\t\t\t\t\t\t\t// Save all instances\n\t\t\t\t\t\t\ttinymce.triggerSave();\n\t\t\t\t\t\t\tt.isNotDirty = 1;\n\n\t\t\t\t\t\t\treturn t.formElement._mceOldSubmit(t.formElement);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tn = null;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Load scripts\n\t\t\tfunction loadScripts() {\n\t\t\t\tif (s.language && s.language_load !== false)\n\t\t\t\t\tsl.add(tinymce.baseURL + '/langs/' + s.language + '.js');\n\n\t\t\t\tif (s.theme && s.theme.charAt(0) != '-' && !ThemeManager.urls[s.theme])\n\t\t\t\t\tThemeManager.load(s.theme, 'themes/' + s.theme + '/editor_template' + tinymce.suffix + '.js');\n\n\t\t\t\teach(explode(s.plugins), function(p) {\n\t\t\t\t\tif (p &&!PluginManager.urls[p]) {\n\t\t\t\t\t\tif (p.charAt(0) == '-') {\n\t\t\t\t\t\t\tp = p.substr(1, p.length);\n\t\t\t\t\t\t\tvar dependencies = PluginManager.dependencies(p);\n\t\t\t\t\t\t\teach(dependencies, function(dep) {\n\t\t\t\t\t\t\t\tvar defaultSettings = {prefix:'plugins/', resource: dep, suffix:'/editor_plugin' + tinymce.suffix + '.js'};\n\t\t\t\t\t\t\t\tvar dep = PluginManager.createUrl(defaultSettings, dep);\n\t\t\t\t\t\t\t\tPluginManager.load(dep.resource, dep);\n\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Skip safari plugin, since it is removed as of 3.3b1\n\t\t\t\t\t\t\tif (p == 'safari') {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tPluginManager.load(p, {prefix:'plugins/', resource: p, suffix:'/editor_plugin' + tinymce.suffix + '.js'});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Init when que is loaded\n\t\t\t\tsl.loadQueue(function() {\n\t\t\t\t\tif (!t.removed)\n\t\t\t\t\t\tt.init();\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tloadScripts();\n\t\t},\n\n\t\t/**\n\t\t * Initializes the editor this will be called automatically when\n\t\t * all plugins/themes and language packs are loaded by the rendered method.\n\t\t * This method will setup the iframe and create the theme and plugin instances.\n\t\t *\n\t\t * @method init\n\t\t */\n\t\tinit : function() {\n\t\t\tvar n, t = this, s = t.settings, w, h, e = t.getElement(), o, ti, u, bi, bc, re, i, initializedPlugins = [];\n\n\t\t\ttinymce.add(t);\n\n\t\t\ts.aria_label = s.aria_label || DOM.getAttrib(e, 'aria-label', t.getLang('aria.rich_text_area'));\n\n\t\t\t/**\n\t\t\t * Reference to the theme instance that was used to generate the UI.\n\t\t\t *\n\t\t\t * @property theme\n\t\t\t * @type tinymce.Theme\n\t\t\t * @example\n\t\t\t * // Executes a method on the theme directly\n\t\t\t * tinyMCE.activeEditor.theme.someMethod();\n\t\t\t */\n\t\t\tif (s.theme) {\n\t\t\t\ts.theme = s.theme.replace(/-/, '');\n\t\t\t\to = ThemeManager.get(s.theme);\n\t\t\t\tt.theme = new o();\n\n\t\t\t\tif (t.theme.init && s.init_theme)\n\t\t\t\t\tt.theme.init(t, ThemeManager.urls[s.theme] || tinymce.documentBaseURL.replace(/\\/$/, ''));\n\t\t\t}\n\t\t\tfunction initPlugin(p) {\n\t\t\t\tvar c = PluginManager.get(p), u = PluginManager.urls[p] || tinymce.documentBaseURL.replace(/\\/$/, ''), po;\n\t\t\t\tif (c && tinymce.inArray(initializedPlugins,p) === -1) {\n\t\t\t\t\teach(PluginManager.dependencies(p), function(dep){\n\t\t\t\t\t\tinitPlugin(dep);\n\t\t\t\t\t});\n\t\t\t\t\tpo = new c(t, u);\n\n\t\t\t\t\tt.plugins[p] = po;\n\n\t\t\t\t\tif (po.init) {\n\t\t\t\t\t\tpo.init(t, u);\n\t\t\t\t\t\tinitializedPlugins.push(p);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Create all plugins\n\t\t\teach(explode(s.plugins.replace(/\\-/g, '')), initPlugin);\n\n\t\t\t// Setup popup CSS path(s)\n\t\t\tif (s.popup_css !== false) {\n\t\t\t\tif (s.popup_css)\n\t\t\t\t\ts.popup_css = t.documentBaseURI.toAbsolute(s.popup_css);\n\t\t\t\telse\n\t\t\t\t\ts.popup_css = t.baseURI.toAbsolute(\"themes/\" + s.theme + \"/skins/\" + s.skin + \"/dialog.css\");\n\t\t\t}\n\n\t\t\tif (s.popup_css_add)\n\t\t\t\ts.popup_css += ',' + t.documentBaseURI.toAbsolute(s.popup_css_add);\n\n\t\t\t/**\n\t\t\t * Control manager instance for the editor. Will enables you to create new UI elements and change their states etc.\n\t\t\t *\n\t\t\t * @property controlManager\n\t\t\t * @type tinymce.ControlManager\n\t\t\t * @example\n\t\t\t * // Disables the bold button\n\t\t\t * tinyMCE.activeEditor.controlManager.setDisabled('bold', true);\n\t\t\t */\n\t\t\tt.controlManager = new tinymce.ControlManager(t);\n\n\t\t\tif (s.custom_undo_redo) {\n\t\t\t\tt.onBeforeExecCommand.add(function(ed, cmd, ui, val, a) {\n\t\t\t\t\tif (cmd != 'Undo' && cmd != 'Redo' && cmd != 'mceRepaint' && (!a || !a.skip_undo))\n\t\t\t\t\t\tt.undoManager.beforeChange();\n\t\t\t\t});\n\n\t\t\t\tt.onExecCommand.add(function(ed, cmd, ui, val, a) {\n\t\t\t\t\tif (cmd != 'Undo' && cmd != 'Redo' && cmd != 'mceRepaint' && (!a || !a.skip_undo))\n\t\t\t\t\t\tt.undoManager.add();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tt.onExecCommand.add(function(ed, c) {\n\t\t\t\t// Don't refresh the select lists until caret move\n\t\t\t\tif (!/^(FontName|FontSize)$/.test(c))\n\t\t\t\t\tt.nodeChanged();\n\t\t\t});\n\n\t\t\t// Remove ghost selections on images and tables in Gecko\n\t\t\tif (isGecko) {\n\t\t\t\tfunction repaint(a, o) {\n\t\t\t\t\tif (!o || !o.initial)\n\t\t\t\t\t\tt.execCommand('mceRepaint');\n\t\t\t\t};\n\n\t\t\t\tt.onUndo.add(repaint);\n\t\t\t\tt.onRedo.add(repaint);\n\t\t\t\tt.onSetContent.add(repaint);\n\t\t\t}\n\n\t\t\t// Enables users to override the control factory\n\t\t\tt.onBeforeRenderUI.dispatch(t, t.controlManager);\n\n\t\t\t// Measure box\n\t\t\tif (s.render_ui) {\n\t\t\t\tw = s.width || e.style.width || e.offsetWidth;\n\t\t\t\th = s.height || e.style.height || e.offsetHeight;\n\t\t\t\tt.orgDisplay = e.style.display;\n\t\t\t\tre = /^[0-9\\.]+(|px)$/i;\n\n\t\t\t\tif (re.test('' + w))\n\t\t\t\t\tw = Math.max(parseInt(w) + (o.deltaWidth || 0), 100);\n\n\t\t\t\tif (re.test('' + h))\n\t\t\t\t\th = Math.max(parseInt(h) + (o.deltaHeight || 0), 100);\n\n\t\t\t\t// Render UI\n\t\t\t\to = t.theme.renderUI({\n\t\t\t\t\ttargetNode : e,\n\t\t\t\t\twidth : w,\n\t\t\t\t\theight : h,\n\t\t\t\t\tdeltaWidth : s.delta_width,\n\t\t\t\t\tdeltaHeight : s.delta_height\n\t\t\t\t});\n\n\t\t\t\tt.editorContainer = o.editorContainer;\n\t\t\t}\n\n\t\t\t// #ifdef contentEditable\n\n\t\t\t// Content editable mode ends here\n\t\t\tif (s.content_editable) {\n\t\t\t\te = n = o = null; // Fix IE leak\n\t\t\t\treturn t.setupContentEditable();\n\t\t\t}\n\n\t\t\t// #endif\n\n\t\t\t// User specified a document.domain value\n\t\t\tif (document.domain && location.hostname != document.domain)\n\t\t\t\ttinymce.relaxedDomain = document.domain;\n\n\t\t\t// Resize editor\n\t\t\tDOM.setStyles(o.sizeContainer || o.editorContainer, {\n\t\t\t\twidth : w,\n\t\t\t\theight : h\n\t\t\t});\n\n\t\t\t// Load specified content CSS last\n\t\t\tif (s.content_css) {\n\t\t\t\ttinymce.each(explode(s.content_css), function(u) {\n\t\t\t\t\tt.contentCSS.push(t.documentBaseURI.toAbsolute(u));\n\t\t\t\t});\n\t\t\t}\n\n\t\t\th = (o.iframeHeight || h) + (typeof(h) == 'number' ? (o.deltaHeight || 0) : '');\n\t\t\tif (h < 100)\n\t\t\t\th = 100;\n\n\t\t\tt.iframeHTML = s.doctype + '<html><head xmlns=\"http://www.w3.org/1999/xhtml\">';\n\n\t\t\t// We only need to override paths if we have to\n\t\t\t// IE has a bug where it remove site absolute urls to relative ones if this is specified\n\t\t\tif (s.document_base_url != tinymce.documentBaseURL)\n\t\t\t\tt.iframeHTML += '<base href=\"' + t.documentBaseURI.getURI() + '\" />';\n\n\t\t\t// IE8 doesn't support carets behind images setting ie7_compat would force IE8+ to run in IE7 compat mode.\n\t\t\tif (s.ie7_compat)\n\t\t\t\tt.iframeHTML += '<meta http-equiv=\"X-UA-Compatible\" content=\"IE=7\" />';\n\t\t\telse\n\t\t\t\tt.iframeHTML += '<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />';\n\n\t\t\tt.iframeHTML += '<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />';\n\n\t\t\t// Load the CSS by injecting them into the HTML this will reduce \"flicker\"\n\t\t\tfor (i = 0; i < t.contentCSS.length; i++) {\n\t\t\t\tt.iframeHTML += '<link type=\"text/css\" rel=\"stylesheet\" href=\"' + t.contentCSS[i] + '\" />';\n\t\t\t}\n\n\t\t\tbi = s.body_id || 'tinymce';\n\t\t\tif (bi.indexOf('=') != -1) {\n\t\t\t\tbi = t.getParam('body_id', '', 'hash');\n\t\t\t\tbi = bi[t.id] || bi;\n\t\t\t}\n\n\t\t\tbc = s.body_class || '';\n\t\t\tif (bc.indexOf('=') != -1) {\n\t\t\t\tbc = t.getParam('body_class', '', 'hash');\n\t\t\t\tbc = bc[t.id] || '';\n\t\t\t}\n\n\t\t\tt.iframeHTML += '</head><body id=\"' + bi + '\" class=\"mceContentBody ' + bc + '\"><br></body></html>';\n\n\t\t\t// Domain relaxing enabled, then set document domain\n\t\t\tif (tinymce.relaxedDomain && (isIE || (tinymce.isOpera && parseFloat(opera.version()) < 11))) {\n\t\t\t\t// We need to write the contents here in IE since multiple writes messes up refresh button and back button\n\t\t\t\tu = 'javascript:(function(){document.open();document.domain=\"' + document.domain + '\";var ed = window.parent.tinyMCE.get(\"' + t.id + '\");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()';\n\t\t\t}\n\n\t\t\t// Create iframe\n\t\t\t// TODO: ACC add the appropriate description on this.\n\t\t\tn = DOM.add(o.iframeContainer, 'iframe', {\n\t\t\t\tid : t.id + \"_ifr\",\n\t\t\t\tsrc : u || 'javascript:\"\"', // Workaround for HTTPS warning in IE6/7\n\t\t\t\tframeBorder : '0',\n\t\t\t\tallowTransparency : \"true\",\n\t\t\t\ttitle : s.aria_label,\n\t\t\t\tstyle : {\n\t\t\t\t\twidth : '100%',\n\t\t\t\t\theight : h,\n\t\t\t\t\tdisplay : 'block' // Important for Gecko to render the iframe correctly\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tt.contentAreaContainer = o.iframeContainer;\n\t\t\tDOM.get(o.editorContainer).style.display = t.orgDisplay;\n\t\t\tDOM.get(t.id).style.display = 'none';\n\t\t\tDOM.setAttrib(t.id, 'aria-hidden', true);\n\n\t\t\tif (!tinymce.relaxedDomain || !u)\n\t\t\t\tt.setupIframe();\n\n\t\t\te = n = o = null; // Cleanup\n\t\t},\n\n\t\t/**\n\t\t * This method get called by the init method ones the iframe is loaded.\n\t\t * It will fill the iframe with contents, setups DOM and selection objects for the iframe.\n\t\t * This method should not be called directly.\n\t\t *\n\t\t * @method setupIframe\n\t\t */\n\t\tsetupIframe : function() {\n\t\t\tvar t = this, s = t.settings, e = DOM.get(t.id), d = t.getDoc(), h, b;\n\n\t\t\t// Setup iframe body\n\t\t\tif (!isIE || !tinymce.relaxedDomain) {\n\t\t\t\td.open();\n\t\t\t\td.write(t.iframeHTML);\n\t\t\t\td.close();\n\n\t\t\t\tif (tinymce.relaxedDomain)\n\t\t\t\t\td.domain = tinymce.relaxedDomain;\n\t\t\t}\n\n\t\t\t// It will not steal focus while setting contentEditable\n\t\t\tb = t.getBody();\n\t\t\tb.disabled = true;\n\n\t\t\tif (!s.readonly)\n\t\t\t\tb.contentEditable = true;\n\n\t\t\tb.disabled = false;\n\n\t\t\t/**\n\t\t\t * Schema instance, enables you to validate elements and it's children.\n\t\t\t *\n\t\t\t * @property schema\n\t\t\t * @type tinymce.html.Schema\n\t\t\t */\n\t\t\tt.schema = new tinymce.html.Schema(s);\n\n\t\t\t/**\n\t\t\t * DOM instance for the editor.\n\t\t\t *\n\t\t\t * @property dom\n\t\t\t * @type tinymce.dom.DOMUtils\n\t\t\t * @example\n\t\t\t * // Adds a class to all paragraphs within the editor\n\t\t\t * tinyMCE.activeEditor.dom.addClass(tinyMCE.activeEditor.dom.select('p'), 'someclass');\n\t\t\t */\n\t\t\tt.dom = new tinymce.dom.DOMUtils(t.getDoc(), {\n\t\t\t\tkeep_values : true,\n\t\t\t\turl_converter : t.convertURL,\n\t\t\t\turl_converter_scope : t,\n\t\t\t\thex_colors : s.force_hex_style_colors,\n\t\t\t\tclass_filter : s.class_filter,\n\t\t\t\tupdate_styles : 1,\n\t\t\t\tfix_ie_paragraphs : 1,\n\t\t\t\tschema : t.schema\n\t\t\t});\n\n\t\t\t/**\n\t\t\t * HTML parser will be used when contents is inserted into the editor.\n\t\t\t *\n\t\t\t * @property parser\n\t\t\t * @type tinymce.html.DomParser\n\t\t\t */\n\t\t\tt.parser = new tinymce.html.DomParser(s, t.schema);\n\n\t\t\t// Force anchor names closed, unless the setting \"allow_html_in_named_anchor\" is explicitly included.\n\t\t\tif (!t.settings.allow_html_in_named_anchor) {\n\t\t\t\tt.parser.addAttributeFilter('name', function(nodes, name) {\n\t\t\t\t\tvar i = nodes.length, sibling, prevSibling, parent, node;\n\n\t\t\t\t\twhile (i--) {\n\t\t\t\t\t\tnode = nodes[i];\n\t\t\t\t\t\tif (node.name === 'a' && node.firstChild) {\n\t\t\t\t\t\t\tparent = node.parent;\n\n\t\t\t\t\t\t\t// Move children after current node\n\t\t\t\t\t\t\tsibling = node.lastChild;\n\t\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\t\tprevSibling = sibling.prev;\n\t\t\t\t\t\t\t\tparent.insert(sibling, node);\n\t\t\t\t\t\t\t\tsibling = prevSibling;\n\t\t\t\t\t\t\t} while (sibling);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Convert src and href into data-mce-src, data-mce-href and data-mce-style\n\t\t\tt.parser.addAttributeFilter('src,href,style', function(nodes, name) {\n\t\t\t\tvar i = nodes.length, node, dom = t.dom, value, internalName;\n\n\t\t\t\twhile (i--) {\n\t\t\t\t\tnode = nodes[i];\n\t\t\t\t\tvalue = node.attr(name);\n\t\t\t\t\tinternalName = 'data-mce-' + name;\n\n\t\t\t\t\t// Add internal attribute if we need to we don't on a refresh of the document\n\t\t\t\t\tif (!node.attributes.map[internalName]) {\n\t\t\t\t\t\tif (name === \"style\")\n\t\t\t\t\t\t\tnode.attr(internalName, dom.serializeStyle(dom.parseStyle(value), node.name));\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tnode.attr(internalName, t.convertURL(value, name, node.name));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Keep scripts from executing\n\t\t\tt.parser.addNodeFilter('script', function(nodes, name) {\n\t\t\t\tvar i = nodes.length, node;\n\n\t\t\t\twhile (i--) {\n\t\t\t\t\tnode = nodes[i];\n\t\t\t\t\tnode.attr('type', 'mce-' + (node.attr('type') || 'text/javascript'));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tt.parser.addNodeFilter('#cdata', function(nodes, name) {\n\t\t\t\tvar i = nodes.length, node;\n\n\t\t\t\twhile (i--) {\n\t\t\t\t\tnode = nodes[i];\n\t\t\t\t\tnode.type = 8;\n\t\t\t\t\tnode.name = '#comment';\n\t\t\t\t\tnode.value = '[CDATA[' + node.value + ']]';\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tt.parser.addNodeFilter('p,h1,h2,h3,h4,h5,h6,div', function(nodes, name) {\n\t\t\t\tvar i = nodes.length, node, nonEmptyElements = t.schema.getNonEmptyElements();\n\n\t\t\t\twhile (i--) {\n\t\t\t\t\tnode = nodes[i];\n\n\t\t\t\t\tif (node.isEmpty(nonEmptyElements))\n\t\t\t\t\t\tnode.empty().append(new tinymce.html.Node('br', 1)).shortEnded = true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t/**\n\t\t\t * DOM serializer for the editor. Will be used when contents is extracted from the editor.\n\t\t\t *\n\t\t\t * @property serializer\n\t\t\t * @type tinymce.dom.Serializer\n\t\t\t * @example\n\t\t\t * // Serializes the first paragraph in the editor into a string\n\t\t\t * tinyMCE.activeEditor.serializer.serialize(tinyMCE.activeEditor.dom.select('p')[0]);\n\t\t\t */\n\t\t\tt.serializer = new tinymce.dom.Serializer(s, t.dom, t.schema);\n\n\t\t\t/**\n\t\t\t * Selection instance for the editor.\n\t\t\t *\n\t\t\t * @property selection\n\t\t\t * @type tinymce.dom.Selection\n\t\t\t * @example\n\t\t\t * // Sets some contents to the current selection in the editor\n\t\t\t * tinyMCE.activeEditor.selection.setContent('Some contents');\n\t\t\t *\n\t\t\t * // Gets the current selection\n\t\t\t * alert(tinyMCE.activeEditor.selection.getContent());\n\t\t\t *\n\t\t\t * // Selects the first paragraph found\n\t\t\t * tinyMCE.activeEditor.selection.select(tinyMCE.activeEditor.dom.select('p')[0]);\n\t\t\t */\n\t\t\tt.selection = new tinymce.dom.Selection(t.dom, t.getWin(), t.serializer);\n\n\t\t\t/**\n\t\t\t * Formatter instance.\n\t\t\t *\n\t\t\t * @property formatter\n\t\t\t * @type tinymce.Formatter\n\t\t\t */\n\t\t\tt.formatter = new tinymce.Formatter(this);\n\n\t\t\t// Register default formats\n\t\t\tt.formatter.register({\n\t\t\t\talignleft : [\n\t\t\t\t\t{selector : 'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li', styles : {textAlign : 'left'}},\n\t\t\t\t\t{selector : 'img,table', collapsed : false, styles : {'float' : 'left'}}\n\t\t\t\t],\n\n\t\t\t\taligncenter : [\n\t\t\t\t\t{selector : 'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li', styles : {textAlign : 'center'}},\n\t\t\t\t\t{selector : 'img', collapsed : false, styles : {display : 'block', marginLeft : 'auto', marginRight : 'auto'}},\n\t\t\t\t\t{selector : 'table', collapsed : false, styles : {marginLeft : 'auto', marginRight : 'auto'}}\n\t\t\t\t],\n\n\t\t\t\talignright : [\n\t\t\t\t\t{selector : 'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li', styles : {textAlign : 'right'}},\n\t\t\t\t\t{selector : 'img,table', collapsed : false, styles : {'float' : 'right'}}\n\t\t\t\t],\n\n\t\t\t\talignfull : [\n\t\t\t\t\t{selector : 'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li', styles : {textAlign : 'justify'}}\n\t\t\t\t],\n\n\t\t\t\tbold : [\n\t\t\t\t\t{inline : 'strong', remove : 'all'},\n\t\t\t\t\t{inline : 'span', styles : {fontWeight : 'bold'}},\n\t\t\t\t\t{inline : 'b', remove : 'all'}\n\t\t\t\t],\n\n\t\t\t\titalic : [\n\t\t\t\t\t{inline : 'em', remove : 'all'},\n\t\t\t\t\t{inline : 'span', styles : {fontStyle : 'italic'}},\n\t\t\t\t\t{inline : 'i', remove : 'all'}\n\t\t\t\t],\n\n\t\t\t\tunderline : [\n\t\t\t\t\t{inline : 'span', styles : {textDecoration : 'underline'}, exact : true},\n\t\t\t\t\t{inline : 'u', remove : 'all'}\n\t\t\t\t],\n\n\t\t\t\tstrikethrough : [\n\t\t\t\t\t{inline : 'span', styles : {textDecoration : 'line-through'}, exact : true},\n\t\t\t\t\t{inline : 'strike', remove : 'all'}\n\t\t\t\t],\n\n\t\t\t\tforecolor : {inline : 'span', styles : {color : '%value'}, wrap_links : false},\n\t\t\t\thilitecolor : {inline : 'span', styles : {backgroundColor : '%value'}, wrap_links : false},\n\t\t\t\tfontname : {inline : 'span', styles : {fontFamily : '%value'}},\n\t\t\t\tfontsize : {inline : 'span', styles : {fontSize : '%value'}},\n\t\t\t\tfontsize_class : {inline : 'span', attributes : {'class' : '%value'}},\n\t\t\t\tblockquote : {block : 'blockquote', wrapper : 1, remove : 'all'},\n\t\t\t\tsubscript : {inline : 'sub'},\n\t\t\t\tsuperscript : {inline : 'sup'},\n\n\t\t\t\tlink : {inline : 'a', selector : 'a', remove : 'all', split : true, deep : true,\n\t\t\t\t\tonmatch : function(node) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},\n\n\t\t\t\t\tonformat : function(elm, fmt, vars) {\n\t\t\t\t\t\teach(vars, function(value, key) {\n\t\t\t\t\t\t\tt.dom.setAttrib(elm, key, value);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tremoveformat : [\n\t\t\t\t\t{selector : 'b,strong,em,i,font,u,strike', remove : 'all', split : true, expand : false, block_expand : true, deep : true},\n\t\t\t\t\t{selector : 'span', attributes : ['style', 'class'], remove : 'empty', split : true, expand : false, deep : true},\n\t\t\t\t\t{selector : '*', attributes : ['style', 'class'], split : false, expand : false, deep : true}\n\t\t\t\t]\n\t\t\t});\n\n\t\t\t// Register default block formats\n\t\t\teach('p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp'.split(/\\s/), function(name) {\n\t\t\t\tt.formatter.register(name, {block : name, remove : 'all'});\n\t\t\t});\n\n\t\t\t// Register user defined formats\n\t\t\tt.formatter.register(t.settings.formats);\n\n\t\t\t/**\n\t\t\t * Undo manager instance, responsible for handling undo levels.\n\t\t\t *\n\t\t\t * @property undoManager\n\t\t\t * @type tinymce.UndoManager\n\t\t\t * @example\n\t\t\t * // Undoes the last modification to the editor\n\t\t\t * tinyMCE.activeEditor.undoManager.undo();\n\t\t\t */\n\t\t\tt.undoManager = new tinymce.UndoManager(t);\n\n\t\t\t// Pass through\n\t\t\tt.undoManager.onAdd.add(function(um, l) {\n\t\t\t\tif (um.hasUndo())\n\t\t\t\t\treturn t.onChange.dispatch(t, l, um);\n\t\t\t});\n\n\t\t\tt.undoManager.onUndo.add(function(um, l) {\n\t\t\t\treturn t.onUndo.dispatch(t, l, um);\n\t\t\t});\n\n\t\t\tt.undoManager.onRedo.add(function(um, l) {\n\t\t\t\treturn t.onRedo.dispatch(t, l, um);\n\t\t\t});\n\n\t\t\tt.forceBlocks = new tinymce.ForceBlocks(t, {\n\t\t\t\tforced_root_block : s.forced_root_block\n\t\t\t});\n\n\t\t\tt.editorCommands = new tinymce.EditorCommands(t);\n\n\t\t\t// Pass through\n\t\t\tt.serializer.onPreProcess.add(function(se, o) {\n\t\t\t\treturn t.onPreProcess.dispatch(t, o, se);\n\t\t\t});\n\n\t\t\tt.serializer.onPostProcess.add(function(se, o) {\n\t\t\t\treturn t.onPostProcess.dispatch(t, o, se);\n\t\t\t});\n\n\t\t\tt.onPreInit.dispatch(t);\n\n\t\t\tif (!s.gecko_spellcheck)\n\t\t\t\tt.getBody().spellcheck = 0;\n\n\t\t\tif (!s.readonly)\n\t\t\t\tt._addEvents();\n\n\t\t\tt.controlManager.onPostRender.dispatch(t, t.controlManager);\n\t\t\tt.onPostRender.dispatch(t);\n\n\t\t\tt.quirks = new tinymce.util.Quirks(this);\n\n\t\t\tif (s.directionality)\n\t\t\t\tt.getBody().dir = s.directionality;\n\n\t\t\tif (s.nowrap)\n\t\t\t\tt.getBody().style.whiteSpace = \"nowrap\";\n\n\t\t\tif (s.handle_node_change_callback) {\n\t\t\t\tt.onNodeChange.add(function(ed, cm, n) {\n\t\t\t\t\tt.execCallback('handle_node_change_callback', t.id, n, -1, -1, true, t.selection.isCollapsed());\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (s.save_callback) {\n\t\t\t\tt.onSaveContent.add(function(ed, o) {\n\t\t\t\t\tvar h = t.execCallback('save_callback', t.id, o.content, t.getBody());\n\n\t\t\t\t\tif (h)\n\t\t\t\t\t\to.content = h;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (s.onchange_callback) {\n\t\t\t\tt.onChange.add(function(ed, l) {\n\t\t\t\t\tt.execCallback('onchange_callback', t, l);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (s.protect) {\n\t\t\t\tt.onBeforeSetContent.add(function(ed, o) {\n\t\t\t\t\tif (s.protect) {\n\t\t\t\t\t\teach(s.protect, function(pattern) {\n\t\t\t\t\t\t\to.content = o.content.replace(pattern, function(str) {\n\t\t\t\t\t\t\t\treturn '<!--mce:protected ' + escape(str) + '-->';\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (s.convert_newlines_to_brs) {\n\t\t\t\tt.onBeforeSetContent.add(function(ed, o) {\n\t\t\t\t\tif (o.initial)\n\t\t\t\t\t\to.content = o.content.replace(/\\r?\\n/g, '<br />');\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (s.preformatted) {\n\t\t\t\tt.onPostProcess.add(function(ed, o) {\n\t\t\t\t\to.content = o.content.replace(/^\\s*<pre.*?>/, '');\n\t\t\t\t\to.content = o.content.replace(/<\\/pre>\\s*$/, '');\n\n\t\t\t\t\tif (o.set)\n\t\t\t\t\t\to.content = '<pre class=\"mceItemHidden\">' + o.content + '</pre>';\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (s.verify_css_classes) {\n\t\t\t\tt.serializer.attribValueFilter = function(n, v) {\n\t\t\t\t\tvar s, cl;\n\n\t\t\t\t\tif (n == 'class') {\n\t\t\t\t\t\t// Build regexp for classes\n\t\t\t\t\t\tif (!t.classesRE) {\n\t\t\t\t\t\t\tcl = t.dom.getClasses();\n\n\t\t\t\t\t\t\tif (cl.length > 0) {\n\t\t\t\t\t\t\t\ts = '';\n\n\t\t\t\t\t\t\t\teach (cl, function(o) {\n\t\t\t\t\t\t\t\t\ts += (s ? '|' : '') + o['class'];\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tt.classesRE = new RegExp('(' + s + ')', 'gi');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn !t.classesRE || /(\\bmceItem\\w+\\b|\\bmceTemp\\w+\\b)/g.test(v) || t.classesRE.test(v) ? v : '';\n\t\t\t\t\t}\n\n\t\t\t\t\treturn v;\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (s.cleanup_callback) {\n\t\t\t\tt.onBeforeSetContent.add(function(ed, o) {\n\t\t\t\t\to.content = t.execCallback('cleanup_callback', 'insert_to_editor', o.content, o);\n\t\t\t\t});\n\n\t\t\t\tt.onPreProcess.add(function(ed, o) {\n\t\t\t\t\tif (o.set)\n\t\t\t\t\t\tt.execCallback('cleanup_callback', 'insert_to_editor_dom', o.node, o);\n\n\t\t\t\t\tif (o.get)\n\t\t\t\t\t\tt.execCallback('cleanup_callback', 'get_from_editor_dom', o.node, o);\n\t\t\t\t});\n\n\t\t\t\tt.onPostProcess.add(function(ed, o) {\n\t\t\t\t\tif (o.set)\n\t\t\t\t\t\to.content = t.execCallback('cleanup_callback', 'insert_to_editor', o.content, o);\n\n\t\t\t\t\tif (o.get)\n\t\t\t\t\t\to.content = t.execCallback('cleanup_callback', 'get_from_editor', o.content, o);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (s.save_callback) {\n\t\t\t\tt.onGetContent.add(function(ed, o) {\n\t\t\t\t\tif (o.save)\n\t\t\t\t\t\to.content = t.execCallback('save_callback', t.id, o.content, t.getBody());\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (s.handle_event_callback) {\n\t\t\t\tt.onEvent.add(function(ed, e, o) {\n\t\t\t\t\tif (t.execCallback('handle_event_callback', e, ed, o) === false)\n\t\t\t\t\t\tEvent.cancel(e);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Add visual aids when new contents is added\n\t\t\tt.onSetContent.add(function() {\n\t\t\t\tt.addVisual(t.getBody());\n\t\t\t});\n\n\t\t\t// Remove empty contents\n\t\t\tif (s.padd_empty_editor) {\n\t\t\t\tt.onPostProcess.add(function(ed, o) {\n\t\t\t\t\to.content = o.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\\s|\\u00a0|)<\\/p>[\\r\\n]*|<br \\/>[\\r\\n]*)$/, '');\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (isGecko) {\n\t\t\t\t// Fix gecko link bug, when a link is placed at the end of block elements there is\n\t\t\t\t// no way to move the caret behind the link. This fix adds a bogus br element after the link\n\t\t\t\tfunction fixLinks(ed, o) {\n\t\t\t\t\teach(ed.dom.select('a'), function(n) {\n\t\t\t\t\t\tvar pn = n.parentNode;\n\n\t\t\t\t\t\tif (ed.dom.isBlock(pn) && pn.lastChild === n)\n\t\t\t\t\t\t\ted.dom.add(pn, 'br', {'data-mce-bogus' : 1});\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tt.onExecCommand.add(function(ed, cmd) {\n\t\t\t\t\tif (cmd === 'CreateLink')\n\t\t\t\t\t\tfixLinks(ed);\n\t\t\t\t});\n\n\t\t\t\tt.onSetContent.add(t.selection.onSetContent.add(fixLinks));\n\t\t\t}\n\n\t\t\tt.load({initial : true, format : 'html'});\n\t\t\tt.startContent = t.getContent({format : 'raw'});\n\t\t\tt.undoManager.add();\n\t\t\tt.initialized = true;\n\n\t\t\tt.onInit.dispatch(t);\n\t\t\tt.execCallback('setupcontent_callback', t.id, t.getBody(), t.getDoc());\n\t\t\tt.execCallback('init_instance_callback', t);\n\t\t\tt.focus(true);\n\t\t\tt.nodeChanged({initial : 1});\n\n\t\t\t// Load specified content CSS last\n\t\t\teach(t.contentCSS, function(u) {\n\t\t\t\tt.dom.loadCSS(u);\n\t\t\t});\n\n\t\t\t// Handle auto focus\n\t\t\tif (s.auto_focus) {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tvar ed = tinymce.get(s.auto_focus);\n\n\t\t\t\t\ted.selection.select(ed.getBody(), 1);\n\t\t\t\t\ted.selection.collapse(1);\n\t\t\t\t\ted.getBody().focus();\n\t\t\t\t\ted.getWin().focus();\n\t\t\t\t}, 100);\n\t\t\t}\n\n\t\t\te = null;\n\t\t},\n\n\t\t// #ifdef contentEditable\n\n\t\t/**\n\t\t * Sets up the contentEditable mode.\n\t\t *\n\t\t * @method setupContentEditable\n\t\t */\n\t\tsetupContentEditable : function() {\n\t\t\tvar t = this, s = t.settings, e = t.getElement();\n\n\t\t\tt.contentDocument = s.content_document || document;\n\t\t\tt.contentWindow = s.content_window || window;\n\t\t\tt.bodyElement = e;\n\n\t\t\t// Prevent leak in IE\n\t\t\ts.content_document = s.content_window = null;\n\n\t\t\tDOM.hide(e);\n\t\t\te.contentEditable = t.getParam('content_editable_state', true);\n\t\t\tDOM.show(e);\n\n\t\t\tif (!s.gecko_spellcheck)\n\t\t\t\tt.getDoc().body.spellcheck = 0;\n\n\t\t\t// Setup objects\n\t\t\tt.dom = new tinymce.dom.DOMUtils(t.getDoc(), {\n\t\t\t\tkeep_values : true,\n\t\t\t\turl_converter : t.convertURL,\n\t\t\t\turl_converter_scope : t,\n\t\t\t\thex_colors : s.force_hex_style_colors,\n\t\t\t\tclass_filter : s.class_filter,\n\t\t\t\troot_element : t.id,\n\t\t\t\tfix_ie_paragraphs : 1,\n\t\t\t\tupdate_styles : 1\n\t\t\t});\n\n\t\t\tt.serializer = new tinymce.dom.Serializer(s, t.dom, schema);\n\n\t\t\tt.selection = new tinymce.dom.Selection(t.dom, t.getWin(), t.serializer);\n\t\t\tt.forceBlocks = new tinymce.ForceBlocks(t, {\n\t\t\t\tforced_root_block : s.forced_root_block\n\t\t\t});\n\n\t\t\tt.editorCommands = new tinymce.EditorCommands(t);\n\n\t\t\t// Pass through\n\t\t\tt.serializer.onPreProcess.add(function(se, o) {\n\t\t\t\treturn t.onPreProcess.dispatch(t, o, se);\n\t\t\t});\n\n\t\t\tt.serializer.onPostProcess.add(function(se, o) {\n\t\t\t\treturn t.onPostProcess.dispatch(t, o, se);\n\t\t\t});\n\n\t\t\tt.onPreInit.dispatch(t);\n\t\t\tt._addEvents();\n\n\t\t\tt.controlManager.onPostRender.dispatch(t, t.controlManager);\n\t\t\tt.onPostRender.dispatch(t);\n\n\t\t\tt.onSetContent.add(function() {\n\t\t\t\tt.addVisual(t.getBody());\n\t\t\t});\n\n\t\t\t//t.load({initial : true, format : (s.cleanup_on_startup ? 'html' : 'raw')});\n\t\t\tt.startContent = t.getContent({format : 'raw'});\n\t\t\tt.undoManager.add({initial : true});\n\t\t\tt.initialized = true;\n\n\t\t\tt.onInit.dispatch(t);\n\t\t\tt.focus(true);\n\t\t\tt.nodeChanged({initial : 1});\n\n\t\t\t// Load specified content CSS last\n\t\t\tif (s.content_css) {\n\t\t\t\teach(explode(s.content_css), function(u) {\n\t\t\t\t\tt.dom.loadCSS(t.documentBaseURI.toAbsolute(u));\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (isIE) {\n\t\t\t\t// Store away selection\n\t\t\t\tt.dom.bind(t.getElement(), 'beforedeactivate', function() {\n\t\t\t\t\tt.lastSelectionBookmark = t.selection.getBookmark(1);\n\t\t\t\t});\n\n\t\t\t\tt.onBeforeExecCommand.add(function(ed, cmd, ui, val, o) {\n\t\t\t\t\tif (!DOM.getParent(ed.selection.getStart(), function(n) {return n == ed.getBody();}))\n\t\t\t\t\t\to.terminate = 1;\n\n\t\t\t\t\tif (!DOM.getParent(ed.selection.getEnd(), function(n) {return n == ed.getBody();}))\n\t\t\t\t\t\to.terminate = 1;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\te = null; // Cleanup\n\t\t},\n\n\t\t// #endif\n\n\t\t/**\n\t\t * Focuses/activates the editor. This will set this editor as the activeEditor in the tinymce collection\n\t\t * it will also place DOM focus inside the editor.\n\t\t *\n\t\t * @method focus\n\t\t * @param {Boolean} sf Skip DOM focus. Just set is as the active editor.\n\t\t */\n\t\tfocus : function(sf) {\n\t\t\tvar oed, t = this, selection = t.selection, ce = t.settings.content_editable, ieRng, controlElm, doc = t.getDoc();\n\n\t\t\tif (!sf) {\n\t\t\t\t// Get selected control element\n\t\t\t\tieRng = selection.getRng();\n\t\t\t\tif (ieRng.item) {\n\t\t\t\t\tcontrolElm = ieRng.item(0);\n\t\t\t\t}\n\n\t\t\t\tt._refreshContentEditable();\n\t\t\t\tselection.normalize();\n\n\t\t\t\t// Is not content editable\n\t\t\t\tif (!ce)\n\t\t\t\t\tt.getWin().focus();\n\n\t\t\t\t// Focus the body as well since it's contentEditable\n\t\t\t\tif (tinymce.isGecko) {\n\t\t\t\t\tt.getBody().focus();\n\t\t\t\t}\n\n\t\t\t\t// Restore selected control element\n\t\t\t\t// This is needed when for example an image is selected within a\n\t\t\t\t// layer a call to focus will then remove the control selection\n\t\t\t\tif (controlElm && controlElm.ownerDocument == doc) {\n\t\t\t\t\tieRng = doc.body.createControlRange();\n\t\t\t\t\tieRng.addElement(controlElm);\n\t\t\t\t\tieRng.select();\n\t\t\t\t}\n\n\t\t\t\t// #ifdef contentEditable\n\n\t\t\t\t// Content editable mode ends here\n\t\t\t\tif (ce) {\n\t\t\t\t\tif (tinymce.isWebKit)\n\t\t\t\t\t\tt.getWin().focus();\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (tinymce.isIE)\n\t\t\t\t\t\t\tt.getElement().setActive();\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tt.getElement().focus();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// #endif\n\t\t\t}\n\n\t\t\tif (tinymce.activeEditor != t) {\n\t\t\t\tif ((oed = tinymce.activeEditor) != null)\n\t\t\t\t\toed.onDeactivate.dispatch(oed, t);\n\n\t\t\t\tt.onActivate.dispatch(t, oed);\n\t\t\t}\n\n\t\t\ttinymce._setActive(t);\n\t\t},\n\n\t\t/**\n\t\t * Executes a legacy callback. This method is useful to call old 2.x option callbacks.\n\t\t * There new event model is a better way to add callback so this method might be removed in the future.\n\t\t *\n\t\t * @method execCallback\n\t\t * @param {String} n Name of the callback to execute.\n\t\t * @return {Object} Return value passed from callback function.\n\t\t */\n\t\texecCallback : function(n) {\n\t\t\tvar t = this, f = t.settings[n], s;\n\n\t\t\tif (!f)\n\t\t\t\treturn;\n\n\t\t\t// Look through lookup\n\t\t\tif (t.callbackLookup && (s = t.callbackLookup[n])) {\n\t\t\t\tf = s.func;\n\t\t\t\ts = s.scope;\n\t\t\t}\n\n\t\t\tif (is(f, 'string')) {\n\t\t\t\ts = f.replace(/\\.\\w+$/, '');\n\t\t\t\ts = s ? tinymce.resolve(s) : 0;\n\t\t\t\tf = tinymce.resolve(f);\n\t\t\t\tt.callbackLookup = t.callbackLookup || {};\n\t\t\t\tt.callbackLookup[n] = {func : f, scope : s};\n\t\t\t}\n\n\t\t\treturn f.apply(s || t, Array.prototype.slice.call(arguments, 1));\n\t\t},\n\n\t\t/**\n\t\t * Translates the specified string by replacing variables with language pack items it will also check if there is\n\t\t * a key mathcin the input.\n\t\t *\n\t\t * @method translate\n\t\t * @param {String} s String to translate by the language pack data.\n\t\t * @return {String} Translated string.\n\t\t */\n\t\ttranslate : function(s) {\n\t\t\tvar c = this.settings.language || 'en', i18n = tinymce.i18n;\n\n\t\t\tif (!s)\n\t\t\t\treturn '';\n\n\t\t\treturn i18n[c + '.' + s] || s.replace(/{\\#([^}]+)\\}/g, function(a, b) {\n\t\t\t\treturn i18n[c + '.' + b] || '{#' + b + '}';\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Returns a language pack item by name/key.\n\t\t *\n\t\t * @method getLang\n\t\t * @param {String} n Name/key to get from the language pack.\n\t\t * @param {String} dv Optional default value to retrieve.\n\t\t */\n\t\tgetLang : function(n, dv) {\n\t\t\treturn tinymce.i18n[(this.settings.language || 'en') + '.' + n] || (is(dv) ? dv : '{#' + n + '}');\n\t\t},\n\n\t\t/**\n\t\t * Returns a configuration parameter by name.\n\t\t *\n\t\t * @method getParam\n\t\t * @param {String} n Configruation parameter to retrieve.\n\t\t * @param {String} dv Optional default value to return.\n\t\t * @param {String} ty Optional type parameter.\n\t\t * @return {String} Configuration parameter value or default value.\n\t\t * @example\n\t\t * // Returns a specific config value from the currently active editor\n\t\t * var someval = tinyMCE.activeEditor.getParam('myvalue');\n\t\t *\n\t\t * // Returns a specific config value from a specific editor instance by id\n\t\t * var someval2 = tinyMCE.get('my_editor').getParam('myvalue');\n\t\t */\n\t\tgetParam : function(n, dv, ty) {\n\t\t\tvar tr = tinymce.trim, v = is(this.settings[n]) ? this.settings[n] : dv, o;\n\n\t\t\tif (ty === 'hash') {\n\t\t\t\to = {};\n\n\t\t\t\tif (is(v, 'string')) {\n\t\t\t\t\teach(v.indexOf('=') > 0 ? v.split(/[;,](?![^=;,]*(?:[;,]|$))/) : v.split(','), function(v) {\n\t\t\t\t\t\tv = v.split('=');\n\n\t\t\t\t\t\tif (v.length > 1)\n\t\t\t\t\t\t\to[tr(v[0])] = tr(v[1]);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\to[tr(v[0])] = tr(v);\n\t\t\t\t\t});\n\t\t\t\t} else\n\t\t\t\t\to = v;\n\n\t\t\t\treturn o;\n\t\t\t}\n\n\t\t\treturn v;\n\t\t},\n\n\t\t/**\n\t\t * Distpaches out a onNodeChange event to all observers. This method should be called when you\n\t\t * need to update the UI states or element path etc.\n\t\t *\n\t\t * @method nodeChanged\n\t\t * @param {Object} o Optional object to pass along for the node changed event.\n\t\t */\n\t\tnodeChanged : function(o) {\n\t\t\tvar t = this, s = t.selection, n = s.getStart() || t.getBody();\n\n\t\t\t// Fix for bug #1896577 it seems that this can not be fired while the editor is loading\n\t\t\tif (t.initialized) {\n\t\t\t\to = o || {};\n\t\t\t\tn = isIE && n.ownerDocument != t.getDoc() ? t.getBody() : n; // Fix for IE initial state\n\n\t\t\t\t// Get parents and add them to object\n\t\t\t\to.parents = [];\n\t\t\t\tt.dom.getParent(n, function(node) {\n\t\t\t\t\tif (node.nodeName == 'BODY')\n\t\t\t\t\t\treturn true;\n\n\t\t\t\t\to.parents.push(node);\n\t\t\t\t});\n\n\t\t\t\tt.onNodeChange.dispatch(\n\t\t\t\t\tt,\n\t\t\t\t\to ? o.controlManager || t.controlManager : t.controlManager,\n\t\t\t\t\tn,\n\t\t\t\t\ts.isCollapsed(),\n\t\t\t\t\to\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Adds a button that later gets created by the ControlManager. This is a shorter and easier method\n\t\t * of adding buttons without the need to deal with the ControlManager directly. But it's also less\n\t\t * powerfull if you need more control use the ControlManagers factory methods instead.\n\t\t *\n\t\t * @method addButton\n\t\t * @param {String} n Button name to add.\n\t\t * @param {Object} s Settings object with title, cmd etc.\n\t\t * @example\n\t\t * // Adds a custom button to the editor and when a user clicks the button it will open\n\t\t * // an alert box with the selected contents as plain text.\n\t\t * tinyMCE.init({\n\t\t *    ...\n\t\t *\n\t\t *    theme_advanced_buttons1 : 'example,..'\n\t\t *\n\t\t *    setup : function(ed) {\n\t\t *       // Register example button\n\t\t *       ed.addButton('example', {\n\t\t *          title : 'example.desc',\n\t\t *          image : '../jscripts/tiny_mce/plugins/example/img/example.gif',\n\t\t *          onclick : function() {\n\t\t *             ed.windowManager.alert('Hello world!! Selection: ' + ed.selection.getContent({format : 'text'}));\n\t\t *          }\n\t\t *       });\n\t\t *    }\n\t\t * });\n\t\t */\n\t\taddButton : function(n, s) {\n\t\t\tvar t = this;\n\n\t\t\tt.buttons = t.buttons || {};\n\t\t\tt.buttons[n] = s;\n\t\t},\n\n\t\t/**\n\t\t * Adds a custom command to the editor, you can also override existing commands with this method.\n\t\t * The command that you add can be executed with execCommand.\n\t\t *\n\t\t * @method addCommand\n\t\t * @param {String} name Command name to add/override.\n\t\t * @param {addCommandCallback} callback Function to execute when the command occurs.\n\t\t * @param {Object} scope Optional scope to execute the function in.\n\t\t * @example\n\t\t * // Adds a custom command that later can be executed using execCommand\n\t\t * tinyMCE.init({\n\t\t *    ...\n\t\t *\n\t\t *    setup : function(ed) {\n\t\t *       // Register example command\n\t\t *       ed.addCommand('mycommand', function(ui, v) {\n\t\t *          ed.windowManager.alert('Hello world!! Selection: ' + ed.selection.getContent({format : 'text'}));\n\t\t *       });\n\t\t *    }\n\t\t * });\n\t\t */\n\t\taddCommand : function(name, callback, scope) {\n\t\t\t/**\n\t\t\t * Callback function that gets called when a command is executed.\n\t\t\t *\n\t\t\t * @callback addCommandCallback\n\t\t\t * @param {Boolean} ui Display UI state true/false.\n\t\t\t * @param {Object} value Optional value for command.\n\t\t\t * @return {Boolean} True/false state if the command was handled or not.\n\t\t\t */\n\t\t\tthis.execCommands[name] = {func : callback, scope : scope || this};\n\t\t},\n\n\t\t/**\n\t\t * Adds a custom query state command to the editor, you can also override existing commands with this method.\n\t\t * The command that you add can be executed with queryCommandState function.\n\t\t *\n\t\t * @method addQueryStateHandler\n\t\t * @param {String} name Command name to add/override.\n\t\t * @param {addQueryStateHandlerCallback} callback Function to execute when the command state retrival occurs.\n\t\t * @param {Object} scope Optional scope to execute the function in.\n\t\t */\n\t\taddQueryStateHandler : function(name, callback, scope) {\n\t\t\t/**\n\t\t\t * Callback function that gets called when a queryCommandState is executed.\n\t\t\t *\n\t\t\t * @callback addQueryStateHandlerCallback\n\t\t\t * @return {Boolean} True/false state if the command is enabled or not like is it bold.\n\t\t\t */\n\t\t\tthis.queryStateCommands[name] = {func : callback, scope : scope || this};\n\t\t},\n\n\t\t/**\n\t\t * Adds a custom query value command to the editor, you can also override existing commands with this method.\n\t\t * The command that you add can be executed with queryCommandValue function.\n\t\t *\n\t\t * @method addQueryValueHandler\n\t\t * @param {String} name Command name to add/override.\n\t\t * @param {addQueryValueHandlerCallback} callback Function to execute when the command value retrival occurs.\n\t\t * @param {Object} scope Optional scope to execute the function in.\n\t\t */\n\t\taddQueryValueHandler : function(name, callback, scope) {\n\t\t\t/**\n\t\t\t * Callback function that gets called when a queryCommandValue is executed.\n\t\t\t *\n\t\t\t * @callback addQueryValueHandlerCallback\n\t\t\t * @return {Object} Value of the command or undefined.\n\t\t\t */\n\t\t\tthis.queryValueCommands[name] = {func : callback, scope : scope || this};\n\t\t},\n\n\t\t/**\n\t\t * Adds a keyboard shortcut for some command or function.\n\t\t *\n\t\t * @method addShortcut\n\t\t * @param {String} pa Shortcut pattern. Like for example: ctrl+alt+o.\n\t\t * @param {String} desc Text description for the command.\n\t\t * @param {String/Function} cmd_func Command name string or function to execute when the key is pressed.\n\t\t * @param {Object} sc Optional scope to execute the function in.\n\t\t * @return {Boolean} true/false state if the shortcut was added or not.\n\t\t */\n\t\taddShortcut : function(pa, desc, cmd_func, sc) {\n\t\t\tvar t = this, c;\n\n\t\t\tif (!t.settings.custom_shortcuts)\n\t\t\t\treturn false;\n\n\t\t\tt.shortcuts = t.shortcuts || {};\n\n\t\t\tif (is(cmd_func, 'string')) {\n\t\t\t\tc = cmd_func;\n\n\t\t\t\tcmd_func = function() {\n\t\t\t\t\tt.execCommand(c, false, null);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (is(cmd_func, 'object')) {\n\t\t\t\tc = cmd_func;\n\n\t\t\t\tcmd_func = function() {\n\t\t\t\t\tt.execCommand(c[0], c[1], c[2]);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\teach(explode(pa), function(pa) {\n\t\t\t\tvar o = {\n\t\t\t\t\tfunc : cmd_func,\n\t\t\t\t\tscope : sc || this,\n\t\t\t\t\tdesc : desc,\n\t\t\t\t\talt : false,\n\t\t\t\t\tctrl : false,\n\t\t\t\t\tshift : false\n\t\t\t\t};\n\n\t\t\t\teach(explode(pa, '+'), function(v) {\n\t\t\t\t\tswitch (v) {\n\t\t\t\t\t\tcase 'alt':\n\t\t\t\t\t\tcase 'ctrl':\n\t\t\t\t\t\tcase 'shift':\n\t\t\t\t\t\t\to[v] = true;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\to.charCode = v.charCodeAt(0);\n\t\t\t\t\t\t\to.keyCode = v.toUpperCase().charCodeAt(0);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tt.shortcuts[(o.ctrl ? 'ctrl' : '') + ',' + (o.alt ? 'alt' : '') + ',' + (o.shift ? 'shift' : '') + ',' + o.keyCode] = o;\n\t\t\t});\n\n\t\t\treturn true;\n\t\t},\n\n\t\t/**\n\t\t * Executes a command on the current instance. These commands can be TinyMCE internal commands prefixed with \"mce\" or\n\t\t * they can be build in browser commands such as \"Bold\". A compleate list of browser commands is available on MSDN or Mozilla.org.\n\t\t * This function will dispatch the execCommand function on each plugin, theme or the execcommand_callback option if none of these\n\t\t * return true it will handle the command as a internal browser command.\n\t\t *\n\t\t * @method execCommand\n\t\t * @param {String} cmd Command name to execute, for example mceLink or Bold.\n\t\t * @param {Boolean} ui True/false state if a UI (dialog) should be presented or not.\n\t\t * @param {mixed} val Optional command value, this can be anything.\n\t\t * @param {Object} a Optional arguments object.\n\t\t * @return {Boolean} True/false if the command was executed or not.\n\t\t */\n\t\texecCommand : function(cmd, ui, val, a) {\n\t\t\tvar t = this, s = 0, o, st;\n\n\t\t\tif (!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(cmd) && (!a || !a.skip_focus))\n\t\t\t\tt.focus();\n\n\t\t\to = {};\n\t\t\tt.onBeforeExecCommand.dispatch(t, cmd, ui, val, o);\n\t\t\tif (o.terminate)\n\t\t\t\treturn false;\n\n\t\t\t// Command callback\n\t\t\tif (t.execCallback('execcommand_callback', t.id, t.selection.getNode(), cmd, ui, val)) {\n\t\t\t\tt.onExecCommand.dispatch(t, cmd, ui, val, a);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// Registred commands\n\t\t\tif (o = t.execCommands[cmd]) {\n\t\t\t\tst = o.func.call(o.scope, ui, val);\n\n\t\t\t\t// Fall through on true\n\t\t\t\tif (st !== true) {\n\t\t\t\t\tt.onExecCommand.dispatch(t, cmd, ui, val, a);\n\t\t\t\t\treturn st;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Plugin commands\n\t\t\teach(t.plugins, function(p) {\n\t\t\t\tif (p.execCommand && p.execCommand(cmd, ui, val)) {\n\t\t\t\t\tt.onExecCommand.dispatch(t, cmd, ui, val, a);\n\t\t\t\t\ts = 1;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (s)\n\t\t\t\treturn true;\n\n\t\t\t// Theme commands\n\t\t\tif (t.theme && t.theme.execCommand && t.theme.execCommand(cmd, ui, val)) {\n\t\t\t\tt.onExecCommand.dispatch(t, cmd, ui, val, a);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// Editor commands\n\t\t\tif (t.editorCommands.execCommand(cmd, ui, val)) {\n\t\t\t\tt.onExecCommand.dispatch(t, cmd, ui, val, a);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// Browser commands\n\t\t\tt.getDoc().execCommand(cmd, ui, val);\n\t\t\tt.onExecCommand.dispatch(t, cmd, ui, val, a);\n\t\t},\n\n\t\t/**\n\t\t * Returns a command specific state, for example if bold is enabled or not.\n\t\t *\n\t\t * @method queryCommandState\n\t\t * @param {string} cmd Command to query state from.\n\t\t * @return {Boolean} Command specific state, for example if bold is enabled or not.\n\t\t */\n\t\tqueryCommandState : function(cmd) {\n\t\t\tvar t = this, o, s;\n\n\t\t\t// Is hidden then return undefined\n\t\t\tif (t._isHidden())\n\t\t\t\treturn;\n\n\t\t\t// Registred commands\n\t\t\tif (o = t.queryStateCommands[cmd]) {\n\t\t\t\ts = o.func.call(o.scope);\n\n\t\t\t\t// Fall though on true\n\t\t\t\tif (s !== true)\n\t\t\t\t\treturn s;\n\t\t\t}\n\n\t\t\t// Registred commands\n\t\t\to = t.editorCommands.queryCommandState(cmd);\n\t\t\tif (o !== -1)\n\t\t\t\treturn o;\n\n\t\t\t// Browser commands\n\t\t\ttry {\n\t\t\t\treturn this.getDoc().queryCommandState(cmd);\n\t\t\t} catch (ex) {\n\t\t\t\t// Fails sometimes see bug: 1896577\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Returns a command specific value, for example the current font size.\n\t\t *\n\t\t * @method queryCommandValue\n\t\t * @param {string} c Command to query value from.\n\t\t * @return {Object} Command specific value, for example the current font size.\n\t\t */\n\t\tqueryCommandValue : function(c) {\n\t\t\tvar t = this, o, s;\n\n\t\t\t// Is hidden then return undefined\n\t\t\tif (t._isHidden())\n\t\t\t\treturn;\n\n\t\t\t// Registred commands\n\t\t\tif (o = t.queryValueCommands[c]) {\n\t\t\t\ts = o.func.call(o.scope);\n\n\t\t\t\t// Fall though on true\n\t\t\t\tif (s !== true)\n\t\t\t\t\treturn s;\n\t\t\t}\n\n\t\t\t// Registred commands\n\t\t\to = t.editorCommands.queryCommandValue(c);\n\t\t\tif (is(o))\n\t\t\t\treturn o;\n\n\t\t\t// Browser commands\n\t\t\ttry {\n\t\t\t\treturn this.getDoc().queryCommandValue(c);\n\t\t\t} catch (ex) {\n\t\t\t\t// Fails sometimes see bug: 1896577\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Shows the editor and hides any textarea/div that the editor is supposed to replace.\n\t\t *\n\t\t * @method show\n\t\t */\n\t\tshow : function() {\n\t\t\tvar t = this;\n\n\t\t\tDOM.show(t.getContainer());\n\t\t\tDOM.hide(t.id);\n\t\t\tt.load();\n\t\t},\n\n\t\t/**\n\t\t * Hides the editor and shows any textarea/div that the editor is supposed to replace.\n\t\t *\n\t\t * @method hide\n\t\t */\n\t\thide : function() {\n\t\t\tvar t = this, d = t.getDoc();\n\n\t\t\t// Fixed bug where IE has a blinking cursor left from the editor\n\t\t\tif (isIE && d)\n\t\t\t\td.execCommand('SelectAll');\n\n\t\t\t// We must save before we hide so Safari doesn't crash\n\t\t\tt.save();\n\t\t\tDOM.hide(t.getContainer());\n\t\t\tDOM.setStyle(t.id, 'display', t.orgDisplay);\n\t\t},\n\n\t\t/**\n\t\t * Returns true/false if the editor is hidden or not.\n\t\t *\n\t\t * @method isHidden\n\t\t * @return {Boolean} True/false if the editor is hidden or not.\n\t\t */\n\t\tisHidden : function() {\n\t\t\treturn !DOM.isHidden(this.id);\n\t\t},\n\n\t\t/**\n\t\t * Sets the progress state, this will display a throbber/progess for the editor.\n\t\t * This is ideal for asycronous operations like an AJAX save call.\n\t\t *\n\t\t * @method setProgressState\n\t\t * @param {Boolean} b Boolean state if the progress should be shown or hidden.\n\t\t * @param {Number} ti Optional time to wait before the progress gets shown.\n\t\t * @param {Object} o Optional object to pass to the progress observers.\n\t\t * @return {Boolean} Same as the input state.\n\t\t * @example\n\t\t * // Show progress for the active editor\n\t\t * tinyMCE.activeEditor.setProgressState(true);\n\t\t *\n\t\t * // Hide progress for the active editor\n\t\t * tinyMCE.activeEditor.setProgressState(false);\n\t\t *\n\t\t * // Show progress after 3 seconds\n\t\t * tinyMCE.activeEditor.setProgressState(true, 3000);\n\t\t */\n\t\tsetProgressState : function(b, ti, o) {\n\t\t\tthis.onSetProgressState.dispatch(this, b, ti, o);\n\n\t\t\treturn b;\n\t\t},\n\n\t\t/**\n\t\t * Loads contents from the textarea or div element that got converted into an editor instance.\n\t\t * This method will move the contents from that textarea or div into the editor by using setContent\n\t\t * so all events etc that method has will get dispatched as well.\n\t\t *\n\t\t * @method load\n\t\t * @param {Object} o Optional content object, this gets passed around through the whole load process.\n\t\t * @return {String} HTML string that got set into the editor.\n\t\t */\n\t\tload : function(o) {\n\t\t\tvar t = this, e = t.getElement(), h;\n\n\t\t\tif (e) {\n\t\t\t\to = o || {};\n\t\t\t\to.load = true;\n\n\t\t\t\t// Double encode existing entities in the value\n\t\t\t\th = t.setContent(is(e.value) ? e.value : e.innerHTML, o);\n\t\t\t\to.element = e;\n\n\t\t\t\tif (!o.no_events)\n\t\t\t\t\tt.onLoadContent.dispatch(t, o);\n\n\t\t\t\to.element = e = null;\n\n\t\t\t\treturn h;\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Saves the contents from a editor out to the textarea or div element that got converted into an editor instance.\n\t\t * This method will move the HTML contents from the editor into that textarea or div by getContent\n\t\t * so all events etc that method has will get dispatched as well.\n\t\t *\n\t\t * @method save\n\t\t * @param {Object} o Optional content object, this gets passed around through the whole save process.\n\t\t * @return {String} HTML string that got set into the textarea/div.\n\t\t */\n\t\tsave : function(o) {\n\t\t\tvar t = this, e = t.getElement(), h, f;\n\n\t\t\tif (!e || !t.initialized)\n\t\t\t\treturn;\n\n\t\t\to = o || {};\n\t\t\to.save = true;\n\n\t\t\t// Add undo level will trigger onchange event\n\t\t\tif (!o.no_events) {\n\t\t\t\tt.undoManager.typing = false;\n\t\t\t\tt.undoManager.add();\n\t\t\t}\n\n\t\t\to.element = e;\n\t\t\th = o.content = t.getContent(o);\n\n\t\t\tif (!o.no_events)\n\t\t\t\tt.onSaveContent.dispatch(t, o);\n\n\t\t\th = o.content;\n\n\t\t\tif (!/TEXTAREA|INPUT/i.test(e.nodeName)) {\n\t\t\t\te.innerHTML = h;\n\n\t\t\t\t// Update hidden form element\n\t\t\t\tif (f = DOM.getParent(t.id, 'form')) {\n\t\t\t\t\teach(f.elements, function(e) {\n\t\t\t\t\t\tif (e.name == t.id) {\n\t\t\t\t\t\t\te.value = h;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else\n\t\t\t\te.value = h;\n\n\t\t\to.element = e = null;\n\n\t\t\treturn h;\n\t\t},\n\n\t\t/**\n\t\t * Sets the specified content to the editor instance, this will cleanup the content before it gets set using\n\t\t * the different cleanup rules options.\n\t\t *\n\t\t * @method setContent\n\t\t * @param {String} content Content to set to editor, normally HTML contents but can be other formats as well.\n\t\t * @param {Object} args Optional content object, this gets passed around through the whole set process.\n\t\t * @return {String} HTML string that got set into the editor.\n\t\t * @example\n\t\t * // Sets the HTML contents of the activeEditor editor\n\t\t * tinyMCE.activeEditor.setContent('<span>some</span> html');\n\t\t *\n\t\t * // Sets the raw contents of the activeEditor editor\n\t\t * tinyMCE.activeEditor.setContent('<span>some</span> html', {format : 'raw'});\n\t\t *\n\t\t * // Sets the content of a specific editor (my_editor in this example)\n\t\t * tinyMCE.get('my_editor').setContent(data);\n\t\t *\n\t\t * // Sets the bbcode contents of the activeEditor editor if the bbcode plugin was added\n\t\t * tinyMCE.activeEditor.setContent('[b]some[/b] html', {format : 'bbcode'});\n\t\t */\n\t\tsetContent : function(content, args) {\n\t\t\tvar self = this, rootNode, body = self.getBody(), forcedRootBlockName;\n\n\t\t\t// Setup args object\n\t\t\targs = args || {};\n\t\t\targs.format = args.format || 'html';\n\t\t\targs.set = true;\n\t\t\targs.content = content;\n\n\t\t\t// Do preprocessing\n\t\t\tif (!args.no_events)\n\t\t\t\tself.onBeforeSetContent.dispatch(self, args);\n\n\t\t\tcontent = args.content;\n\n\t\t\t// Padd empty content in Gecko and Safari. Commands will otherwise fail on the content\n\t\t\t// It will also be impossible to place the caret in the editor unless there is a BR element present\n\t\t\tif (!tinymce.isIE && (content.length === 0 || /^\\s+$/.test(content))) {\n\t\t\t\tforcedRootBlockName = self.settings.forced_root_block;\n\t\t\t\tif (forcedRootBlockName)\n\t\t\t\t\tcontent = '<' + forcedRootBlockName + '><br data-mce-bogus=\"1\"></' + forcedRootBlockName + '>';\n\t\t\t\telse\n\t\t\t\t\tcontent = '<br data-mce-bogus=\"1\">';\n\n\t\t\t\tbody.innerHTML = content;\n\t\t\t\tself.selection.select(body, true);\n\t\t\t\tself.selection.collapse(true);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Parse and serialize the html\n\t\t\tif (args.format !== 'raw') {\n\t\t\t\tcontent = new tinymce.html.Serializer({}, self.schema).serialize(\n\t\t\t\t\tself.parser.parse(content)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Set the new cleaned contents to the editor\n\t\t\targs.content = tinymce.trim(content);\n\t\t\tself.dom.setHTML(body, args.content);\n\n\t\t\t// Do post processing\n\t\t\tif (!args.no_events)\n\t\t\t\tself.onSetContent.dispatch(self, args);\n\n\t\t\tself.selection.normalize();\n\n\t\t\treturn args.content;\n\t\t},\n\n\t\t/**\n\t\t * Gets the content from the editor instance, this will cleanup the content before it gets returned using\n\t\t * the different cleanup rules options.\n\t\t *\n\t\t * @method getContent\n\t\t * @param {Object} args Optional content object, this gets passed around through the whole get process.\n\t\t * @return {String} Cleaned content string, normally HTML contents.\n\t\t * @example\n\t\t * // Get the HTML contents of the currently active editor\n\t\t * console.debug(tinyMCE.activeEditor.getContent());\n\t\t *\n\t\t * // Get the raw contents of the currently active editor\n\t\t * tinyMCE.activeEditor.getContent({format : 'raw'});\n\t\t *\n\t\t * // Get content of a specific editor:\n\t\t * tinyMCE.get('content id').getContent()\n\t\t */\n\t\tgetContent : function(args) {\n\t\t\tvar self = this, content;\n\n\t\t\t// Setup args object\n\t\t\targs = args || {};\n\t\t\targs.format = args.format || 'html';\n\t\t\targs.get = true;\n\n\t\t\t// Do preprocessing\n\t\t\tif (!args.no_events)\n\t\t\t\tself.onBeforeGetContent.dispatch(self, args);\n\n\t\t\t// Get raw contents or by default the cleaned contents\n\t\t\tif (args.format == 'raw')\n\t\t\t\tcontent = self.getBody().innerHTML;\n\t\t\telse\n\t\t\t\tcontent = self.serializer.serialize(self.getBody(), args);\n\n\t\t\targs.content = tinymce.trim(content);\n\n\t\t\t// Do post processing\n\t\t\tif (!args.no_events)\n\t\t\t\tself.onGetContent.dispatch(self, args);\n\n\t\t\treturn args.content;\n\t\t},\n\n\t\t/**\n\t\t * Returns true/false if the editor is dirty or not. It will get dirty if the user has made modifications to the contents.\n\t\t *\n\t\t * @method isDirty\n\t\t * @return {Boolean} True/false if the editor is dirty or not. It will get dirty if the user has made modifications to the contents.\n\t\t * @example\n\t\t * if (tinyMCE.activeEditor.isDirty())\n\t\t *     alert(\"You must save your contents.\");\n\t\t */\n\t\tisDirty : function() {\n\t\t\tvar self = this;\n\n\t\t\treturn tinymce.trim(self.startContent) != tinymce.trim(self.getContent({format : 'raw', no_events : 1})) && !self.isNotDirty;\n\t\t},\n\n\t\t/**\n\t\t * Returns the editors container element. The container element wrappes in\n\t\t * all the elements added to the page for the editor. Such as UI, iframe etc.\n\t\t *\n\t\t * @method getContainer\n\t\t * @return {Element} HTML DOM element for the editor container.\n\t\t */\n\t\tgetContainer : function() {\n\t\t\tvar t = this;\n\n\t\t\tif (!t.container)\n\t\t\t\tt.container = DOM.get(t.editorContainer || t.id + '_parent');\n\n\t\t\treturn t.container;\n\t\t},\n\n\t\t/**\n\t\t * Returns the editors content area container element. The this element is the one who\n\t\t * holds the iframe or the editable element.\n\t\t *\n\t\t * @method getContentAreaContainer\n\t\t * @return {Element} HTML DOM element for the editor area container.\n\t\t */\n\t\tgetContentAreaContainer : function() {\n\t\t\treturn this.contentAreaContainer;\n\t\t},\n\n\t\t/**\n\t\t * Returns the target element/textarea that got replaced with a TinyMCE editor instance.\n\t\t *\n\t\t * @method getElement\n\t\t * @return {Element} HTML DOM element for the replaced element.\n\t\t */\n\t\tgetElement : function() {\n\t\t\treturn DOM.get(this.settings.content_element || this.id);\n\t\t},\n\n\t\t/**\n\t\t * Returns the iframes window object.\n\t\t *\n\t\t * @method getWin\n\t\t * @return {Window} Iframe DOM window object.\n\t\t */\n\t\tgetWin : function() {\n\t\t\tvar t = this, e;\n\n\t\t\tif (!t.contentWindow) {\n\t\t\t\te = DOM.get(t.id + \"_ifr\");\n\n\t\t\t\tif (e)\n\t\t\t\t\tt.contentWindow = e.contentWindow;\n\t\t\t}\n\n\t\t\treturn t.contentWindow;\n\t\t},\n\n\t\t/**\n\t\t * Returns the iframes document object.\n\t\t *\n\t\t * @method getDoc\n\t\t * @return {Document} Iframe DOM document object.\n\t\t */\n\t\tgetDoc : function() {\n\t\t\tvar t = this, w;\n\n\t\t\tif (!t.contentDocument) {\n\t\t\t\tw = t.getWin();\n\n\t\t\t\tif (w)\n\t\t\t\t\tt.contentDocument = w.document;\n\t\t\t}\n\n\t\t\treturn t.contentDocument;\n\t\t},\n\n\t\t/**\n\t\t * Returns the iframes body element.\n\t\t *\n\t\t * @method getBody\n\t\t * @return {Element} Iframe body element.\n\t\t */\n\t\tgetBody : function() {\n\t\t\treturn this.bodyElement || this.getDoc().body;\n\t\t},\n\n\t\t/**\n\t\t * URL converter function this gets executed each time a user adds an img, a or\n\t\t * any other element that has a URL in it. This will be called both by the DOM and HTML\n\t\t * manipulation functions.\n\t\t *\n\t\t * @method convertURL\n\t\t * @param {string} u URL to convert.\n\t\t * @param {string} n Attribute name src, href etc.\n\t\t * @param {string/HTMLElement} Tag name or HTML DOM element depending on HTML or DOM insert.\n\t\t * @return {string} Converted URL string.\n\t\t */\n\t\tconvertURL : function(u, n, e) {\n\t\t\tvar t = this, s = t.settings;\n\n\t\t\t// Use callback instead\n\t\t\tif (s.urlconverter_callback)\n\t\t\t\treturn t.execCallback('urlconverter_callback', u, e, true, n);\n\n\t\t\t// Don't convert link href since thats the CSS files that gets loaded into the editor also skip local file URLs\n\t\t\tif (!s.convert_urls || (e && e.nodeName == 'LINK') || u.indexOf('file:') === 0)\n\t\t\t\treturn u;\n\n\t\t\t// Convert to relative\n\t\t\tif (s.relative_urls)\n\t\t\t\treturn t.documentBaseURI.toRelative(u);\n\n\t\t\t// Convert to absolute\n\t\t\tu = t.documentBaseURI.toAbsolute(u, s.remove_script_host);\n\n\t\t\treturn u;\n\t\t},\n\n\t\t/**\n\t\t * Adds visual aid for tables, anchors etc so they can be more easily edited inside the editor.\n\t\t *\n\t\t * @method addVisual\n\t\t * @param {Element} e Optional root element to loop though to find tables etc that needs the visual aid.\n\t\t */\n\t\taddVisual : function(e) {\n\t\t\tvar t = this, s = t.settings;\n\n\t\t\te = e || t.getBody();\n\n\t\t\tif (!is(t.hasVisual))\n\t\t\t\tt.hasVisual = s.visual;\n\n\t\t\teach(t.dom.select('table,a', e), function(e) {\n\t\t\t\tvar v;\n\n\t\t\t\tswitch (e.nodeName) {\n\t\t\t\t\tcase 'TABLE':\n\t\t\t\t\t\tv = t.dom.getAttrib(e, 'border');\n\n\t\t\t\t\t\tif (!v || v == '0') {\n\t\t\t\t\t\t\tif (t.hasVisual)\n\t\t\t\t\t\t\t\tt.dom.addClass(e, s.visual_table_class);\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tt.dom.removeClass(e, s.visual_table_class);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tcase 'A':\n\t\t\t\t\t\tv = t.dom.getAttrib(e, 'name');\n\n\t\t\t\t\t\tif (v) {\n\t\t\t\t\t\t\tif (t.hasVisual)\n\t\t\t\t\t\t\t\tt.dom.addClass(e, 'mceItemAnchor');\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tt.dom.removeClass(e, 'mceItemAnchor');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tt.onVisualAid.dispatch(t, e, t.hasVisual);\n\t\t},\n\n\t\t/**\n\t\t * Removes the editor from the dom and tinymce collection.\n\t\t *\n\t\t * @method remove\n\t\t */\n\t\tremove : function() {\n\t\t\tvar t = this, e = t.getContainer();\n\n\t\t\tt.removed = 1; // Cancels post remove event execution\n\t\t\tt.hide();\n\n\t\t\tt.execCallback('remove_instance_callback', t);\n\t\t\tt.onRemove.dispatch(t);\n\n\t\t\t// Clear all execCommand listeners this is required to avoid errors if the editor was removed inside another command\n\t\t\tt.onExecCommand.listeners = [];\n\n\t\t\ttinymce.remove(t);\n\t\t\tDOM.remove(e);\n\t\t},\n\n\t\t/**\n\t\t * Destroys the editor instance by removing all events, element references or other resources\n\t\t * that could leak memory. This method will be called automatically when the page is unloaded\n\t\t * but you can also call it directly if you know what you are doing.\n\t\t *\n\t\t * @method destroy\n\t\t * @param {Boolean} s Optional state if the destroy is an automatic destroy or user called one.\n\t\t */\n\t\tdestroy : function(s) {\n\t\t\tvar t = this;\n\n\t\t\t// One time is enough\n\t\t\tif (t.destroyed)\n\t\t\t\treturn;\n\n\t\t\tif (!s) {\n\t\t\t\ttinymce.removeUnload(t.destroy);\n\t\t\t\ttinyMCE.onBeforeUnload.remove(t._beforeUnload);\n\n\t\t\t\t// Manual destroy\n\t\t\t\tif (t.theme && t.theme.destroy)\n\t\t\t\t\tt.theme.destroy();\n\n\t\t\t\t// Destroy controls, selection and dom\n\t\t\t\tt.controlManager.destroy();\n\t\t\t\tt.selection.destroy();\n\t\t\t\tt.dom.destroy();\n\n\t\t\t\t// Remove all events\n\n\t\t\t\t// Don't clear the window or document if content editable\n\t\t\t\t// is enabled since other instances might still be present\n\t\t\t\tif (!t.settings.content_editable) {\n\t\t\t\t\tEvent.clear(t.getWin());\n\t\t\t\t\tEvent.clear(t.getDoc());\n\t\t\t\t}\n\n\t\t\t\tEvent.clear(t.getBody());\n\t\t\t\tEvent.clear(t.formElement);\n\t\t\t}\n\n\t\t\tif (t.formElement) {\n\t\t\t\tt.formElement.submit = t.formElement._mceOldSubmit;\n\t\t\t\tt.formElement._mceOldSubmit = null;\n\t\t\t}\n\n\t\t\tt.contentAreaContainer = t.formElement = t.container = t.settings.content_element = t.bodyElement = t.contentDocument = t.contentWindow = null;\n\n\t\t\tif (t.selection)\n\t\t\t\tt.selection = t.selection.win = t.selection.dom = t.selection.dom.doc = null;\n\n\t\t\tt.destroyed = 1;\n\t\t},\n\n\t\t// Internal functions\n\n\t\t_addEvents : function() {\n\t\t\t// 'focus', 'blur', 'dblclick', 'beforedeactivate', submit, reset\n\t\t\tvar t = this, i, s = t.settings, dom = t.dom, lo = {\n\t\t\t\tmouseup : 'onMouseUp',\n\t\t\t\tmousedown : 'onMouseDown',\n\t\t\t\tclick : 'onClick',\n\t\t\t\tkeyup : 'onKeyUp',\n\t\t\t\tkeydown : 'onKeyDown',\n\t\t\t\tkeypress : 'onKeyPress',\n\t\t\t\tsubmit : 'onSubmit',\n\t\t\t\treset : 'onReset',\n\t\t\t\tcontextmenu : 'onContextMenu',\n\t\t\t\tdblclick : 'onDblClick',\n\t\t\t\tpaste : 'onPaste' // Doesn't work in all browsers yet\n\t\t\t};\n\n\t\t\tfunction eventHandler(e, o) {\n\t\t\t\tvar ty = e.type;\n\n\t\t\t\t// Don't fire events when it's removed\n\t\t\t\tif (t.removed)\n\t\t\t\t\treturn;\n\n\t\t\t\t// Generic event handler\n\t\t\t\tif (t.onEvent.dispatch(t, e, o) !== false) {\n\t\t\t\t\t// Specific event handler\n\t\t\t\t\tt[lo[e.fakeType || e.type]].dispatch(t, e, o);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Add DOM events\n\t\t\teach(lo, function(v, k) {\n\t\t\t\tswitch (k) {\n\t\t\t\t\tcase 'contextmenu':\n\t\t\t\t\t\tdom.bind(t.getDoc(), k, eventHandler);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'paste':\n\t\t\t\t\t\tdom.bind(t.getBody(), k, function(e) {\n\t\t\t\t\t\t\teventHandler(e);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'submit':\n\t\t\t\t\tcase 'reset':\n\t\t\t\t\t\tdom.bind(t.getElement().form || DOM.getParent(t.id, 'form'), k, eventHandler);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tdom.bind(s.content_editable ? t.getBody() : t.getDoc(), k, eventHandler);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tdom.bind(s.content_editable ? t.getBody() : (isGecko ? t.getDoc() : t.getWin()), 'focus', function(e) {\n\t\t\t\tt.focus(true);\n\t\t\t});\n\n\t\t\t// #ifdef contentEditable\n\n\t\t\tif (s.content_editable && tinymce.isOpera) {\n\t\t\t\t// Opera doesn't support focus event for contentEditable elements so we need to fake it\n\t\t\t\tfunction doFocus(e) {\n\t\t\t\t\tt.focus(true);\n\t\t\t\t};\n\n\t\t\t\tdom.bind(t.getBody(), 'click', doFocus);\n\t\t\t\tdom.bind(t.getBody(), 'keydown', doFocus);\n\t\t\t}\n\n\t\t\t// #endif\n\n\t\t\t// Fixes bug where a specified document_base_uri could result in broken images\n\t\t\t// This will also fix drag drop of images in Gecko\n\t\t\tif (tinymce.isGecko) {\n\t\t\t\tdom.bind(t.getDoc(), 'DOMNodeInserted', function(e) {\n\t\t\t\t\tvar v;\n\n\t\t\t\t\te = e.target;\n\n\t\t\t\t\tif (e.nodeType === 1 && e.nodeName === 'IMG' && (v = e.getAttribute('data-mce-src')))\n\t\t\t\t\t\te.src = t.documentBaseURI.toAbsolute(v);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Set various midas options in Gecko\n\t\t\tif (isGecko) {\n\t\t\t\tfunction setOpts() {\n\t\t\t\t\tvar t = this, d = t.getDoc(), s = t.settings;\n\n\t\t\t\t\tif (isGecko && !s.readonly) {\n\t\t\t\t\t\tt._refreshContentEditable();\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t// Try new Gecko method\n\t\t\t\t\t\t\td.execCommand(\"styleWithCSS\", 0, false);\n\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\t// Use old method\n\t\t\t\t\t\t\tif (!t._isHidden())\n\t\t\t\t\t\t\t\ttry {d.execCommand(\"useCSS\", 0, true);} catch (ex) {}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!s.table_inline_editing)\n\t\t\t\t\t\t\ttry {d.execCommand('enableInlineTableEditing', false, false);} catch (ex) {}\n\n\t\t\t\t\t\tif (!s.object_resizing)\n\t\t\t\t\t\t\ttry {d.execCommand('enableObjectResizing', false, false);} catch (ex) {}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tt.onBeforeExecCommand.add(setOpts);\n\t\t\t\tt.onMouseDown.add(setOpts);\n\t\t\t}\n\n\t\t\t// Add node change handlers\n\t\t\tt.onMouseUp.add(t.nodeChanged);\n\t\t\t//t.onClick.add(t.nodeChanged);\n\t\t\tt.onKeyUp.add(function(ed, e) {\n\t\t\t\tvar c = e.keyCode;\n\n\t\t\t\tif ((c >= 33 && c <= 36) || (c >= 37 && c <= 40) || c == 13 || c == 45 || c == 46 || c == 8 || (tinymce.isMac && (c == 91 || c == 93)) || e.ctrlKey)\n\t\t\t\t\tt.nodeChanged();\n\t\t\t});\n\n\n\t\t\t// Add block quote deletion handler\n\t\t\tt.onKeyDown.add(function(ed, e) {\n\t\t\t\t// Was the BACKSPACE key pressed?\n\t\t\t\tif (e.keyCode != 8)\n\t\t\t\t\treturn;\n\n\t\t\t\tvar n = ed.selection.getRng().startContainer;\n\t\t\t\tvar offset = ed.selection.getRng().startOffset;\n\n\t\t\t\twhile (n && n.nodeType && n.nodeType != 1 && n.parentNode)\n\t\t\t\t\tn = n.parentNode;\n\n\t\t\t\t// Is the cursor at the beginning of a blockquote?\n\t\t\t\tif (n && n.parentNode && n.parentNode.tagName === 'BLOCKQUOTE' && n.parentNode.firstChild == n && offset == 0) {\n\t\t\t\t\t// Remove the blockquote\n\t\t\t\t\ted.formatter.toggle('blockquote', null, n.parentNode);\n\n\t\t\t\t\t// Move the caret to the beginning of n\n\t\t\t\t\tvar rng = ed.selection.getRng();\n\t\t\t\t\trng.setStart(n, 0);\n\t\t\t\t\trng.setEnd(n, 0);\n\t\t\t\t\ted.selection.setRng(rng);\n\t\t\t\t\ted.selection.collapse(false);\n\t\t\t\t}\n\t\t\t});\n\n\n\n\t\t\t// Add reset handler\n\t\t\tt.onReset.add(function() {\n\t\t\t\tt.setContent(t.startContent, {format : 'raw'});\n\t\t\t});\n\n\t\t\t// Add shortcuts\n\t\t\tif (s.custom_shortcuts) {\n\t\t\t\tif (s.custom_undo_redo_keyboard_shortcuts) {\n\t\t\t\t\tt.addShortcut('ctrl+z', t.getLang('undo_desc'), 'Undo');\n\t\t\t\t\tt.addShortcut('ctrl+y', t.getLang('redo_desc'), 'Redo');\n\t\t\t\t}\n\n\t\t\t\t// Add default shortcuts for gecko\n\t\t\t\tt.addShortcut('ctrl+b', t.getLang('bold_desc'), 'Bold');\n\t\t\t\tt.addShortcut('ctrl+i', t.getLang('italic_desc'), 'Italic');\n\t\t\t\tt.addShortcut('ctrl+u', t.getLang('underline_desc'), 'Underline');\n\n\t\t\t\t// BlockFormat shortcuts keys\n\t\t\t\tfor (i=1; i<=6; i++)\n\t\t\t\t\tt.addShortcut('ctrl+' + i, '', ['FormatBlock', false, 'h' + i]);\n\n\t\t\t\tt.addShortcut('ctrl+7', '', ['FormatBlock', false, 'p']);\n\t\t\t\tt.addShortcut('ctrl+8', '', ['FormatBlock', false, 'div']);\n\t\t\t\tt.addShortcut('ctrl+9', '', ['FormatBlock', false, 'address']);\n\n\t\t\t\tfunction find(e) {\n\t\t\t\t\tvar v = null;\n\n\t\t\t\t\tif (!e.altKey && !e.ctrlKey && !e.metaKey)\n\t\t\t\t\t\treturn v;\n\n\t\t\t\t\teach(t.shortcuts, function(o) {\n\t\t\t\t\t\tif (tinymce.isMac && o.ctrl != e.metaKey)\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\telse if (!tinymce.isMac && o.ctrl != e.ctrlKey)\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\tif (o.alt != e.altKey)\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\tif (o.shift != e.shiftKey)\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\tif (e.keyCode == o.keyCode || (e.charCode && e.charCode == o.charCode)) {\n\t\t\t\t\t\t\tv = o;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\treturn v;\n\t\t\t\t};\n\n\t\t\t\tt.onKeyUp.add(function(ed, e) {\n\t\t\t\t\tvar o = find(e);\n\n\t\t\t\t\tif (o)\n\t\t\t\t\t\treturn Event.cancel(e);\n\t\t\t\t});\n\n\t\t\t\tt.onKeyPress.add(function(ed, e) {\n\t\t\t\t\tvar o = find(e);\n\n\t\t\t\t\tif (o)\n\t\t\t\t\t\treturn Event.cancel(e);\n\t\t\t\t});\n\n\t\t\t\tt.onKeyDown.add(function(ed, e) {\n\t\t\t\t\tvar o = find(e);\n\n\t\t\t\t\tif (o) {\n\t\t\t\t\t\to.func.call(o.scope);\n\t\t\t\t\t\treturn Event.cancel(e);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (tinymce.isIE) {\n\t\t\t\t// Fix so resize will only update the width and height attributes not the styles of an image\n\t\t\t\t// It will also block mceItemNoResize items\n\t\t\t\tdom.bind(t.getDoc(), 'controlselect', function(e) {\n\t\t\t\t\tvar re = t.resizeInfo, cb;\n\n\t\t\t\t\te = e.target;\n\n\t\t\t\t\t// Don't do this action for non image elements\n\t\t\t\t\tif (e.nodeName !== 'IMG')\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tif (re)\n\t\t\t\t\t\tdom.unbind(re.node, re.ev, re.cb);\n\n\t\t\t\t\tif (!dom.hasClass(e, 'mceItemNoResize')) {\n\t\t\t\t\t\tev = 'resizeend';\n\t\t\t\t\t\tcb = dom.bind(e, ev, function(e) {\n\t\t\t\t\t\t\tvar v;\n\n\t\t\t\t\t\t\te = e.target;\n\n\t\t\t\t\t\t\tif (v = dom.getStyle(e, 'width')) {\n\t\t\t\t\t\t\t\tdom.setAttrib(e, 'width', v.replace(/[^0-9%]+/g, ''));\n\t\t\t\t\t\t\t\tdom.setStyle(e, 'width', '');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (v = dom.getStyle(e, 'height')) {\n\t\t\t\t\t\t\t\tdom.setAttrib(e, 'height', v.replace(/[^0-9%]+/g, ''));\n\t\t\t\t\t\t\t\tdom.setStyle(e, 'height', '');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tev = 'resizestart';\n\t\t\t\t\t\tcb = dom.bind(e, 'resizestart', Event.cancel, Event);\n\t\t\t\t\t}\n\n\t\t\t\t\tre = t.resizeInfo = {\n\t\t\t\t\t\tnode : e,\n\t\t\t\t\t\tev : ev,\n\t\t\t\t\t\tcb : cb\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (tinymce.isOpera) {\n\t\t\t\tt.onClick.add(function(ed, e) {\n\t\t\t\t\tEvent.prevent(e);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Add custom undo/redo handlers\n\t\t\tif (s.custom_undo_redo) {\n\t\t\t\tfunction addUndo() {\n\t\t\t\t\tt.undoManager.typing = false;\n\t\t\t\t\tt.undoManager.add();\n\t\t\t\t};\n\n\t\t\t\tdom.bind(t.getDoc(), 'focusout', function(e) {\n\t\t\t\t\tif (!t.removed && t.undoManager.typing)\n\t\t\t\t\t\taddUndo();\n\t\t\t\t});\n\n\t\t\t\t// Add undo level when contents is drag/dropped within the editor\n\t\t\t\tt.dom.bind(t.dom.getRoot(), 'dragend', function(e) {\n\t\t\t\t\taddUndo();\n\t\t\t\t});\n\n\t\t\t\tt.onKeyUp.add(function(ed, e) {\n\t\t\t\t\tvar keyCode = e.keyCode;\n\n\t\t\t\t\tif ((keyCode >= 33 && keyCode <= 36) || (keyCode >= 37 && keyCode <= 40) || keyCode == 13 || keyCode == 45 || e.ctrlKey)\n\t\t\t\t\t\taddUndo();\n\t\t\t\t});\n\n\t\t\t\tt.onKeyDown.add(function(ed, e) {\n\t\t\t\t\tvar keyCode = e.keyCode, sel;\n\n\t\t\t\t\tif (keyCode == 8) {\n\t\t\t\t\t\tsel = t.getDoc().selection;\n\n\t\t\t\t\t\t// Fix IE control + backspace browser bug\n\t\t\t\t\t\tif (sel && sel.createRange && sel.createRange().item) {\n\t\t\t\t\t\t\tt.undoManager.beforeChange();\n\t\t\t\t\t\t\ted.dom.remove(sel.createRange().item(0));\n\t\t\t\t\t\t\taddUndo();\n\n\t\t\t\t\t\t\treturn Event.cancel(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Is caracter positon keys left,right,up,down,home,end,pgdown,pgup,enter\n\t\t\t\t\tif ((keyCode >= 33 && keyCode <= 36) || (keyCode >= 37 && keyCode <= 40) || keyCode == 13 || keyCode == 45) {\n\t\t\t\t\t\t// Add position before enter key is pressed, used by IE since it still uses the default browser behavior\n\t\t\t\t\t\t// Todo: Remove this once we normalize enter behavior on IE\n\t\t\t\t\t\tif (tinymce.isIE && keyCode == 13)\n\t\t\t\t\t\t\tt.undoManager.beforeChange();\n\n\t\t\t\t\t\tif (t.undoManager.typing)\n\t\t\t\t\t\t\taddUndo();\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// If key isn't shift,ctrl,alt,capslock,metakey\n\t\t\t\t\tif ((keyCode < 16 || keyCode > 20) && keyCode != 224 && keyCode != 91 && !t.undoManager.typing) {\n\t\t\t\t\t\tt.undoManager.beforeChange();\n\t\t\t\t\t\tt.undoManager.typing = true;\n\t\t\t\t\t\tt.undoManager.add();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tt.onMouseDown.add(function() {\n\t\t\t\t\tif (t.undoManager.typing)\n\t\t\t\t\t\taddUndo();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Bug fix for FireFox keeping styles from end of selection instead of start.\n\t\t\tif (tinymce.isGecko) {\n\t\t\t\tfunction getAttributeApplyFunction() {\n\t\t\t\t\tvar template = t.dom.getAttribs(t.selection.getStart().cloneNode(false));\n\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\tvar target = t.selection.getStart();\n\n\t\t\t\t\t\tif (target !== t.getBody()) {\n\t\t\t\t\t\t\tt.dom.setAttrib(target, \"style\", null);\n\n\t\t\t\t\t\t\teach(template, function(attr) {\n\t\t\t\t\t\t\t\ttarget.setAttributeNode(attr.cloneNode(true));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tfunction isSelectionAcrossElements() {\n\t\t\t\t\tvar s = t.selection;\n\n\t\t\t\t\treturn !s.isCollapsed() && s.getStart() != s.getEnd();\n\t\t\t\t}\n\n\t\t\t\tt.onKeyPress.add(function(ed, e) {\n\t\t\t\t\tvar applyAttributes;\n\n\t\t\t\t\tif ((e.keyCode == 8 || e.keyCode == 46) && isSelectionAcrossElements()) {\n\t\t\t\t\t\tapplyAttributes = getAttributeApplyFunction();\n\t\t\t\t\t\tt.getDoc().execCommand('delete', false, null);\n\t\t\t\t\t\tapplyAttributes();\n\n\t\t\t\t\t\treturn Event.cancel(e);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tt.dom.bind(t.getDoc(), 'cut', function(e) {\n\t\t\t\t\tvar applyAttributes;\n\n\t\t\t\t\tif (isSelectionAcrossElements()) {\n\t\t\t\t\t\tapplyAttributes = getAttributeApplyFunction();\n\t\t\t\t\t\tt.onKeyUp.addToTop(Event.cancel, Event);\n\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\tapplyAttributes();\n\t\t\t\t\t\t\tt.onKeyUp.remove(Event.cancel, Event);\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t_refreshContentEditable : function() {\n\t\t\tvar self = this, body, parent;\n\n\t\t\t// Check if the editor was hidden and the re-initalize contentEditable mode by removing and adding the body again\n\t\t\tif (self._isHidden()) {\n\t\t\t\tbody = self.getBody();\n\t\t\t\tparent = body.parentNode;\n\n\t\t\t\tparent.removeChild(body);\n\t\t\t\tparent.appendChild(body);\n\n\t\t\t\tbody.focus();\n\t\t\t}\n\t\t},\n\n\t\t_isHidden : function() {\n\t\t\tvar s;\n\n\t\t\tif (!isGecko)\n\t\t\t\treturn 0;\n\n\t\t\t// Weird, wheres that cursor selection?\n\t\t\ts = this.selection.getSel();\n\t\t\treturn (!s || !s.rangeCount || s.rangeCount == 0);\n\t\t}\n\t});\n})(tinymce);\n","Magento_Tinymce3/tiny_mce/classes/WindowManager.js":"/**\n * WindowManager.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n\tvar Dispatcher = tinymce.util.Dispatcher, each = tinymce.each, isIE = tinymce.isIE, isOpera = tinymce.isOpera;\n\n\t/**\n\t * This class handles the creation of native windows and dialogs. This class can be extended to provide for example inline dialogs.\n\t *\n\t * @class tinymce.WindowManager\n\t * @example\n\t * // Opens a new dialog with the file.htm file and the size 320x240\n\t * // It also adds a custom parameter this can be retrieved by using tinyMCEPopup.getWindowArg inside the dialog.\n\t * tinyMCE.activeEditor.windowManager.open({\n\t *    url : 'file.htm',\n\t *    width : 320,\n\t *    height : 240\n\t * }, {\n\t *    custom_param : 1\n\t * });\n\t *\n\t * // Displays an alert box using the active editors window manager instance\n\t * tinyMCE.activeEditor.windowManager.alert('Hello world!');\n\t *\n\t * // Displays an confirm box and an alert message will be displayed depending on what you choose in the confirm\n\t * tinyMCE.activeEditor.windowManager.confirm(\"Do you want to do something\", function(s) {\n\t *    if (s)\n\t *       tinyMCE.activeEditor.windowManager.alert(\"Ok\");\n\t *    else\n\t *       tinyMCE.activeEditor.windowManager.alert(\"Cancel\");\n\t * });\n\t */\n\ttinymce.create('tinymce.WindowManager', {\n\t\t/**\n\t\t * Constructs a new window manager instance.\n\t\t *\n\t\t * @constructor\n\t\t * @method WindowManager\n\t\t * @param {tinymce.Editor} ed Editor instance that the windows are bound to.\n\t\t */\n\t\tWindowManager : function(ed) {\n\t\t\tvar t = this;\n\n\t\t\tt.editor = ed;\n\t\t\tt.onOpen = new Dispatcher(t);\n\t\t\tt.onClose = new Dispatcher(t);\n\t\t\tt.params = {};\n\t\t\tt.features = {};\n\t\t},\n\n\t\t/**\n\t\t * Opens a new window.\n\t\t *\n\t\t * @method open\n\t\t * @param {Object} s Optional name/value settings collection contains things like width/height/url etc.\n\t\t * @option {String} title Window title.\n\t\t * @option {String} file URL of the file to open in the window.\n\t\t * @option {Number} width Width in pixels.\n\t\t * @option {Number} height Height in pixels.\n\t\t * @option {Boolean} resizable Specifies whether the popup window is resizable or not.\n\t\t * @option {Boolean} maximizable Specifies whether the popup window has a \"maximize\" button and can get maximized or not.\n\t\t * @option {Boolean} inline Specifies whether to display in-line (set to 1 or true for in-line display; requires inlinepopups plugin).\n\t\t * @option {String/Boolean} popup_css Optional CSS to use in the popup. Set to false to remove the default one.\n\t\t * @option {Boolean} translate_i18n Specifies whether translation should occur or not of i18 key strings. Default is true.\n\t\t * @option {String/bool} close_previous Specifies whether a previously opened popup window is to be closed or not (like when calling the file browser window over the advlink popup).\n\t\t * @option {String/bool} scrollbars Specifies whether the popup window can have scrollbars if required (i.e. content larger than the popup size specified).\n\t\t * @param {Object} p Optional parameters/arguments collection can be used by the dialogs to retrieve custom parameters.\n\t\t * @option {String} plugin_url url to plugin if opening plugin window that calls tinyMCEPopup.requireLangPack() and needs access to the plugin language js files\n\t\t */\n\t\topen : function(s, p) {\n\t\t\tvar t = this, f = '', x, y, mo = t.editor.settings.dialog_type == 'modal', w, sw, sh, vp = tinymce.DOM.getViewPort(), u;\n\n\t\t\t// Default some options\n\t\t\ts = s || {};\n\t\t\tp = p || {};\n\t\t\tsw = isOpera ? vp.w : screen.width; // Opera uses windows inside the Opera window\n\t\t\tsh = isOpera ? vp.h : screen.height;\n\t\t\ts.name = s.name || 'mc_' + new Date().getTime();\n\t\t\ts.width = parseInt(s.width || 320);\n\t\t\ts.height = parseInt(s.height || 240);\n\t\t\ts.resizable = true;\n\t\t\ts.left = s.left || parseInt(sw / 2.0) - (s.width / 2.0);\n\t\t\ts.top = s.top || parseInt(sh / 2.0) - (s.height / 2.0);\n\t\t\tp.inline = false;\n\t\t\tp.mce_width = s.width;\n\t\t\tp.mce_height = s.height;\n\t\t\tp.mce_auto_focus = s.auto_focus;\n\n\t\t\tif (mo) {\n\t\t\t\tif (isIE) {\n\t\t\t\t\ts.center = true;\n\t\t\t\t\ts.help = false;\n\t\t\t\t\ts.dialogWidth = s.width + 'px';\n\t\t\t\t\ts.dialogHeight = s.height + 'px';\n\t\t\t\t\ts.scroll = s.scrollbars || false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Build features string\n\t\t\teach(s, function(v, k) {\n\t\t\t\tif (tinymce.is(v, 'boolean'))\n\t\t\t\t\tv = v ? 'yes' : 'no';\n\n\t\t\t\tif (!/^(name|url)$/.test(k)) {\n\t\t\t\t\tif (isIE && mo)\n\t\t\t\t\t\tf += (f ? ';' : '') + k + ':' + v;\n\t\t\t\t\telse\n\t\t\t\t\t\tf += (f ? ',' : '') + k + '=' + v;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tt.features = s;\n\t\t\tt.params = p;\n\t\t\tt.onOpen.dispatch(t, s, p);\n\n\t\t\tu = s.url || s.file;\n\t\t\tu = tinymce._addVer(u);\n\n\t\t\ttry {\n\t\t\t\tif (isIE && mo) {\n\t\t\t\t\tw = 1;\n\t\t\t\t\twindow.showModalDialog(u, window, f);\n\t\t\t\t} else\n\t\t\t\t\tw = window.open(u, s.name, f);\n\t\t\t} catch (ex) {\n\t\t\t\t// Ignore\n\t\t\t}\n\n\t\t\tif (!w)\n\t\t\t\talert(t.editor.getLang('popup_blocked'));\n\t\t},\n\n\t\t/**\n\t\t * Closes the specified window. This will also dispatch out a onClose event.\n\t\t *\n\t\t * @method close\n\t\t * @param {Window} w Native window object to close.\n\t\t */\n\t\tclose : function(w) {\n\t\t\tw.close();\n\t\t\tthis.onClose.dispatch(this);\n\t\t},\n\n\t\t/**\n\t\t * Creates a instance of a class. This method was needed since IE can't create instances\n\t\t * of classes from a parent window due to some reference problem. Any arguments passed after the class name\n\t\t * will be passed as arguments to the constructor.\n\t\t *\n\t\t * @method createInstance\n\t\t * @param {String} cl Class name to create an instance of.\n\t\t * @return {Object} Instance of the specified class.\n\t\t * @example\n\t\t * var uri = tinyMCEPopup.editor.windowManager.createInstance('tinymce.util.URI', 'http://www.somesite.com');\n\t\t * alert(uri.getURI());\n\t\t */\n\t\tcreateInstance : function(cl, a, b, c, d, e) {\n\t\t\tvar f = tinymce.resolve(cl);\n\n\t\t\treturn new f(a, b, c, d, e);\n\t\t},\n\n\t\t/**\n\t\t * Creates a confirm dialog. Please don't use the blocking behavior of this\n\t\t * native version use the callback method instead then it can be extended.\n\t\t *\n\t\t * @method confirm\n\t\t * @param {String} t Title for the new confirm dialog.\n\t\t * @param {function} cb Callback function to be executed after the user has selected ok or cancel.\n\t\t * @param {Object} s Optional scope to execute the callback in.\n\t\t * @example\n\t\t * // Displays an confirm box and an alert message will be displayed depending on what you choose in the confirm\n\t\t * tinyMCE.activeEditor.windowManager.confirm(\"Do you want to do something\", function(s) {\n\t\t *    if (s)\n\t\t *       tinyMCE.activeEditor.windowManager.alert(\"Ok\");\n\t\t *    else\n\t\t *       tinyMCE.activeEditor.windowManager.alert(\"Cancel\");\n\t\t * });\n\t\t */\n\t\tconfirm : function(t, cb, s, w) {\n\t\t\tw = w || window;\n\n\t\t\tcb.call(s || this, w.confirm(this._decode(this.editor.getLang(t, t))));\n\t\t},\n\n\t\t/**\n\t\t * Creates a alert dialog. Please don't use the blocking behavior of this\n\t\t * native version use the callback method instead then it can be extended.\n\t\t *\n\t\t * @method alert\n\t\t * @param {String} t Title for the new alert dialog.\n\t\t * @param {function} cb Callback function to be executed after the user has selected ok.\n\t\t * @param {Object} s Optional scope to execute the callback in.\n\t\t * @example\n\t\t * // Displays an alert box using the active editors window manager instance\n\t\t * tinyMCE.activeEditor.windowManager.alert('Hello world!');\n\t\t */\n\t\talert : function(tx, cb, s, w) {\n\t\t\tvar t = this;\n\n\t\t\tw = w || window;\n\t\t\tw.alert(t._decode(t.editor.getLang(tx, tx)));\n\n\t\t\tif (cb)\n\t\t\t\tcb.call(s || t);\n\t\t},\n\n\t\t/**\n\t\t * Resizes the specified window or id.\n\t\t *\n\t\t * @param {Number} dw Delta width.\n\t\t * @param {Number} dh Delta height.\n\t\t * @param {window/id} win Window if the dialog isn't inline. Id if the dialog is inline.\n\t\t */\n\t\tresizeBy : function(dw, dh, win) {\n\t\t\twin.resizeBy(dw, dh);\n\t\t},\n\n\t\t// Internal functions\n\n\t\t_decode : function(s) {\n\t\t\treturn tinymce.DOM.decode(s).replace(/\\\\n/g, '\\n');\n\t\t}\n\t});\n}(tinymce));\n","Magento_Tinymce3/tiny_mce/classes/util/URI.js":"/**\n * URI.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function() {\n\tvar each = tinymce.each;\n\n\t/**\n\t * This class handles parsing, modification and serialization of URI/URL strings.\n\t * @class tinymce.util.URI\n\t */\n\ttinymce.create('tinymce.util.URI', {\n\t\t/**\n\t\t * Constucts a new URI instance.\n\t\t *\n\t\t * @constructor\n\t\t * @method URI\n\t\t * @param {String} u URI string to parse.\n\t\t * @param {Object} s Optional settings object.\n\t\t */\n\t\tURI : function(u, s) {\n\t\t\tvar t = this, o, a, b, base_url;\n\n\t\t\t// Trim whitespace\n\t\t\tu = tinymce.trim(u);\n\n\t\t\t// Default settings\n\t\t\ts = t.settings = s || {};\n\n\t\t\t// Strange app protocol that isn't http/https or local anchor\n\t\t\t// For example: mailto,skype,tel etc.\n\t\t\tif (/^([\\w\\-]+):([^\\/]{2})/i.test(u) || /^\\s*#/.test(u)) {\n\t\t\t\tt.source = u;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Absolute path with no host, fake host and protocol\n\t\t\tif (u.indexOf('/') === 0 && u.indexOf('//') !== 0)\n\t\t\t\tu = (s.base_uri ? s.base_uri.protocol || 'http' : 'http') + '://mce_host' + u;\n\n\t\t\t// Relative path http:// or protocol relative //path\n\t\t\tif (!/^[\\w-]*:?\\/\\//.test(u)) {\n\t\t\t\tbase_url = s.base_uri ? s.base_uri.path : new tinymce.util.URI(location.href).directory;\n\t\t\t\tu = ((s.base_uri && s.base_uri.protocol) || 'http') + '://mce_host' + t.toAbsPath(base_url, u);\n\t\t\t}\n\n\t\t\t// Parse URL (Credits goes to Steave, http://blog.stevenlevithan.com/archives/parseuri)\n\t\t\tu = u.replace(/@@/g, '(mce_at)'); // Zope 3 workaround, they use @@something\n\t\t\tu = /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/.exec(u);\n\t\t\teach([\"source\",\"protocol\",\"authority\",\"userInfo\",\"user\",\"password\",\"host\",\"port\",\"relative\",\"path\",\"directory\",\"file\",\"query\",\"anchor\"], function(v, i) {\n\t\t\t\tvar s = u[i];\n\n\t\t\t\t// Zope 3 workaround, they use @@something\n\t\t\t\tif (s)\n\t\t\t\t\ts = s.replace(/\\(mce_at\\)/g, '@@');\n\n\t\t\t\tt[v] = s;\n\t\t\t});\n\n\t\t\tif (b = s.base_uri) {\n\t\t\t\tif (!t.protocol)\n\t\t\t\t\tt.protocol = b.protocol;\n\n\t\t\t\tif (!t.userInfo)\n\t\t\t\t\tt.userInfo = b.userInfo;\n\n\t\t\t\tif (!t.port && t.host == 'mce_host')\n\t\t\t\t\tt.port = b.port;\n\n\t\t\t\tif (!t.host || t.host == 'mce_host')\n\t\t\t\t\tt.host = b.host;\n\n\t\t\t\tt.source = '';\n\t\t\t}\n\n\t\t\t//t.path = t.path || '/';\n\t\t},\n\n\t\t/**\n\t\t * Sets the internal path part of the URI.\n\t\t *\n\t\t * @method setPath\n\t\t * @param {string} p Path string to set.\n\t\t */\n\t\tsetPath : function(p) {\n\t\t\tvar t = this;\n\n\t\t\tp = /^(.*?)\\/?(\\w+)?$/.exec(p);\n\n\t\t\t// Update path parts\n\t\t\tt.path = p[0];\n\t\t\tt.directory = p[1];\n\t\t\tt.file = p[2];\n\n\t\t\t// Rebuild source\n\t\t\tt.source = '';\n\t\t\tt.getURI();\n\t\t},\n\n\t\t/**\n\t\t * Converts the specified URI into a relative URI based on the current URI instance location.\n\t\t *\n\t\t * @method toRelative\n\t\t * @param {String} u URI to convert into a relative path/URI.\n\t\t * @return {String} Relative URI from the point specified in the current URI instance.\n\t\t * @example\n\t\t * // Converts an absolute URL to an relative URL url will be somedir/somefile.htm\n\t\t * var url = new tinymce.util.URI('http://www.site.com/dir/').toRelative('http://www.site.com/dir/somedir/somefile.htm');\n\t\t */\n\t\ttoRelative : function(u) {\n\t\t\tvar t = this, o;\n\n\t\t\tif (u === \"./\")\n\t\t\t\treturn u;\n\n\t\t\tu = new tinymce.util.URI(u, {base_uri : t});\n\n\t\t\t// Not on same domain/port or protocol\n\t\t\tif ((u.host != 'mce_host' && t.host != u.host && u.host) || t.port != u.port || t.protocol != u.protocol)\n\t\t\t\treturn u.getURI();\n\n\t\t\to = t.toRelPath(t.path, u.path);\n\n\t\t\t// Add query\n\t\t\tif (u.query)\n\t\t\t\to += '?' + u.query;\n\n\t\t\t// Add anchor\n\t\t\tif (u.anchor)\n\t\t\t\to += '#' + u.anchor;\n\n\t\t\treturn o;\n\t\t},\n\t\n\t\t/**\n\t\t * Converts the specified URI into a absolute URI based on the current URI instance location.\n\t\t *\n\t\t * @method toAbsolute\n\t\t * @param {String} u URI to convert into a relative path/URI.\n\t\t * @param {Boolean} nh No host and protocol prefix.\n\t\t * @return {String} Absolute URI from the point specified in the current URI instance.\n\t\t * @example\n\t\t * // Converts an relative URL to an absolute URL url will be http://www.site.com/dir/somedir/somefile.htm\n\t\t * var url = new tinymce.util.URI('http://www.site.com/dir/').toAbsolute('somedir/somefile.htm');\n\t\t */\n\t\ttoAbsolute : function(u, nh) {\n\t\t\tvar u = new tinymce.util.URI(u, {base_uri : this});\n\n\t\t\treturn u.getURI(this.host == u.host && this.protocol == u.protocol ? nh : 0);\n\t\t},\n\n\t\t/**\n\t\t * Converts a absolute path into a relative path.\n\t\t *\n\t\t * @method toRelPath\n\t\t * @param {String} base Base point to convert the path from.\n\t\t * @param {String} path Absolute path to convert into a relative path.\n\t\t */\n\t\ttoRelPath : function(base, path) {\n\t\t\tvar items, bp = 0, out = '', i, l;\n\n\t\t\t// Split the paths\n\t\t\tbase = base.substring(0, base.lastIndexOf('/'));\n\t\t\tbase = base.split('/');\n\t\t\titems = path.split('/');\n\n\t\t\tif (base.length >= items.length) {\n\t\t\t\tfor (i = 0, l = base.length; i < l; i++) {\n\t\t\t\t\tif (i >= items.length || base[i] != items[i]) {\n\t\t\t\t\t\tbp = i + 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (base.length < items.length) {\n\t\t\t\tfor (i = 0, l = items.length; i < l; i++) {\n\t\t\t\t\tif (i >= base.length || base[i] != items[i]) {\n\t\t\t\t\t\tbp = i + 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (bp == 1)\n\t\t\t\treturn path;\n\n\t\t\tfor (i = 0, l = base.length - (bp - 1); i < l; i++)\n\t\t\t\tout += \"../\";\n\n\t\t\tfor (i = bp - 1, l = items.length; i < l; i++) {\n\t\t\t\tif (i != bp - 1)\n\t\t\t\t\tout += \"/\" + items[i];\n\t\t\t\telse\n\t\t\t\t\tout += items[i];\n\t\t\t}\n\n\t\t\treturn out;\n\t\t},\n\n\t\t/**\n\t\t * Converts a relative path into a absolute path.\n\t\t *\n\t\t * @method toAbsPath\n\t\t * @param {String} base Base point to convert the path from.\n\t\t * @param {String} path Relative path to convert into an absolute path.\n\t\t */\n\t\ttoAbsPath : function(base, path) {\n\t\t\tvar i, nb = 0, o = [], tr, outPath;\n\n\t\t\t// Split paths\n\t\t\ttr = /\\/$/.test(path) ? '/' : '';\n\t\t\tbase = base.split('/');\n\t\t\tpath = path.split('/');\n\n\t\t\t// Remove empty chunks\n\t\t\teach(base, function(k) {\n\t\t\t\tif (k)\n\t\t\t\t\to.push(k);\n\t\t\t});\n\n\t\t\tbase = o;\n\n\t\t\t// Merge relURLParts chunks\n\t\t\tfor (i = path.length - 1, o = []; i >= 0; i--) {\n\t\t\t\t// Ignore empty or .\n\t\t\t\tif (path[i].length == 0 || path[i] == \".\")\n\t\t\t\t\tcontinue;\n\n\t\t\t\t// Is parent\n\t\t\t\tif (path[i] == '..') {\n\t\t\t\t\tnb++;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Move up\n\t\t\t\tif (nb > 0) {\n\t\t\t\t\tnb--;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\to.push(path[i]);\n\t\t\t}\n\n\t\t\ti = base.length - nb;\n\n\t\t\t// If /a/b/c or /\n\t\t\tif (i <= 0)\n\t\t\t\toutPath = o.reverse().join('/');\n\t\t\telse\n\t\t\t\toutPath = base.slice(0, i).join('/') + '/' + o.reverse().join('/');\n\n\t\t\t// Add front / if it's needed\n\t\t\tif (outPath.indexOf('/') !== 0)\n\t\t\t\toutPath = '/' + outPath;\n\n\t\t\t// Add traling / if it's needed\n\t\t\tif (tr && outPath.lastIndexOf('/') !== outPath.length - 1)\n\t\t\t\toutPath += tr;\n\n\t\t\treturn outPath;\n\t\t},\n\n\t\t/**\n\t\t * Returns the full URI of the internal structure.\n\t\t *\n\t\t * @method getURI\n\t\t * @param {Boolean} nh Optional no host and protocol part. Defaults to false.\n\t\t */\n\t\tgetURI : function(nh) {\n\t\t\tvar s, t = this;\n\n\t\t\t// Rebuild source\n\t\t\tif (!t.source || nh) {\n\t\t\t\ts = '';\n\n\t\t\t\tif (!nh) {\n\t\t\t\t\tif (t.protocol)\n\t\t\t\t\t\ts += t.protocol + '://';\n\n\t\t\t\t\tif (t.userInfo)\n\t\t\t\t\t\ts += t.userInfo + '@';\n\n\t\t\t\t\tif (t.host)\n\t\t\t\t\t\ts += t.host;\n\n\t\t\t\t\tif (t.port)\n\t\t\t\t\t\ts += ':' + t.port;\n\t\t\t\t}\n\n\t\t\t\tif (t.path)\n\t\t\t\t\ts += t.path;\n\n\t\t\t\tif (t.query)\n\t\t\t\t\ts += '?' + t.query;\n\n\t\t\t\tif (t.anchor)\n\t\t\t\t\ts += '#' + t.anchor;\n\n\t\t\t\tt.source = s;\n\t\t\t}\n\n\t\t\treturn t.source;\n\t\t}\n\t});\n})();\n","Magento_Tinymce3/tiny_mce/classes/util/Quirks.js":"(function(tinymce) {\n\tvar VK = tinymce.VK, BACKSPACE = VK.BACKSPACE, DELETE = VK.DELETE;\n\n\t/**\n\t * Fixes a WebKit bug when deleting contents using backspace or delete key.\n\t * WebKit will produce a span element if you delete across two block elements.\n\t *\n\t * Example:\n\t * <h1>a</h1><p>|b</p>\n\t *\n\t * Will produce this on backspace:\n\t * <h1>a<span class=\"Apple-style-span\" style=\"<all runtime styles>\">b</span></p>\n\t *\n\t * This fixes the backspace to produce:\n\t * <h1>a|b</p>\n\t *\n\t * See bug: https://bugs.webkit.org/show_bug.cgi?id=45784\n\t *\n\t * This code is a bit of a hack and hopefully it will be fixed soon in WebKit.\n\t */\n\tfunction cleanupStylesWhenDeleting(ed) {\n\t\tvar dom = ed.dom, selection = ed.selection;\n\n\t\ted.onKeyDown.add(function(ed, e) {\n\t\t\tvar rng, blockElm, node, clonedSpan, isDelete;\n\n\t\t\tisDelete = e.keyCode == DELETE;\n\t\t\tif (isDelete || e.keyCode == BACKSPACE) {\n\t\t\t\te.preventDefault();\n\t\t\t\trng = selection.getRng();\n\n\t\t\t\t// Find root block\n\t\t\t\tblockElm = dom.getParent(rng.startContainer, dom.isBlock);\n\n\t\t\t\t// On delete clone the root span of the next block element\n\t\t\t\tif (isDelete)\n\t\t\t\t\tblockElm = dom.getNext(blockElm, dom.isBlock);\n\n\t\t\t\t// Locate root span element and clone it since it would otherwise get merged by the \"apple-style-span\" on delete/backspace\n\t\t\t\tif (blockElm) {\n\t\t\t\t\tnode = blockElm.firstChild;\n\n\t\t\t\t\t// Ignore empty text nodes\n\t\t\t\t\twhile (node && node.nodeType == 3 && node.nodeValue.length == 0)\n\t\t\t\t\t\tnode = node.nextSibling;\n\n\t\t\t\t\tif (node && node.nodeName === 'SPAN') {\n\t\t\t\t\t\tclonedSpan = node.cloneNode(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Do the backspace/delete actiopn\n\t\t\t\ted.getDoc().execCommand(isDelete ? 'ForwardDelete' : 'Delete', false, null);\n\n\t\t\t\t// Find all odd apple-style-spans\n\t\t\t\tblockElm = dom.getParent(rng.startContainer, dom.isBlock);\n\t\t\t\ttinymce.each(dom.select('span.Apple-style-span,font.Apple-style-span', blockElm), function(span) {\n\t\t\t\t\tvar bm = selection.getBookmark();\n\n\t\t\t\t\tif (clonedSpan) {\n\t\t\t\t\t\tdom.replace(clonedSpan.cloneNode(false), span, true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdom.remove(span, true);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Restore the selection\n\t\t\t\t\tselection.moveToBookmark(bm);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\t/**\n\t * WebKit and IE doesn't empty the editor if you select all contents and hit backspace or delete. This fix will check if the body is empty\n\t * like a <h1></h1> or <p></p> and then forcefully remove all contents.\n\t */\n\tfunction emptyEditorWhenDeleting(ed) {\n\t\ted.onKeyUp.add(function(ed, e) {\n\t\t\tvar keyCode = e.keyCode;\n\n\t\t\tif (keyCode == DELETE || keyCode == BACKSPACE) {\n\t\t\t\tif (ed.dom.isEmpty(ed.getBody())) {\n\t\t\t\t\ted.setContent('', {format : 'raw'});\n\t\t\t\t\ted.nodeChanged();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\t/**\n\t * WebKit on MacOS X has a weird issue where it some times fails to properly convert keypresses to input method keystrokes.\n\t * So a fix where we just get the range and set the range back seems to do the trick.\n\t */\n\tfunction inputMethodFocus(ed) {\n\t\ted.dom.bind(ed.getDoc(), 'focusin', function() {\n\t\t\ted.selection.setRng(ed.selection.getRng());\n\t\t});\n\t};\n\n\t/**\n\t * Backspacing in FireFox/IE from a paragraph into a horizontal rule results in a floating text node because the\n\t * browser just deletes the paragraph - the browser fails to merge the text node with a horizontal rule so it is\n\t * left there. TinyMCE sees a floating text node and wraps it in a paragraph on the key up event (ForceBlocks.js\n\t * addRootBlocks), meaning the action does nothing. With this code, FireFox/IE matche the behaviour of other\n     * browsers\n\t */\n\tfunction removeHrOnBackspace(ed) {\n\t\ted.onKeyDown.add(function(ed, e) {\n\t\t\tif (e.keyCode === BACKSPACE) {\n\t\t\t\tif (ed.selection.isCollapsed() && ed.selection.getRng(true).startOffset === 0) {\n\t\t\t\t\tvar node = ed.selection.getNode();\n\t\t\t\t\tvar previousSibling = node.previousSibling;\n\t\t\t\t\tif (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === \"hr\") {\n\t\t\t\t\t\ted.dom.remove(previousSibling);\n\t\t\t\t\t\ttinymce.dom.Event.cancel(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\t/**\n\t * Firefox 3.x has an issue where the body element won't get proper focus if you click out\n\t * side it's rectangle.\n\t */\n\tfunction focusBody(ed) {\n\t\t// Fix for a focus bug in FF 3.x where the body element\n\t\t// wouldn't get proper focus if the user clicked on the HTML element\n\t\tif (!Range.prototype.getClientRects) { // Detect getClientRects got introduced in FF 4\n\t\t\ted.onMouseDown.add(function(ed, e) {\n\t\t\t\tif (e.target.nodeName === \"HTML\") {\n\t\t\t\t\tvar body = ed.getBody();\n\n\t\t\t\t\t// Blur the body it's focused but not correctly focused\n\t\t\t\t\tbody.blur();\n\n\t\t\t\t\t// Refocus the body after a little while\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tbody.focus();\n\t\t\t\t\t}, 0);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\t/**\n\t * WebKit has a bug where it isn't possible to select image, hr or anchor elements\n\t * by clicking on them so we need to fake that.\n\t */\n\tfunction selectControlElements(ed) {\n\t\ted.onClick.add(function(ed, e) {\n\t\t\te = e.target;\n\n\t\t\tif (/^(IMG|HR)$/.test(e.nodeName))\n\t\t\t\ted.selection.select(e);\n\n\t\t\tif (e.nodeName == 'A' && ed.dom.hasClass(e, 'mceItemAnchor'))\n\t\t\t\ted.selection.select(e);\n\n\t\t\ted.nodeChanged();\n\t\t});\n\t};\n\n\t/**\n\t * Fire a nodeChanged when the selection is changed on WebKit this fixes selection issues on iOS5. It only fires the nodeChange\n\t * event every 50ms since it would other wise update the UI when you type and it hogs the CPU.\n\t */\n\tfunction selectionChangeNodeChanged(ed) {\n\t\tvar lastRng, selectionTimer;\n\n\t\ted.dom.bind(ed.getDoc(), 'selectionchange', function() {\n\t\t\tif (selectionTimer) {\n\t\t\t\tclearTimeout(selectionTimer);\n\t\t\t\tselectionTimer = 0;\n\t\t\t}\n\n\t\t\tselectionTimer = window.setTimeout(function() {\n\t\t\t\tvar rng = ed.selection.getRng();\n\n\t\t\t\t// Compare the ranges to see if it was a real change or not\n\t\t\t\tif (!lastRng || !tinymce.dom.RangeUtils.compareRanges(rng, lastRng)) {\n\t\t\t\t\ted.nodeChanged();\n\t\t\t\t\tlastRng = rng;\n\t\t\t\t}\n\t\t\t}, 50);\n\t\t});\n\t}\n\n\t/**\n\t * Screen readers on IE needs to have the role application set on the body.\n\t */\n\tfunction ensureBodyHasRoleApplication(ed) {\n\t\tdocument.body.setAttribute(\"role\", \"application\");\n\t}\n\n\ttinymce.create('tinymce.util.Quirks', {\n\t\tQuirks: function(ed) {\n\t\t\t// WebKit\n\t\t\tif (tinymce.isWebKit) {\n\t\t\t\tcleanupStylesWhenDeleting(ed);\n\t\t\t\temptyEditorWhenDeleting(ed);\n\t\t\t\tinputMethodFocus(ed);\n\t\t\t\tselectControlElements(ed);\n\n\t\t\t\t// iOS\n\t\t\t\tif (tinymce.isIDevice) {\n\t\t\t\t\tselectionChangeNodeChanged(ed);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// IE\n\t\t\tif (tinymce.isIE) {\n\t\t\t\tremoveHrOnBackspace(ed);\n\t\t\t\temptyEditorWhenDeleting(ed);\n\t\t\t\tensureBodyHasRoleApplication(ed);\n\t\t\t}\n\n\t\t\t// Gecko\n\t\t\tif (tinymce.isGecko) {\n\t\t\t\tremoveHrOnBackspace(ed);\n\t\t\t\tfocusBody(ed);\n\t\t\t}\n\t\t}\n\t});\n})(tinymce);\n","Magento_Tinymce3/tiny_mce/classes/util/Cookie.js":"/**\n * Cookie.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function() {\n\tvar each = tinymce.each;\n\n\t/**\n\t * This class contains simple cookie manangement functions.\n\t *\n\t * @class tinymce.util.Cookie\n\t * @static\n\t * @example\n\t * // Gets a cookie from the browser\n\t * console.debug(tinymce.util.Cookie.get('mycookie'));\n\t *\n\t * // Gets a hash table cookie from the browser and takes out the x parameter from it\n\t * console.debug(tinymce.util.Cookie.getHash('mycookie').x);\n\t *\n\t * // Sets a hash table cookie to the browser\n\t * tinymce.util.Cookie.setHash({x : '1', y : '2'});\n\t */\n\ttinymce.create('static tinymce.util.Cookie', {\n\t\t/**\n\t\t * Parses the specified query string into an name/value object.\n\t\t *\n\t\t * @method getHash\n\t\t * @param {String} n String to parse into a n Hashtable object.\n\t\t * @return {Object} Name/Value object with items parsed from querystring.\n\t\t */\n\t\tgetHash : function(n) {\n\t\t\tvar v = this.get(n), h;\n\n\t\t\tif (v) {\n\t\t\t\teach(v.split('&'), function(v) {\n\t\t\t\t\tv = v.split('=');\n\t\t\t\t\th = h || {};\n\t\t\t\t\th[unescape(v[0])] = unescape(v[1]);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn h;\n\t\t},\n\n\t\t/**\n\t\t * Sets a hashtable name/value object to a cookie.\n\t\t *\n\t\t * @method setHash\n\t\t * @param {String} n Name of the cookie.\n\t\t * @param {Object} v Hashtable object to set as cookie.\n\t\t * @param {Date} e Optional date object for the expiration of the cookie.\n\t\t * @param {String} p Optional path to restrict the cookie to.\n\t\t * @param {String} d Optional domain to restrict the cookie to.\n\t\t * @param {String} s Is the cookie secure or not.\n\t\t */\n\t\tsetHash : function(n, v, e, p, d, s) {\n\t\t\tvar o = '';\n\n\t\t\teach(v, function(v, k) {\n\t\t\t\to += (!o ? '' : '&') + escape(k) + '=' + escape(v);\n\t\t\t});\n\n\t\t\tthis.set(n, o, e, p, d, s);\n\t\t},\n\n\t\t/**\n\t\t * Gets the raw data of a cookie by name.\n\t\t *\n\t\t * @method get\n\t\t * @param {String} n Name of cookie to retrieve.\n\t\t * @return {String} Cookie data string.\n\t\t */\n\t\tget : function(n) {\n\t\t\tvar c = document.cookie, e, p = n + \"=\", b;\n\n\t\t\t// Strict mode\n\t\t\tif (!c)\n\t\t\t\treturn;\n\n\t\t\tb = c.indexOf(\"; \" + p);\n\n\t\t\tif (b == -1) {\n\t\t\t\tb = c.indexOf(p);\n\n\t\t\t\tif (b != 0)\n\t\t\t\t\treturn null;\n\t\t\t} else\n\t\t\t\tb += 2;\n\n\t\t\te = c.indexOf(\";\", b);\n\n\t\t\tif (e == -1)\n\t\t\t\te = c.length;\n\n\t\t\treturn unescape(c.substring(b + p.length, e));\n\t\t},\n\n\t\t/**\n\t\t * Sets a raw cookie string.\n\t\t *\n\t\t * @method set\n\t\t * @param {String} n Name of the cookie.\n\t\t * @param {String} v Raw cookie data.\n\t\t * @param {Date} e Optional date object for the expiration of the cookie.\n\t\t * @param {String} p Optional path to restrict the cookie to.\n\t\t * @param {String} d Optional domain to restrict the cookie to.\n\t\t * @param {String} s Is the cookie secure or not.\n\t\t */\n\t\tset : function(n, v, e, p, d, s) {\n\t\t\tdocument.cookie = n + \"=\" + escape(v) +\n\t\t\t\t((e) ? \"; expires=\" + e.toUTCString() : \"\") +\n\t\t\t\t((p) ? \"; path=\" + escape(p) : \"\") +\n\t\t\t\t((d) ? \"; domain=\" + d : \"\") +\n\t\t\t\t((s) ? \"; secure\" : \"\");\n\t\t},\n\n\t\t/**\n\t\t * Removes/deletes a cookie by name.\n\t\t *\n\t\t * @method remove\n\t\t * @param {String} n Cookie name to remove/delete.\n\t\t * @param {Strong} p Optional path to remove the cookie from.\n\t\t */\n\t\tremove : function(n, p) {\n\t\t\tvar d = new Date();\n\n\t\t\td.setTime(d.getTime() - 1000);\n\n\t\t\tthis.set(n, '', d, p, d);\n\t\t}\n\t});\n})();\n","Magento_Tinymce3/tiny_mce/classes/util/Dispatcher.js":"/**\n * Dispatcher.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n/**\n * This class is used to dispatch event to observers/listeners.\n * All internal events inside TinyMCE uses this class.\n *\n * @class tinymce.util.Dispatcher\n * @example\n * // Creates a custom event\n * this.onSomething = new tinymce.util.Dispatcher(this);\n * \n * // Dispatch/fire the event\n * this.onSomething.dispatch('some string');\n */\ntinymce.create('tinymce.util.Dispatcher', {\n\tscope : null,\n\tlisteners : null,\n\n\t/**\n\t * Constructs a new event dispatcher object.\n\t *\n\t * @constructor\n\t * @method Dispatcher\n\t * @param {Object} s Optional default execution scope for all observer functions.\n\t */\n\tDispatcher : function(s) {\n\t\tthis.scope = s || this;\n\t\tthis.listeners = [];\n\t},\n\n\t/**\n\t * Add an observer function to be executed when a dispatch call is done.\n\t *\n\t * @method add\n\t * @param {function} cb Callback function to execute when a dispatch event occurs.\n\t * @param {Object} s Optional execution scope, defaults to the one specified in the class constructor.\n\t * @return {function} Returns the same function as the one passed on.\n\t */\n\tadd : function(cb, s) {\n\t\tthis.listeners.push({cb : cb, scope : s || this.scope});\n\n\t\treturn cb;\n\t},\n\n\t/**\n\t * Add an observer function to be executed to the top of the list of observers.\n\t *\n\t * @method addToTop\n\t * @param {function} cb Callback function to execute when a dispatch event occurs.\n\t * @param {Object} s Optional execution scope, defaults to the one specified in the class constructor.\n\t * @return {function} Returns the same function as the one passed on.\n\t */\n\taddToTop : function(cb, s) {\n\t\tthis.listeners.unshift({cb : cb, scope : s || this.scope});\n\n\t\treturn cb;\n\t},\n\n\t/**\n\t * Removes an observer function.\n\t *\n\t * @method remove\n\t * @param {function} cb Observer function to remove.\n\t * @return {function} The same function that got passed in or null if it wasn't found.\n\t */\n\tremove : function(cb) {\n\t\tvar l = this.listeners, o = null;\n\n\t\ttinymce.each(l, function(c, i) {\n\t\t\tif (cb == c.cb) {\n\t\t\t\to = cb;\n\t\t\t\tl.splice(i, 1);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\n\t\treturn o;\n\t},\n\n\t/**\n\t * Dispatches an event to all observers/listeners.\n\t *\n\t * @method dispatch\n\t * @param {Object} .. Any number of arguments to dispatch.\n\t * @return {Object} Last observer functions return value.\n\t */\n\tdispatch : function() {\n\t\tvar s, a = arguments, i, li = this.listeners, c;\n\n\t\t// Needs to be a real loop since the listener count might change while looping\n\t\t// And this is also more efficient\n\t\tfor (i = 0; i<li.length; i++) {\n\t\t\tc = li[i];\n\t\t\ts = c.cb.apply(c.scope, a);\n\n\t\t\tif (s === false)\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn s;\n\t}\n\n\t/**#@-*/\n});\n","Magento_Tinymce3/tiny_mce/classes/util/JSON.js":"/**\n * JSON.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function() {\n\tfunction serialize(o, quote) {\n\t\tvar i, v, t;\n\n\t\tquote = quote || '\"';\n\n\t\tif (o == null)\n\t\t\treturn 'null';\n\n\t\tt = typeof o;\n\n\t\tif (t == 'string') {\n\t\t\tv = '\\bb\\tt\\nn\\ff\\rr\\\"\"\\'\\'\\\\\\\\';\n\n\t\t\treturn quote + o.replace(/([\\u0080-\\uFFFF\\x00-\\x1f\\\"\\'\\\\])/g, function(a, b) {\n\t\t\t\t// Make sure single quotes never get encoded inside double quotes for JSON compatibility\n\t\t\t\tif (quote === '\"' && a === \"'\")\n\t\t\t\t\treturn a;\n\n\t\t\t\ti = v.indexOf(b);\n\n\t\t\t\tif (i + 1)\n\t\t\t\t\treturn '\\\\' + v.charAt(i + 1);\n\n\t\t\t\ta = b.charCodeAt().toString(16);\n\n\t\t\t\treturn '\\\\u' + '0000'.substring(a.length) + a;\n\t\t\t}) + quote;\n\t\t}\n\n\t\tif (t == 'object') {\n\t\t\tif (o.hasOwnProperty && o instanceof Array) {\n\t\t\t\t\tfor (i=0, v = '['; i<o.length; i++)\n\t\t\t\t\t\tv += (i > 0 ? ',' : '') + serialize(o[i], quote);\n\n\t\t\t\t\treturn v + ']';\n\t\t\t\t}\n\n\t\t\t\tv = '{';\n\n\t\t\t\tfor (i in o) {\n\t\t\t\t\tif (o.hasOwnProperty(i)) {\n\t\t\t\t\t\tv += typeof o[i] != 'function' ? (v.length > 1 ? ',' + quote : quote) + i + quote +':' + serialize(o[i], quote) : '';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn v + '}';\n\t\t}\n\n\t\treturn '' + o;\n\t};\n\n\t/**\n\t * JSON parser and serializer class.\n\t *\n\t * @class tinymce.util.JSON\n\t * @static\n\t * @example\n\t * // JSON parse a string into an object\n\t * var obj = tinymce.util.JSON.parse(somestring);\n\t * \n\t * // JSON serialize a object into an string\n\t * var str = tinymce.util.JSON.serialize(obj);\n\t */\n\ttinymce.util.JSON = {\n\t\t/**\n\t\t * Serializes the specified object as a JSON string.\n\t\t *\n\t\t * @method serialize\n\t\t * @param {Object} obj Object to serialize as a JSON string.\n\t\t * @param {String} quote Optional quote string defaults to \".\n\t\t * @return {string} JSON string serialized from input.\n\t\t */\n\t\tserialize: serialize,\n\n\t\t/**\n\t\t * Unserializes/parses the specified JSON string into a object.\n\t\t *\n\t\t * @method parse\n\t\t * @param {string} s JSON String to parse into a JavaScript object.\n\t\t * @return {Object} Object from input JSON string or undefined if it failed.\n\t\t */\n\t\tparse: function(s) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(s);\n\t\t\t} catch (ex) {\n\t\t\t\t// Ignore\n\t\t\t}\n\t\t}\n\n\t\t/**#@-*/\n\t};\n})();\n","Magento_Tinymce3/tiny_mce/classes/util/VK.js":"/**\n * This file exposes a set of the common KeyCodes for use.  Please grow it as needed.\n */\n\n(function(tinymce){\n\ttinymce.VK = {\n\t\tDELETE: 46,\n\t\tBACKSPACE: 8,\n\t\tENTER: 13,\n\t\tTAB: 9,\n        SPACEBAR: 32,\n\t\tUP: 38,\n\t\tDOWN: 40\n\t}\n})(tinymce);\n","Magento_Tinymce3/tiny_mce/classes/util/JSONP.js":"/**\n * JSONP.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\ntinymce.create('static tinymce.util.JSONP', {\n\tcallbacks : {},\n\tcount : 0,\n\n\tsend : function(o) {\n\t\tvar t = this, dom = tinymce.DOM, count = o.count !== undefined ? o.count : t.count, id = 'tinymce_jsonp_' + count;\n\n\t\tt.callbacks[count] = function(json) {\n\t\t\tdom.remove(id);\n\t\t\tdelete t.callbacks[count];\n\n\t\t\to.callback(json);\n\t\t};\n\n\t\tdom.add(dom.doc.body, 'script', {id : id , src : o.url, type : 'text/javascript'});\n\t\tt.count++;\n\t}\n});\n","Magento_Tinymce3/tiny_mce/classes/util/XHR.js":"/**\n * XHR.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n/**\n * This class enables you to send XMLHTTPRequests cross browser.\n * @class tinymce.util.XHR\n * @static\n * @example\n * // Sends a low level Ajax request\n * tinymce.util.XHR.send({\n *    url : 'someurl',\n *    success : function(text) {\n *       console.debug(text);\n *    }\n * });\n */\ntinymce.create('static tinymce.util.XHR', {\n\t/**\n\t * Sends a XMLHTTPRequest.\n\t * Consult the Wiki for details on what settings this method takes.\n\t *\n\t * @method send\n\t * @param {Object} o Object will target URL, callbacks and other info needed to make the request.\n\t */\n\tsend : function(o) {\n\t\tvar x, t, w = window, c = 0;\n\n\t\t// Default settings\n\t\to.scope = o.scope || this;\n\t\to.success_scope = o.success_scope || o.scope;\n\t\to.error_scope = o.error_scope || o.scope;\n\t\to.async = o.async === false ? false : true;\n\t\to.data = o.data || '';\n\n\t\tfunction get(s) {\n\t\t\tx = 0;\n\n\t\t\ttry {\n\t\t\t\tx = new ActiveXObject(s);\n\t\t\t} catch (ex) {\n\t\t\t}\n\n\t\t\treturn x;\n\t\t};\n\n\t\tx = w.XMLHttpRequest ? new XMLHttpRequest() : get('Microsoft.XMLHTTP') || get('Msxml2.XMLHTTP');\n\n\t\tif (x) {\n\t\t\tif (x.overrideMimeType)\n\t\t\t\tx.overrideMimeType(o.content_type);\n\n\t\t\tx.open(o.type || (o.data ? 'POST' : 'GET'), o.url, o.async);\n\n\t\t\tif (o.content_type)\n\t\t\t\tx.setRequestHeader('Content-Type', o.content_type);\n\n\t\t\tx.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n\n\t\t\tx.send(o.data);\n\n\t\t\tfunction ready() {\n\t\t\t\tif (!o.async || x.readyState == 4 || c++ > 10000) {\n\t\t\t\t\tif (o.success && c < 10000 && x.status == 200)\n\t\t\t\t\t\to.success.call(o.success_scope, '' + x.responseText, x, o);\n\t\t\t\t\telse if (o.error)\n\t\t\t\t\t\to.error.call(o.error_scope, c > 10000 ? 'TIMED_OUT' : 'GENERAL', x, o);\n\n\t\t\t\t\tx = null;\n\t\t\t\t} else\n\t\t\t\t\tw.setTimeout(ready, 10);\n\t\t\t};\n\n\t\t\t// Syncronous request\n\t\t\tif (!o.async)\n\t\t\t\treturn ready();\n\n\t\t\t// Wait for response, onReadyStateChange can not be used since it leaks memory in IE\n\t\t\tt = w.setTimeout(ready, 10);\n\t\t}\n\t}\n});\n","Magento_Tinymce3/tiny_mce/classes/util/JSONRequest.js":"/**\n * JSONRequest.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function() {\n\tvar extend = tinymce.extend, JSON = tinymce.util.JSON, XHR = tinymce.util.XHR;\n\n\t/**\n\t * This class enables you to use JSON-RPC to call backend methods.\n\t *\n\t * @class tinymce.util.JSONRequest\n\t * @example\n\t * var json = new tinymce.util.JSONRequest({\n\t *     url : 'somebackend.php'\n\t * });\n\t * \n\t * // Send RPC call 1\n\t * json.send({\n\t *     method : 'someMethod1',\n\t *     params : ['a', 'b'],\n\t *     success : function(result) {\n\t *         console.dir(result);\n\t *     }\n\t * });\n\t * \n\t * // Send RPC call 2\n\t * json.send({\n\t *     method : 'someMethod2',\n\t *     params : ['a', 'b'],\n\t *     success : function(result) {\n\t *         console.dir(result);\n\t *     }\n\t * });\n\t */\n\ttinymce.create('tinymce.util.JSONRequest', {\n\t\t/**\n\t\t * Constructs a new JSONRequest instance.\n\t\t *\n\t\t * @constructor\n\t\t * @method JSONRequest\n\t\t * @param {Object} s Optional settings object.\n\t\t */\n\t\tJSONRequest : function(s) {\n\t\t\tthis.settings = extend({\n\t\t\t}, s);\n\t\t\tthis.count = 0;\n\t\t},\n\n\t\t/**\n\t\t * Sends a JSON-RPC call. Consult the Wiki API documentation for more details on what you can pass to this function.\n\t\t *\n\t\t * @method send\n\t\t * @param {Object} o Call object where there are three field id, method and params this object should also contain callbacks etc.\n\t\t */\n\t\tsend : function(o) {\n\t\t\tvar ecb = o.error, scb = o.success;\n\n\t\t\to = extend(this.settings, o);\n\n\t\t\to.success = function(c, x) {\n\t\t\t\tc = JSON.parse(c);\n\n\t\t\t\tif (typeof(c) == 'undefined') {\n\t\t\t\t\tc = {\n\t\t\t\t\t\terror : 'JSON Parse error.'\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tif (c.error)\n\t\t\t\t\tecb.call(o.error_scope || o.scope, c.error, x);\n\t\t\t\telse\n\t\t\t\t\tscb.call(o.success_scope || o.scope, c.result);\n\t\t\t};\n\n\t\t\to.error = function(ty, x) {\n\t\t\t\tif (ecb)\n\t\t\t\t\tecb.call(o.error_scope || o.scope, ty, x);\n\t\t\t};\n\n\t\t\to.data = JSON.serialize({\n\t\t\t\tid : o.id || 'c' + (this.count++),\n\t\t\t\tmethod : o.method,\n\t\t\t\tparams : o.params\n\t\t\t});\n\n\t\t\t// JSON content type for Ruby on rails. Bug: #1883287\n\t\t\to.content_type = 'application/json';\n\n\t\t\tXHR.send(o);\n\t\t},\n\n\t\t'static' : {\n\t\t\t/**\n\t\t\t * Simple helper function to send a JSON-RPC request without the need to initialize an object.\n\t\t\t * Consult the Wiki API documentation for more details on what you can pass to this function.\n\t\t\t *\n\t\t\t * @method sendRPC\n\t\t\t * @static\n\t\t\t * @param {Object} o Call object where there are three field id, method and params this object should also contain callbacks etc.\n\t\t\t */\n\t\t\tsendRPC : function(o) {\n\t\t\t\treturn new tinymce.util.JSONRequest().send(o);\n\t\t\t}\n\t\t}\n\t});\n}());","Magento_Tinymce3/tiny_mce/classes/html/DomParser.js":"/**\n * DomParser.js\n *\n * Copyright 2010, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n\tvar Node = tinymce.html.Node;\n\n\t/**\n\t * This class parses HTML code into a DOM like structure of nodes it will remove redundant whitespace and make\n\t * sure that the node tree is valid according to the specified schema. So for example: <p>a<p>b</p>c</p> will become <p>a</p><p>b</p><p>c</p>\n\t *\n\t * @example\n\t * var parser = new tinymce.html.DomParser({validate: true}, schema);\n\t * var rootNode = parser.parse('<h1>content</h1>');\n\t *\n\t * @class tinymce.html.DomParser\n\t * @version 3.4\n\t */\n\n\t/**\n\t * Constructs a new DomParser instance.\n\t *\n\t * @constructor\n\t * @method DomParser\n\t * @param {Object} settings Name/value collection of settings. comment, cdata, text, start and end are callbacks.\n\t * @param {tinymce.html.Schema} schema HTML Schema class to use when parsing.\n\t */\n\ttinymce.html.DomParser = function(settings, schema) {\n\t\tvar self = this, nodeFilters = {}, attributeFilters = [], matchedNodes = {}, matchedAttributes = {};\n\n\t\tsettings = settings || {};\n\t\tsettings.validate = \"validate\" in settings ? settings.validate : true;\n\t\tsettings.root_name = settings.root_name || 'body';\n\t\tself.schema = schema = schema || new tinymce.html.Schema();\n\n\t\tfunction fixInvalidChildren(nodes) {\n\t\t\tvar ni, node, parent, parents, newParent, currentNode, tempNode, childNode, i,\n\t\t\t\tchildClone, nonEmptyElements, nonSplitableElements, sibling, nextNode;\n\n\t\t\tnonSplitableElements = tinymce.makeMap('tr,td,th,tbody,thead,tfoot,table');\n\t\t\tnonEmptyElements = schema.getNonEmptyElements();\n\n\t\t\tfor (ni = 0; ni < nodes.length; ni++) {\n\t\t\t\tnode = nodes[ni];\n\n\t\t\t\t// Already removed\n\t\t\t\tif (!node.parent)\n\t\t\t\t\tcontinue;\n\n\t\t\t\t// Get list of all parent nodes until we find a valid parent to stick the child into\n\t\t\t\tparents = [node];\n\t\t\t\tfor (parent = node.parent; parent && !schema.isValidChild(parent.name, node.name) && !nonSplitableElements[parent.name]; parent = parent.parent)\n\t\t\t\t\tparents.push(parent);\n\n\t\t\t\t// Found a suitable parent\n\t\t\t\tif (parent && parents.length > 1) {\n\t\t\t\t\t// Reverse the array since it makes looping easier\n\t\t\t\t\tparents.reverse();\n\n\t\t\t\t\t// Clone the related parent and insert that after the moved node\n\t\t\t\t\tnewParent = currentNode = self.filterNode(parents[0].clone());\n\n\t\t\t\t\t// Start cloning and moving children on the left side of the target node\n\t\t\t\t\tfor (i = 0; i < parents.length - 1; i++) {\n\t\t\t\t\t\tif (schema.isValidChild(currentNode.name, parents[i].name)) {\n\t\t\t\t\t\t\ttempNode = self.filterNode(parents[i].clone());\n\t\t\t\t\t\t\tcurrentNode.append(tempNode);\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\ttempNode = currentNode;\n\n\t\t\t\t\t\tfor (childNode = parents[i].firstChild; childNode && childNode != parents[i + 1]; ) {\n\t\t\t\t\t\t\tnextNode = childNode.next;\n\t\t\t\t\t\t\ttempNode.append(childNode);\n\t\t\t\t\t\t\tchildNode = nextNode;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcurrentNode = tempNode;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!newParent.isEmpty(nonEmptyElements)) {\n\t\t\t\t\t\tparent.insert(newParent, parents[0], true);\n\t\t\t\t\t\tparent.insert(node, newParent);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparent.insert(node, parents[0], true);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Check if the element is empty by looking through it's contents and special treatment for <p><br /></p>\n\t\t\t\t\tparent = parents[0];\n\t\t\t\t\tif (parent.isEmpty(nonEmptyElements) || parent.firstChild === parent.lastChild && parent.firstChild.name === 'br') {\n\t\t\t\t\t\tparent.empty().remove();\n\t\t\t\t\t}\n\t\t\t\t} else if (node.parent) {\n\t\t\t\t\t// If it's an LI try to find a UL/OL for it or wrap it\n\t\t\t\t\tif (node.name === 'li') {\n\t\t\t\t\t\tsibling = node.prev;\n\t\t\t\t\t\tif (sibling && (sibling.name === 'ul' || sibling.name === 'ul')) {\n\t\t\t\t\t\t\tsibling.append(node);\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsibling = node.next;\n\t\t\t\t\t\tif (sibling && (sibling.name === 'ul' || sibling.name === 'ul')) {\n\t\t\t\t\t\t\tsibling.insert(node, sibling.firstChild, true);\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnode.wrap(self.filterNode(new Node('ul', 1)));\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Try wrapping the element in a DIV\n\t\t\t\t\tif (schema.isValidChild(node.parent.name, 'div') && schema.isValidChild('div', node.name)) {\n\t\t\t\t\t\tnode.wrap(self.filterNode(new Node('div', 1)));\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// We failed wrapping it, then remove or unwrap it\n\t\t\t\t\t\tif (node.name === 'style' || node.name === 'script')\n\t\t\t\t\t\t\tnode.empty().remove();\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tnode.unwrap();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Runs the specified node though the element and attributes filters.\n\t\t *\n\t\t * @param {tinymce.html.Node} Node the node to run filters on.\n\t\t * @return {tinymce.html.Node} The passed in node.\n\t\t */\n\t\tself.filterNode = function(node) {\n\t\t\tvar i, name, list;\n\n\t\t\t// Run element filters\n\t\t\tif (name in nodeFilters) {\n\t\t\t\tlist = matchedNodes[name];\n\n\t\t\t\tif (list)\n\t\t\t\t\tlist.push(node);\n\t\t\t\telse\n\t\t\t\t\tmatchedNodes[name] = [node];\n\t\t\t}\n\n\t\t\t// Run attribute filters\n\t\t\ti = attributeFilters.length;\n\t\t\twhile (i--) {\n\t\t\t\tname = attributeFilters[i].name;\n\n\t\t\t\tif (name in node.attributes.map) {\n\t\t\t\t\tlist = matchedAttributes[name];\n\n\t\t\t\t\tif (list)\n\t\t\t\t\t\tlist.push(node);\n\t\t\t\t\telse\n\t\t\t\t\t\tmatchedAttributes[name] = [node];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn node;\n\t\t};\n\n\t\t/**\n\t\t * Adds a node filter function to the parser, the parser will collect the specified nodes by name\n\t\t * and then execute the callback ones it has finished parsing the document.\n\t\t *\n\t\t * @example\n\t\t * parser.addNodeFilter('p,h1', function(nodes, name) {\n\t\t *\t\tfor (var i = 0; i < nodes.length; i++) {\n\t\t *\t\t\tconsole.log(nodes[i].name);\n\t\t *\t\t}\n\t\t * });\n\t\t * @method addNodeFilter\n\t\t * @method {String} name Comma separated list of nodes to collect.\n\t\t * @param {function} callback Callback function to execute once it has collected nodes.\n\t\t */\n\t\tself.addNodeFilter = function(name, callback) {\n\t\t\ttinymce.each(tinymce.explode(name), function(name) {\n\t\t\t\tvar list = nodeFilters[name];\n\n\t\t\t\tif (!list)\n\t\t\t\t\tnodeFilters[name] = list = [];\n\n\t\t\t\tlist.push(callback);\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Adds a attribute filter function to the parser, the parser will collect nodes that has the specified attributes\n\t\t * and then execute the callback ones it has finished parsing the document.\n\t\t *\n\t\t * @example\n\t\t * parser.addAttributeFilter('src,href', function(nodes, name) {\n\t\t *\t\tfor (var i = 0; i < nodes.length; i++) {\n\t\t *\t\t\tconsole.log(nodes[i].name);\n\t\t *\t\t}\n\t\t * });\n\t\t * @method addAttributeFilter\n\t\t * @method {String} name Comma separated list of nodes to collect.\n\t\t * @param {function} callback Callback function to execute once it has collected nodes.\n\t\t */\n\t\tself.addAttributeFilter = function(name, callback) {\n\t\t\ttinymce.each(tinymce.explode(name), function(name) {\n\t\t\t\tvar i;\n\n\t\t\t\tfor (i = 0; i < attributeFilters.length; i++) {\n\t\t\t\t\tif (attributeFilters[i].name === name) {\n\t\t\t\t\t\tattributeFilters[i].callbacks.push(callback);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tattributeFilters.push({name: name, callbacks: [callback]});\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Parses the specified HTML string into a DOM like node tree and returns the result.\n\t\t *\n\t\t * @example\n\t\t * var rootNode = new DomParser({...}).parse('<b>text</b>');\n\t\t * @method parse\n\t\t * @param {String} html Html string to sax parse.\n\t\t * @param {Object} args Optional args object that gets passed to all filter functions.\n\t\t * @return {tinymce.html.Node} Root node containing the tree.\n\t\t */\n\t\tself.parse = function(html, args) {\n\t\t\tvar parser, rootNode, node, nodes, i, l, fi, fl, list, name, validate,\n\t\t\t\tblockElements, startWhiteSpaceRegExp, invalidChildren = [],\n\t\t\t\tendWhiteSpaceRegExp, allWhiteSpaceRegExp, whiteSpaceElements, children, nonEmptyElements, rootBlockName;\n\n\t\t\targs = args || {};\n\t\t\tmatchedNodes = {};\n\t\t\tmatchedAttributes = {};\n\t\t\tblockElements = tinymce.extend(tinymce.makeMap('script,style,head,html,body,title,meta,param'), schema.getBlockElements());\n\t\t\tnonEmptyElements = schema.getNonEmptyElements();\n\t\t\tchildren = schema.children;\n\t\t\tvalidate = settings.validate;\n\t\t\trootBlockName = \"forced_root_block\" in args ? args.forced_root_block : settings.forced_root_block;\n\n\t\t\twhiteSpaceElements = schema.getWhiteSpaceElements();\n\t\t\tstartWhiteSpaceRegExp = /^[ \\t\\r\\n]+/;\n\t\t\tendWhiteSpaceRegExp = /[ \\t\\r\\n]+$/;\n\t\t\tallWhiteSpaceRegExp = /[ \\t\\r\\n]+/g;\n\n\t\t\tfunction addRootBlocks() {\n\t\t\t\tvar node = rootNode.firstChild, next, rootBlockNode;\n\n\t\t\t\twhile (node) {\n\t\t\t\t\tnext = node.next;\n\n\t\t\t\t\tif (node.type == 3 || (node.type == 1 && node.name !== 'p' && !blockElements[node.name] && !node.attr('data-mce-type'))) {\n\t\t\t\t\t\tif (!rootBlockNode) {\n\t\t\t\t\t\t\t// Create a new root block element\n\t\t\t\t\t\t\trootBlockNode = createNode(rootBlockName, 1);\n\t\t\t\t\t\t\trootNode.insert(rootBlockNode, node);\n\t\t\t\t\t\t\trootBlockNode.append(node);\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\trootBlockNode.append(node);\n\t\t\t\t\t} else {\n\t\t\t\t\t\trootBlockNode = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tnode = next;\n\t\t\t\t};\n\t\t\t};\n\n\t\t\tfunction createNode(name, type) {\n\t\t\t\tvar node = new Node(name, type), list;\n\n\t\t\t\tif (name in nodeFilters) {\n\t\t\t\t\tlist = matchedNodes[name];\n\n\t\t\t\t\tif (list)\n\t\t\t\t\t\tlist.push(node);\n\t\t\t\t\telse\n\t\t\t\t\t\tmatchedNodes[name] = [node];\n\t\t\t\t}\n\n\t\t\t\treturn node;\n\t\t\t};\n\n\t\t\tfunction removeWhitespaceBefore(node) {\n\t\t\t\tvar textNode, textVal, sibling;\n\n\t\t\t\tfor (textNode = node.prev; textNode && textNode.type === 3; ) {\n\t\t\t\t\ttextVal = textNode.value.replace(endWhiteSpaceRegExp, '');\n\n\t\t\t\t\tif (textVal.length > 0) {\n\t\t\t\t\t\ttextNode.value = textVal;\n\t\t\t\t\t\ttextNode = textNode.prev;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsibling = textNode.prev;\n\t\t\t\t\t\ttextNode.remove();\n\t\t\t\t\t\ttextNode = sibling;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tparser = new tinymce.html.SaxParser({\n\t\t\t\tvalidate : validate,\n\t\t\t\tfix_self_closing : !validate, // Let the DOM parser handle <li> in <li> or <p> in <p> for better results\n\n\t\t\t\tcdata: function(text) {\n\t\t\t\t\tnode.append(createNode('#cdata', 4)).value = text;\n\t\t\t\t},\n\n\t\t\t\ttext: function(text, raw) {\n\t\t\t\t\tvar textNode;\n\n\t\t\t\t\t// Trim all redundant whitespace on non white space elements\n\t\t\t\t\tif (!whiteSpaceElements[node.name]) {\n\t\t\t\t\t\ttext = text.replace(allWhiteSpaceRegExp, ' ');\n\n\t\t\t\t\t\tif (node.lastChild && blockElements[node.lastChild.name])\n\t\t\t\t\t\t\ttext = text.replace(startWhiteSpaceRegExp, '');\n\t\t\t\t\t}\n\n\t\t\t\t\t// Do we need to create the node\n\t\t\t\t\tif (text.length !== 0) {\n\t\t\t\t\t\ttextNode = createNode('#text', 3);\n\t\t\t\t\t\ttextNode.raw = !!raw;\n\t\t\t\t\t\tnode.append(textNode).value = text;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tcomment: function(text) {\n\t\t\t\t\tnode.append(createNode('#comment', 8)).value = text;\n\t\t\t\t},\n\n\t\t\t\tpi: function(name, text) {\n\t\t\t\t\tnode.append(createNode(name, 7)).value = text;\n\t\t\t\t\tremoveWhitespaceBefore(node);\n\t\t\t\t},\n\n\t\t\t\tdoctype: function(text) {\n\t\t\t\t\tvar newNode;\n\t\t\n\t\t\t\t\tnewNode = node.append(createNode('#doctype', 10));\n\t\t\t\t\tnewNode.value = text;\n\t\t\t\t\tremoveWhitespaceBefore(node);\n\t\t\t\t},\n\n\t\t\t\tstart: function(name, attrs, empty) {\n\t\t\t\t\tvar newNode, attrFiltersLen, elementRule, textNode, attrName, text, sibling, parent;\n\n\t\t\t\t\telementRule = validate ? schema.getElementRule(name) : {};\n\t\t\t\t\tif (elementRule) {\n\t\t\t\t\t\tnewNode = createNode(elementRule.outputName || name, 1);\n\t\t\t\t\t\tnewNode.attributes = attrs;\n\t\t\t\t\t\tnewNode.shortEnded = empty;\n\n\t\t\t\t\t\tnode.append(newNode);\n\n\t\t\t\t\t\t// Check if node is valid child of the parent node is the child is\n\t\t\t\t\t\t// unknown we don't collect it since it's probably a custom element\n\t\t\t\t\t\tparent = children[node.name];\n\t\t\t\t\t\tif (parent && children[newNode.name] && !parent[newNode.name])\n\t\t\t\t\t\t\tinvalidChildren.push(newNode);\n\n\t\t\t\t\t\tattrFiltersLen = attributeFilters.length;\n\t\t\t\t\t\twhile (attrFiltersLen--) {\n\t\t\t\t\t\t\tattrName = attributeFilters[attrFiltersLen].name;\n\n\t\t\t\t\t\t\tif (attrName in attrs.map) {\n\t\t\t\t\t\t\t\tlist = matchedAttributes[attrName];\n\n\t\t\t\t\t\t\t\tif (list)\n\t\t\t\t\t\t\t\t\tlist.push(newNode);\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tmatchedAttributes[attrName] = [newNode];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Trim whitespace before block\n\t\t\t\t\t\tif (blockElements[name])\n\t\t\t\t\t\t\tremoveWhitespaceBefore(newNode);\n\n\t\t\t\t\t\t// Change current node if the element wasn't empty i.e not <br /> or <img />\n\t\t\t\t\t\tif (!empty)\n\t\t\t\t\t\t\tnode = newNode;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tend: function(name) {\n\t\t\t\t\tvar textNode, elementRule, text, sibling, tempNode;\n\n\t\t\t\t\telementRule = validate ? schema.getElementRule(name) : {};\n\t\t\t\t\tif (elementRule) {\n\t\t\t\t\t\tif (blockElements[name]) {\n\t\t\t\t\t\t\tif (!whiteSpaceElements[node.name]) {\n\t\t\t\t\t\t\t\t// Trim whitespace at beginning of block\n\t\t\t\t\t\t\t\tfor (textNode = node.firstChild; textNode && textNode.type === 3; ) {\n\t\t\t\t\t\t\t\t\ttext = textNode.value.replace(startWhiteSpaceRegExp, '');\n\n\t\t\t\t\t\t\t\t\tif (text.length > 0) {\n\t\t\t\t\t\t\t\t\t\ttextNode.value = text;\n\t\t\t\t\t\t\t\t\t\ttextNode = textNode.next;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tsibling = textNode.next;\n\t\t\t\t\t\t\t\t\t\ttextNode.remove();\n\t\t\t\t\t\t\t\t\t\ttextNode = sibling;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Trim whitespace at end of block\n\t\t\t\t\t\t\t\tfor (textNode = node.lastChild; textNode && textNode.type === 3; ) {\n\t\t\t\t\t\t\t\t\ttext = textNode.value.replace(endWhiteSpaceRegExp, '');\n\n\t\t\t\t\t\t\t\t\tif (text.length > 0) {\n\t\t\t\t\t\t\t\t\t\ttextNode.value = text;\n\t\t\t\t\t\t\t\t\t\ttextNode = textNode.prev;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tsibling = textNode.prev;\n\t\t\t\t\t\t\t\t\t\ttextNode.remove();\n\t\t\t\t\t\t\t\t\t\ttextNode = sibling;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Trim start white space\n\t\t\t\t\t\t\ttextNode = node.prev;\n\t\t\t\t\t\t\tif (textNode && textNode.type === 3) {\n\t\t\t\t\t\t\t\ttext = textNode.value.replace(startWhiteSpaceRegExp, '');\n\n\t\t\t\t\t\t\t\tif (text.length > 0)\n\t\t\t\t\t\t\t\t\ttextNode.value = text;\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\ttextNode.remove();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Handle empty nodes\n\t\t\t\t\t\tif (elementRule.removeEmpty || elementRule.paddEmpty) {\n\t\t\t\t\t\t\tif (node.isEmpty(nonEmptyElements)) {\n\t\t\t\t\t\t\t\tif (elementRule.paddEmpty)\n\t\t\t\t\t\t\t\t\tnode.empty().append(new Node('#text', '3')).value = '\\u00a0';\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t// Leave nodes that have a name like <a name=\"name\">\n\t\t\t\t\t\t\t\t\tif (!node.attributes.map.name) {\n\t\t\t\t\t\t\t\t\t\ttempNode = node.parent;\n\t\t\t\t\t\t\t\t\t\tnode.empty().remove();\n\t\t\t\t\t\t\t\t\t\tnode = tempNode;\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnode = node.parent;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, schema);\n\n\t\t\trootNode = node = new Node(args.context || settings.root_name, 11);\n\n\t\t\tparser.parse(html);\n\n\t\t\t// Fix invalid children or report invalid children in a contextual parsing\n\t\t\tif (validate && invalidChildren.length) {\n\t\t\t\tif (!args.context)\n\t\t\t\t\tfixInvalidChildren(invalidChildren);\n\t\t\t\telse\n\t\t\t\t\targs.invalid = true;\n\t\t\t}\n\n\t\t\t// Wrap nodes in the root into block elements if the root is body\n\t\t\tif (rootBlockName && rootNode.name == 'body')\n\t\t\t\taddRootBlocks();\n\n\t\t\t// Run filters only when the contents is valid\n\t\t\tif (!args.invalid) {\n\t\t\t\t// Run node filters\n\t\t\t\tfor (name in matchedNodes) {\n\t\t\t\t\tlist = nodeFilters[name];\n\t\t\t\t\tnodes = matchedNodes[name];\n\n\t\t\t\t\t// Remove already removed children\n\t\t\t\t\tfi = nodes.length;\n\t\t\t\t\twhile (fi--) {\n\t\t\t\t\t\tif (!nodes[fi].parent)\n\t\t\t\t\t\t\tnodes.splice(fi, 1);\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (i = 0, l = list.length; i < l; i++)\n\t\t\t\t\t\tlist[i](nodes, name, args);\n\t\t\t\t}\n\n\t\t\t\t// Run attribute filters\n\t\t\t\tfor (i = 0, l = attributeFilters.length; i < l; i++) {\n\t\t\t\t\tlist = attributeFilters[i];\n\n\t\t\t\t\tif (list.name in matchedAttributes) {\n\t\t\t\t\t\tnodes = matchedAttributes[list.name];\n\n\t\t\t\t\t\t// Remove already removed children\n\t\t\t\t\t\tfi = nodes.length;\n\t\t\t\t\t\twhile (fi--) {\n\t\t\t\t\t\t\tif (!nodes[fi].parent)\n\t\t\t\t\t\t\t\tnodes.splice(fi, 1);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (fi = 0, fl = list.callbacks.length; fi < fl; fi++)\n\t\t\t\t\t\t\tlist.callbacks[fi](nodes, list.name, args);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn rootNode;\n\t\t};\n\n\t\t// Remove <br> at end of block elements Gecko and WebKit injects BR elements to\n\t\t// make it possible to place the caret inside empty blocks. This logic tries to remove\n\t\t// these elements and keep br elements that where intended to be there intact\n\t\tif (settings.remove_trailing_brs) {\n\t\t\tself.addNodeFilter('br', function(nodes, name) {\n\t\t\t\tvar i, l = nodes.length, node, blockElements = schema.getBlockElements(),\n\t\t\t\t\tnonEmptyElements = schema.getNonEmptyElements(), parent, prev, prevName;\n\n\t\t\t\t// Remove brs from body element as well\n\t\t\t\tblockElements.body = 1;\n\n\t\t\t\t// Must loop forwards since it will otherwise remove all brs in <p>a<br><br><br></p>\n\t\t\t\tfor (i = 0; i < l; i++) {\n\t\t\t\t\tnode = nodes[i];\n\t\t\t\t\tparent = node.parent;\n\n\t\t\t\t\tif (blockElements[node.parent.name] && node === parent.lastChild) {\n\t\t\t\t\t\t// Loop all nodes to the right of the current node and check for other BR elements\n\t\t\t\t\t\t// excluding bookmarks since they are invisible\n\t\t\t\t\t\tprev = node.prev;\n\t\t\t\t\t\twhile (prev) {\n\t\t\t\t\t\t\tprevName = prev.name;\n\n\t\t\t\t\t\t\t// Ignore bookmarks\n\t\t\t\t\t\t\tif (prevName !== \"span\" || prev.attr('data-mce-type') !== 'bookmark') {\n\t\t\t\t\t\t\t\t// Found a non BR element\n\t\t\t\t\t\t\t\tif (prevName !== \"br\")\n\t\t\t\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\t\t\t\t// Found another br it's a <br><br> structure then don't remove anything\n\t\t\t\t\t\t\t\tif (prevName === 'br') {\n\t\t\t\t\t\t\t\t\tnode = null;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tprev = prev.prev;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (node) {\n\t\t\t\t\t\t\tnode.remove();\n\n\t\t\t\t\t\t\t// Is the parent to be considered empty after we removed the BR\n\t\t\t\t\t\t\tif (parent.isEmpty(nonEmptyElements)) {\n\t\t\t\t\t\t\t\telementRule = schema.getElementRule(parent.name);\n\n\t\t\t\t\t\t\t\t// Remove or padd the element depending on schema rule\n\t\t\t\t\t\t\t\tif (elementRule) {\n\t\t\t\t\t\t\t\t  if (elementRule.removeEmpty)\n\t\t\t\t\t\t\t\t\t  parent.remove();\n\t\t\t\t\t\t\t\t  else if (elementRule.paddEmpty)\n\t\t\t\t\t\t\t\t\t  parent.empty().append(new tinymce.html.Node('#text', 3)).value = '\\u00a0';\n\t\t\t\t\t\t\t  }\n              }\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n})(tinymce);\n","Magento_Tinymce3/tiny_mce/classes/html/Styles.js":"/**\n * Styles.js\n *\n * Copyright 2010, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n/**\n * This class is used to parse CSS styles it also compresses styles to reduce the output size.\n *\n * @example\n * var Styles = new tinymce.html.Styles({\n *    url_converter: function(url) {\n *       return url;\n *    }\n * });\n *\n * styles = Styles.parse('border: 1px solid red');\n * styles.color = 'red';\n *\n * console.log(new tinymce.html.StyleSerializer().serialize(styles));\n *\n * @class tinymce.html.Styles\n * @version 3.4\n */\ntinymce.html.Styles = function(settings, schema) {\n\tvar rgbRegExp = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*\\)/gi,\n\t\turlOrStrRegExp = /(?:url(?:(?:\\(\\s*\\\"([^\\\"]+)\\\"\\s*\\))|(?:\\(\\s*\\'([^\\']+)\\'\\s*\\))|(?:\\(\\s*([^)\\s]+)\\s*\\))))|(?:\\'([^\\']+)\\')|(?:\\\"([^\\\"]+)\\\")/gi,\n\t\tstyleRegExp = /\\s*([^:]+):\\s*([^;]+);?/g,\n\t\ttrimRightRegExp = /\\s+$/,\n\t\turlColorRegExp = /rgb/,\n\t\tundef, i, encodingLookup = {}, encodingItems;\n\n\tsettings = settings || {};\n\n\tencodingItems = '\\\\\" \\\\\\' \\\\; \\\\: ; : \\uFEFF'.split(' ');\n\tfor (i = 0; i < encodingItems.length; i++) {\n\t\tencodingLookup[encodingItems[i]] = '\\uFEFF' + i;\n\t\tencodingLookup['\\uFEFF' + i] = encodingItems[i];\n\t}\n\n\tfunction toHex(match, r, g, b) {\n\t\tfunction hex(val) {\n\t\t\tval = parseInt(val).toString(16);\n\n\t\t\treturn val.length > 1 ? val : '0' + val; // 0 -> 00\n\t\t};\n\n\t\treturn '#' + hex(r) + hex(g) + hex(b);\n\t};\n\n\treturn {\n\t\t/**\n\t\t * Parses the specified RGB color value and returns a hex version of that color.\n\t\t *\n\t\t * @method toHex\n\t\t * @param {String} color RGB string value like rgb(1,2,3)\n\t\t * @return {String} Hex version of that RGB value like #FF00FF.\n\t\t */\n\t\ttoHex : function(color) {\n\t\t\treturn color.replace(rgbRegExp, toHex);\n\t\t},\n\n\t\t/**\n\t\t * Parses the specified style value into an object collection. This parser will also\n\t\t * merge and remove any redundant items that browsers might have added. It will also convert non hex\n\t\t * colors to hex values. Urls inside the styles will also be converted to absolute/relative based on settings.\n\t\t *\n\t\t * @method parse\n\t\t * @param {String} css Style value to parse for example: border:1px solid red;.\n\t\t * @return {Object} Object representation of that style like {border : '1px solid red'}\n\t\t */\n\t\tparse : function(css) {\n\t\t\tvar styles = {}, matches, name, value, isEncoded, urlConverter = settings.url_converter, urlConverterScope = settings.url_converter_scope || this;\n\n\t\t\tfunction compress(prefix, suffix) {\n\t\t\t\tvar top, right, bottom, left;\n\n\t\t\t\t// Get values and check it needs compressing\n\t\t\t\ttop = styles[prefix + '-top' + suffix];\n\t\t\t\tif (!top)\n\t\t\t\t\treturn;\n\n\t\t\t\tright = styles[prefix + '-right' + suffix];\n\t\t\t\tif (top != right)\n\t\t\t\t\treturn;\n\n\t\t\t\tbottom = styles[prefix + '-bottom' + suffix];\n\t\t\t\tif (right != bottom)\n\t\t\t\t\treturn;\n\n\t\t\t\tleft = styles[prefix + '-left' + suffix];\n\t\t\t\tif (bottom != left)\n\t\t\t\t\treturn;\n\n\t\t\t\t// Compress\n\t\t\t\tstyles[prefix + suffix] = left;\n\t\t\t\tdelete styles[prefix + '-top' + suffix];\n\t\t\t\tdelete styles[prefix + '-right' + suffix];\n\t\t\t\tdelete styles[prefix + '-bottom' + suffix];\n\t\t\t\tdelete styles[prefix + '-left' + suffix];\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Checks if the specific style can be compressed in other words if all border-width are equal.\n\t\t\t */\n\t\t\tfunction canCompress(key) {\n\t\t\t\tvar value = styles[key], i;\n\n\t\t\t\tif (!value || value.indexOf(' ') < 0)\n\t\t\t\t\treturn;\n\n\t\t\t\tvalue = value.split(' ');\n\t\t\t\ti = value.length;\n\t\t\t\twhile (i--) {\n\t\t\t\t\tif (value[i] !== value[0])\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tstyles[key] = value[0];\n\n\t\t\t\treturn true;\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Compresses multiple styles into one style.\n\t\t\t */\n\t\t\tfunction compress2(target, a, b, c) {\n\t\t\t\tif (!canCompress(a))\n\t\t\t\t\treturn;\n\n\t\t\t\tif (!canCompress(b))\n\t\t\t\t\treturn;\n\n\t\t\t\tif (!canCompress(c))\n\t\t\t\t\treturn;\n\n\t\t\t\t// Compress\n\t\t\t\tstyles[target] = styles[a] + ' ' + styles[b] + ' ' + styles[c];\n\t\t\t\tdelete styles[a];\n\t\t\t\tdelete styles[b];\n\t\t\t\tdelete styles[c];\n\t\t\t};\n\n\t\t\t// Encodes the specified string by replacing all \\\" \\' ; : with _<num>\n\t\t\tfunction encode(str) {\n\t\t\t\tisEncoded = true;\n\n\t\t\t\treturn encodingLookup[str];\n\t\t\t};\n\n\t\t\t// Decodes the specified string by replacing all _<num> with it's original value \\\" \\' etc\n\t\t\t// It will also decode the \\\" \\' if keep_slashes is set to fale or omitted\n\t\t\tfunction decode(str, keep_slashes) {\n\t\t\t\tif (isEncoded) {\n\t\t\t\t\tstr = str.replace(/\\uFEFF[0-9]/g, function(str) {\n\t\t\t\t\t\treturn encodingLookup[str];\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (!keep_slashes)\n\t\t\t\t\tstr = str.replace(/\\\\([\\'\\\";:])/g, \"$1\");\n\n\t\t\t\treturn str;\n\t\t\t}\n\n\t\t\tif (css) {\n\t\t\t\t// Encode \\\" \\' % and ; and : inside strings so they don't interfere with the style parsing\n\t\t\t\tcss = css.replace(/\\\\[\\\"\\';:\\uFEFF]/g, encode).replace(/\\\"[^\\\"]+\\\"|\\'[^\\']+\\'/g, function(str) {\n\t\t\t\t\treturn str.replace(/[;:]/g, encode);\n\t\t\t\t});\n\n\t\t\t\t// Parse styles\n\t\t\t\twhile (matches = styleRegExp.exec(css)) {\n\t\t\t\t\tname = matches[1].replace(trimRightRegExp, '').toLowerCase();\n\t\t\t\t\tvalue = matches[2].replace(trimRightRegExp, '');\n\n\t\t\t\t\tif (name && value.length > 0) {\n\t\t\t\t\t\t// Opera will produce 700 instead of bold in their style values\n\t\t\t\t\t\tif (name === 'font-weight' && value === '700')\n\t\t\t\t\t\t\tvalue = 'bold';\n\t\t\t\t\t\telse if (name === 'color' || name === 'background-color') // Lowercase colors like RED\n\t\t\t\t\t\t\tvalue = value.toLowerCase();\t\t\n\n\t\t\t\t\t\t// Convert RGB colors to HEX\n\t\t\t\t\t\tvalue = value.replace(rgbRegExp, toHex);\n\n\t\t\t\t\t\t// Convert URLs and force them into url('value') format\n\t\t\t\t\t\tvalue = value.replace(urlOrStrRegExp, function(match, url, url2, url3, str, str2) {\n\t\t\t\t\t\t\tstr = str || str2;\n\n\t\t\t\t\t\t\tif (str) {\n\t\t\t\t\t\t\t\tstr = decode(str);\n\n\t\t\t\t\t\t\t\t// Force strings into single quote format\n\t\t\t\t\t\t\t\treturn \"'\" + str.replace(/\\'/g, \"\\\\'\") + \"'\";\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\turl = decode(url || url2 || url3);\n\n\t\t\t\t\t\t\t// Convert the URL to relative/absolute depending on config\n\t\t\t\t\t\t\tif (urlConverter)\n\t\t\t\t\t\t\t\turl = urlConverter.call(urlConverterScope, url, 'style');\n\n\t\t\t\t\t\t\t// Output new URL format\n\t\t\t\t\t\t\treturn \"url('\" + url.replace(/\\'/g, \"\\\\'\") + \"')\";\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tstyles[name] = isEncoded ? decode(value, true) : value;\n\t\t\t\t\t}\n\n\t\t\t\t\tstyleRegExp.lastIndex = matches.index + matches[0].length;\n\t\t\t\t}\n\n\t\t\t\t// Compress the styles to reduce it's size for example IE will expand styles\n\t\t\t\tcompress(\"border\", \"\");\n\t\t\t\tcompress(\"border\", \"-width\");\n\t\t\t\tcompress(\"border\", \"-color\");\n\t\t\t\tcompress(\"border\", \"-style\");\n\t\t\t\tcompress(\"padding\", \"\");\n\t\t\t\tcompress(\"margin\", \"\");\n\t\t\t\tcompress2('border', 'border-width', 'border-style', 'border-color');\n\n\t\t\t\t// Remove pointless border, IE produces these\n\t\t\t\tif (styles.border === 'medium none')\n\t\t\t\t\tdelete styles.border;\n\t\t\t}\n\n\t\t\treturn styles;\n\t\t},\n\n\t\t/**\n\t\t * Serializes the specified style object into a string.\n\t\t *\n\t\t * @method serialize\n\t\t * @param {Object} styles Object to serialize as string for example: {border : '1px solid red'}\n\t\t * @param {String} element_name Optional element name, if specified only the styles that matches the schema will be serialized.\n\t\t * @return {String} String representation of the style object for example: border: 1px solid red.\n\t\t */\n\t\tserialize : function(styles, element_name) {\n\t\t\tvar css = '', name, value;\n\n\t\t\tfunction serializeStyles(name) {\n\t\t\t\tvar styleList, i, l, value;\n\n\t\t\t\tstyleList = schema.styles[name];\n\t\t\t\tif (styleList) {\n\t\t\t\t\tfor (i = 0, l = styleList.length; i < l; i++) {\n\t\t\t\t\t\tname = styleList[i];\n\t\t\t\t\t\tvalue = styles[name];\n\n\t\t\t\t\t\tif (value !== undef && value.length > 0)\n\t\t\t\t\t\t\tcss += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Serialize styles according to schema\n\t\t\tif (element_name && schema && schema.styles) {\n\t\t\t\t// Serialize global styles and element specific styles\n\t\t\t\tserializeStyles('*');\n\t\t\t\tserializeStyles(element_name);\n\t\t\t} else {\n\t\t\t\t// Output the styles in the order they are inside the object\n\t\t\t\tfor (name in styles) {\n\t\t\t\t\tvalue = styles[name];\n\n\t\t\t\t\tif (value !== undef && value.length > 0)\n\t\t\t\t\t\tcss += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn css;\n\t\t}\n\t};\n};\n","Magento_Tinymce3/tiny_mce/classes/html/Writer.js":"/**\n * Writer.js\n *\n * Copyright 2010, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n/**\n * This class is used to write HTML tags out it can be used with the Serializer or the SaxParser.\n *\n * @class tinymce.html.Writer\n * @example\n * var writer = new tinymce.html.Writer({indent : true});\n * var parser = new tinymce.html.SaxParser(writer).parse('<p><br></p>');\n * console.log(writer.getContent());\n *\n * @class tinymce.html.Writer\n * @version 3.4\n */\n\n/**\n * Constructs a new Writer instance.\n *\n * @constructor\n * @method Writer\n * @param {Object} settings Name/value settings object.\n */\ntinymce.html.Writer = function(settings) {\n\tvar html = [], indent, indentBefore, indentAfter, encode, htmlOutput;\n\n\tsettings = settings || {};\n\tindent = settings.indent;\n\tindentBefore = tinymce.makeMap(settings.indent_before || '');\n\tindentAfter = tinymce.makeMap(settings.indent_after || '');\n\tencode = tinymce.html.Entities.getEncodeFunc(settings.entity_encoding || 'raw', settings.entities);\n\thtmlOutput = settings.element_format == \"html\";\n\n\treturn {\n\t\t/**\n\t\t * Writes the a start element such as <p id=\"a\">.\n\t\t *\n\t\t * @method start\n\t\t * @param {String} name Name of the element.\n\t\t * @param {Array} attrs Optional attribute array or undefined if it hasn't any.\n\t\t * @param {Boolean} empty Optional empty state if the tag should end like <br />.\n\t\t */\n\t\tstart: function(name, attrs, empty) {\n\t\t\tvar i, l, attr, value;\n\n\t\t\tif (indent && indentBefore[name] && html.length > 0) {\n\t\t\t\tvalue = html[html.length - 1];\n\n\t\t\t\tif (value.length > 0 && value !== '\\n')\n\t\t\t\t\thtml.push('\\n');\n\t\t\t}\n\n\t\t\thtml.push('<', name);\n\n\t\t\tif (attrs) {\n\t\t\t\tfor (i = 0, l = attrs.length; i < l; i++) {\n\t\t\t\t\tattr = attrs[i];\n\t\t\t\t\thtml.push(' ', attr.name, '=\"', encode(attr.value, true), '\"');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!empty || htmlOutput)\n\t\t\t\thtml[html.length] = '>';\n\t\t\telse\n\t\t\t\thtml[html.length] = ' />';\n\n\t\t\tif (empty && indent && indentAfter[name] && html.length > 0) {\n\t\t\t\tvalue = html[html.length - 1];\n\n\t\t\t\tif (value.length > 0 && value !== '\\n')\n\t\t\t\t\thtml.push('\\n');\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Writes the a end element such as </p>.\n\t\t *\n\t\t * @method end\n\t\t * @param {String} name Name of the element.\n\t\t */\n\t\tend: function(name) {\n\t\t\tvar value;\n\n\t\t\t/*if (indent && indentBefore[name] && html.length > 0) {\n\t\t\t\tvalue = html[html.length - 1];\n\n\t\t\t\tif (value.length > 0 && value !== '\\n')\n\t\t\t\t\thtml.push('\\n');\n\t\t\t}*/\n\n\t\t\thtml.push('</', name, '>');\n\n\t\t\tif (indent && indentAfter[name] && html.length > 0) {\n\t\t\t\tvalue = html[html.length - 1];\n\n\t\t\t\tif (value.length > 0 && value !== '\\n')\n\t\t\t\t\thtml.push('\\n');\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Writes a text node.\n\t\t *\n\t\t * @method text\n\t\t * @param {String} text String to write out.\n\t\t * @param {Boolean} raw Optional raw state if true the contents won't get encoded.\n\t\t */\n\t\ttext: function(text, raw) {\n\t\t\tif (text.length > 0)\n\t\t\t\thtml[html.length] = raw ? text : encode(text);\n\t\t},\n\n\t\t/**\n\t\t * Writes a cdata node such as <![CDATA[data]]>.\n\t\t *\n\t\t * @method cdata\n\t\t * @param {String} text String to write out inside the cdata.\n\t\t */\n\t\tcdata: function(text) {\n\t\t\thtml.push('<![CDATA[', text, ']]>');\n\t\t},\n\n\t\t/**\n\t\t * Writes a comment node such as <!-- Comment -->.\n\t\t *\n\t\t * @method cdata\n\t\t * @param {String} text String to write out inside the comment.\n\t\t */\n\t\tcomment: function(text) {\n\t\t\thtml.push('<!--', text, '-->');\n\t\t},\n\n\t\t/**\n\t\t * Writes a PI node such as <?xml attr=\"value\" ?>.\n\t\t *\n\t\t * @method pi\n\t\t * @param {String} name Name of the pi.\n\t\t * @param {String} text String to write out inside the pi.\n\t\t */\n\t\tpi: function(name, text) {\n\t\t\tif (text)\n\t\t\t\thtml.push('<?', name, ' ', text, '?>');\n\t\t\telse\n\t\t\t\thtml.push('<?', name, '?>');\n\n\t\t\tif (indent)\n\t\t\t\thtml.push('\\n');\n\t\t},\n\n\t\t/**\n\t\t * Writes a doctype node such as <!DOCTYPE data>.\n\t\t *\n\t\t * @method doctype\n\t\t * @param {String} text String to write out inside the doctype.\n\t\t */\n\t\tdoctype: function(text) {\n\t\t\thtml.push('<!DOCTYPE', text, '>', indent ? '\\n' : '');\n\t\t},\n\n\t\t/**\n\t\t * Resets the internal buffer if one wants to reuse the writer.\n\t\t *\n\t\t * @method reset\n\t\t */\n\t\treset: function() {\n\t\t\thtml.length = 0;\n\t\t},\n\n\t\t/**\n\t\t * Returns the contents that got serialized.\n\t\t *\n\t\t * @method getContent\n\t\t * @return {String} HTML contents that got written down.\n\t\t */\n\t\tgetContent: function() {\n\t\t\treturn html.join('').replace(/\\n$/, '');\n\t\t}\n\t};\n};\n","Magento_Tinymce3/tiny_mce/classes/html/Entities.js":"/**\n * Entities.js\n *\n * Copyright 2010, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n\tvar namedEntities, baseEntities, reverseEntities,\n\t\tattrsCharsRegExp = /[&<>\\\"\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g,\n\t\ttextCharsRegExp = /[<>&\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g,\n\t\trawCharsRegExp = /[<>&\\\"\\']/g,\n\t\tentityRegExp = /&(#x|#)?([\\w]+);/g,\n\t\tasciiMap = {\n\t\t\t\t128 : \"\\u20AC\", 130 : \"\\u201A\", 131 : \"\\u0192\", 132 : \"\\u201E\", 133 : \"\\u2026\", 134 : \"\\u2020\",\n\t\t\t\t135 : \"\\u2021\", 136 : \"\\u02C6\", 137 : \"\\u2030\", 138 : \"\\u0160\", 139 : \"\\u2039\", 140 : \"\\u0152\",\n\t\t\t\t142 : \"\\u017D\", 145 : \"\\u2018\", 146 : \"\\u2019\", 147 : \"\\u201C\", 148 : \"\\u201D\", 149 : \"\\u2022\",\n\t\t\t\t150 : \"\\u2013\", 151 : \"\\u2014\", 152 : \"\\u02DC\", 153 : \"\\u2122\", 154 : \"\\u0161\", 155 : \"\\u203A\",\n\t\t\t\t156 : \"\\u0153\", 158 : \"\\u017E\", 159 : \"\\u0178\"\n\t\t};\n\n\t// Raw entities\n\tbaseEntities = {\n\t\t'\\\"' : '&quot;', // Needs to be escaped since the YUI compressor would otherwise break the code\n\t\t\"'\" : '&#39;',\n\t\t'<' : '&lt;',\n\t\t'>' : '&gt;',\n\t\t'&' : '&amp;'\n\t};\n\n\t// Reverse lookup table for raw entities\n\treverseEntities = {\n\t\t'&lt;' : '<',\n\t\t'&gt;' : '>',\n\t\t'&amp;' : '&',\n\t\t'&quot;' : '\"',\n\t\t'&apos;' : \"'\"\n\t};\n\n\t// Decodes text by using the browser\n\tfunction nativeDecode(text) {\n\t\tvar elm;\n\n\t\telm = document.createElement(\"div\");\n\t\telm.innerHTML = text;\n\n\t\treturn elm.textContent || elm.innerText || text;\n\t};\n\n\t// Build a two way lookup table for the entities\n\tfunction buildEntitiesLookup(items, radix) {\n\t\tvar i, chr, entity, lookup = {};\n\n\t\tif (items) {\n\t\t\titems = items.split(',');\n\t\t\tradix = radix || 10;\n\n\t\t\t// Build entities lookup table\n\t\t\tfor (i = 0; i < items.length; i += 2) {\n\t\t\t\tchr = String.fromCharCode(parseInt(items[i], radix));\n\n\t\t\t\t// Only add non base entities\n\t\t\t\tif (!baseEntities[chr]) {\n\t\t\t\t\tentity = '&' + items[i + 1] + ';';\n\t\t\t\t\tlookup[chr] = entity;\n\t\t\t\t\tlookup[entity] = chr;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn lookup;\n\t\t}\n\t};\n\n\t// Unpack entities lookup where the numbers are in radix 32 to reduce the size\n\tnamedEntities = buildEntitiesLookup(\n\t\t'50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,' +\n\t\t'5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,' +\n\t\t'5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,' +\n\t\t'5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,' +\n\t\t'68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,' +\n\t\t'6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,' +\n\t\t'6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,' +\n\t\t'75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,' +\n\t\t'7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,' +\n\t\t'7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,' +\n\t\t'sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,' +\n\t\t'st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,' +\n\t\t't9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,' +\n\t\t'tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,' +\n\t\t'u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,' +\n\t\t'81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,' +\n\t\t'8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,' +\n\t\t'8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,' +\n\t\t'8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,' +\n\t\t'8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,' +\n\t\t'nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,' +\n\t\t'rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,' +\n\t\t'Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,' +\n\t\t'80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,' +\n\t\t'811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro'\n\t, 32);\n\n\ttinymce.html = tinymce.html || {};\n\n\t/**\n\t * Entity encoder class.\n\t *\n\t * @class tinymce.html.SaxParser\n\t * @static\n\t * @version 3.4\n\t */\n\ttinymce.html.Entities = {\n\t\t/**\n\t\t * Encodes the specified string using raw entities. This means only the required XML base entities will be endoded.\n\t\t *\n\t\t * @method encodeRaw\n\t\t * @param {String} text Text to encode.\n\t\t * @param {Boolean} attr Optional flag to specify if the text is attribute contents.\n\t\t * @return {String} Entity encoded text.\n\t\t */\n\t\tencodeRaw : function(text, attr) {\n\t\t\treturn text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function(chr) {\n\t\t\t\treturn baseEntities[chr] || chr;\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Encoded the specified text with both the attributes and text entities. This function will produce larger text contents\n\t\t * since it doesn't know if the context is within a attribute or text node. This was added for compatibility\n\t\t * and is exposed as the DOMUtils.encode function.\n\t\t *\n\t\t * @method encodeAllRaw\n\t\t * @param {String} text Text to encode.\n\t\t * @return {String} Entity encoded text.\n\t\t */\n\t\tencodeAllRaw : function(text) {\n\t\t\treturn ('' + text).replace(rawCharsRegExp, function(chr) {\n\t\t\t\treturn baseEntities[chr] || chr;\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Encodes the specified string using numeric entities. The core entities will be encoded as named ones but all non lower ascii characters\n\t\t * will be encoded into numeric entities.\n\t\t *\n\t\t * @method encodeNumeric\n\t\t * @param {String} text Text to encode.\n\t\t * @param {Boolean} attr Optional flag to specify if the text is attribute contents.\n\t\t * @return {String} Entity encoded text.\n\t\t */\n\t\tencodeNumeric : function(text, attr) {\n\t\t\treturn text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function(chr) {\n\t\t\t\t// Multi byte sequence convert it to a single entity\n\t\t\t\tif (chr.length > 1)\n\t\t\t\t\treturn '&#' + (((chr.charCodeAt(0) - 0xD800) * 0x400) + (chr.charCodeAt(1) - 0xDC00) + 0x10000) + ';';\n\n\t\t\t\treturn baseEntities[chr] || '&#' + chr.charCodeAt(0) + ';';\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Encodes the specified string using named entities. The core entities will be encoded as named ones but all non lower ascii characters\n\t\t * will be encoded into named entities.\n\t\t *\n\t\t * @method encodeNamed\n\t\t * @param {String} text Text to encode.\n\t\t * @param {Boolean} attr Optional flag to specify if the text is attribute contents.\n\t\t * @param {Object} entities Optional parameter with entities to use.\n\t\t * @return {String} Entity encoded text.\n\t\t */\n\t\tencodeNamed : function(text, attr, entities) {\n\t\t\tentities = entities || namedEntities;\n\n\t\t\treturn text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function(chr) {\n\t\t\t\treturn baseEntities[chr] || entities[chr] || chr;\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Returns an encode function based on the name(s) and it's optional entities.\n\t\t *\n\t\t * @method getEncodeFunc\n\t\t * @param {String} name Comma separated list of encoders for example named,numeric.\n\t\t * @param {String} entities Optional parameter with entities to use instead of the built in set.\n\t\t * @return {function} Encode function to be used.\n\t\t */\n\t\tgetEncodeFunc : function(name, entities) {\n\t\t\tvar Entities = tinymce.html.Entities;\n\n\t\t\tentities = buildEntitiesLookup(entities) || namedEntities;\n\n\t\t\tfunction encodeNamedAndNumeric(text, attr) {\n\t\t\t\treturn text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function(chr) {\n\t\t\t\t\treturn baseEntities[chr] || entities[chr] || '&#' + chr.charCodeAt(0) + ';' || chr;\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tfunction encodeCustomNamed(text, attr) {\n\t\t\t\treturn Entities.encodeNamed(text, attr, entities);\n\t\t\t};\n\n\t\t\t// Replace + with , to be compatible with previous TinyMCE versions\n\t\t\tname = tinymce.makeMap(name.replace(/\\+/g, ','));\n\n\t\t\t// Named and numeric encoder\n\t\t\tif (name.named && name.numeric)\n\t\t\t\treturn encodeNamedAndNumeric;\n\n\t\t\t// Named encoder\n\t\t\tif (name.named) {\n\t\t\t\t// Custom names\n\t\t\t\tif (entities)\n\t\t\t\t\treturn encodeCustomNamed;\n\n\t\t\t\treturn Entities.encodeNamed;\n\t\t\t}\n\n\t\t\t// Numeric\n\t\t\tif (name.numeric)\n\t\t\t\treturn Entities.encodeNumeric;\n\n\t\t\t// Raw encoder\n\t\t\treturn Entities.encodeRaw;\n\t\t},\n\n\t\t/**\n\t\t * Decodes the specified string, this will replace entities with raw UTF characters.\n\t\t *\n\t\t * @param {String} text Text to entity decode.\n\t\t * @return {String} Entity decoded string.\n\t\t */\n\t\tdecode : function(text) {\n\t\t\treturn text.replace(entityRegExp, function(all, numeric, value) {\n\t\t\t\tif (numeric) {\n\t\t\t\t\tvalue = parseInt(value, numeric.length === 2 ? 16 : 10);\n\n\t\t\t\t\t// Support upper UTF\n\t\t\t\t\tif (value > 0xFFFF) {\n\t\t\t\t\t\tvalue -= 0x10000;\n\n\t\t\t\t\t\treturn String.fromCharCode(0xD800 + (value >> 10), 0xDC00 + (value & 0x3FF));\n\t\t\t\t\t} else\n\t\t\t\t\t\treturn asciiMap[value] || String.fromCharCode(value);\n\t\t\t\t}\n\n\t\t\t\treturn reverseEntities[all] || namedEntities[all] || nativeDecode(all);\n\t\t\t});\n\t\t}\n\t};\n})(tinymce);\n","Magento_Tinymce3/tiny_mce/classes/html/SaxParser.js":"/**\n * SaxParser.js\n *\n * Copyright 2010, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n\t/**\n\t * This class parses HTML code using pure JavaScript and executes various events for each item it finds. It will\n\t * always execute the events in the right order for tag soup code like <b><p></b></p>. It will also remove elements\n\t * and attributes that doesn't fit the schema if the validate setting is enabled.\n\t *\n\t * @example\n\t * var parser = new tinymce.html.SaxParser({\n\t *     validate: true,\n\t *\n\t *     comment: function(text) {\n\t *         console.log('Comment:', text);\n\t *     },\n\t *\n\t *     cdata: function(text) {\n\t *         console.log('CDATA:', text);\n\t *     },\n\t *\n\t *     text: function(text, raw) {\n\t *         console.log('Text:', text, 'Raw:', raw);\n\t *     },\n\t *\n\t *     start: function(name, attrs, empty) {\n\t *         console.log('Start:', name, attrs, empty);\n\t *     },\n\t *\n\t *     end: function(name) {\n\t *         console.log('End:', name);\n\t *     },\n\t *\n\t *     pi: function(name, text) {\n\t *         console.log('PI:', name, text);\n\t *     },\n\t *\n\t *     doctype: function(text) {\n\t *         console.log('DocType:', text);\n\t *     }\n\t * }, schema);\n\t * @class tinymce.html.SaxParser\n\t * @version 3.4\n\t */\n\n\t/**\n\t * Constructs a new SaxParser instance.\n\t *\n\t * @constructor\n\t * @method SaxParser\n\t * @param {Object} settings Name/value collection of settings. comment, cdata, text, start and end are callbacks.\n\t * @param {tinymce.html.Schema} schema HTML Schema class to use when parsing.\n\t */\n\ttinymce.html.SaxParser = function(settings, schema) {\n\t\tvar self = this, noop = function() {};\n\n\t\tsettings = settings || {};\n\t\tself.schema = schema = schema || new tinymce.html.Schema();\n\n\t\tif (settings.fix_self_closing !== false)\n\t\t\tsettings.fix_self_closing = true;\n\n\t\t// Add handler functions from settings and setup default handlers\n\t\ttinymce.each('comment cdata text start end pi doctype'.split(' '), function(name) {\n\t\t\tif (name)\n\t\t\t\tself[name] = settings[name] || noop;\n\t\t});\n\n\t\t/**\n\t\t * Parses the specified HTML string and executes the callbacks for each item it finds.\n\t\t *\n\t\t * @example\n\t\t * new SaxParser({...}).parse('<b>text</b>');\n\t\t * @method parse\n\t\t * @param {String} html Html string to sax parse.\n\t\t */\n\t\tself.parse = function(html) {\n\t\t\tvar self = this, matches, index = 0, value, endRegExp, stack = [], attrList, i, text, name, isInternalElement, removeInternalElements,\n\t\t\t\tshortEndedElements, fillAttrsMap, isShortEnded, validate, elementRule, isValidElement, attr, attribsValue, invalidPrefixRegExp,\n\t\t\t\tvalidAttributesMap, validAttributePatterns, attributesRequired, attributesDefault, attributesForced, selfClosing,\n\t\t\t\ttokenRegExp, attrRegExp, specialElements, attrValue, idCount = 0, decode = tinymce.html.Entities.decode, fixSelfClosing, isIE;\n\n\t\t\tfunction processEndTag(name) {\n\t\t\t\tvar pos, i;\n\n\t\t\t\t// Find position of parent of the same type\n\t\t\t\tpos = stack.length;\n\t\t\t\twhile (pos--) {\n\t\t\t\t\tif (stack[pos].name === name)\n\t\t\t\t\t\tbreak;\t\t\t\t\t\t\n\t\t\t\t}\n\n\t\t\t\t// Found parent\n\t\t\t\tif (pos >= 0) {\n\t\t\t\t\t// Close all the open elements\n\t\t\t\t\tfor (i = stack.length - 1; i >= pos; i--) {\n\t\t\t\t\t\tname = stack[i];\n\n\t\t\t\t\t\tif (name.valid)\n\t\t\t\t\t\t\tself.end(name.name);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Remove the open elements from the stack\n\t\t\t\t\tstack.length = pos;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Precompile RegExps and map objects\n\t\t\ttokenRegExp = new RegExp('<(?:' +\n\t\t\t\t'(?:!--([\\\\w\\\\W]*?)-->)|' + // Comment\n\t\t\t\t'(?:!\\\\[CDATA\\\\[([\\\\w\\\\W]*?)\\\\]\\\\]>)|' + // CDATA\n\t\t\t\t'(?:!DOCTYPE([\\\\w\\\\W]*?)>)|' + // DOCTYPE\n\t\t\t\t'(?:\\\\?([^\\\\s\\\\/<>]+) ?([\\\\w\\\\W]*?)[?/]>)|' + // PI\n\t\t\t\t'(?:\\\\/([^>]+)>)|' + // End element\n\t\t\t\t'(?:([^\\\\s\\\\/<>]+)((?:\\\\s+[^\"\\'>]+(?:(?:\"[^\"]*\")|(?:\\'[^\\']*\\')|[^>]*))*|\\\\/)>)' + // Start element\n\t\t\t')', 'g');\n\n\t\t\tattrRegExp = /([\\w:\\-]+)(?:\\s*=\\s*(?:(?:\\\"((?:\\\\.|[^\\\"])*)\\\")|(?:\\'((?:\\\\.|[^\\'])*)\\')|([^>\\s]+)))?/g;\n\t\t\tspecialElements = {\n\t\t\t\t'script' : /<\\/script[^>]*>/gi,\n\t\t\t\t'style' : /<\\/style[^>]*>/gi,\n\t\t\t\t'noscript' : /<\\/noscript[^>]*>/gi\n\t\t\t};\n\n\t\t\t// Setup lookup tables for empty elements and boolean attributes\n\t\t\tshortEndedElements = schema.getShortEndedElements();\n\t\t\tselfClosing = schema.getSelfClosingElements();\n\t\t\tfillAttrsMap = schema.getBoolAttrs();\n\t\t\tvalidate = settings.validate;\n\t\t\tremoveInternalElements = settings.remove_internals;\n\t\t\tfixSelfClosing = settings.fix_self_closing;\n\t\t\tisIE = tinymce.isIE;\n\t\t\tinvalidPrefixRegExp = /^:/;\n\n\t\t\twhile (matches = tokenRegExp.exec(html)) {\n\t\t\t\t// Text\n\t\t\t\tif (index < matches.index)\n\t\t\t\t\tself.text(decode(html.substr(index, matches.index - index)));\n\n\t\t\t\tif (value = matches[6]) { // End element\n\t\t\t\t\tvalue = value.toLowerCase();\n\n\t\t\t\t\t// IE will add a \":\" in front of elements it doesn't understand like custom elements or HTML5 elements\n\t\t\t\t\tif (isIE && invalidPrefixRegExp.test(value))\n\t\t\t\t\t\tvalue = value.substr(1);\n\n\t\t\t\t\tprocessEndTag(value);\n\t\t\t\t} else if (value = matches[7]) { // Start element\n\t\t\t\t\tvalue = value.toLowerCase();\n\n\t\t\t\t\t// IE will add a \":\" in front of elements it doesn't understand like custom elements or HTML5 elements\n\t\t\t\t\tif (isIE && invalidPrefixRegExp.test(value))\n\t\t\t\t\t\tvalue = value.substr(1);\n\n\t\t\t\t\tisShortEnded = value in shortEndedElements;\n\n\t\t\t\t\t// Is self closing tag for example an <li> after an open <li>\n\t\t\t\t\tif (fixSelfClosing && selfClosing[value] && stack.length > 0 && stack[stack.length - 1].name === value)\n\t\t\t\t\t\tprocessEndTag(value);\n\n\t\t\t\t\t// Validate element\n\t\t\t\t\tif (!validate || (elementRule = schema.getElementRule(value))) {\n\t\t\t\t\t\tisValidElement = true;\n\n\t\t\t\t\t\t// Grab attributes map and patters when validation is enabled\n\t\t\t\t\t\tif (validate) {\n\t\t\t\t\t\t\tvalidAttributesMap = elementRule.attributes;\n\t\t\t\t\t\t\tvalidAttributePatterns = elementRule.attributePatterns;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Parse attributes\n\t\t\t\t\t\tif (attribsValue = matches[8]) {\n\t\t\t\t\t\t\tisInternalElement = attribsValue.indexOf('data-mce-type') !== -1; // Check if the element is an internal element\n\n\t\t\t\t\t\t\t// If the element has internal attributes then remove it if we are told to do so\n\t\t\t\t\t\t\tif (isInternalElement && removeInternalElements)\n\t\t\t\t\t\t\t\tisValidElement = false;\n\n\t\t\t\t\t\t\tattrList = [];\n\t\t\t\t\t\t\tattrList.map = {};\n\n\t\t\t\t\t\t\tattribsValue.replace(attrRegExp, function(match, name, value, val2, val3) {\n\t\t\t\t\t\t\t\tvar attrRule, i;\n\n\t\t\t\t\t\t\t\tname = name.toLowerCase();\n\t\t\t\t\t\t\t\tvalue = name in fillAttrsMap ? name : decode(value || val2 || val3 || ''); // Handle boolean attribute than value attribute\n\n\t\t\t\t\t\t\t\t// Validate name and value\n\t\t\t\t\t\t\t\tif (validate && !isInternalElement && name.indexOf('data-') !== 0) {\n\t\t\t\t\t\t\t\t\tattrRule = validAttributesMap[name];\n\n\t\t\t\t\t\t\t\t\t// Find rule by pattern matching\n\t\t\t\t\t\t\t\t\tif (!attrRule && validAttributePatterns) {\n\t\t\t\t\t\t\t\t\t\ti = validAttributePatterns.length;\n\t\t\t\t\t\t\t\t\t\twhile (i--) {\n\t\t\t\t\t\t\t\t\t\t\tattrRule = validAttributePatterns[i];\n\t\t\t\t\t\t\t\t\t\t\tif (attrRule.pattern.test(name))\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t// No rule matched\n\t\t\t\t\t\t\t\t\t\tif (i === -1)\n\t\t\t\t\t\t\t\t\t\t\tattrRule = null;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// No attribute rule found\n\t\t\t\t\t\t\t\t\tif (!attrRule)\n\t\t\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\t\t\t// Validate value\n\t\t\t\t\t\t\t\t\tif (attrRule.validValues && !(value in attrRule.validValues))\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Add attribute to list and map\n\t\t\t\t\t\t\t\tattrList.map[name] = value;\n\t\t\t\t\t\t\t\tattrList.push({\n\t\t\t\t\t\t\t\t\tname: name,\n\t\t\t\t\t\t\t\t\tvalue: value\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tattrList = [];\n\t\t\t\t\t\t\tattrList.map = {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Process attributes if validation is enabled\n\t\t\t\t\t\tif (validate && !isInternalElement) {\n\t\t\t\t\t\t\tattributesRequired = elementRule.attributesRequired;\n\t\t\t\t\t\t\tattributesDefault = elementRule.attributesDefault;\n\t\t\t\t\t\t\tattributesForced = elementRule.attributesForced;\n\n\t\t\t\t\t\t\t// Handle forced attributes\n\t\t\t\t\t\t\tif (attributesForced) {\n\t\t\t\t\t\t\t\ti = attributesForced.length;\n\t\t\t\t\t\t\t\twhile (i--) {\n\t\t\t\t\t\t\t\t\tattr = attributesForced[i];\n\t\t\t\t\t\t\t\t\tname = attr.name;\n\t\t\t\t\t\t\t\t\tattrValue = attr.value;\n\n\t\t\t\t\t\t\t\t\tif (attrValue === '{$uid}')\n\t\t\t\t\t\t\t\t\t\tattrValue = 'mce_' + idCount++;\n\n\t\t\t\t\t\t\t\t\tattrList.map[name] = attrValue;\n\t\t\t\t\t\t\t\t\tattrList.push({name: name, value: attrValue});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Handle default attributes\n\t\t\t\t\t\t\tif (attributesDefault) {\n\t\t\t\t\t\t\t\ti = attributesDefault.length;\n\t\t\t\t\t\t\t\twhile (i--) {\n\t\t\t\t\t\t\t\t\tattr = attributesDefault[i];\n\t\t\t\t\t\t\t\t\tname = attr.name;\n\n\t\t\t\t\t\t\t\t\tif (!(name in attrList.map)) {\n\t\t\t\t\t\t\t\t\t\tattrValue = attr.value;\n\n\t\t\t\t\t\t\t\t\t\tif (attrValue === '{$uid}')\n\t\t\t\t\t\t\t\t\t\t\tattrValue = 'mce_' + idCount++;\n\n\t\t\t\t\t\t\t\t\t\tattrList.map[name] = attrValue;\n\t\t\t\t\t\t\t\t\t\tattrList.push({name: name, value: attrValue});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Handle required attributes\n\t\t\t\t\t\t\tif (attributesRequired) {\n\t\t\t\t\t\t\t\ti = attributesRequired.length;\n\t\t\t\t\t\t\t\twhile (i--) {\n\t\t\t\t\t\t\t\t\tif (attributesRequired[i] in attrList.map)\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// None of the required attributes where found\n\t\t\t\t\t\t\t\tif (i === -1)\n\t\t\t\t\t\t\t\t\tisValidElement = false;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Invalidate element if it's marked as bogus\n\t\t\t\t\t\t\tif (attrList.map['data-mce-bogus'])\n\t\t\t\t\t\t\t\tisValidElement = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (isValidElement)\n\t\t\t\t\t\t\tself.start(value, attrList, isShortEnded);\n\t\t\t\t\t} else\n\t\t\t\t\t\tisValidElement = false;\n\n\t\t\t\t\t// Treat script, noscript and style a bit different since they may include code that looks like elements\n\t\t\t\t\tif (endRegExp = specialElements[value]) {\n\t\t\t\t\t\tendRegExp.lastIndex = index = matches.index + matches[0].length;\n\n\t\t\t\t\t\tif (matches = endRegExp.exec(html)) {\n\t\t\t\t\t\t\tif (isValidElement)\n\t\t\t\t\t\t\t\ttext = html.substr(index, matches.index - index);\n\n\t\t\t\t\t\t\tindex = matches.index + matches[0].length;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttext = html.substr(index);\n\t\t\t\t\t\t\tindex = html.length;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (isValidElement && text.length > 0)\n\t\t\t\t\t\t\tself.text(text, true);\n\n\t\t\t\t\t\tif (isValidElement)\n\t\t\t\t\t\t\tself.end(value);\n\n\t\t\t\t\t\ttokenRegExp.lastIndex = index;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Push value on to stack\n\t\t\t\t\tif (!isShortEnded) {\n\t\t\t\t\t\tif (!attribsValue || attribsValue.indexOf('/') != attribsValue.length - 1)\n\t\t\t\t\t\t\tstack.push({name: value, valid: isValidElement});\n\t\t\t\t\t\telse if (isValidElement)\n\t\t\t\t\t\t\tself.end(value);\n\t\t\t\t\t}\n\t\t\t\t} else if (value = matches[1]) { // Comment\n\t\t\t\t\tself.comment(value);\n\t\t\t\t} else if (value = matches[2]) { // CDATA\n\t\t\t\t\tself.cdata(value);\n\t\t\t\t} else if (value = matches[3]) { // DOCTYPE\n\t\t\t\t\tself.doctype(value);\n\t\t\t\t} else if (value = matches[4]) { // PI\n\t\t\t\t\tself.pi(value, matches[5]);\n\t\t\t\t}\n\n\t\t\t\tindex = matches.index + matches[0].length;\n\t\t\t}\n\n\t\t\t// Text\n\t\t\tif (index < html.length)\n\t\t\t\tself.text(decode(html.substr(index)));\n\n\t\t\t// Close any open elements\n\t\t\tfor (i = stack.length - 1; i >= 0; i--) {\n\t\t\t\tvalue = stack[i];\n\n\t\t\t\tif (value.valid)\n\t\t\t\t\tself.end(value.name);\n\t\t\t}\n\t\t};\n\t}\n})(tinymce);\n","Magento_Tinymce3/tiny_mce/classes/html/Schema.js":"/**\n * Schema.js\n *\n * Copyright 2010, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n\tvar transitional = {}, boolAttrMap, blockElementsMap, shortEndedElementsMap, nonEmptyElementsMap, customElementsMap = {},\n\t\tdefaultWhiteSpaceElementsMap, selfClosingElementsMap, makeMap = tinymce.makeMap, each = tinymce.each;\n\n\tfunction split(str, delim) {\n\t\treturn str.split(delim || ',');\n\t};\n\n\t/**\n\t * Unpacks the specified lookup and string data it will also parse it into an object\n\t * map with sub object for it's children. This will later also include the attributes.\n\t */\n\tfunction unpack(lookup, data) {\n\t\tvar key, elements = {};\n\n\t\tfunction replace(value) {\n\t\t\treturn value.replace(/[A-Z]+/g, function(key) {\n\t\t\t\treturn replace(lookup[key]);\n\t\t\t});\n\t\t};\n\n\t\t// Unpack lookup\n\t\tfor (key in lookup) {\n\t\t\tif (lookup.hasOwnProperty(key))\n\t\t\t\tlookup[key] = replace(lookup[key]);\n\t\t}\n\n\t\t// Unpack and parse data into object map\n\t\treplace(data).replace(/#/g, '#text').replace(/(\\w+)\\[([^\\]]+)\\]\\[([^\\]]*)\\]/g, function(str, name, attributes, children) {\n\t\t\tattributes = split(attributes, '|');\n\n\t\t\telements[name] = {\n\t\t\t\tattributes : makeMap(attributes),\n\t\t\t\tattributesOrder : attributes,\n\t\t\t\tchildren : makeMap(children, '|', {'#comment' : {}})\n\t\t\t}\n\t\t});\n\n\t\treturn elements;\n\t};\n\n\t// Build a lookup table for block elements both lowercase and uppercase\n\tblockElementsMap = 'h1,h2,h3,h4,h5,h6,hr,p,div,address,pre,form,table,tbody,thead,tfoot,' + \n\t\t\t\t\t\t'th,tr,td,li,ol,ul,caption,blockquote,center,dl,dt,dd,dir,fieldset,' + \n\t\t\t\t\t\t'noscript,menu,isindex,samp,header,footer,article,section,hgroup';\n\tblockElementsMap = makeMap(blockElementsMap, ',', makeMap(blockElementsMap.toUpperCase()));\n\n\t// This is the XHTML 1.0 transitional elements with it's attributes and children packed to reduce it's size\n\ttransitional = unpack({\n\t\tZ : 'H|K|N|O|P',\n\t\tY : 'X|form|R|Q',\n\t\tZG : 'E|span|width|align|char|charoff|valign',\n\t\tX : 'p|T|div|U|W|isindex|fieldset|table',\n\t\tZF : 'E|align|char|charoff|valign',\n\t\tW : 'pre|hr|blockquote|address|center|noframes',\n\t\tZE : 'abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height',\n\t\tZD : '[E][S]',\n\t\tU : 'ul|ol|dl|menu|dir',\n\t\tZC : 'p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q',\n\t\tT : 'h1|h2|h3|h4|h5|h6',\n\t\tZB : 'X|S|Q',\n\t\tS : 'R|P',\n\t\tZA : 'a|G|J|M|O|P',\n\t\tR : 'a|H|K|N|O',\n\t\tQ : 'noscript|P',\n\t\tP : 'ins|del|script',\n\t\tO : 'input|select|textarea|label|button',\n\t\tN : 'M|L',\n\t\tM : 'em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym',\n\t\tL : 'sub|sup',\n\t\tK : 'J|I',\n\t\tJ : 'tt|i|b|u|s|strike',\n\t\tI : 'big|small|font|basefont',\n\t\tH : 'G|F',\n\t\tG : 'br|span|bdo',\n\t\tF : 'object|applet|img|map|iframe',\n\t\tE : 'A|B|C',\n\t\tD : 'accesskey|tabindex|onfocus|onblur',\n\t\tC : 'onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup',\n\t\tB : 'lang|xml:lang|dir',\n\t\tA : 'id|class|style|title'\n\t}, 'script[id|charset|type|language|src|defer|xml:space][]' + \n\t\t'style[B|id|type|media|title|xml:space][]' + \n\t\t'object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]' + \n\t\t'param[id|name|value|valuetype|type][]' + \n\t\t'p[E|align][#|S]' + \n\t\t'a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]' + \n\t\t'br[A|clear][]' + \n\t\t'span[E][#|S]' + \n\t\t'bdo[A|C|B][#|S]' + \n\t\t'applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]' + \n\t\t'h1[E|align][#|S]' + \n\t\t'img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]' + \n\t\t'map[B|C|A|name][X|form|Q|area]' + \n\t\t'h2[E|align][#|S]' + \n\t\t'iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]' + \n\t\t'h3[E|align][#|S]' + \n\t\t'tt[E][#|S]' + \n\t\t'i[E][#|S]' + \n\t\t'b[E][#|S]' + \n\t\t'u[E][#|S]' + \n\t\t's[E][#|S]' + \n\t\t'strike[E][#|S]' + \n\t\t'big[E][#|S]' + \n\t\t'small[E][#|S]' + \n\t\t'font[A|B|size|color|face][#|S]' + \n\t\t'basefont[id|size|color|face][]' + \n\t\t'em[E][#|S]' + \n\t\t'strong[E][#|S]' + \n\t\t'dfn[E][#|S]' + \n\t\t'code[E][#|S]' + \n\t\t'q[E|cite][#|S]' + \n\t\t'samp[E][#|S]' + \n\t\t'kbd[E][#|S]' + \n\t\t'var[E][#|S]' + \n\t\t'cite[E][#|S]' + \n\t\t'abbr[E][#|S]' + \n\t\t'acronym[E][#|S]' + \n\t\t'sub[E][#|S]' + \n\t\t'sup[E][#|S]' + \n\t\t'input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]' + \n\t\t'select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]' + \n\t\t'optgroup[E|disabled|label][option]' + \n\t\t'option[E|selected|disabled|label|value][]' + \n\t\t'textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]' + \n\t\t'label[E|for|accesskey|onfocus|onblur][#|S]' + \n\t\t'button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]' + \n\t\t'h4[E|align][#|S]' + \n\t\t'ins[E|cite|datetime][#|Y]' + \n\t\t'h5[E|align][#|S]' + \n\t\t'del[E|cite|datetime][#|Y]' + \n\t\t'h6[E|align][#|S]' + \n\t\t'div[E|align][#|Y]' + \n\t\t'ul[E|type|compact][li]' + \n\t\t'li[E|type|value][#|Y]' + \n\t\t'ol[E|type|compact|start][li]' + \n\t\t'dl[E|compact][dt|dd]' + \n\t\t'dt[E][#|S]' + \n\t\t'dd[E][#|Y]' + \n\t\t'menu[E|compact][li]' + \n\t\t'dir[E|compact][li]' + \n\t\t'pre[E|width|xml:space][#|ZA]' + \n\t\t'hr[E|align|noshade|size|width][]' + \n\t\t'blockquote[E|cite][#|Y]' + \n\t\t'address[E][#|S|p]' + \n\t\t'center[E][#|Y]' + \n\t\t'noframes[E][#|Y]' + \n\t\t'isindex[A|B|prompt][]' + \n\t\t'fieldset[E][#|legend|Y]' + \n\t\t'legend[E|accesskey|align][#|S]' + \n\t\t'table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]' + \n\t\t'caption[E|align][#|S]' + \n\t\t'col[ZG][]' + \n\t\t'colgroup[ZG][col]' + \n\t\t'thead[ZF][tr]' + \n\t\t'tr[ZF|bgcolor][th|td]' + \n\t\t'th[E|ZE][#|Y]' + \n\t\t'form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]' + \n\t\t'noscript[E][#|Y]' + \n\t\t'td[E|ZE][#|Y]' + \n\t\t'tfoot[ZF][tr]' + \n\t\t'tbody[ZF][tr]' + \n\t\t'area[E|D|shape|coords|href|nohref|alt|target][]' + \n\t\t'base[id|href|target][]' + \n\t\t'body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]'\n\t);\n\n\tboolAttrMap = makeMap('checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected,autoplay,loop,controls');\n\tshortEndedElementsMap = makeMap('area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,source');\n\tnonEmptyElementsMap = tinymce.extend(makeMap('td,th,iframe,video,audio,object'), shortEndedElementsMap);\n\tdefaultWhiteSpaceElementsMap = makeMap('pre,script,style,textarea');\n\tselfClosingElementsMap = makeMap('colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr');\n\n\t/**\n\t * Schema validator class.\n\t *\n\t * @class tinymce.html.Schema\n\t * @example\n\t *  if (tinymce.activeEditor.schema.isValidChild('p', 'span'))\n\t *    alert('span is valid child of p.');\n\t *\n\t *  if (tinymce.activeEditor.schema.getElementRule('p'))\n\t *    alert('P is a valid element.');\n\t *\n\t * @class tinymce.html.Schema\n\t * @version 3.4\n\t */\n\n\t/**\n\t * Constructs a new Schema instance.\n\t *\n\t * @constructor\n\t * @method Schema\n\t * @param {Object} settings Name/value settings object.\n\t */\n\ttinymce.html.Schema = function(settings) {\n\t\tvar self = this, elements = {}, children = {}, patternElements = [], validStyles, whiteSpaceElementsMap;\n\n\t\tsettings = settings || {};\n\n\t\t// Allow all elements and attributes if verify_html is set to false\n\t\tif (settings.verify_html === false)\n\t\t\tsettings.valid_elements = '*[*]';\n\n\t\t// Build styles list\n\t\tif (settings.valid_styles) {\n\t\t\tvalidStyles = {};\n\n\t\t\t// Convert styles into a rule list\n\t\t\teach(settings.valid_styles, function(value, key) {\n\t\t\t\tvalidStyles[key] = tinymce.explode(value);\n\t\t\t});\n\t\t}\n\n\t\twhiteSpaceElementsMap = settings.whitespace_elements ? makeMap(settings.whitespace_elements) : defaultWhiteSpaceElementsMap;\n\n\t\t// Converts a wildcard expression string to a regexp for example *a will become /.*a/.\n\t\tfunction patternToRegExp(str) {\n\t\t\treturn new RegExp('^' + str.replace(/([?+*])/g, '.$1') + '$');\n\t\t};\n\n\t\t// Parses the specified valid_elements string and adds to the current rules\n\t\t// This function is a bit hard to read since it's heavily optimized for speed\n\t\tfunction addValidElements(valid_elements) {\n\t\t\tvar ei, el, ai, al, yl, matches, element, attr, attrData, elementName, attrName, attrType, attributes, attributesOrder,\n\t\t\t\tprefix, outputName, globalAttributes, globalAttributesOrder, transElement, key, childKey, value,\n\t\t\t\telementRuleRegExp = /^([#+-])?([^\\[\\/]+)(?:\\/([^\\[]+))?(?:\\[([^\\]]+)\\])?$/,\n\t\t\t\tattrRuleRegExp = /^([!\\-])?(\\w+::\\w+|[^=:<]+)?(?:([=:<])(.*))?$/,\n\t\t\t\thasPatternsRegExp = /[*?+]/;\n\n\t\t\tif (valid_elements) {\n\t\t\t\t// Split valid elements into an array with rules\n\t\t\t\tvalid_elements = split(valid_elements);\n\n\t\t\t\tif (elements['@']) {\n\t\t\t\t\tglobalAttributes = elements['@'].attributes;\n\t\t\t\t\tglobalAttributesOrder = elements['@'].attributesOrder;\n\t\t\t\t}\n\n\t\t\t\t// Loop all rules\n\t\t\t\tfor (ei = 0, el = valid_elements.length; ei < el; ei++) {\n\t\t\t\t\t// Parse element rule\n\t\t\t\t\tmatches = elementRuleRegExp.exec(valid_elements[ei]);\n\t\t\t\t\tif (matches) {\n\t\t\t\t\t\t// Setup local names for matches\n\t\t\t\t\t\tprefix = matches[1];\n\t\t\t\t\t\telementName = matches[2];\n\t\t\t\t\t\toutputName = matches[3];\n\t\t\t\t\t\tattrData = matches[4];\n\n\t\t\t\t\t\t// Create new attributes and attributesOrder\n\t\t\t\t\t\tattributes = {};\n\t\t\t\t\t\tattributesOrder = [];\n\n\t\t\t\t\t\t// Create the new element\n\t\t\t\t\t\telement = {\n\t\t\t\t\t\t\tattributes : attributes,\n\t\t\t\t\t\t\tattributesOrder : attributesOrder\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// Padd empty elements prefix\n\t\t\t\t\t\tif (prefix === '#')\n\t\t\t\t\t\t\telement.paddEmpty = true;\n\n\t\t\t\t\t\t// Remove empty elements prefix\n\t\t\t\t\t\tif (prefix === '-')\n\t\t\t\t\t\t\telement.removeEmpty = true;\n\n\t\t\t\t\t\t// Copy attributes from global rule into current rule\n\t\t\t\t\t\tif (globalAttributes) {\n\t\t\t\t\t\t\tfor (key in globalAttributes)\n\t\t\t\t\t\t\t\tattributes[key] = globalAttributes[key];\n\n\t\t\t\t\t\t\tattributesOrder.push.apply(attributesOrder, globalAttributesOrder);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Attributes defined\n\t\t\t\t\t\tif (attrData) {\n\t\t\t\t\t\t\tattrData = split(attrData, '|');\n\t\t\t\t\t\t\tfor (ai = 0, al = attrData.length; ai < al; ai++) {\n\t\t\t\t\t\t\t\tmatches = attrRuleRegExp.exec(attrData[ai]);\n\t\t\t\t\t\t\t\tif (matches) {\n\t\t\t\t\t\t\t\t\tattr = {};\n\t\t\t\t\t\t\t\t\tattrType = matches[1];\n\t\t\t\t\t\t\t\t\tattrName = matches[2].replace(/::/g, ':');\n\t\t\t\t\t\t\t\t\tprefix = matches[3];\n\t\t\t\t\t\t\t\t\tvalue = matches[4];\n\n\t\t\t\t\t\t\t\t\t// Required\n\t\t\t\t\t\t\t\t\tif (attrType === '!') {\n\t\t\t\t\t\t\t\t\t\telement.attributesRequired = element.attributesRequired || [];\n\t\t\t\t\t\t\t\t\t\telement.attributesRequired.push(attrName);\n\t\t\t\t\t\t\t\t\t\tattr.required = true;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Denied from global\n\t\t\t\t\t\t\t\t\tif (attrType === '-') {\n\t\t\t\t\t\t\t\t\t\tdelete attributes[attrName];\n\t\t\t\t\t\t\t\t\t\tattributesOrder.splice(tinymce.inArray(attributesOrder, attrName), 1);\n\t\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Default value\n\t\t\t\t\t\t\t\t\tif (prefix) {\n\t\t\t\t\t\t\t\t\t\t// Default value\n\t\t\t\t\t\t\t\t\t\tif (prefix === '=') {\n\t\t\t\t\t\t\t\t\t\t\telement.attributesDefault = element.attributesDefault || [];\n\t\t\t\t\t\t\t\t\t\t\telement.attributesDefault.push({name: attrName, value: value});\n\t\t\t\t\t\t\t\t\t\t\tattr.defaultValue = value;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t// Forced value\n\t\t\t\t\t\t\t\t\t\tif (prefix === ':') {\n\t\t\t\t\t\t\t\t\t\t\telement.attributesForced = element.attributesForced || [];\n\t\t\t\t\t\t\t\t\t\t\telement.attributesForced.push({name: attrName, value: value});\n\t\t\t\t\t\t\t\t\t\t\tattr.forcedValue = value;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t// Required values\n\t\t\t\t\t\t\t\t\t\tif (prefix === '<')\n\t\t\t\t\t\t\t\t\t\t\tattr.validValues = makeMap(value, '?');\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Check for attribute patterns\n\t\t\t\t\t\t\t\t\tif (hasPatternsRegExp.test(attrName)) {\n\t\t\t\t\t\t\t\t\t\telement.attributePatterns = element.attributePatterns || [];\n\t\t\t\t\t\t\t\t\t\tattr.pattern = patternToRegExp(attrName);\n\t\t\t\t\t\t\t\t\t\telement.attributePatterns.push(attr);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t// Add attribute to order list if it doesn't already exist\n\t\t\t\t\t\t\t\t\t\tif (!attributes[attrName])\n\t\t\t\t\t\t\t\t\t\t\tattributesOrder.push(attrName);\n\n\t\t\t\t\t\t\t\t\t\tattributes[attrName] = attr;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Global rule, store away these for later usage\n\t\t\t\t\t\tif (!globalAttributes && elementName == '@') {\n\t\t\t\t\t\t\tglobalAttributes = attributes;\n\t\t\t\t\t\t\tglobalAttributesOrder = attributesOrder;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Handle substitute elements such as b/strong\n\t\t\t\t\t\tif (outputName) {\n\t\t\t\t\t\t\telement.outputName = elementName;\n\t\t\t\t\t\t\telements[outputName] = element;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Add pattern or exact element\n\t\t\t\t\t\tif (hasPatternsRegExp.test(elementName)) {\n\t\t\t\t\t\t\telement.pattern = patternToRegExp(elementName);\n\t\t\t\t\t\t\tpatternElements.push(element);\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\telements[elementName] = element;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tfunction setValidElements(valid_elements) {\n\t\t\telements = {};\n\t\t\tpatternElements = [];\n\n\t\t\taddValidElements(valid_elements);\n\n\t\t\teach(transitional, function(element, name) {\n\t\t\t\tchildren[name] = element.children;\n\t\t\t});\n\t\t};\n\n\t\t// Adds custom non HTML elements to the schema\n\t\tfunction addCustomElements(custom_elements) {\n\t\t\tvar customElementRegExp = /^(~)?(.+)$/;\n\n\t\t\tif (custom_elements) {\n\t\t\t\teach(split(custom_elements), function(rule) {\n\t\t\t\t\tvar matches = customElementRegExp.exec(rule),\n\t\t\t\t\t\tinline = matches[1] === '~',\n\t\t\t\t\t\tcloneName = inline ? 'span' : 'div',\n\t\t\t\t\t\tname = matches[2];\n\n\t\t\t\t\tchildren[name] = children[cloneName];\n\t\t\t\t\tcustomElementsMap[name] = cloneName;\n\n\t\t\t\t\t// If it's not marked as inline then add it to valid block elements\n\t\t\t\t\tif (!inline)\n\t\t\t\t\t\tblockElementsMap[name] = {};\n\n\t\t\t\t\t// Add custom elements at span/div positions\n\t\t\t\t\teach(children, function(element, child) {\n\t\t\t\t\t\tif (element[cloneName])\n\t\t\t\t\t\t\telement[name] = element[cloneName];\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\t// Adds valid children to the schema object\n\t\tfunction addValidChildren(valid_children) {\n\t\t\tvar childRuleRegExp = /^([+\\-]?)(\\w+)\\[([^\\]]+)\\]$/;\n\n\t\t\tif (valid_children) {\n\t\t\t\teach(split(valid_children), function(rule) {\n\t\t\t\t\tvar matches = childRuleRegExp.exec(rule), parent, prefix;\n\n\t\t\t\t\tif (matches) {\n\t\t\t\t\t\tprefix = matches[1];\n\n\t\t\t\t\t\t// Add/remove items from default\n\t\t\t\t\t\tif (prefix)\n\t\t\t\t\t\t\tparent = children[matches[2]];\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tparent = children[matches[2]] = {'#comment' : {}};\n\n\t\t\t\t\t\tparent = children[matches[2]];\n\n\t\t\t\t\t\teach(split(matches[3], '|'), function(child) {\n\t\t\t\t\t\t\tif (prefix === '-')\n\t\t\t\t\t\t\t\tdelete parent[child];\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tparent[child] = {};\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tfunction getElementRule(name) {\n\t\t\tvar element = elements[name], i;\n\n\t\t\t// Exact match found\n\t\t\tif (element)\n\t\t\t\treturn element;\n\n\t\t\t// No exact match then try the patterns\n\t\t\ti = patternElements.length;\n\t\t\twhile (i--) {\n\t\t\t\telement = patternElements[i];\n\n\t\t\t\tif (element.pattern.test(name))\n\t\t\t\t\treturn element;\n\t\t\t}\n\t\t};\n\n\t\tif (!settings.valid_elements) {\n\t\t\t// No valid elements defined then clone the elements from the transitional spec\n\t\t\teach(transitional, function(element, name) {\n\t\t\t\telements[name] = {\n\t\t\t\t\tattributes : element.attributes,\n\t\t\t\t\tattributesOrder : element.attributesOrder\n\t\t\t\t};\n\n\t\t\t\tchildren[name] = element.children;\n\t\t\t});\n\n\t\t\t// Switch these\n\t\t\teach(split('strong/b,em/i'), function(item) {\n\t\t\t\titem = split(item, '/');\n\t\t\t\telements[item[1]].outputName = item[0];\n\t\t\t});\n\n\t\t\t// Add default alt attribute for images\n\t\t\telements.img.attributesDefault = [{name: 'alt', value: ''}];\n\n\t\t\t// Remove these if they are empty by default\n\t\t\teach(split('ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr'), function(name) {\n\t\t\t\telements[name].removeEmpty = true;\n\t\t\t});\n\n\t\t\t// Padd these by default\n\t\t\teach(split('p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption'), function(name) {\n\t\t\t\telements[name].paddEmpty = true;\n\t\t\t});\n\t\t} else\n\t\t\tsetValidElements(settings.valid_elements);\n\n\t\taddCustomElements(settings.custom_elements);\n\t\taddValidChildren(settings.valid_children);\n\t\taddValidElements(settings.extended_valid_elements);\n\n\t\t// Todo: Remove this when we fix list handling to be valid\n\t\taddValidChildren('+ol[ul|ol],+ul[ul|ol]');\n\n\t\t// If the user didn't allow span only allow internal spans\n\t\tif (!getElementRule('span'))\n\t\t\taddValidElements('span[!data-mce-type|*]');\n\n\t\t// Delete invalid elements\n\t\tif (settings.invalid_elements) {\n\t\t\ttinymce.each(tinymce.explode(settings.invalid_elements), function(item) {\n\t\t\t\tif (elements[item])\n\t\t\t\t\tdelete elements[item];\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Name/value map object with valid parents and children to those parents.\n\t\t *\n\t\t * @example\n\t\t * children = {\n\t\t *    div:{p:{}, h1:{}}\n\t\t * };\n\t\t * @field children\n\t\t * @type {Object}\n\t\t */\n\t\tself.children = children;\n\n\t\t/**\n\t\t * Name/value map object with valid styles for each element.\n\t\t *\n\t\t * @field styles\n\t\t * @type {Object}\n\t\t */\n\t\tself.styles = validStyles;\n\n\t\t/**\n\t\t * Returns a map with boolean attributes.\n\t\t *\n\t\t * @method getBoolAttrs\n\t\t * @return {Object} Name/value lookup map for boolean attributes.\n\t\t */\n\t\tself.getBoolAttrs = function() {\n\t\t\treturn boolAttrMap;\n\t\t};\n\n\t\t/**\n\t\t * Returns a map with block elements.\n\t\t *\n\t\t * @method getBoolAttrs\n\t\t * @return {Object} Name/value lookup map for block elements.\n\t\t */\n\t\tself.getBlockElements = function() {\n\t\t\treturn blockElementsMap;\n\t\t};\n\n\t\t/**\n\t\t * Returns a map with short ended elements such as BR or IMG.\n\t\t *\n\t\t * @method getShortEndedElements\n\t\t * @return {Object} Name/value lookup map for short ended elements.\n\t\t */\n\t\tself.getShortEndedElements = function() {\n\t\t\treturn shortEndedElementsMap;\n\t\t};\n\n\t\t/**\n\t\t * Returns a map with self closing tags such as <li>.\n\t\t *\n\t\t * @method getSelfClosingElements\n\t\t * @return {Object} Name/value lookup map for self closing tags elements.\n\t\t */\n\t\tself.getSelfClosingElements = function() {\n\t\t\treturn selfClosingElementsMap;\n\t\t};\n\n\t\t/**\n\t\t * Returns a map with elements that should be treated as contents regardless if it has text\n\t\t * content in them or not such as TD, VIDEO or IMG.\n\t\t *\n\t\t * @method getNonEmptyElements\n\t\t * @return {Object} Name/value lookup map for non empty elements.\n\t\t */\n\t\tself.getNonEmptyElements = function() {\n\t\t\treturn nonEmptyElementsMap;\n\t\t};\n\n\t\t/**\n\t\t * Returns a map with elements where white space is to be preserved like PRE or SCRIPT.\n\t\t *\n\t\t * @method getWhiteSpaceElements\n\t\t * @return {Object} Name/value lookup map for white space elements.\n\t\t */\n\t\tself.getWhiteSpaceElements = function() {\n\t\t\treturn whiteSpaceElementsMap;\n\t\t};\n\n\t\t/**\n\t\t * Returns true/false if the specified element and it's child is valid or not\n\t\t * according to the schema.\n\t\t *\n\t\t * @method isValidChild\n\t\t * @param {String} name Element name to check for.\n\t\t * @param {String} child Element child to verify.\n\t\t * @return {Boolean} True/false if the element is a valid child of the specified parent.\n\t\t */\n\t\tself.isValidChild = function(name, child) {\n\t\t\tvar parent = children[name];\n\n\t\t\treturn !!(parent && parent[child]);\n\t\t};\n\n\t\t/**\n\t\t * Returns true/false if the specified element is valid or not\n\t\t * according to the schema.\n\t\t *\n\t\t * @method getElementRule\n\t\t * @param {String} name Element name to check for.\n\t\t * @return {Object} Element object or undefined if the element isn't valid.\n\t\t */\n\t\tself.getElementRule = getElementRule;\n\n\t\t/**\n\t\t * Returns an map object of all custom elements.\n\t\t *\n\t\t * @method getCustomElements\n\t\t * @return {Object} Name/value map object of all custom elements.\n\t\t */\n\t\tself.getCustomElements = function() {\n\t\t\treturn customElementsMap;\n\t\t};\n\n\t\t/**\n\t\t * Parses a valid elements string and adds it to the schema. The valid elements format is for example \"element[attr=default|otherattr]\".\n\t\t * Existing rules will be replaced with the ones specified, so this extends the schema.\n\t\t *\n\t\t * @method addValidElements\n\t\t * @param {String} valid_elements String in the valid elements format to be parsed.\n\t\t */\n\t\tself.addValidElements = addValidElements;\n\n\t\t/**\n\t\t * Parses a valid elements string and sets it to the schema. The valid elements format is for example \"element[attr=default|otherattr]\".\n\t\t * Existing rules will be replaced with the ones specified, so this extends the schema.\n\t\t *\n\t\t * @method setValidElements\n\t\t * @param {String} valid_elements String in the valid elements format to be parsed.\n\t\t */\n\t\tself.setValidElements = setValidElements;\n\n\t\t/**\n\t\t * Adds custom non HTML elements to the schema.\n\t\t *\n\t\t * @method addCustomElements\n\t\t * @param {String} custom_elements Comma separated list of custom elements to add.\n\t\t */\n\t\tself.addCustomElements = addCustomElements;\n\n\t\t/**\n\t\t * Parses a valid children string and adds them to the schema structure. The valid children format is for example: \"element[child1|child2]\".\n\t\t *\n\t\t * @method addValidChildren\n\t\t * @param {String} valid_children Valid children elements string to parse\n\t\t */\n\t\tself.addValidChildren = addValidChildren;\n\t};\n\n\t// Expose boolMap and blockElementMap as static properties for usage in DOMUtils\n\ttinymce.html.Schema.boolAttrMap = boolAttrMap;\n\ttinymce.html.Schema.blockElementsMap = blockElementsMap;\n})(tinymce);\n","Magento_Tinymce3/tiny_mce/classes/html/Serializer.js":"/**\n * Serializer.js\n *\n * Copyright 2010, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n\t/**\n\t * This class is used to serialize down the DOM tree into a string using a Writer instance.\n\t *\n\t *\n\t * @example\n\t * new tinymce.html.Serializer().serialize(new tinymce.html.DomParser().parse('<p>text</p>'));\n\t * @class tinymce.html.Serializer\n\t * @version 3.4\n\t */\n\n\t/**\n\t * Constructs a new Serializer instance.\n\t *\n\t * @constructor\n\t * @method Serializer\n\t * @param {Object} settings Name/value settings object.\n\t * @param {tinymce.html.Schema} schema Schema instance to use.\n\t */\n\ttinymce.html.Serializer = function(settings, schema) {\n\t\tvar self = this, writer = new tinymce.html.Writer(settings);\n\n\t\tsettings = settings || {};\n\t\tsettings.validate = \"validate\" in settings ? settings.validate : true;\n\n\t\tself.schema = schema = schema || new tinymce.html.Schema();\n\t\tself.writer = writer;\n\n\t\t/**\n\t\t * Serializes the specified node into a string.\n\t\t *\n\t\t * @example\n\t\t * new tinymce.html.Serializer().serialize(new tinymce.html.DomParser().parse('<p>text</p>'));\n\t\t * @method serialize\n\t\t * @param {tinymce.html.Node} node Node instance to serialize.\n\t\t * @return {String} String with HTML based on DOM tree.\n\t\t */\n\t\tself.serialize = function(node) {\n\t\t\tvar handlers, validate;\n\n\t\t\tvalidate = settings.validate;\n\n\t\t\thandlers = {\n\t\t\t\t// #text\n\t\t\t\t3: function(node, raw) {\n\t\t\t\t\twriter.text(node.value, node.raw);\n\t\t\t\t},\n\n\t\t\t\t// #comment\n\t\t\t\t8: function(node) {\n\t\t\t\t\twriter.comment(node.value);\n\t\t\t\t},\n\n\t\t\t\t// Processing instruction\n\t\t\t\t7: function(node) {\n\t\t\t\t\twriter.pi(node.name, node.value);\n\t\t\t\t},\n\n\t\t\t\t// Doctype\n\t\t\t\t10: function(node) {\n\t\t\t\t\twriter.doctype(node.value);\n\t\t\t\t},\n\n\t\t\t\t// CDATA\n\t\t\t\t4: function(node) {\n\t\t\t\t\twriter.cdata(node.value);\n\t\t\t\t},\n\n \t\t\t\t// Document fragment\n\t\t\t\t11: function(node) {\n\t\t\t\t\tif ((node = node.firstChild)) {\n\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\twalk(node);\n\t\t\t\t\t\t} while (node = node.next);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\twriter.reset();\n\n\t\t\tfunction walk(node) {\n\t\t\t\tvar handler = handlers[node.type], name, isEmpty, attrs, attrName, attrValue, sortedAttrs, i, l, elementRule;\n\n\t\t\t\tif (!handler) {\n\t\t\t\t\tname = node.name;\n\t\t\t\t\tisEmpty = node.shortEnded;\n\t\t\t\t\tattrs = node.attributes;\n\n\t\t\t\t\t// Sort attributes\n\t\t\t\t\tif (validate && attrs && attrs.length > 1) {\n\t\t\t\t\t\tsortedAttrs = [];\n\t\t\t\t\t\tsortedAttrs.map = {};\n\n\t\t\t\t\t\telementRule = schema.getElementRule(node.name);\n\t\t\t\t\t\tfor (i = 0, l = elementRule.attributesOrder.length; i < l; i++) {\n\t\t\t\t\t\t\tattrName = elementRule.attributesOrder[i];\n\n\t\t\t\t\t\t\tif (attrName in attrs.map) {\n\t\t\t\t\t\t\t\tattrValue = attrs.map[attrName];\n\t\t\t\t\t\t\t\tsortedAttrs.map[attrName] = attrValue;\n\t\t\t\t\t\t\t\tsortedAttrs.push({name: attrName, value: attrValue});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (i = 0, l = attrs.length; i < l; i++) {\n\t\t\t\t\t\t\tattrName = attrs[i].name;\n\n\t\t\t\t\t\t\tif (!(attrName in sortedAttrs.map)) {\n\t\t\t\t\t\t\t\tattrValue = attrs.map[attrName];\n\t\t\t\t\t\t\t\tsortedAttrs.map[attrName] = attrValue;\n\t\t\t\t\t\t\t\tsortedAttrs.push({name: attrName, value: attrValue});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tattrs = sortedAttrs;\n\t\t\t\t\t}\n\n\t\t\t\t\twriter.start(node.name, attrs, isEmpty);\n\n\t\t\t\t\tif (!isEmpty) {\n\t\t\t\t\t\tif ((node = node.firstChild)) {\n\t\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\t\twalk(node);\n\t\t\t\t\t\t\t} while (node = node.next);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\twriter.end(name);\n\t\t\t\t\t}\n\t\t\t\t} else\n\t\t\t\t\thandler(node);\n\t\t\t}\n\n\t\t\t// Serialize element and treat all non elements as fragments\n\t\t\tif (node.type == 1 && !settings.inner)\n\t\t\t\twalk(node);\n\t\t\telse\n\t\t\t\thandlers[11](node);\n\n\t\t\treturn writer.getContent();\n\t\t};\n\t}\n})(tinymce);\n","Magento_Tinymce3/tiny_mce/classes/html/Node.js":"/**\n * Node.js\n *\n * Copyright 2010, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n\tvar whiteSpaceRegExp = /^[ \\t\\r\\n]*$/, typeLookup = {\n\t\t'#text' : 3,\n\t\t'#comment' : 8,\n\t\t'#cdata' : 4,\n\t\t'#pi' : 7,\n\t\t'#doctype' : 10,\n\t\t'#document-fragment' : 11\n\t};\n\n\t// Walks the tree left/right\n\tfunction walk(node, root_node, prev) {\n\t\tvar sibling, parent, startName = prev ? 'lastChild' : 'firstChild', siblingName = prev ? 'prev' : 'next';\n\n\t\t// Walk into nodes if it has a start\n\t\tif (node[startName])\n\t\t\treturn node[startName];\n\n\t\t// Return the sibling if it has one\n\t\tif (node !== root_node) {\n\t\t\tsibling = node[siblingName];\n\n\t\t\tif (sibling)\n\t\t\t\treturn sibling;\n\n\t\t\t// Walk up the parents to look for siblings\n\t\t\tfor (parent = node.parent; parent && parent !== root_node; parent = parent.parent) {\n\t\t\t\tsibling = parent[siblingName];\n\n\t\t\t\tif (sibling)\n\t\t\t\t\treturn sibling;\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * This class is a minimalistic implementation of a DOM like node used by the DomParser class.\n\t *\n\t * @example\n\t * var node = new tinymce.html.Node('strong', 1);\n\t * someRoot.append(node);\n\t *\n\t * @class tinymce.html.Node\n\t * @version 3.4\n\t */\n\n\t/**\n\t * Constructs a new Node instance.\n\t *\n\t * @constructor\n\t * @method Node\n\t * @param {String} name Name of the node type.\n\t * @param {Number} type Numeric type representing the node.\n\t */\n\tfunction Node(name, type) {\n\t\tthis.name = name;\n\t\tthis.type = type;\n\n\t\tif (type === 1) {\n\t\t\tthis.attributes = [];\n\t\t\tthis.attributes.map = {};\n\t\t}\n\t}\n\n\ttinymce.extend(Node.prototype, {\n\t\t/**\n\t\t * Replaces the current node with the specified one.\n\t\t *\n\t\t * @example\n\t\t * someNode.replace(someNewNode);\n\t\t *\n\t\t * @method replace\n\t\t * @param {tinymce.html.Node} node Node to replace the current node with.\n\t\t * @return {tinymce.html.Node} The old node that got replaced.\n\t\t */\n\t\treplace : function(node) {\n\t\t\tvar self = this;\n\n\t\t\tif (node.parent)\n\t\t\t\tnode.remove();\n\n\t\t\tself.insert(node, self);\n\t\t\tself.remove();\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\n\t\t * Gets/sets or removes an attribute by name.\n\t\t *\n\t\t * @example\n\t\t * someNode.attr(\"name\", \"value\"); // Sets an attribute\n\t\t * console.log(someNode.attr(\"name\")); // Gets an attribute\n\t\t * someNode.attr(\"name\", null); // Removes an attribute\n\t\t *\n\t\t * @method attr\n\t\t * @param {String} name Attribute name to set or get.\n\t\t * @param {String} value Optional value to set.\n\t\t * @return {String/tinymce.html.Node} String or undefined on a get operation or the current node on a set operation.\n\t\t */\n\t\tattr : function(name, value) {\n\t\t\tvar self = this, attrs, i, undef;\n\n\t\t\tif (typeof name !== \"string\") {\n\t\t\t\tfor (i in name)\n\t\t\t\t\tself.attr(i, name[i]);\n\n\t\t\t\treturn self;\n\t\t\t}\n\n\t\t\tif (attrs = self.attributes) {\n\t\t\t\tif (value !== undef) {\n\t\t\t\t\t// Remove attribute\n\t\t\t\t\tif (value === null) {\n\t\t\t\t\t\tif (name in attrs.map) {\n\t\t\t\t\t\t\tdelete attrs.map[name];\n\n\t\t\t\t\t\t\ti = attrs.length;\n\t\t\t\t\t\t\twhile (i--) {\n\t\t\t\t\t\t\t\tif (attrs[i].name === name) {\n\t\t\t\t\t\t\t\t\tattrs = attrs.splice(i, 1);\n\t\t\t\t\t\t\t\t\treturn self;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn self;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Set attribute\n\t\t\t\t\tif (name in attrs.map) {\n\t\t\t\t\t\t// Set attribute\n\t\t\t\t\t\ti = attrs.length;\n\t\t\t\t\t\twhile (i--) {\n\t\t\t\t\t\t\tif (attrs[i].name === name) {\n\t\t\t\t\t\t\t\tattrs[i].value = value;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else\n\t\t\t\t\t\tattrs.push({name: name, value: value});\n\n\t\t\t\t\tattrs.map[name] = value;\n\n\t\t\t\t\treturn self;\n\t\t\t\t} else {\n\t\t\t\t\treturn attrs.map[name];\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Does a shallow clones the node into a new node. It will also exclude id attributes since\n\t\t * there should only be one id per document.\n\t\t *\n\t\t * @example\n\t\t * var clonedNode = node.clone();\n\t\t *\n\t\t * @method clone\n\t\t * @return {tinymce.html.Node} New copy of the original node.\n\t\t */\n\t\tclone : function() {\n\t\t\tvar self = this, clone = new Node(self.name, self.type), i, l, selfAttrs, selfAttr, cloneAttrs;\n\n\t\t\t// Clone element attributes\n\t\t\tif (selfAttrs = self.attributes) {\n\t\t\t\tcloneAttrs = [];\n\t\t\t\tcloneAttrs.map = {};\n\n\t\t\t\tfor (i = 0, l = selfAttrs.length; i < l; i++) {\n\t\t\t\t\tselfAttr = selfAttrs[i];\n\n\t\t\t\t\t// Clone everything except id\n\t\t\t\t\tif (selfAttr.name !== 'id') {\n\t\t\t\t\t\tcloneAttrs[cloneAttrs.length] = {name: selfAttr.name, value: selfAttr.value};\n\t\t\t\t\t\tcloneAttrs.map[selfAttr.name] = selfAttr.value;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tclone.attributes = cloneAttrs;\n\t\t\t}\n\n\t\t\tclone.value = self.value;\n\t\t\tclone.shortEnded = self.shortEnded;\n\n\t\t\treturn clone;\n\t\t},\n\n\t\t/**\n\t\t * Wraps the node in another node.\n\t\t *\n\t\t * @example\n\t\t * node.wrap(wrapperNode);\n\t\t *\n\t\t * @method wrap\n\t\t */\n\t\twrap : function(wrapper) {\n\t\t\tvar self = this;\n\n\t\t\tself.parent.insert(wrapper, self);\n\t\t\twrapper.append(self);\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\n\t\t * Unwraps the node in other words it removes the node but keeps the children.\n\t\t *\n\t\t * @example\n\t\t * node.unwrap();\n\t\t *\n\t\t * @method unwrap\n\t\t */\n\t\tunwrap : function() {\n\t\t\tvar self = this, node, next;\n\n\t\t\tfor (node = self.firstChild; node; ) {\n\t\t\t\tnext = node.next;\n\t\t\t\tself.insert(node, self, true);\n\t\t\t\tnode = next;\n\t\t\t}\n\n\t\t\tself.remove();\n\t\t},\n\n\t\t/**\n\t\t * Removes the node from it's parent.\n\t\t *\n\t\t * @example\n\t\t * node.remove();\n\t\t *\n\t\t * @method remove\n\t\t * @return {tinymce.html.Node} Current node that got removed.\n\t\t */\n\t\tremove : function() {\n\t\t\tvar self = this, parent = self.parent, next = self.next, prev = self.prev;\n\n\t\t\tif (parent) {\n\t\t\t\tif (parent.firstChild === self) {\n\t\t\t\t\tparent.firstChild = next;\n\n\t\t\t\t\tif (next)\n\t\t\t\t\t\tnext.prev = null;\n\t\t\t\t} else {\n\t\t\t\t\tprev.next = next;\n\t\t\t\t}\n\n\t\t\t\tif (parent.lastChild === self) {\n\t\t\t\t\tparent.lastChild = prev;\n\n\t\t\t\t\tif (prev)\n\t\t\t\t\t\tprev.next = null;\n\t\t\t\t} else {\n\t\t\t\t\tnext.prev = prev;\n\t\t\t\t}\n\n\t\t\t\tself.parent = self.next = self.prev = null;\n\t\t\t}\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\n\t\t * Appends a new node as a child of the current node.\n\t\t *\n\t\t * @example\n\t\t * node.append(someNode);\n\t\t *\n\t\t * @method append\n\t\t * @param {tinymce.html.Node} node Node to append as a child of the current one.\n\t\t * @return {tinymce.html.Node} The node that got appended.\n\t\t */\n\t\tappend : function(node) {\n\t\t\tvar self = this, last;\n\n\t\t\tif (node.parent)\n\t\t\t\tnode.remove();\n\n\t\t\tlast = self.lastChild;\n\t\t\tif (last) {\n\t\t\t\tlast.next = node;\n\t\t\t\tnode.prev = last;\n\t\t\t\tself.lastChild = node;\n\t\t\t} else\n\t\t\t\tself.lastChild = self.firstChild = node;\n\n\t\t\tnode.parent = self;\n\n\t\t\treturn node;\n\t\t},\n\n\t\t/**\n\t\t * Inserts a node at a specific position as a child of the current node.\n\t\t *\n\t\t * @example\n\t\t * parentNode.insert(newChildNode, oldChildNode);\n\t\t *\n\t\t * @method insert\n\t\t * @param {tinymce.html.Node} node Node to insert as a child of the current node.\n\t\t * @param {tinymce.html.Node} ref_node Reference node to set node before/after.\n\t\t * @param {Boolean} before Optional state to insert the node before the reference node.\n\t\t * @return {tinymce.html.Node} The node that got inserted.\n\t\t */\n\t\tinsert : function(node, ref_node, before) {\n\t\t\tvar parent;\n\n\t\t\tif (node.parent)\n\t\t\t\tnode.remove();\n\n\t\t\tparent = ref_node.parent || this;\n\n\t\t\tif (before) {\n\t\t\t\tif (ref_node === parent.firstChild)\n\t\t\t\t\tparent.firstChild = node;\n\t\t\t\telse\n\t\t\t\t\tref_node.prev.next = node;\n\n\t\t\t\tnode.prev = ref_node.prev;\n\t\t\t\tnode.next = ref_node;\n\t\t\t\tref_node.prev = node;\n\t\t\t} else {\n\t\t\t\tif (ref_node === parent.lastChild)\n\t\t\t\t\tparent.lastChild = node;\n\t\t\t\telse\n\t\t\t\t\tref_node.next.prev = node;\n\n\t\t\t\tnode.next = ref_node.next;\n\t\t\t\tnode.prev = ref_node;\n\t\t\t\tref_node.next = node;\n\t\t\t}\n\n\t\t\tnode.parent = parent;\n\n\t\t\treturn node;\n\t\t},\n\n\t\t/**\n\t\t * Get all children by name.\n\t\t *\n\t\t * @method getAll\n\t\t * @param {String} name Name of the child nodes to collect.\n\t\t * @return {Array} Array with child nodes matchin the specified name.\n\t\t */\n\t\tgetAll : function(name) {\n\t\t\tvar self = this, node, collection = [];\n\n\t\t\tfor (node = self.firstChild; node; node = walk(node, self)) {\n\t\t\t\tif (node.name === name)\n\t\t\t\t\tcollection.push(node);\n\t\t\t}\n\n\t\t\treturn collection;\n\t\t},\n\n\t\t/**\n\t\t * Removes all children of the current node.\n\t\t *\n\t\t * @method empty\n\t\t * @return {tinymce.html.Node} The current node that got cleared.\n\t\t */\n\t\tempty : function() {\n\t\t\tvar self = this, nodes, i, node;\n\n\t\t\t// Remove all children\n\t\t\tif (self.firstChild) {\n\t\t\t\tnodes = [];\n\n\t\t\t\t// Collect the children\n\t\t\t\tfor (node = self.firstChild; node; node = walk(node, self))\n\t\t\t\t\tnodes.push(node);\n\n\t\t\t\t// Remove the children\n\t\t\t\ti = nodes.length;\n\t\t\t\twhile (i--) {\n\t\t\t\t\tnode = nodes[i];\n\t\t\t\t\tnode.parent = node.firstChild = node.lastChild = node.next = node.prev = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tself.firstChild = self.lastChild = null;\n\n\t\t\treturn self;\n\t\t},\n\n\t\t/**\n\t\t * Returns true/false if the node is to be considered empty or not.\n\t\t *\n\t\t * @example\n\t\t * node.isEmpty({img : true});\n\t\t * @method isEmpty\n\t\t * @param {Object} elements Name/value object with elements that are automatically treated as non empty elements.\n\t\t * @return {Boolean} true/false if the node is empty or not.\n\t\t */\n\t\tisEmpty : function(elements) {\n\t\t\tvar self = this, node = self.firstChild, i, name;\n\n\t\t\tif (node) {\n\t\t\t\tdo {\n\t\t\t\t\tif (node.type === 1) {\n\t\t\t\t\t\t// Ignore bogus elements\n\t\t\t\t\t\tif (node.attributes.map['data-mce-bogus'])\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\t// Keep empty elements like <img />\n\t\t\t\t\t\tif (elements[node.name])\n\t\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t\t// Keep elements with data attributes or name attribute like <a name=\"1\"></a>\n\t\t\t\t\t\ti = node.attributes.length;\n\t\t\t\t\t\twhile (i--) {\n\t\t\t\t\t\t\tname = node.attributes[i].name;\n\t\t\t\t\t\t\tif (name === \"name\" || name.indexOf('data-') === 0)\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Keep non whitespace text nodes\n\t\t\t\t\tif ((node.type === 3 && !whiteSpaceRegExp.test(node.value)))\n\t\t\t\t\t\treturn false;\n\t\t\t\t} while (node = walk(node, self));\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\t/**\n\t\t * Walks to the next or previous node and returns that node or null if it wasn't found.\n\t\t *\n\t\t * @method walk\n\t\t * @param {Boolean} prev Optional previous node state defaults to false.\n\t\t * @return {tinymce.html.Node} Node that is next to or previous of the current node.\n\t\t */\n\t\twalk : function(prev) {\n\t\t\treturn walk(this, null, prev);\n\t\t}\n\t});\n\n\ttinymce.extend(Node, {\n\t\t/**\n\t\t * Creates a node of a specific type.\n\t\t *\n\t\t * @static\n\t\t * @method create\n\t\t * @param {String} name Name of the node type to create for example \"b\" or \"#text\".\n\t\t * @param {Object} attrs Name/value collection of attributes that will be applied to elements.\n\t\t */\n\t\tcreate : function(name, attrs) {\n\t\t\tvar node, attrName;\n\n\t\t\t// Create node\n\t\t\tnode = new Node(name, typeLookup[name] || 1);\n\n\t\t\t// Add attributes if needed\n\t\t\tif (attrs) {\n\t\t\t\tfor (attrName in attrs)\n\t\t\t\t\tnode.attr(attrName, attrs[attrName]);\n\t\t\t}\n\n\t\t\treturn node;\n\t\t}\n\t});\n\n\ttinymce.html.Node = Node;\n})(tinymce);\n","Magento_Tinymce3/tiny_mce/classes/firebug/firebug-lite.js":"var firebug = {\n  version:[1.23,20090309],\n  el:{}, \n  env:{ \n    \"cache\":{},\n    \"extConsole\":null,\n    \"css\":\"http://getfirebug.com/releases/lite/1.2/firebug-lite.css\", \n    \"debug\":true,\n    \"detectFirebug\":true,\n    \"dIndex\":\"console\", \n    \"height\":295,\n    \"hideDOMFunctions\":false,\n    \"init\":false, \n    \"isPopup\":false,\n    \"liteFilename\":\"firebug-lite.js\",\n    \"minimized\":false,\n    \"openInPopup\": false,\n    \"override\":true,\n    \"ml\":false,\n    \"popupWin\":null,\n    \"showIconWhenHidden\":true,\n    \"targetWindow\":undefined,\n    \"popupTop\":1,\n    \"popupLeft\":1,\n    \"popupWidth\":undefined,\n    \"popupHeight\":undefined\n  },\n  initConsole:function(){\n    /* \n     * initialize the console - user defined values are not available within this method because FBLite is not yet initialized\n     */\n    var command;\n    try{\n      if((!window.console || (window.console && !window.console.firebug)) || (firebug.env.override && !(/Firefox\\/3/i.test(navigator.userAgent)))){\n        window.console = { \"provider\":\"Firebug Lite\" };\n\n        for(command in firebug.d.console.cmd){\n          window.console[command] = firebug.lib.util.Curry(firebug.d.console.run,window,command);\n        };\n      }\n      /*window.onerror = function(_message,_file,_line){\n        firebug.d.console.run('error',firebug.lib.util.String.format('{0} ({1},{2})',_message,firebug.getFileName(_file),_line));\n      };*/\n      } catch(e){}\n  },\n  overrideConsole:function(){\n    with (firebug){\n      env.override=true;\n      try{\n        env.extConsole=window.console;\n      } catch(e){}\n      initConsole();\n    }\n  },\n  restoreConsole:function(){\n    with(firebug){\n      if(env.extConsole){\n        env.override=false;\n        try{\n          window.console=env.extConsole;\n        } catch(e){}\n        env.extConsole=null;\n      }\n    }\n  },\n  init:function(_css){\n    var iconTitle = \"Click here or press F12, (CTRL|CMD)+SHIFT+L or SHIFT+ENTER to show Firebug Lite. CTRL|CMD click this icon to hide it.\";\n  \n    with(firebug){\n      if(document.getElementsByTagName('html')[0].attributes.getNamedItem('debug')){\n        env.debug = document.getElementsByTagName('html')[0].attributes.getNamedItem('debug').nodeValue !== \"false\";\n      }\n            \n      if(env.isPopup) {\n        env.openInPopup = false;\n        env.targetWindow = window.opener;\n        env.popupWidth = window.opener.firebug.env.popupWidth || window.opener.firebug.lib.util.GetViewport().width;\n        env.popupHeight = window.opener.firebug.env.popupHeight || window.opener.firebug.lib.util.GetViewport().height;\n      } else {\n        env.targetWindow = window;\n        env.popupWidth = env.popupWidth || lib.util.GetViewport().width;\n        env.popupHeight = env.popupHeight || lib.util.GetViewport().height;\n      }\n\n      settings.readCookie();\n      \n      if(env.init || (env.detectFirebug && window.console && window.console.firebug)) {\n        return;\n      }\n\n      document.getElementsByTagName(\"head\")[0].appendChild(\n        new lib.element(\"link\").attribute.set(\"rel\",\"stylesheet\").attribute.set(\"type\",\"text/css\").attribute.set(\"href\",env.css).element\n      );\n\n      if(env.override){\n        overrideConsole();\n      }\n      \n      /* \n       * Firebug Icon\n       */\n      el.firebugIcon = new lib.element(\"div\").attribute.set(\"id\",\"firebugIconDiv\").attribute.set(\"title\",iconTitle).attribute.set(\"alt\",iconTitle).event.addListener(\"mousedown\",win.iconClicked).insert(document.body);\n      \n      /* \n       * main interface\n       */\n      el.content = {};\n      el.mainiframe = new lib.element(\"IFRAME\").attribute.set(\"id\",\"FirebugIFrame\").environment.addStyle({ \"display\":\"none\", \"width\":lib.util.GetViewport().width+\"px\" }).insert(document.body);\n      el.main = new lib.element(\"DIV\").attribute.set(\"id\",\"Firebug\").environment.addStyle({ \"display\":\"none\", \"width\":lib.util.GetViewport().width+\"px\" }).insert(document.body);\n      if(!env.isPopup){\n        el.resizer = new lib.element(\"DIV\").attribute.addClass(\"Resizer\").event.addListener(\"mousedown\",win.resizer.start).insert(el.main);\n      }\n      el.header = new lib.element(\"DIV\").attribute.addClass(\"Header\").insert(el.main);\n      el.left = {};\n      el.left.container = new lib.element(\"DIV\").attribute.addClass(\"Left\").insert(el.main);\n      el.right = {};\n      el.right.container = new lib.element(\"DIV\").attribute.addClass(\"Right\").insert(el.main);\n      el.main.child.add(new lib.element(\"DIV\").attribute.addClass('Clear'));\n\n      /*\n       * buttons\n       */\n      el.button = {};\n      el.button.container = new lib.element(\"DIV\").attribute.addClass(\"ButtonContainer\").insert(el.header);\n      el.button.logo = new lib.element(\"A\").attribute.set(\"title\",\"Firebug Lite\").attribute.set(\"target\",\"_blank\").attribute.set(\"href\",\"http://getfirebug.com/lite.html\").update(\"&nbsp;\").attribute.addClass(\"Button Logo\").insert(el.button.container);\n      el.button.inspect = new lib.element(\"A\").attribute.addClass(\"Button\").event.addListener(\"click\",env.targetWindow.firebug.d.inspector.toggle).update(\"Inspect\").insert(el.button.container);\n      el.button.dock = new lib.element(\"A\").attribute.addClass(\"Button Dock\").event.addListener(\"click\", win.dock).insert(el.button.container);\n      el.button.newWindow = new lib.element(\"A\").attribute.addClass(\"Button NewWindow\").event.addListener(\"click\", win.newWindow).insert(el.button.container);\n\n      if(!env.isPopup){\n        el.button.maximize = new lib.element(\"A\").attribute.addClass(\"Button Maximize\").event.addListener(\"click\",win.maximize).insert(el.button.container);\n        el.button.minimize = new lib.element(\"A\").attribute.addClass(\"Button Minimize\").event.addListener(\"click\",win.minimize).insert(el.button.container);\n        el.button.close = new lib.element(\"A\").attribute.addClass(\"Button Close\").event.addListener(\"click\",win.hide).insert(el.button.container);\n      }\n\n      if(lib.env.ie||lib.env.webkit){\n        el.button.container.environment.addStyle({ \"paddingTop\":\"12px\" });\n      }\n\n      /*\n       * navigation\n       */\n      el.nav = {};\n      el.nav.container = new lib.element(\"DIV\").attribute.addClass(\"Nav\").insert(el.left.container);\n      el.nav.console = new lib.element(\"A\").attribute.addClass(\"Tab Selected\").event.addListener(\"click\",lib.util.Curry(d.navigate,window,\"console\")).update(\"Console\").insert(el.nav.container);\n      el.nav.html = new lib.element(\"A\").attribute.addClass(\"Tab\").update(\"HTML\").event.addListener(\"click\",lib.util.Curry(d.navigate,window,\"html\")).insert(el.nav.container);\n      el.nav.css = new lib.element(\"A\").attribute.addClass(\"Tab\").update(\"CSS\").event.addListener(\"click\",lib.util.Curry(d.navigate,window,\"css\")).insert(el.nav.container);\n      if(!env.isPopup){\n        el.nav.scripts = new lib.element(\"A\").attribute.addClass(\"Tab\").update(\"Script\").event.addListener(\"click\",lib.util.Curry(d.navigate,window,\"scripts\")).insert(el.nav.container);\n      }\n      el.nav.dom = new lib.element(\"A\").attribute.addClass(\"Tab\").update(\"DOM\").event.addListener(\"click\",lib.util.Curry(d.navigate,env.targetWindow,\"dom\")).insert(el.nav.container);\n      el.nav.xhr = new lib.element(\"A\").attribute.addClass(\"Tab\").update(\"XHR\").event.addListener(\"click\",lib.util.Curry(d.navigate,window,\"xhr\")).insert(el.nav.container);\n      el.nav.optionsdiv = new lib.element(\"DIV\").attribute.addClass(\"Settings\").insert(el.nav.container);\n      el.nav.options = new lib.element(\"A\").attribute.addClass(\"Tab\").update(\"Options&nbsp;&or;\").event.addListener(\"click\", settings.toggle).insert(el.nav.optionsdiv);\n      \n      /*\n       * inspector\n       */\n      el.borderInspector = new lib.element(\"DIV\").attribute.set(\"id\",\"FirebugBorderInspector\").event.addListener(\"click\",listen.inspector).insert(document.body);\n      el.bgInspector = new lib.element(\"DIV\").attribute.set(\"id\",\"FirebugBGInspector\").insert(document.body);\n\n      /*\n       * console\n       */\n      el.left.console = {};\n      el.left.console.container = new lib.element(\"DIV\").attribute.addClass(\"Console\").insert(el.left.container);\n      el.left.console.mlButton = new lib.element(\"A\").attribute.addClass(\"MLButton\").event.addListener(\"click\",d.console.toggleML).insert(el.left.console.container);\n      el.left.console.monitor = new lib.element(\"DIV\").insert(\n          new lib.element(\"DIV\").attribute.addClass(\"Monitor\").insert(el.left.console.container)\n      );\n      el.left.console.container.child.add(\n          new lib.element(\"DIV\").attribute.addClass(\"InputArrow\").update(\">>>\")\n      );\n      el.left.console.input = new lib.element(\"INPUT\").attribute.set(\"type\",\"text\").attribute.addClass(\"Input\").event.addListener(\"keydown\",listen.consoleTextbox).insert(\n          new lib.element(\"DIV\").attribute.addClass(\"InputContainer\").insert(el.left.console.container)\n      );\n\n      el.right.console = {};\n      el.right.console.container = new lib.element(\"DIV\").attribute.addClass(\"Console Container\").insert(el.right.container);\n      el.right.console.mlButton = new lib.element(\"A\").attribute.addClass(\"MLButton CloseML\").event.addListener(\"click\",d.console.toggleML).insert(el.right.console.container);\n      el.right.console.input = new lib.element(\"TEXTAREA\").attribute.addClass(\"Input\").insert(el.right.console.container);\n      el.right.console.input.event.addListener(\"keydown\",lib.util.Curry(tab,window,el.right.console.input.element));\n      el.right.console.run = new lib.element(\"A\").attribute.addClass(\"Button\").event.addListener(\"click\",listen.runMultiline).update(\"Run\").insert(el.right.console.container);\n      el.right.console.clear = new lib.element(\"A\").attribute.addClass(\"Button\").event.addListener(\"click\",lib.util.Curry(d.clean,window,el.right.console.input)).update(\"Clear\").insert(el.right.console.container);\n\n      el.button.console = {};\n      el.button.console.container = new lib.element(\"DIV\").attribute.addClass(\"ButtonSet\").insert(el.button.container);\n      el.button.console.clear = new lib.element(\"A\").attribute.addClass(\"Button\").event.addListener(\"click\",d.console.clear).update(\"Clear\").insert(el.button.console.container);\n\n      /*\n       * html\n       */\n\n      el.left.html = {};\n      el.left.html.container = new lib.element(\"DIV\").attribute.addClass(\"HTML\").insert(el.left.container);\n\n      el.right.html = {};\n      el.right.html.container = new lib.element(\"DIV\").attribute.addClass(\"HTML Container\").insert(el.right.container);\n\n      el.right.html.nav = {};\n      el.right.html.nav.container = new lib.element(\"DIV\").attribute.addClass(\"Nav\").insert(el.right.html.container);\n      el.right.html.nav.computedStyle = new lib.element(\"A\").attribute.addClass(\"Tab Selected\").event.addListener(\"click\",lib.util.Curry(d.html.navigate,firebug,\"computedStyle\")).update(\"Computed Style\").insert(el.right.html.nav.container);\n      el.right.html.nav.dom = new lib.element(\"A\").attribute.addClass(\"Tab\").event.addListener(\"click\",lib.util.Curry(d.html.navigate,firebug,\"dom\")).update(\"DOM\").insert(el.right.html.nav.container);\n\n      el.right.html.content = new lib.element(\"DIV\").attribute.addClass(\"Content\").insert(el.right.html.container);\n\n      el.button.html = {};\n      el.button.html.container = new lib.element(\"DIV\").attribute.addClass(\"ButtonSet HTML\").insert(el.button.container);\n\n      /*\n       * css\n       */\n\n      el.left.css = {};\n      el.left.css.container = new lib.element(\"DIV\").attribute.addClass(\"CSS\").insert(el.left.container);\n\n      el.right.css = {};\n      el.right.css.container = new lib.element(\"DIV\").attribute.addClass(\"CSS Container\").insert(el.right.container);\n\n      el.right.css.nav = {};\n      el.right.css.nav.container = new lib.element(\"DIV\").attribute.addClass(\"Nav\").insert(el.right.css.container);\n      el.right.css.nav.runCSS = new lib.element(\"A\").attribute.addClass(\"Tab Selected\").update(\"Run CSS\").insert(el.right.css.nav.container);\n\n      el.right.css.mlButton = new lib.element(\"A\").attribute.addClass(\"MLButton CloseML\").event.addListener(\"click\",d.console.toggleML).insert(el.right.css.container);\n      el.right.css.input = new lib.element(\"TEXTAREA\").attribute.addClass(\"Input\").insert(el.right.css.container);\n      el.right.css.input.event.addListener(\"keydown\",lib.util.Curry(firebug.tab,window,el.right.css.input.element));\n      el.right.css.run = new lib.element(\"A\").attribute.addClass(\"Button\").event.addListener(\"click\",listen.runCSS).update(\"Run\").insert(el.right.css.container);\n      el.right.css.clear = new lib.element(\"A\").attribute.addClass(\"Button\").event.addListener(\"click\",lib.util.Curry(d.clean,window,el.right.css.input)).update(\"Clear\").insert(el.right.css.container);\n\n      el.button.css = {};\n      el.button.css.container = new lib.element(\"DIV\").attribute.addClass(\"ButtonSet CSS\").insert(el.button.container);\n      el.button.css.selectbox = new lib.element(\"SELECT\").event.addListener(\"change\",listen.cssSelectbox).insert(el.button.css.container);\n\n      /*\n       * scripts\n       */\n\n      el.left.scripts = {};\n      el.left.scripts.container = new lib.element(\"DIV\").attribute.addClass(\"Scripts\").insert(el.left.container);\n\n      el.right.scripts = {};\n      el.right.scripts.container = new lib.element(\"DIV\").attribute.addClass(\"Scripts Container\").insert(el.right.container);\n\n      el.button.scripts = {};\n      el.button.scripts.container = new lib.element(\"DIV\").attribute.addClass(\"ButtonSet Scripts\").insert(el.button.container);\n      el.button.scripts.selectbox = new lib.element(\"SELECT\").event.addListener(\"change\",listen.scriptsSelectbox).insert(el.button.scripts.container);\n      el.button.scripts.lineNumbers = new lib.element(\"A\").attribute.addClass(\"Button\").event.addListener(\"click\",d.scripts.toggleLineNumbers).update(\"Show Line Numbers\").insert(el.button.scripts.container);\n\n      /*\n       * dom\n       */\n\n      el.left.dom = {};\n      el.left.dom.container = new lib.element(\"DIV\").attribute.addClass(\"DOM\").insert(el.left.container);\n\n      el.right.dom = {};\n      el.right.dom.container = new lib.element(\"DIV\").attribute.addClass(\"DOM Container\").insert(el.right.container);\n\n      el.button.dom = {};\n      el.button.dom.container = new lib.element(\"DIV\").attribute.addClass(\"ButtonSet DOM\").insert(el.button.container);\n      el.button.dom.label = new lib.element(\"LABEL\").update(\"Object Path:\").insert(el.button.dom.container);\n      el.button.dom.textbox = new lib.element(\"INPUT\").event.addListener(\"keydown\",listen.domTextbox).update(env.isPopup?\"window.opener\":\"window\").insert(el.button.dom.container);\n\n      /*\n       * str\n       */\n      el.left.str = {};\n      el.left.str.container = new lib.element(\"DIV\").attribute.addClass(\"STR\").insert(el.left.container);\n\n      el.right.str = {};\n      el.right.str.container = new lib.element(\"DIV\").attribute.addClass(\"STR\").insert(el.left.container);\n\n      el.button.str = {};\n      el.button.str.container = new lib.element(\"DIV\").attribute.addClass(\"ButtonSet XHR\").insert(el.button.container);\n      el.button.str.watch = new lib.element(\"A\").attribute.addClass(\"Button\").event.addListener(\"click\",lib.util.Curry(d.navigate,window,\"xhr\")).update(\"Back\").insert(el.button.str.container);\n\n      /*\n       * xhr\n       */\n      el.left.xhr = {};\n      el.left.xhr.container = new lib.element(\"DIV\").attribute.addClass(\"XHR\").insert(el.left.container);\n\n      el.right.xhr = {};\n      el.right.xhr.container = new lib.element(\"DIV\").attribute.addClass(\"XHR\").insert(el.left.container);\n\n\n      el.button.xhr = {};\n      el.button.xhr.container = new lib.element(\"DIV\").attribute.addClass(\"ButtonSet XHR\").insert(el.button.container);\n      el.button.xhr.label = new lib.element(\"LABEL\").update(\"XHR Path:\").insert(el.button.xhr.container);\n      el.button.xhr.textbox = new lib.element(\"INPUT\").event.addListener(\"keydown\",listen.xhrTextbox).insert(el.button.xhr.container);\n      el.button.xhr.watch = new lib.element(\"A\").attribute.addClass(\"Button\").event.addListener(\"click\",listen.addXhrObject).update(\"Watch\").insert(el.button.xhr.container);\n\n      /*\n       * settings\n       */\n      el.settings = {};\n      el.settings.container = new lib.element(\"DIV\").child.add(\n        new lib.element(\"DIV\").attribute.addClass(\"Header\").child.add(\n          new lib.element().attribute.addClass(\"Title\").update('Firebug Lite Settings')\n        )\n      ).attribute.addClass(\"SettingsDiv\").insert(el.main);\n      el.settings.content = new lib.element(\"DIV\").attribute.addClass(\"Content\").insert(el.settings.container);\n      el.settings.progressDiv = new lib.element(\"DIV\").attribute.addClass(\"ProgressDiv\").insert(el.settings.content);\n      el.settings.progress = new lib.element(\"DIV\").attribute.addClass(\"Progress\").insert(el.settings.progressDiv);\n      el.settings.cbxDebug = new lib.element(\"INPUT\").attribute.set(\"type\",\"checkbox\").attribute.addClass(\"SettingsCBX\").insert(el.settings.content);\n      el.settings.content.child.add(document.createTextNode(\"Start visible\"));\n      new lib.element(\"BR\").insert(el.settings.content);\n      el.settings.cbxDetectFirebug = new lib.element(\"INPUT\").attribute.set(\"type\",\"checkbox\").attribute.addClass(\"SettingsCBX\").insert(el.settings.content);\n      el.settings.content.child.add(document.createTextNode(\"Hide when Firebug active\"));\n      new lib.element(\"BR\").insert(el.settings.content);\n      el.settings.cbxHideDOMFunctions = new lib.element(\"INPUT\").attribute.set(\"type\",\"checkbox\").attribute.addClass(\"SettingsCBX\").insert(el.settings.content);\n      el.settings.content.child.add(document.createTextNode(\"Hide DOM functions\"));\n      new lib.element(\"BR\").insert(el.settings.content);\n      el.settings.cbxOverride = new lib.element(\"INPUT\").attribute.set(\"type\",\"checkbox\").attribute.addClass(\"SettingsCBX\").insert(el.settings.content);\n      el.settings.content.child.add(document.createTextNode(\"Override window.console\"));\n      new lib.element(\"BR\").insert(el.settings.content);\n      el.settings.cbxShowIcon = new lib.element(\"INPUT\").attribute.set(\"type\",\"checkbox\").attribute.addClass(\"SettingsCBX\").insert(el.settings.content);\n      el.settings.content.child.add(document.createTextNode(\"Show icon when hidden\"));\n      new lib.element(\"BR\").insert(el.settings.content);\n      el.settings.cbxOpenInPopup = new lib.element(\"INPUT\").attribute.set(\"type\",\"checkbox\").attribute.addClass(\"SettingsCBX\").insert(el.settings.content);\n      el.settings.content.child.add(document.createTextNode(\"Open in popup\"));\n      el.settings.buttonDiv = new lib.element(\"DIV\").insert(el.settings.content);\n      el.settings.buttonLeftDiv = new lib.element(\"DIV\").attribute.addClass(\"ButtonsLeft\").insert(el.settings.buttonDiv);\n      el.settings.resetButton = new lib.element(\"INPUT\").attribute.set(\"type\",\"button\").update(\"Reset\").event.addListener(\"click\",settings.reset).insert(el.settings.buttonLeftDiv);\n      el.settings.buttonRightDiv = new lib.element(\"DIV\").attribute.addClass(\"ButtonsRight\").insert(el.settings.buttonDiv);\n      el.settings.cancelButton = new lib.element(\"INPUT\").attribute.set(\"type\",\"button\").update(\"Cancel\").event.addListener(\"click\",settings.hide).insert(el.settings.buttonRightDiv);\n      el.settings.buttonRightDiv.child.add(document.createTextNode(\" \"));\n      el.settings.saveButton = new lib.element(\"INPUT\").attribute.set(\"type\",\"button\").update(\"Save\").event.addListener(\"click\",settings.saveClicked).insert(el.settings.buttonRightDiv);\n\n      lib.util.AddEvent(document,\"mousemove\",listen.mouse)(\"mousemove\",win.resizer.resize)(\"mouseup\",win.resizer.stop)(\"keydown\",listen.keyboard);\n\n      env.init = true;\n\n      for(var i=0, len=d.console.cache.length; i<len; i++){\n        var item = d.console.cache[i];\n        d.console.cmd[item.command].apply(window,item.arg);\n      };\n\n      if(lib.env.ie6){\n        window.onscroll = lib.util.Curry(win.setVerticalPosition,window,null);\n        var buttons = [\n          el.button.inspect,\n          el.button.close,\n          el.button.inspect,\n          el.button.console.clear,\n          el.right.console.run,\n          el.right.console.clear,\n          el.right.css.run,\n          el.right.css.clear\n          ];\n        for(var i=0, len=buttons.length; i<len; i++)\n          buttons[i].attribute.set(\"href\",\"#\");\n        win.refreshSize();\n      }\n     \n      if(env.showIconWhenHidden) {\n        if(!env.popupWin) {\n          el.firebugIcon.environment.addStyle({ \"display\": env.debug&&'none'||'block' });\n        }\n      }\n\n      lib.util.AddEvent(window, \"unload\", win.unload);\n\n      if (env.isPopup) {\n        env.height=lib.util.GetViewport().height;\n        lib.util.AddEvent(window, \"resize\", win.fitToPopup);\n        win.fitToPopup();\n      } else {\n        lib.util.AddEvent(window, \"resize\", win.refreshSize);\n      }\n\n      win.setHeight(env.height);\n\n      if(env.openInPopup&&!env.isPopup) {\n        win.newWindow();\n      } else {\n        el.main.environment.addStyle({ \"display\":env.debug&&'block'||'none' });\n        el.mainiframe.environment.addStyle({ \"display\":env.debug&&'block'||'none' });\n      }\n    }  \n  },\n  inspect:function(){\n    return firebug.d.html.inspect.apply(window,arguments);\n  },\n  watchXHR:function(){\n    with(firebug){\n      d.xhr.addObject.apply(window,arguments);\n      if(env.dIndex!=\"xhr\"){\n        d.navigate(\"xhr\");\n      }\n    }\n  },\n  settings:{\n    isVisible:false,\n    show: function() {\n      with(firebug){\n        var posXY=lib.util.Element.getPosition(firebug.el.nav.options.element);\n        settings.refreshForm();\n\n        el.settings.container.environment.addStyle({\n          \"display\": \"block\",\n          \"left\": (posXY.offsetLeft-125)+\"px\"\n        });\n        el.settings.progressDiv.environment.addStyle({\n          \"display\": \"none\"\n        });\n        firebug.settings.isVisible = true;\n      }\n    },\n    hide: function() {\n      with(firebug){\n        firebug.el.settings.container.environment.addStyle({\n          \"display\": \"none\"\n        });\n        firebug.settings.isVisible = false;\n      }\n    },\n    toggle: function(){\n      with(firebug){\n        settings[!settings.isVisible && 'show' || 'hide']();\n      }\n    },\n    saveClicked: function() {\n      firebug.el.settings.progressDiv.environment.addStyle({\n        \"display\": \"block\"\n      });\n      setTimeout(firebug.settings.formToSettings,0);\n    },\n    formToSettings: function() {\n      var fe=firebug.env,\n        ofe,\n        elSet=firebug.el.settings,\n        exdate;\n\n      fe.debug=elSet.cbxDebug.element.checked;\n      fe.detectFirebug=elSet.cbxDetectFirebug.element.checked;\n      fe.hideDOMFunctions=elSet.cbxHideDOMFunctions.element.checked;\n      fe.override=elSet.cbxOverride.element.checked;\n      fe.showIconWhenHidden=elSet.cbxShowIcon.element.checked;\n      fe.openInPopup=elSet.cbxOpenInPopup.element.checked;\n\n      if(fe.isPopup) {\n        ofe=window.opener.firebug.env;\n        ofe.debug=fe.debug;\n        ofe.detectFirebug=fe.detectFirebug;\n        ofe.hideDOMFunctions=fe.hideDOMFunctions;\n        ofe.override=fe.override;\n        ofe.showIconWhenHidden=fe.showIconWhenHidden;\n        ofe.openInPopup=fe.openInPopup;\n        ofe.popupTop=fe.popupTop;\n        ofe.popupLeft=fe.popupLeft;\n        ofe.popupWidth=fe.popupWidth;\n        ofe.popupHeight=fe.popupHeight;\n      }\n\n      with(firebug) {\n        settings.writeCookie();\n        settings.hide();\n        win.refreshDOM();\n      }\n    },\n    reset: function() {\n      var exdate=new Date();\n\n      exdate.setTime(exdate.getTime()-1);\n      document.cookie='FBLiteSettings=;expires='+exdate.toUTCString();\n      location.reload(true);\n    },\n    readCookie: function() {\n      var i,cookieArr,valueArr,item,value;\n\n      with(firebug.env){\n        if(targetWindow.document.cookie.length>0) {\n          cookieArr=targetWindow.document.cookie.split('; ');\n          \n          for(i=0;i<cookieArr.length;i++) {\n            if(cookieArr[i].split('=')[0]=='FBLiteSettings') {\n              valueArr=cookieArr[i].split('=')[1].split(',');\n            }\n          }\n\n          if(valueArr) {\n            for(i=0;i<valueArr.length;i++) {\n              item=valueArr[i].split(':')[0];\n              value=valueArr[i].split(':')[1];\n              \n              switch(item) {\n                case 'debug':\n                  debug=value==\"true\";\n                  break;\n                case 'detectFirebug':\n                  detectFirebug=value==\"true\";\n                  break;\n                case 'hideDOMFunctions':\n                  hideDOMFunctions=value==\"true\";\n                  break;\n                case 'override':\n                  override=value==\"true\";\n                  break;\n                case 'showIconWhenHidden':\n                  showIconWhenHidden=value==\"true\";\n                  break;\n                case 'openInPopup':\n                  openInPopup=value==\"true\";\n                  break;\n                case 'popupTop':\n                  popupTop=parseInt(value,10);\n                  break;\n                case 'popupLeft':\n                  popupLeft=parseInt(value,10);\n                  break;\n                case 'popupWidth':\n                  popupWidth=parseInt(value,10);\n                  break;\n                case 'popupHeight':\n                  popupHeight=parseInt(value,10);\n                  break;\n                case 'height':\n                  height=parseInt(value,10);\n                  break;\n              }\n            }\n          }\n        }\n      }\n    },\n    writeCookie: function() {\n      var values;\n      \n      with(firebug.env){\n        values='debug:'+debug+',';\n        values+='detectFirebug:'+detectFirebug+',';\n        values+='hideDOMFunctions:'+hideDOMFunctions+',';\n        values+='override:'+override+',';\n        values+='showIconWhenHidden:'+showIconWhenHidden+',';\n        values+='openInPopup:'+openInPopup+',';\n\n        if(isPopup) {\n          if(window.outerWidth===undefined) {\n            values+='popupTop:'+(window.screenTop-56)+',';\n            values+='popupLeft:'+(window.screenLeft-8)+',';\n            values+='popupWidth:'+document.body.clientWidth+',';\n            values+='popupHeight:'+document.body.clientHeight+',';\n          } else {\n            values+='popupTop:'+window.screenY+',';\n            values+='popupLeft:'+window.screenX+',';\n            values+='popupWidth:'+window.outerWidth+',';\n            values+='popupHeight:'+window.outerHeight+',';\n          }\n        } else {\n          values+='popupTop:'+popupTop+',';\n          values+='popupLeft:'+popupLeft+',';\n          values+='popupWidth:'+popupWidth+',';\n          values+='popupHeight:'+popupHeight+',';\n        }\n        \n        values+='height:'+(parseInt(targetWindow.firebug.el.main.element.style.height.replace(/px/,''),10)-38);\n\n        exdate=new Date();\n        exdate.setDate(exdate.getDate()+365);\n        targetWindow.document.cookie='FBLiteSettings='+values+';expires='+exdate.toUTCString();\n      }\n    },\n    refreshForm: function() {\n      var fe=firebug.env,\n          elSet=firebug.el.settings;\n\n      elSet.cbxDebug.element.checked=fe.debug;\n      elSet.cbxDetectFirebug.element.checked=fe.detectFirebug;\n      elSet.cbxHideDOMFunctions.element.checked=fe.hideDOMFunctions;\n      elSet.cbxOverride.element.checked=fe.override;\n      elSet.cbxShowIcon.element.checked=fe.showIconWhenHidden;\n      elSet.cbxOpenInPopup.element.checked=fe.openInPopup;\n    }\n  },\n  win:{\n    hide:function(){\n      with(firebug){\n        el.main.environment.addStyle({\n          \"display\": \"none\"\n        });\n        el.mainiframe.environment.addStyle({\n          \"display\": \"none\"\n        });\n        if(env.showIconWhenHidden) {\n          el.firebugIcon.environment.addStyle({\n            \"display\": \"block\"\n          });\n        }\n      }\n    },\n    show:function(){\n      with(firebug){\n        el.main.environment.addStyle({\n          \"display\": \"block\"\n        });\n        el.mainiframe.environment.addStyle({\n          \"display\": \"block\"\n        });\n        if(env.showIconWhenHidden) {\n          el.firebugIcon.environment.addStyle({\n            \"display\": \"none\"\n          });\n        }\n      }\n    },\n    iconClicked:function(_event) {\n        with(firebug) {\n            if(_event.ctrlKey==true||_event.metaKey==true) {\n                el.firebugIcon.environment.addStyle({ \"display\": \"none\" });\n                env.showIconWhenHidden=false;\n            } else {\n                win.show();\n            }\n        }\n    },\n    minimize:function(){\n      with(firebug){\n        env.minimized=true;\n        el.main.environment.addStyle({ \"height\":\"35px\" });\n        el.mainiframe.environment.addStyle({ \"height\":\"35px\" });\n        el.button.maximize.environment.addStyle({ \"display\":\"block\" });\n        el.button.minimize.environment.addStyle({ \"display\":\"none\" });\n        win.refreshSize();\n      }\n    },\n    maximize:function(){\n      with(firebug){\n        env.minimized=false;\n        el.button.minimize.environment.addStyle({ \"display\":\"block\" });\n        el.button.maximize.environment.addStyle({ \"display\":\"none\" });\n        win.setHeight(env.height);\n      }\n    },\n    newWindow: function() {\n      var interval,scripts,script,scriptPath,\n          fe=firebug.env;\n\n      if (!fe.popupWin) {\n        scripts = document.getElementsByTagName('script');\n        \n        fe.popupWin = window.open(\"\", \"_firebug\", \n          \"status=0,menubar=0,resizable=1,top=\"+fe.popupTop+\",left=\"+fe.popupLeft+\",width=\" + fe.popupWidth + \n          \",height=\" + fe.popupHeight + \",scrollbars=0,addressbar=0,outerWidth=\"+fe.popupWidth+\",outerHeight=\"+fe.popupHeight+\n          \"toolbar=0,location=0,directories=0,dialog=0\");\n        \n        if(!fe.popupWin) {\n          alert(\"Firebug Lite could not open a pop-up window, most likely because of a popup blocker.\\nPlease enable popups for this domain\");\n        } else {\n          firebug.settings.hide();\n        \n          for (i=0,len=scripts.length; i<len; i++) {\n            if (scripts[i].src.indexOf(fe.liteFilename) > -1) {\n              scriptPath = scripts[i].src;\n              break;\n            }\n          }\n\n          if (scriptPath) {\n            script = fe.popupWin.document.createElement('script'), done = false;\n            script.type = 'text/javascript';\n            script.src = scriptPath;\n\n            script[firebug.lib.env.ie?\"onreadystatechange\":\"onload\"] = function(){\n              if(!done && (!firebug.lib.env.ie || this.readyState == \"complete\" || this.readyState==\"loaded\")){\n                done = true;\n                if(fe.popupWin.firebug) {\n                  with(fe.popupWin.firebug) {\n                    env.isPopup = true;\n                    env.css = fe.css;\n                    init();\n                    el.button.dock.environment.addStyle({ \"display\": \"block\"});\n                    el.button.newWindow.environment.addStyle({ \"display\": \"none\"});\n                  }\n                }\n              }\n            };\n\n            if (!done && firebug.lib.env.webkit) {\n              fe.popupWin.document.write('<html><head></head><body></body></html>');\n              interval = setInterval(function() {\n                if (fe.popupWin.firebug) {\n                  clearInterval(interval);\n                  done = true;\n                  with(fe.popupWin.firebug) {\n                    env.isPopup = true;\n                    env.css = fe.css;\n                    init();\n                    el.button.dock.environment.addStyle({ \"display\": \"block\"});\n                    el.button.newWindow.environment.addStyle({ \"display\": \"none\"});\n                  }\n                }\n              }, 10);\n            };\n\n            if (!done) {\n              fe.popupWin.document.getElementsByTagName('head')[0].appendChild(script);\n              firebug.el.main.environment.addStyle({\"display\": \"none\"});\n              firebug.el.mainiframe.environment.addStyle({\"display\": \"none\"});\n            }\n          } else {\n            alert(\"Unable to detect the following script \\\"\" + fe.liteFilename +\n                  \"\\\" ... if the script has been renamed then please set the value of firebug.env.liteFilename to reflect this change\");\n            fe.popupWin.close();\n            fe.popupWin=null;\n          }\n        }\n      }\n    },\n    dock: function() {\n      with(opener.firebug) {\n        env.popupWin = null;\n        el.main.environment.addStyle({\n          \"display\": \"block\"\n        });\n        el.mainiframe.environment.addStyle({\n          \"display\": \"block\"\n        });\n        settings.readCookie();\n        window.close();\n      };\n    },\n    unload: function() {\n      with(firebug){\n        if(env.isPopup) {\n          win.dock();\n        } else if(env.popupWin) {\n          env.popupWin.close();\n        }\n      }\n    },\n    fitToPopup: function() {\n      with(firebug) {\n        var viewport = lib.util.GetViewport(window);\n        win.setHeight((window.innerHeight||viewport.height) - 38);\n        el.main.environment.addStyle({\n          \"width\": (viewport.width) + \"px\"\n        });\n        el.mainiframe.environment.addStyle({\n          \"width\": (viewport.width) + \"px\"\n        });\n      }\n    },\n    resizer:{\n      y:[], enabled:false,\n      start:function(_event){\n        with(firebug){\n          if(env.minimized)return;\n          win.resizer.y=[el.main.element.offsetHeight,_event.clientY];\n          if(lib.env.ie6){\n            win.resizer.y[3]=parseInt(el.main.environment.getPosition().top);\n          }\n          win.resizer.enabled=true;\n        }\n      },\n      resize:function(_event){\n        with(firebug){\n          if(!win.resizer.enabled)return;\n          win.resizer.y[2]=(win.resizer.y[0]+(win.resizer.y[1]-_event.clientY));\n          el.main.environment.addStyle({ \"height\":win.resizer.y[2]+\"px\" });\n          el.mainiframe.environment.addStyle({ \"height\":win.resizer.y[2]+\"px\" });\n          if(lib.env.ie6){\n            el.main.environment.addStyle({ \"top\":win.resizer.y[3]-(win.resizer.y[1]-_event.clientY)+\"px\" });\n            el.mainiframe.environment.addStyle({ \"top\":win.resizer.y[3]-(win.resizer.y[1]-_event.clientY)+\"px\" });\n          }\n        }\n      },\n      stop:function(_event){\n        with(firebug){\n          if(win.resizer.enabled){\n            win.resizer.enabled=false;\n            win.setHeight(win.resizer.y[2]-35);\n          }\n        }\n      }\n    },\n    setHeight:function(_height){\n      with(firebug){\n        env.height=_height;\n\n        el.left.container.environment.addStyle({ \"height\":_height+\"px\" });\n        el.right.container.environment.addStyle({ \"height\":_height+\"px\" });\n        el.main.environment.addStyle({ \"height\":_height+38+\"px\" });\n        el.mainiframe.environment.addStyle({ \"height\":_height+38+\"px\" });\n\n        win.refreshSize();\n\n        // console\n        el.left.console.monitor.element.parentNode.style.height=_height-47+\"px\";\n        el.left.console.mlButton.environment.addStyle({ \"top\":_height+19+\"px\" });\n        el.right.console.mlButton.environment.addStyle({ \"top\":_height+19+\"px\" });\n        el.right.console.input.environment.addStyle({ \"height\":_height-29+\"px\" });\n\n        // html\n        el.left.html.container.environment.addStyle({\"height\":_height-23+\"px\"});\n        el.right.html.content.environment.addStyle({\"height\":_height-23+\"px\"});\n\n        // css\n        el.left.css.container.environment.addStyle({\"height\":_height-33+\"px\"});\n        el.right.css.input.environment.addStyle({ \"height\":_height-55+\"px\" });\n\n        // script\n        el.left.scripts.container.environment.addStyle({\"height\":_height-23+\"px\"});\n\n        // dom\n        el.left.dom.container.environment.addStyle({\"height\":_height-31+\"px\"});\n\n        // xhr\n        el.left.xhr.container.environment.addStyle({\"height\":_height-32+\"px\"});\n\n        // string\n        el.left.str.container.environment.addStyle({\"height\":_height-32+\"px\"});\n      }\n    },\n    refreshDOM:function(){\n      with(firebug){\n        d.dom.open(eval(el.button.dom.textbox.environment.getElement().value),el.left.dom.container);\n        if(d.html.nIndex==\"dom\"){\n          firebug.d.html.navigate(\"dom\")\n        }\n      }\n    },\n    refreshSize:function(){\n      with(firebug){\n        if(!env.init)\n          return;\n\n        var dim = lib.util.GetViewport();\n        el.main.environment.addStyle({ \"width\":dim.width+\"px\"});\n        el.mainiframe.environment.addStyle({ \"width\":dim.width+\"px\"});\n        if(lib.env.ie6)\n          win.setVerticalPosition(dim);\n      }\n    },\n    setVerticalPosition:function(_dim,_event){\n      with(firebug){\n        var dim = _dim||lib.util.GetViewport();\n        el.main.environment.addStyle({ \"top\":dim.height-el.main.environment.getSize().offsetHeight+Math.max(document.documentElement.scrollTop,document.body.scrollTop)+\"px\" });\n        el.mainiframe.environment.addStyle({ \"top\":dim.height-el.main.environment.getSize().offsetHeight+Math.max(document.documentElement.scrollTop,document.body.scrollTop)+\"px\" });\n      }\n    }\n  },\n  d: {\n    clean:function(_element){\n      with(firebug){\n        _element.update(\"\");\n      }\n    },\n    console:{\n      addLine:function(){\n        with (firebug) {\n          return new lib.element(\"DIV\").attribute.addClass(\"Row\").insert(el.left.console.monitor);\n        }\n      },\n      cache:[],\n      clear:function(){\n        with(firebug){\n          d.clean(el.left.console.monitor);\n          d.console.cache = [];\n        }\n      },\n      formatArgs:function(){\n        with(firebug){\n          var content = [];\n          for(var i=0, len=arguments.length; i<len; i++){\n            content.push( d.highlight(arguments[i],false,false,true) );\n          }\n          return content.join(\" \");\n        }\n      },\n      history:[], historyIndex:0,\n      openObject:function(_index){\n        with (firebug) {\n          d.dom.open(d.console.cache[_index], el.left.dom.container, lib.env.ie);\n          d.navigate(\"dom\");\n        }\n      },\n      print: function(_cmd,_text){\n        with (firebug){\n          d.console.addLine().attribute.addClass(\"Arrow\").update(\">>> \"+_cmd);\n          d.console.addLine().update(d.highlight(_text,false,false,true));\n          d.console.scroll();\n        }\n      },\n      printException: function(_exception){\n        with(firebug){\n          var message = _exception.description||_exception.message||_exception;\n          if(_exception.fileName){\n            message+=' ('+(_exception.name&&(_exception.name+', ')||'')+getFileName(_exception.fileName)+', '+_exception.lineNumber+')';\n          }\n          d.console.addLine().attribute.addClass(\"Error\").update(\"<strong>Error: </strong>\"+message,true);\n        }\n      },\n      eval:function(_cmd){\n        var result;\n        with(firebug){\n          if(_cmd.length==0)\n            return;\n\n          el.left.console.input.environment.getElement().value = \"\";\n          d.console.historyIndex = d.console.history.push(_cmd);\n\n          try {\n            if(_cmd==='console.firebug') {\n              d.console.addLine().attribute.addClass(\"Arrow\").update(firebug.version);\n            } else {  \n              result = eval.call(window,_cmd);\n              d.console.print(_cmd,result);\n            }\n          } catch(e){\n            d.console.addLine().attribute.addClass(\"Arrow\").update(\">>> \"+_cmd);\n            d.console.printException(e);\n          }\n          d.console.scroll();\n        }\n      },\n      scroll:function(){\n        with(firebug){\n          el.left.console.monitor.environment.getElement().parentNode.scrollTop = Math.abs(el.left.console.monitor.environment.getSize().offsetHeight-(el.left.console.monitor.element.parentNode.offsetHeight-11));\n        }\n      },\n      run:function(_command){\n        with(firebug){\n          if(!env.init){\n            d.console.cache.push({ \"command\":_command, \"arg\":Array.prototype.slice.call(arguments,1) });\n          } else {\n            d.console.cmd[_command].apply(window,Array.prototype.slice.call(arguments,1));\n          }\n        }\n      },\n      toggleML:function(){\n        with(firebug){\n          var open = !env.ml;\n          env.ml = !env.ml;\n          d.navigateRightColumn(\"console\",open);\n          el[open?\"left\":\"right\"].console.mlButton.environment.addStyle({ display:\"none\" });\n          el[!open?\"left\":\"right\"].console.mlButton.environment.addStyle({ display:\"block\" });\n          el.left.console.mlButton.attribute[(open?\"add\":\"remove\")+\"Class\"](\"CloseML\");\n        }\n      },\n      countMap:{}, timeMap: {},\n      cmd:{\n        log: function(_value){\n          with(firebug){\n            var args = d.console.formatArgs.apply(window,arguments);\n            d.console.addLine().attribute.addClass(\"Log\").update(args);\n            d.console.scroll();\n          }\n        },\n        warn: function(_value){\n          with(firebug){\n            var args = d.console.formatArgs.apply(window,arguments);\n            d.console.addLine().attribute.addClass(\"Warn\").update(args);\n            d.console.scroll();\n          }\n        },\n        info: function(_value){\n          with(firebug){\n            var args = d.console.formatArgs.apply(window,arguments);\n            d.console.addLine().attribute.addClass(\"Info\").update(args);\n            d.console.scroll();\n          }\n        },\n        debug: function(_value){\n          with(firebug){\n            var args = d.console.formatArgs.apply(window,arguments);\n            d.console.addLine().attribute.addClass(\"Debug\").update(args);\n            d.console.scroll();\n          }\n        },\n        error: function(_value){\n          with(firebug){\n            var args = d.console.formatArgs.apply(window,arguments);\n            d.console.addLine().attribute.addClass(\"Error\").update(args);\n            d.console.scroll();\n          }\n        },\n        trace: function(_value){\n          with(firebug){\n            var stackAmt = 3, f = arguments.caller, isArray = lib.util.IsArray(f); //function that called trace\n\n            if((!isArray&&f)||(isArray&&f.length>0)){\n              d.console.addLine().attribute.addClass(\"Arrow\").update(\">>> console.trace(stack)\");\n              for(var i=0;i<stackAmt;i++){\n                var func = f.toString(), args = f.arguments;\n                d.dom.open({\"function\":func, \"arguments\":args},d.console.addLine());\n                f = f.caller;\n              }\n            }\n          }\n        },\n        dir:function(_value){\n          with(firebug){\n            d.console.addLine().attribute.addClass(\"Arrow\").update(\">>> console.dir(\"+_value+\")\");\n            d.dom.open(_value,d.console.addLine());\n          }\n        },\n        dirxml: function(){\n          with(firebug){\n            d.console.cmd.log.apply(this, arguments);\n          }\n        },\n        time: function(_name){\n          with(firebug){\n            d.console.timeMap[_name] = new Date().getTime();\n          }\n        },\n        timeEnd: function(_name){\n          with(firebug){\n            if(_name in d.console.timeMap){\n              var delta = new Date().getTime() - d.console.timeMap[_name],\n              args = d.console.formatArgs.apply(window,[_name+\":\", delta+\"ms\"]);\n              d.console.addLine().attribute.addClass(\"log\").update(args);\n              delete d.console.timeMap[_name];\n            }\n          }\n        },\n        count: function(_name){\n          with(firebug){\n            if(!d.console.countMap[_name])\n              d.console.countMap[_name] = 0;\n            d.console.countMap[_name]++;\n            d.console.cmd.log.apply(window, [_name, d.console.countMap[_name]]);\n          }\n        },\n        group:function(){\n          with(firebug){\n            d.console.cmd.log.apply(this, [\"console.group is not supported\"]);\n          }\n        },\n        groupEnd:function(){\n          with(firebug){\n            d.console.cmd.log.apply(this, [\"console.groupEnd is not supported\"]);\n          }\n        },\n        profile:function(){\n          with(firebug){\n            d.console.cmd.log.apply(this, [\"console.profile is not supported\"]);\n          }\n        },\n        profileEnd:function(){\n          with(firebug){\n            d.console.cmd.log.apply(this, [\"console.profileEnd is not supported\"]);\n          }\n        }\n      }\n    },\n    css:{\n      index:-1,\n      open:function(_index){\n        with (firebug) {\n          var item = env.targetWindow.document.styleSheets[_index],\n          uri = item.href;\n          try {\n            var rules = item[lib.env.ie ? \"rules\" : \"cssRules\"], str = \"\";\n            for (var i=0; i<rules.length; i++) {\n              var item = rules[i];\n              var selector = item.selectorText;\n              var cssText = lib.env.ie?item.style.cssText:item.cssText.match(/\\{(.*)\\}/)[1];\n              str+=d.css.printRule(selector, cssText.split(\";\"), el.left.css.container);\n            }\n          } catch(e) {\n            str=\"<em>Access to restricted URI denied</em>\";\n          }\n          el.left.css.container.update(str);\n        }\n      },\n      printRule:function(_selector,_css,_layer){\n        with(firebug){\n          var str = \"<div class='Selector'>\"+_selector+\" {</div>\";\n          for(var i=0,len=_css.length; i<len; i++){\n            var item = _css[i];\n            str += \"<div class='CSSText'>\"+item.replace(/(.+\\:)(.+)/,\"<span class='CSSProperty'>$1</span><span class='CSSValue'>$2;</span>\")+\"</div>\";\n          }\n          str+=\"<div class='Selector'>}</div>\";\n          return str;\n        }\n      },\n      refresh:function(){\n        with(firebug){\n          el.button.css.selectbox.update(\"\");\n          var collection = env.targetWindow.document.styleSheets;\n          for(var i=0,len=collection.length; i<len; i++){\n            var uri = getFileName(collection[i].href);\n            d.css.index=d.css.index<0?i:d.css.index;\n            el.button.css.selectbox.child.add(\n                new lib.element(\"OPTION\").attribute.set(\"value\",i).update(uri)\n            )\n          };\n          d.css.open(d.css.index);\n        }\n      }\n    },\n    dom: {\n      open: function(_object,_layer){\n        with (firebug) {\n          _layer.clean();\n          var container = new lib.element(\"DIV\").attribute.addClass(\"DOMContent\").insert(_layer);\n          d.dom.print(_object, container);\n        }\n      },\n      print:function(_object,_parent, _inTree){\n        with (firebug) {\n          var obj = _object || window, parentElement = _parent;\n          parentElement.update(\"\");\n\n          if(parentElement.opened&&parentElement!=el.left.dom.container){\n            parentElement.environment.getParent().lib.child.get()[0].lib.child.get()[0].lib.attribute.removeClass(\"Opened\");\n            parentElement.opened = false;\n            parentElement.environment.addStyle({ \"display\":\"none\" });\n            return;\n          }\n          if(_inTree)\n            parentElement.environment.getParent().lib.child.get()[0].lib.child.get()[0].lib.attribute.addClass(\"Opened\");\n          parentElement.opened = true;\n\n          for (var key in obj) {\n            try {\n              if (env.hideDOMFunctions && typeof(obj[key]) == \"function\") continue;\n              var value = obj[key], property = key, container = new lib.element(\"DIV\").attribute.addClass(\"DOMRow\").insert(parentElement),\n              left = new lib.element(\"DIV\").attribute.addClass(\"DOMRowLeft\").insert(container), right = new lib.element(\"DIV\").attribute.addClass(\"DOMRowRight\").insert(container);\n\n              container.child.add(\n                  new lib.element(\"DIV\").attribute.addClass('Clear')\n              );\n\n              var link = new lib.element(\"A\").attribute.addClass(\n                  typeof value==\"object\"&&Boolean(value)?\"Property Object\":\"Property\"\n              ).update(property).insert(left);\n\n              right.update(d.highlight(value,false,true));\n\n              var subContainer = new lib.element(\"DIV\").attribute.addClass(\"DOMRowSubContainer\").insert(container);\n\n              if(typeof value!=\"object\"||Boolean(value)==false)\n                continue;\n\n              link.event.addListener(\"click\",lib.util.Curry(d.dom.print,window,value, subContainer, true));\n            }catch(e){\n            }\n          }\n          parentElement.environment.addStyle({ \"display\":\"block\" });\n        }\n      }\n    },\n    highlight:function(_value,_inObject,_inArray,_link){\n      with(firebug){\n        var isArray = false, isHash, isElement = false, vtype=typeof _value, result=[];\n        \n        if(vtype==\"object\"){\n          if(Object.prototype.toString.call(_value) === \"[object Date]\"){\n            vtype = \"date\";\n          } else if(Object.prototype.toString.call(_value) === \"[object String]\"){\n            vtype = \"string\";\n          } else if(Object.prototype.toString.call(_value) === \"[object Boolean]\"){\n            vtype = \"boolean\";\n          } else if(Object.prototype.toString.call(_value) === \"[object RegExp]\"){\n            vtype = \"regexp\";\n          }\n        }\n        \n        try {\n          isArray = lib.util.IsArray(_value);\n          isHash = lib.util.IsHash(_value);\n          isElement = _value!=undefined&&Boolean(_value.nodeName)&&Boolean(_value.nodeType);\n\n          // number, string, boolean, null, function\n          if(_value==null||vtype==\"number\"||vtype==\"string\"||vtype==\"boolean\"||vtype==\"function\"||vtype==\"regexp\"||vtype==\"date\"){\n            if(_value==null){\n              result.push(\"<span class='Null'>null</span>\");\n            }else if (vtype==\"regexp\") {\n              result.push(\"<span class='Maroon'>\" + _value + \"</span>\");\n            }else if (vtype==\"date\") {\n              result.push(\"<span class='DarkBlue'>'\" + _value + \"'</span>\");\n            } else if (vtype==\"boolean\"||vtype==\"number\") {\n              result.push(\"<span class='DarkBlue'>\" + _value + \"</span>\");\n            } else if(vtype==\"function\"){\n              result.push(\"<span class='\"+(_inObject?\"Italic Gray\":\"Green\")+\"'>function()</span>\");\n            } else {\n              result.push(\"<span class='Red'>\\\"\"+( !_inObject&&!_inArray?_value : _value.substring(0,35)+(_value.length>35?\" ...\":\"\") ).replace(/\\n/g,\"\\\\n\").replace(/\\s/g,\"&nbsp;\").replace(/>/g,\"&#62;\").replace(/</g,\"&#60;\")+\"\\\"</span>\");\n            }\n          }\n          // element\n          else if(isElement){\n\n            if(_value.nodeType==3)\n              result.push(d.highlight(_value.nodeValue));\n            else if(_inObject){\n              result.push(\"<span class='Gray Italic'>\"+_value.nodeName.toLowerCase()+\"</span>\");\n            } else {\n              result.push(\"<span class='Blue\"+ ( !_link?\"'\":\" ObjectLink' onmouseover='this.className=this.className.replace(\\\"ObjectLink\\\",\\\"ObjectLinkHover\\\")' onmouseout='this.className=this.className.replace(\\\"ObjectLinkHover\\\",\\\"ObjectLink\\\")' onclick='firebug.d.html.inspect(firebug.d.console.cache[\" +( d.console.cache.push( _value ) -1 )+\"])'\" ) + \"'>\");\n\n              if(_inArray){\n                result.push(_value.nodeName.toLowerCase());\n                if(_value.getAttribute){\n                  if(_value.getAttribute&&_value.getAttribute(\"id\"))\n                    result.push(\"<span class='DarkBlue'>#\"+_value.getAttribute(\"id\")+\"</span>\");\n                  var elClass = _value.getAttribute(lib.env.ie&&!lib.env.ie8?\"className\":\"class\")||\"\";\n                  result.push(!elClass?\"\":\"<span class='Red'>.\"+elClass.split(\" \")[0]+\"</span>\");\n                }\n                result.push(\"</span>\");\n              } else {\n                result.push(\"<span class='DarkBlue'>&#60;<span class='Blue TagName'>\"+ _value.nodeName.toLowerCase());\n\n                if(_value.attributes){\n                  for(var i=0,len=_value.attributes.length; i<len; i++){\n                    var item = _value.attributes[i];\n\n                    if(!lib.env.ie||item.nodeValue)\n                      result.push(\" <span class='DarkBlue'>\"+item.nodeName+\"=\\\"<span class='Red'>\"+item.nodeValue+\"</span>\\\"</span>\");\n                  }\n                }\n\n                result.push(\"</span>&#62;</span>\");\n              }\n            }\n          } \n          // array, hash\n          else if(isArray||isHash){\n            if(isArray){\n              if(_inObject){\n                result.push(\"<span class='Gray Italic'>[\"+_value.length+\"]</span>\");\n              } else {\n                result.push(\"<span class='Strong'>[ \");\n\n                for(var i=0,len=_value.length; i<len; i++){\n                  if((_inObject||_inArray)&&i>3){\n                    result.push(\", <span class='Strong Gray'>\"+(len-4)+\" More...</span>\");\n                    break;\n                  }\n                  result.push( (i > 0 ? \", \" : \"\") + d.highlight(_value[i], false, true, true) );\n                }\n\n                result.push(\" ]</span>\");\n              }\n            } else if(_inObject){\n              result.push(\"<span class='Gray Italic'>Object</span>\");\n            } else {  \n              result.push(\"<span class='Strong Green\"+ ( !_link?\"'\":\" ObjectLink' onmouseover='this.className=this.className.replace(\\\"ObjectLink\\\",\\\"ObjectLinkHover\\\")' onmouseout='this.className=this.className.replace(\\\"ObjectLinkHover\\\",\\\"ObjectLink\\\")' onclick='firebug.d.console.openObject(\" +( d.console.cache.push( _value ) -1 )+\")'\" ) + \">Object\");\n              var i=0;\n              for(var key in _value){\n                var value = _value[key];\n                if((_inObject||_inArray)&&i>3){\n                  result.push(\" <span class='Strong Gray'>More...</span>\");\n                  break;\n                }\n                result.push(\" \"+key+\"=\"+d.highlight(value,true));\n                i++;\n              }\n              result.push(\"</span>\");\n            } \n          } else {\n            result.push([\"<span class'Gray Italic'>\"+_value+\"</span>\"]);\n          }\n        } catch(e){\n          result.push(\"..\"); \n        }\n        return result.join(\"\");\n      }\n    },\n    html:{\n      nIndex:\"computedStyle\",\n      current:null,\n      highlight:function(_element,_clear,_event){\n        with(firebug){\n          if(_element.firebugElement){\n            return;\n          }\n          if(_clear){\n            env.targetWindow.firebug.el.bgInspector.environment.addStyle({ \"display\":\"none\" });\n            return;\n          }\n          d.inspector.inspect(_element,true);\n        }\n      },\n      inspect:function(_element){\n        var map = [],\n        parentLayer,\n        t,\n        tagName,\n        parent = _element;\n        while (parent) {\n          map.push(parent);\n          if (parent == firebug.env.targetWindow.document.body) break;\n          parent = parent.parentNode;\n        }\n        map = map.reverse();\n        with(firebug) {\n          if (env.dIndex != \"html\") {\n            env.targetWindow.firebug.d.navigate(\"html\");\n          }\n\n          env.targetWindow.firebug.d.inspector.toggle(false);\n\n          for (t = 0; t < el.left.html.container.child.get().length; t++) {\n            if (el.left.html.container.child.get()[t].childNodes[0].childNodes[1].childNodes[0].childNodes[0]) {\n              if (el.left.html.container.child.get()[t].childNodes[0].childNodes[1].childNodes[0].childNodes[0].innerText) {\n                tagName = el.left.html.container.child.get()[t].childNodes[0].childNodes[1].childNodes[0].childNodes[0].innerText;\n              } else {\n                tagName = el.left.html.container.child.get()[t].childNodes[0].childNodes[1].childNodes[0].childNodes[0].textContent;\n              }\n\n              if (/<body/i.test(tagName)) {\n                parentLayer = el.left.html.container.child.get()[t].childNodes[1].lib;\n                break;\n              }\n            }\n          }\n\n          if (!parentLayer) {\n            parentLayer = el.left.html.container.child.get()[3].childNodes[1].lib;\n          }\n\n          for (t = 0, len = map.length; map[t]; t++) {\n            if (t == len - 1) {\n              var link = parentLayer.environment.getElement().previousSibling.lib;\n              link.attribute.addClass(\"Selected\");\n\n              if (d.html.current) {\n                d.html.current[1].attribute.removeClass(\"Selected\");\n              }\n              d.html.current = [_element, link];\n              return;\n            }\n            parentLayer = d.html.openHtmlTree(map[t], parentLayer, map[t + 1]);\n          }\n        }\n      },\n      navigate:function(_index,_element){\n        with(firebug){\n          el.right.html.nav[d.html.nIndex].attribute.removeClass(\"Selected\");\n          el.right.html.nav[_index].attribute.addClass(\"Selected\");\n          d.html.nIndex = _index;\n          d.html.openProperties();\n        }\n      },\n      openHtmlTree:function(_element,_parent,_returnParentElementByElement,_event){\n        with(firebug){\n          var element = _element || env.targetWindow.document.documentElement, \n              parent = _parent || el.left.html.container, \n              returnParentEl = _returnParentElementByElement || null, \n              returnParentVal = null,\n              len = element.childNodes.length,\n              nodeLink;\n\n          if(parent!=el.left.html.container){\n            nodeLink = parent.environment.getParent().lib.child.get()[0].lib;\n            if (d.html.current) {\n              d.html.current[1].attribute.removeClass(\"Selected\");\n            }\n            nodeLink.attribute.addClass(\"Selected\");\n\n            d.html.current = [_element,nodeLink];\n            d.html.openProperties();\n          };\n\n          if(element.childNodes&&(len==0||(len==1&&element.childNodes[0].nodeType==3)))return;\n          parent.clean();\n\n          if(parent.opened&&Boolean(_returnParentElementByElement)==false){\n            parent.opened = false;\n            parent.element.previousSibling.lib.attribute.removeClass(\"Open\");\n            parent.element.lib.attribute.removeClass(\"OpenSubContainer\");\n            return;\n          };\n\n          if (parent != el.left.html.container) {\n            parent.element.previousSibling.lib.attribute.addClass(\"Open\");\n            parent.element.lib.attribute.addClass(\"OpenSubContainer\");\n            parent.opened = true;\n          };\n\n          if(element==document.documentElement){\n            new lib.element(\"A\").attribute.addClass(\"Block\").update(\"<span class='DarkBlue'>&#60;<span class='Blue'>html</span>&#62;\").insert(parent);\n          };\n\n          for(var i=0; i<=len; i++){\n            if(i==len){\n              new lib.element(\"A\").attribute.addClass(\"Block\").update(\"<span class='DarkBlue'>&#60;/<span class='Blue'>\"+element.nodeName.toLowerCase()+\"</span>&#62;\").insert(container);\n              break;\n            } \n            var item = element.childNodes[i];\n\n            if (item.nodeType != 3){\n              var container = new lib.element().attribute.addClass(\"Block\").insert(parent), \n              link = new lib.element(\"A\").attribute.addClass(\"Link\").insert(container), \n              spacer = new lib.element(\"SPAN\").attribute.addClass(\"Spacer\").update(\"&nbsp;\").insert(link),\n              html = new lib.element(\"SPAN\").attribute.addClass(\"Content\").update(d.highlight(item)).insert(link),\n              subContainer = new lib.element(\"DIV\").attribute.addClass(\"SubContainer\").insert(container),\n              view = lib.util.Element.getView(item);\n\n              link.event.addListener(\"click\", lib.util.Curry(d.html.openHtmlTree, window, item, subContainer, false));\n              link.event.addListener(\"mouseover\", lib.util.Curry(d.html.highlight, window, item, false));\n              link.event.addListener(\"mouseout\", lib.util.Curry(d.html.highlight, window, item, true));\n\n              returnParentVal = returnParentEl == item ? subContainer : returnParentVal;\n\n              if(d.html.current==null&&item==document.body){\n                link.attribute.addClass(\"Selected\");\n                d.html.current = [item,link];\n                d.html.openHtmlTree(item,subContainer);\n              }\n\n              if(element.nodeName!=\"HEAD\"&&element!=document.documentElement&&(view.visibility==\"hidden\"||view.display==\"none\")){\n                container.attribute.addClass(\"Unvisible\");\n              };\n\n              if (item.childNodes){\n                var childLen = item.childNodes.length;\n                if (childLen == 1 && item.childNodes[0].nodeType == 3) {\n                  html.child.add(document.createTextNode(item.childNodes[0].nodeValue.substring(0, 50)));\n                  html.child.add(document.createTextNode(\"</\"));\n                  html.child.add(new lib.element(\"span\").attribute.addClass(\"Blue\").update(item.nodeName.toLowerCase()).environment.getElement());\n                  html.child.add(document.createTextNode(\">\"));\n                  continue;\n                }\n                else \n                  if (childLen > 0) {\n                    link.attribute.addClass(\"Parent\");\n                  }\n              }\n            }\n          };\n          return returnParentVal;\n        }\n      },\n      openProperties:function(){\n        with(firebug){\n          var index = d.html.nIndex;\n          var node = d.html.current[0];\n          d.clean(el.right.html.content);\n          var str = \"\";\n          switch(index){\n            case \"computedStyle\":\n              var property = [\"opacity\",\"filter\",\"azimuth\",\"background\",\"backgroundAttachment\",\"backgroundColor\",\"backgroundImage\",\"backgroundPosition\",\"backgroundRepeat\",\"border\",\"borderCollapse\",\"borderColor\",\"borderSpacing\",\"borderStyle\",\"borderTop\",\"borderRight\",\"borderBottom\",\"borderLeft\",\"borderTopColor\",\"borderRightColor\",\"borderBottomColor\",\"borderLeftColor\",\"borderTopStyle\",\"borderRightStyle\",\"borderBottomStyle\",\"borderLeftStyle\",\"borderTopWidth\",\"borderRightWidth\",\"borderBottomWidth\",\"borderLeftWidth\",\"borderWidth\",\"bottom\",\"captionSide\",\"clear\",\"clip\",\"color\",\"content\",\"counterIncrement\",\"counterReset\",\"cue\",\"cueAfter\",\"cueBefore\",\"cursor\",\"direction\",\"display\",\"elevation\",\"emptyCells\",\"cssFloat\",\"font\",\"fontFamily\",\"fontSize\",\"fontSizeAdjust\",\"fontStretch\",\"fontStyle\",\"fontVariant\",\"fontWeight\",\"height\",\"left\",\"letterSpacing\",\"lineHeight\",\"listStyle\",\"listStyleImage\",\"listStylePosition\",\"listStyleType\",\"margin\",\"marginTop\",\"marginRight\",\"marginBottom\",\"marginLeft\",\"markerOffset\",\"marks\",\"maxHeight\",\"maxWidth\",\"minHeight\",\"minWidth\",\"orphans\",\"outline\",\"outlineColor\",\"outlineStyle\",\"outlineWidth\",\"overflow\",\"padding\",\"paddingTop\",\"paddingRight\",\"paddingBottom\",\"paddingLeft\",\"page\",\"pageBreakAfter\",\"pageBreakBefore\",\"pageBreakInside\",\"pause\",\"pauseAfter\",\"pauseBefore\",\"pitch\",\"pitchRange\",\"playDuring\",\"position\",\"quotes\",\"richness\",\"right\",\"size\",\"speak\",\"speakHeader\",\"speakNumeral\",\"speakPunctuation\",\"speechRate\",\"stress\",\"tableLayout\",\"textAlign\",\"textDecoration\",\"textIndent\",\"textShadow\",\"textTransform\",\"top\",\"unicodeBidi\",\"verticalAlign\",\"visibility\",\"voiceFamily\",\"volume\",\"whiteSpace\",\"widows\",\"width\",\"wordSpacing\",\"zIndex\"].sort();\n              var view = document.defaultView?document.defaultView.getComputedStyle(node,null):node.currentStyle;\n              for(var i=0,len=property.length; i<len; i++){\n                var item = property[i];\n                if(!view[item])continue;\n                str+=\"<div class='CSSItem'><div class='CSSProperty'>\"+item+\"</div><div class='CSSValue'>\"+d.highlight(view[item])+\"</div></div>\";\n              }\n              el.right.html.content.update(str);\n              break;\n            case \"dom\":\n              d.dom.open(node,el.right.html.content,lib.env.ie);\n              break;\n          }\n        }\n      }\n    },\n    inspector:{\n      enabled:false,\n      el:null,\n      inspect:function(_element,_bgInspector){\n        with(firebug){\n          var pos = env.targetWindow.firebug.lib.util.Element.getPosition(_element);\n\n          env.targetWindow.firebug.el[_bgInspector&&\"bgInspector\"||\"borderInspector\"].environment.addStyle({ \n            \"width\":_element.offsetWidth+\"px\", \"height\":_element.offsetHeight+\"px\",\n            \"top\":pos.offsetTop-(_bgInspector?0:2)+\"px\", \"left\":pos.offsetLeft-(_bgInspector?0:2)+\"px\",\n            \"display\":\"block\"\n          });\n9\n          if(!_bgInspector){\n            d.inspector.el = _element;\n          }\n        };\n      },\n      toggle:function(_absoluteValue,_event){\n        with (firebug) {\n          if(_absoluteValue==d.inspector.enabled)\n            return;\n          d.inspector.enabled = _absoluteValue!=undefined&&!_absoluteValue.clientX?_absoluteValue:!d.inspector.enabled;\n          el.button.inspect.attribute[(d.inspector.enabled ? \"add\" : \"remove\") + \"Class\"](\"Enabled\");\n          if(d.inspector.enabled==false){\n            el.borderInspector.environment.addStyle({ \"display\":\"none\" });\n            d.inspector.el = null;\n          } else if(lib.env.dIndex!=\"html\") {\n            if (env.popupWin) {\n              env.popupWin.firebug.d.navigate(\"html\");\n            } else {\n              d.navigate(\"html\");\n            }\n          }\n        }\n      }\n    },\n    scripts:{\n      index:-1,\n      lineNumbers:false,\n      open:function(_index){\n        with(firebug){\n          d.scripts.index = _index;\n          el.left.scripts.container.update(\"\");\n          var script = document.getElementsByTagName(\"script\")[_index],uri = script.src||document.location.href,source;\n          try {\n            if(uri!=document.location.href){\n              source = env.cache[uri]||lib.xhr.get(uri).responseText;\n              env.cache[uri] = source;\n            } else {\n              source = script.innerHTML;\n            }\n            source = source.replace(/<|>/g,function(_ch){\n              return ({\"<\":\"&#60;\",\">\":\"&#62;\"})[_ch];\n            });\n          \n            if(!d.scripts.lineNumbers) \n              el.left.scripts.container.child.add(\n                  new lib.element(\"DIV\").attribute.addClass(\"CodeContainer\").update(source)\n              );\n            else {\n              source = source.split(\"<br />\");\n              for (var i = 0; i < source.length; i++) {\n                el.left.scripts.container.child.add(new lib.element(\"DIV\").child.add(new lib.element(\"DIV\").attribute.addClass(\"LineNumber\").update(i + 1), new lib.element(\"DIV\").attribute.addClass(\"Code\").update(\"&nbsp;\" + source[i]), new lib.element(\"DIV\").attribute.addClass('Clear')));\n              };\n            };\n          } catch(e){\n            el.left.scripts.container.child.add(\n              new lib.element(\"DIV\").attribute.addClass(\"CodeContainer\").update(\"<em>Access to restricted URI denied</em>\")\n            );\n          }\n        }\n      },\n      toggleLineNumbers:function(){\n        with(firebug){\n          d.scripts.lineNumbers = !d.scripts.lineNumbers;\n          el.button.scripts.lineNumbers.attribute[(d.scripts.lineNumbers ? \"add\" : \"remove\") + \"Class\"](\"Enabled\");\n          d.scripts.open( d.scripts.index );\n        }\n      },\n      refresh:function(){\n        with(firebug){\n          el.button.scripts.selectbox.clean();\n          var collection = env.targetWindow.document.getElementsByTagName(\"script\");\n          for(var i=0,len=collection.length; i<len; i++){\n            var item = collection[i],\n            fileName = getFileName(item.src||item.baseURI||\"..\");\n            d.scripts.index=d.scripts.index<0?i:d.scripts.index;\n            el.button.scripts.selectbox.child.add(\n                new lib.element(\"OPTION\").attribute.set(\"value\",i).update(fileName)\n            );\n          }\n          d.scripts.open( d.scripts.index );\n        }\n      }\n    },\n    str: {\n      open:function(_str){\n        with(firebug){\n          d.navigate(\"str\");\n          el.left.str.container.update(_str.replace(/\\n/g,\"<br />\"))\n        }\n      }\n    },\n    xhr:{\n      objects:[],\n      addObject:function(){\n        with(firebug){\n          for(var i=0,len=arguments.length; i<len; i++){\n            try {\n              var item = arguments[i],\n                  val = env.targetWindow.eval(item);\n              d.xhr.objects.push([item, val]);\n            } catch(e){\n              continue;\n            }\n          }\n        }\n      },\n      open:function(){\n        with(firebug){\n          el.left.xhr.container.update(\"\");\n          el.left.xhr.name = new lib.element(\"DIV\").attribute.addClass(\"BlockContent\").insert(new lib.element(\"DIV\").attribute.addClass(\"Block\").environment.addStyle({ \"width\":\"20%\" }).insert(el.left.xhr.container));\n          el.left.xhr.nameTitle = new lib.element(\"STRONG\").update(\"Object Name:\").insert(el.left.xhr.name);\n          el.left.xhr.nameContent = new lib.element(\"DIV\").insert(el.left.xhr.name);\n          el.left.xhr.status = new lib.element(\"DIV\").attribute.addClass(\"BlockContent\").insert(new lib.element(\"DIV\").attribute.addClass(\"Block\").environment.addStyle({ \"width\":\"10%\" }).insert(el.left.xhr.container));\n          el.left.xhr.statusTitle = new lib.element(\"STRONG\").update(\"Status:\").insert(el.left.xhr.status);\n          el.left.xhr.statusContent = new lib.element(\"DIV\").insert(el.left.xhr.status);\n          el.left.xhr.readystate = new lib.element(\"DIV\").attribute.addClass(\"BlockContent\").insert(new lib.element(\"DIV\").environment.addStyle({ \"width\":\"15%\" }).attribute.addClass(\"Block\").insert(el.left.xhr.container));\n          el.left.xhr.readystateTitle =el.left.xhr.nameTitle = new lib.element(\"STRONG\").update(\"Ready State:\").insert(el.left.xhr.readystate);\n          el.left.xhr.readystateContent = new lib.element(\"DIV\").insert(el.left.xhr.readystate);\n          el.left.xhr.response = new lib.element(\"DIV\").attribute.addClass(\"BlockContent\").insert(new lib.element(\"DIV\").environment.addStyle({ \"width\":(lib.env.ie?\"50\":\"55\")+\"%\" }).attribute.addClass(\"Block\").insert(el.left.xhr.container));\n          el.left.xhr.responseTitle = new lib.element(\"STRONG\").update(\"Response:\").insert(el.left.xhr.response);\n          el.left.xhr.responseContent = new lib.element(\"DIV\").insert(el.left.xhr.response);\n          setTimeout(d.xhr.refresh,500);\n        }\n      },\n      refresh:function(){\n        with(firebug){\n          el.left.xhr.nameContent.update(\"\");\n          el.left.xhr.statusContent.update(\"\");\n          el.left.xhr.readystateContent.update(\"\");\n          el.left.xhr.responseContent.update(\"\");\n          for(var i=0,len=d.xhr.objects.length; i<len; i++){\n            var item = d.xhr.objects[i],\n                response = item[1].responseText;\n            if(Boolean(item[1])==false)continue;\n            el.left.xhr.nameContent.child.add(new lib.element(\"span\").update(item[0]));\n            try {\n              el.left.xhr.statusContent.child.add(new lib.element(\"span\").update(item[1].status));\n            } catch(e){ el.left.xhr.statusContent.child.add(new lib.element(\"span\").update(\"&nbsp;\")); }\n            el.left.xhr.readystateContent.child.add(new lib.element(\"span\").update(item[1].readyState));\n\n            el.left.xhr.responseContent.child.add(new lib.element(\"span\").child.add(\n                new lib.element(\"A\").event.addListener(\"click\",lib.util.Curry(d.str.open,window,response)).update(\"&nbsp;\"+response.substring(0,50))\n            ));\n          };\n          if(env.dIndex==\"xhr\")\n            setTimeout(d.xhr.refresh,500);\n        }\n      }\n    },\n    navigateRightColumn:function(_index,_open){\n      with(firebug){\n        el.left.container.environment.addStyle({ \"width\":_open?\"70%\":\"100%\" });\n        el.right.container.environment.addStyle({ \"display\":_open?\"block\":\"none\" });\n      }\n    },\n    navigate:function(_index){\n      with(firebug){\n        var open = _index, close = env.dIndex;\n        env.dIndex = open;\n\n        settings.hide();\n\n        el.button[close].container.environment.addStyle({ \"display\":\"none\" });\n        el.left[close].container.environment.addStyle({ \"display\":\"none\" });\n        el.right[close].container.environment.addStyle({ \"display\":\"none\" });\n\n        el.button[open].container.environment.addStyle({ \"display\":\"inline\" });\n        el.left[open].container.environment.addStyle({ \"display\":\"block\" });\n        el.right[open].container.environment.addStyle({ \"display\":\"block\" });\n\n        if(el.nav[close])\n          el.nav[close].attribute.removeClass(\"Selected\");\n        if(el.nav[open])\n          el.nav[open].attribute.addClass(\"Selected\");\n\n        switch(open){\n          case \"console\":\n            d.navigateRightColumn(_index);\n            break;\n          case \"html\":\n            d.navigateRightColumn(_index,true);\n            if(!d.html.current){\n              var t=Number(new Date);\n              d.html.openHtmlTree();\n            }\n            break;\n          case \"css\":\n            d.navigateRightColumn(_index,true);\n            d.css.refresh();\n            break;\n          case \"scripts\":\n            d.navigateRightColumn(_index);\n            d.scripts.refresh();\n            break;\n          case \"dom\":\n            d.navigateRightColumn(_index);\n            if(el.left.dom.container.environment.getElement().innerHTML==\"\"){\n              var t=Number(new Date);\n              d.dom.open(eval(el.button.dom.textbox.environment.getElement().value),el.left.dom.container);\n            }\n            break;\n          case \"xhr\":\n            d.navigateRightColumn(_index);\n            d.xhr.open();\n            break;\n        }\n      }\n    }\n  },\n  getFileName:function(_path){\n    var match = _path&&_path.match(/[\\w\\-\\.\\?\\=\\&]+$/);\n    return match&&match[0]||_path;\n  },\n  cancelEvent:function(_event){\n    if(_event.stopPropagation)\n      _event.stopPropagation();\n    if(_event.preventDefault)\n      _event.preventDefault();\n  },\n  getSelection:function(_el){\n    with(firebug){\n      if(lib.env.ie){\n        var range = document.selection.createRange(),stored = range.duplicate();\n        stored.moveToElementText(_el);\n        stored.setEndPoint('EndToEnd', range);\n        _el.selectionStart = stored.text.length - range.text.length;\n        _el.selectionEnd = _el.selectionStart + range.text.length;\n      }\n      return {\n        start:_el.selectionStart,\n        length:_el.selectionEnd-_el.selectionStart\n      }\n    }\n  },\n  tab:function(_el,_event){\n    with(firebug){\n      if(_event.keyCode==9){\n        if(_el.setSelectionRange){\n          var position = firebug.getSelection(_el);\n          _el.value = _el.value.substring(0,position.start) + String.fromCharCode(9) + _el.value.substring(position.start+position.length,_el.value.length);\n          _el.setSelectionRange(position.start+1,position.start+1);\n        } else if(document.selection) {  \n          var range = document.selection.createRange(), isCollapsed = range.text == '';\n          range.text = String.fromCharCode(9);\n          range.moveStart('character', -1);\n        }\n        firebug.cancelEvent(_event);\n        if(lib.env.ie)\n          setTimeout(_el.focus,100);\n      };\n    }\n  },\n  listen: {\n    addXhrObject:function(){\n      with(firebug){\n        d.xhr.addObject.apply(env.targetWindow, el.button.xhr.textbox.environment.getElement().value.split(\",\"));\n      }\n    },\n    consoleTextbox:function(_event){\n      with(firebug){\n        if(_event.keyCode==13&&(env.multilinemode==false||_event.shiftKey==false)){\n          d.console.historyIndex = d.console.history.length;\n          d.console.eval(el.left.console.input.environment.getElement().value);\n          return false;\n        }\n\n        switch(_event.keyCode){\n          case 40:\n            if(d.console.history[d.console.historyIndex+1]){\n              d.console.historyIndex+=1;\n              el.left.console.input.update( d.console.history[d.console.historyIndex] );\n            }\n            break;\n          case 38:\n            if(d.console.history[d.console.historyIndex-1]){\n              d.console.historyIndex-=1;\n              el.left.console.input.update( d.console.history[d.console.historyIndex] );\n            }\n            break;\n        }\n      }\n    },\n    cssSelectbox:function(){\n      with(firebug){\n        d.css.open(el.button.css.selectbox.environment.getElement().selectedIndex);\n      }\n    },\n    domTextbox:function(_event){\n      with(firebug){\n        if(_event.keyCode==13){\n          d.dom.open(eval(el.button.dom.textbox.environment.getElement().value),el.left.dom.container);\n        }\n      }\n    },\n    inspector:function(){\n      with(firebug){\n        if (env.popupWin) {\n          env.popupWin.firebug.d.html.inspect(firebug.d.inspector.el);\n        } else {\n          firebug.d.html.inspect(firebug.d.inspector.el);\n        }\n      }\n    },\n    keyboard:function(_event){\n      with(firebug){\n        if(_event.keyCode==27 && d.inspector.enabled){\n          d.inspector.toggle();\n        } else if(_event.keyCode === 123 && _event.ctrlKey || _event.metaKey) {\n          if(env.isPopup){\n            win.dock();\n          }else {\n            win.newWindow();\n          }\n        } else if(\n            (_event.keyCode === 123 && !_event.ctrlKey && !_event.metaKey) || \n            (_event.keyCode === 76 && (_event.ctrlKey || _event.metaKey) && _event.shiftKey) ||\n            (_event.keyCode === 13 && _event.shiftKey)) {\n\n          if(env.isPopup){\n            win.dock();\n          } else if (el.main.environment.getStyle(\"display\") === 'none') {\n            win.show();\n          } else {\n            win.hide();\n          }\n        }\n      }\n    },\n    mouse:function(_event){\n      with(firebug){\n        var target;\n        \n        if(document.elementFromPoint) {\n          target = document.elementFromPoint(_event.clientX, _event.clientY);\n        } else {\n          if(lib.env.ie) {\n            target = _event.srcElement;\n          } else {\n            target = _event.explicitOriginalTarget || _event.target;\n          }\n        }\n        \n        if( d.inspector.enabled&&\n          target!=document.body&&\n          target!=document.firstChild&&\n          target!=document.childNodes[1]&&\n          target!=el.borderInspector.environment.getElement()&&\n          target!=el.main.environment.getElement()&&\n          target.offsetParent!=el.main.environment.getElement() ) {\n            d.inspector.inspect(target);\n        }\n      }\n    },\n    runMultiline:function(){\n      with(firebug){\n        d.console.eval.call(window,el.right.console.input.environment.getElement().value);\n      }\n    },\n    runCSS:function(){\n      with(firebug){\n        var source = el.right.css.input.environment.getElement().value.replace(/\\n|\\t/g,\"\").split(\"}\");\n        for(var i=0, len=source.length; i<len; i++){\n          var item = source[i]+\"}\", rule = !lib.env.ie?item:item.split(/{|}/),\n              styleSheet = document.styleSheets[0];\n          console.log(rule);\n          if(item.match(/.+\\{.+\\}/)){\n            if(lib.env.ie)\n              styleSheet.addRule(rule[0],rule[1]);\n            else\n              styleSheet.insertRule( rule, styleSheet.cssRules.length );\n          }\n        }\n      }\n    },\n    scriptsSelectbox:function(){\n      with(firebug){\n        d.scripts.open(parseInt(el.button.scripts.selectbox.environment.getElement().value));\n      }\n    },\n    xhrTextbox:function(_event){\n      with(firebug){\n        if(_event.keyCode==13){\n          d.xhr.addObject.apply(env.targetWindow, el.button.xhr.textbox.environment.getElement().value.split(\",\"));\n        }\n      }\n    }\n  }\n};\n\n(function(_scope){\n  _scope.lib = {};\n  var pi  = _scope.lib; pi.version = [1.1,2008091000];\n\n  pi.env = {\n    ie: /MSIE/i.test(navigator.userAgent),\n    ie6: /MSIE 6/i.test(navigator.userAgent),\n    ie7: /MSIE 7/i.test(navigator.userAgent),\n    ie8: /MSIE 8/i.test(navigator.userAgent),\n    firefox: /Firefox/i.test(navigator.userAgent),\n    opera: /Opera/i.test(navigator.userAgent),\n    webkit: /Webkit/i.test(navigator.userAgent),\n    camino: /Camino/i.test(navigator.userAgent)\n  };\n\n  pi.get = function(){\n    return document.getElementById(arguments[0]);\n  };\n  pi.get.byTag = function(){\n    return document.getElementsByTagName(arguments[0]);\n  };\n  pi.get.byClass = function(){ return document.getElementsByClassName.apply(document,arguments); };\n\n  pi.util = {\n    Array:{\n      clone:function(_array,_undeep){\n        var tmp = [];\n        Array.prototype.push.apply(tmp,_array);\n        pi.util.Array.forEach(tmp,function(_item,_index,_source){\n          if(_item instanceof Array&&!_undeep)\n            _source[_index] = pi.util.Array.clone(_source[_index]);\n        });\n        return tmp;\n      },\n      count:function(_array,_value){\n        var count = 0;\n        pi.util.Array.forEach(_array,function(){\n          count+=Number(arguments[0]==_value);\n        });\n        return count;\n      },\n      forEach:function(_array,_function){\n        if(_array.forEach)\n          return _array.forEach(_function);\n        for(var i=0,len=_array.length; i<len; i++)\n          _function.apply(_array,[_array[i],i,_array]);   \n      },\n      getLatest:function(_array){\n        return _array[_array.length-1];\n      },\n      indexOf:function(_array,_value){\n        if(!pi.env.ie){\n          return _array.indexOf(_value);\n        };\n\n        var index = -1;\n        for(var i=0, len=_array.length; i<len; i++){\n          if(_array[i]==_value){\n            index = i;\n            break;\n          }\n        }\n        return index;\n      },\n      remove:function(_array,_index){\n        var result = _array.slice(0,_index);\n        _array = Array.prototype.push.apply(result,_array.slice(_index+1));\n        return result;\n      }\n    },\n    Curry:function(_fn,_scope){\n      var fn = _fn, scope = _scope||window, args = Array.prototype.slice.call(arguments,2);\n      return function(){ \n        return fn.apply(scope,args.concat( Array.prototype.slice.call(arguments,0) )); \n      };\n    },\n    Extend:function(_superClass,_prototype,_skipClonning){\n      var object = new pi.base;\n      if(_prototype[\"$Init\"]){\n        object.init = _prototype[\"$Init\"];\n        delete _prototype[\"$Init\"];\n      };\n\n      object.body = _superClass==pi.base?_prototype:pi.util.Hash.merge(_prototype,_superClass.prototype);\n      object.init=object.init||function(){\n        if(_superClass!=pi.base)\n          _superClass.apply(this,arguments);\n      };\n\n      return object.build(_skipClonning);\n    },\n    IsArray:function(_object){\n      if(_object===null){\n        return false;\n      }\n      if(window.NodeList&&window.NamedNodeMap&&!pi.env.ie8){\n        if(_object instanceof Array||_object instanceof NodeList||_object instanceof NamedNodeMap||(window.HTMLCollection&&_object instanceof HTMLCollection))\n          return true;\n      };\n      if(!_object||_object==window||typeof _object==\"function\"||typeof _object==\"string\"||typeof _object.length!=\"number\"){\n        return false\n      };\n      var len = _object.length;\n      if(len>0&&_object[0]!=undefined&&_object[len-1]!=undefined){\n        return true;\n      } else {\n        for(var key in _object){\n          if(key!=\"item\"&&key!=\"length\"&&key!=\"setNamedItemNS\"&&key!=\"setNamedItem\"&&key!=\"getNamedItem\"&&key!=\"removeNamedItem\"&&key!=\"getNamedItemNS\"&&key!=\"removeNamedItemNS\"&&key!=\"tags\"){\n            return false;\n          }\n        }\n        return true\n      };\n    },\n    IsHash:function(_object){\n      return _object && typeof _object==\"object\"&&(_object==window||_object instanceof Object)&&!_object.nodeName&&!pi.util.IsArray(_object)\n    },\n    Init:[],\n    AddEvent: function(_element,_eventName,_fn,_useCapture){\n      _element[pi.env.ie?\"attachEvent\":\"addEventListener\"]((pi.env.ie?\"on\":\"\")+_eventName,_fn,_useCapture||false);\n      return pi.util.Curry(pi.util.AddEvent,this,_element);\n    },\n    RemoveEvent: function(_element,_eventName,_fn,_useCapture){\n      _element[pi.env.ie?\"detachEvent\":\"removeEventListener\"]((pi.env.ie?\"on\":\"\")+_eventName,_fn,_useCapture||false);\n      return pi.util.Curry(pi.util.RemoveEvent,this,_element);\n    },\n    Element:{\n      addClass:function(_element,_class){\n        if( !pi.util.Element.hasClass(_element,_class) )\n          pi.util.Element.setClass(_element, pi.util.Element.getClass(_element) + \" \" + _class );\n      },\n      getClass:function(_element){\n        return _element.getAttribute(pi.env.ie&&!pi.env.ie8?\"className\":\"class\")||\"\";\n      },\n      hasClass:function(_element,_class){\n        return pi.util.Array.indexOf(pi.util.Element.getClass(_element).split(\" \"),_class)>-1;\n      },\n      removeClass:function(_element,_class){\n        if( pi.util.Element.hasClass(_element,_class) ){\n          var names = pi.util.Element.getClass(_element,_class).split(\" \");\n          pi.util.Element.setClass(\n              _element, \n              pi.util.Array.remove(names,pi.util.Array.indexOf(names,_class)).join(\" \")\n          );\n        }\n      },\n      setClass:function(_element,_value){\n        if(pi.env.ie8){\n          _element.setAttribute(\"className\", _value );\n          _element.setAttribute(\"class\", _value );\n        } else {\n          _element.setAttribute(pi.env.ie?\"className\":\"class\", _value );\n        }\n      },\n      toggleClass:function(){\n        if(pi.util.Element.hasClass.apply(this,arguments))\n          pi.util.Element.removeClass.apply(this,arguments);\n        else\n          pi.util.Element.addClass.apply(this,arguments);\n      },\n      getOpacity:function(_styleObject){\n        var styleObject = _styleObject;\n        if(!pi.env.ie)\n          return styleObject[\"opacity\"];\n\n        var alpha = styleObject[\"filter\"].match(/opacity\\=(\\d+)/i);\n        return alpha?alpha[1]/100:1;\n      },\n      setOpacity:function(_element,_value){\n        if(!pi.env.ie)\n          return pi.util.Element.addStyle(_element,{ \"opacity\":_value });\n        _value*=100;\n        pi.util.Element.addStyle(_element,{ \"filter\":\"alpha(opacity=\"+_value+\")\" });\n        return this._parent_;\n      },\n      getPosition:function(_element){\n        var parent = _element,offsetLeft = document.body.offsetLeft, offsetTop = document.body.offsetTop, view = pi.util.Element.getView(_element);\n        while(parent&&parent!=document.body&&parent!=document.firstChild){\n          offsetLeft +=parseInt(parent.offsetLeft);\n          offsetTop += parseInt(parent.offsetTop);\n          parent = parent.offsetParent;\n        };\n        return {\n          \"bottom\":view[\"bottom\"],\n          \"clientLeft\":_element.clientLeft,\n          \"clientTop\":_element.clientTop,\n          \"left\":view[\"left\"],\n          \"marginTop\":view[\"marginTop\"],\n          \"marginLeft\":view[\"marginLeft\"],\n          \"offsetLeft\":offsetLeft,\n          \"offsetTop\":offsetTop,\n          \"position\":view[\"position\"],\n          \"right\":view[\"right\"],\n          \"top\":view[\"top\"],\n          \"zIndex\":view[\"zIndex\"]\n        };\n      },\n      getSize:function(_element){\n        var view = pi.util.Element.getView(_element);\n        return {\n          \"height\":view[\"height\"],\n          \"clientHeight\":_element.clientHeight,\n          \"clientWidth\":_element.clientWidth,\n          \"offsetHeight\":_element.offsetHeight,\n          \"offsetWidth\":_element.offsetWidth,\n          \"width\":view[\"width\"]\n        }\n      },\n      addStyle:function(_element,_style){\n        for(var key in _style){\n          key = key==\"float\"?pi.env.ie?\"styleFloat\":\"cssFloat\":key;\n          if (key == \"opacity\" && pi.env.ie) {\n            pi.util.Element.setOpacity(_element,_style[key]);\n            continue;\n          }\n          try {\n            _element.style[key] = _style[key];\n          }catch(e){}     \n        }\n      },\n      getStyle:function(_element,_property){\n        _property = _property==\"float\"?pi.env.ie?\"styleFloat\":\"cssFloat\":_property;\n        if(_property==\"opacity\"&&pi.env.ie)\n          return pi.util.Element.getOpacity(_element.style);\n        return typeof _property==\"string\"?_element.style[_property]:_element.style;\n      },\n      getValue:function(_element){\n        switch(_element.nodeName.toLowerCase()){\n          case \"input\":\n          case \"textarea\":\n            return _element.value;\n          case \"select\":\n            return _element.options[_element.selectedIndex].value;\n          default:\n            return _element.innerHTML;\n          break;\n        }\n      },\n      getView:function(_element,_property){\n        var view = document.defaultView?document.defaultView.getComputedStyle(_element,null):_element.currentStyle;\n        _property = _property==\"float\"?pi.env.ie?\"styleFloat\":\"cssFloat\":_property;\n        if(_property==\"opacity\"&&pi.env.ie)\n          return pi.util.Element.getOpacity(_element,view);\n        return typeof _property==\"string\"?view[_property]:view;\n      }\n    },\n    Hash: {\n      clone:function(_hash,_undeep){\n        var tmp = {};\n        for(var key in _hash){\n          if( !_undeep&&pi.util.IsArray( _hash[key] ) ){\n            tmp[key] = pi.util.Array.clone( _hash[key] );\n          } else if( !_undeep&&pi.util.IsHash( _hash[key] ) ){\n            tmp[ key ] = pi.util.Hash.clone(_hash[key]);\n          } else {\n            tmp[key] = _hash[key];\n          }\n        }\n        return tmp;\n      },\n      merge:function(_hash,_source,_undeep){\n        for(var key in _source){\n          var value = _source[key];\n          if (!_undeep&&pi.util.IsArray(_source[key])) {\n            if(pi.util.IsArray( _hash[key] )){\n              Array.prototype.push.apply( _source[key], _hash[key] )\n            }\n            else\n              value = pi.util.Array.clone(_source[key]);\n          }\n          else if (!_undeep&&pi.util.IsHash(_source[key])) {\n            if (pi.util.IsHash(_hash[key])) {\n              value = pi.util.Hash.merge(_hash[key], _source[key]);\n            } else {\n              value = pi.util.Hash.clone( _source[key] );\n            }\n          } else if( _hash[key] )\n            value = _hash[ key ];\n          _hash[key] = value;\n        };\n        return _hash;\n      }\n    },\n    String:{\n      format:function(_str){\n        var values = Array.prototype.slice.call(arguments,1);\n        return _str.replace(/\\{(\\d)\\}/g,function(){\n          return values[arguments[1]];\n        })\n      }\n    },\n    GetViewport:function(){\n      return {\n        height:document.documentElement.clientHeight||document.body.clientHeight,\n        width:document.documentElement.clientWidth||document.body.clientWidth\n      }\n    }\n  };\n\n  pi.base = function(){\n    this.body = {};\n    this.init = null;\n\n    this.build = function(_skipClonning){\n      var base = this, skipClonning = _skipClonning||false, _private = {},\n      fn = function(){\n        var _p = pi.util.Hash.clone(_private);\n        if(!skipClonning){\n          for(var key in this){\n            if(pi.util.IsArray( this[ key ] ) ){\n              this[key] = pi.util.Array.clone( this[key] );\n            } else\n              if( pi.util.IsHash(this[key]) ){\n                this[key] = pi.util.Hash.clone( \n                    this[ key ],\n                    function(_key,_object){\n                      this[ _key ]._parent_ = this;\n                    }\n                );\n                //this[key]._parent_ = this;\n              }\n          }\n        };\n        base.createAccessors( _p, this );\n        if(base.init)\n          return base.init.apply(this,arguments);\n        return this;\n      };\n      this.movePrivateMembers(this.body,_private);\n      if(this.init){\n        fn[\"$Init\"] = this.init;\n      };\n      fn.prototype = this.body;\n      return fn;\n    };\n\n    this.createAccessors = function(_p, _branch){\n      var getter = function(_property){ return this[_property]; },\n      setter = function(_property,_value){ this[_property] = _value; return _branch._parent_||_branch; };\n\n      for (var name in _p) {\n        var isPrivate = name.substring(0, 1) == \"_\", title = name.substring(1, 2).toUpperCase() + name.substring(2);\n\n        if (isPrivate) {\n          _branch[(_branch[\"get\" + title]?\"_\":\"\")+\"get\" + title] = pi.util.Curry(getter,_p,name);\n          _branch[(_branch[\"set\" + title]?\"_\":\"\")+\"set\" + title] = pi.util.Curry(setter,_p,name);\n        }\n        else \n          if (pi.util.IsHash(_p[name])){\n            _branch[name]._parent_ = _branch;\n            if(!_branch[name])\n              _branch[name] = {};\n            this.createAccessors(_p[name], _branch[name]);\n          }   \n      };\n    };\n\n    this.movePrivateMembers = function(_object, _branch){\n      for (var name in _object) {\n        var isPrivate = name.substring(0, 1) == \"_\";\n\n        if (isPrivate) {\n          _branch[name] = _object[name];\n          delete _object[name];\n        }\n        else \n          if (pi.util.IsHash(_object[name])){\n            _branch[name] = {};\n            this.movePrivateMembers(_object[name], _branch[name]);\n          }\n      };\n    };\n  };\n\n  pi.element = new pi.base;\n  pi.element.init = function(_val){\n    this.environment.setElement(\n        typeof _val==\"string\"||!_val?\n            document.createElement(_val||\"DIV\"):\n              _val\n    );\n    return this;\n  };\n\n  pi.element.body = {\n    \"addStyle\":function(){\n      return this.environment.addStyle.apply(this.environment,arguments);\n    },\n    \"clean\":function(){\n      var childs = this.child.get();\n      while(childs.length){\n        childs[0].parentNode.removeChild(childs[0]);\n      }\n    },\n    \"clone\":function(_deep){\n      return this.environment.getElement().cloneNode(_deep);\n    },\n    \"insert\":function(_element){\n      _element = _element.environment?_element.environment.getElement():_element;\n      _element.appendChild(this.environment.getElement());\n      return this;\n    },\n    \"insertAfter\":function(_referenceElement){\n      _referenceElement = _referenceElement.environment?_referenceElement.environment.getElement():_referenceElement;\n      _referenceElement.nextSibling?this.insertBefore(_referenceElement.nextSibling):this.insert(_referenceElement.parentNode);\n      return this;\n    },\n    \"insertBefore\":function(_referenceElement){\n      _referenceElement = _referenceElement.environment?_referenceElement.environment.getElement():_referenceElement;\n      _referenceElement.parentNode.insertBefore(this.environment.getElement(),_referenceElement);\n      return this;\n    },\n    \"query\":function(_expression,_resultType,namespaceResolver,_result){\n      return pi.xpath(_expression,_resultType||\"ORDERED_NODE_SNAPSHOT_TYPE\",this.environment.getElement(),_namespaceResolver,_result);\n    },\n    \"remove\":function(){\n      if (this.environment.getParent()) {\n        this.environment.getParent().removeChild(this.environment.getElement());\n      }\n    },\n    \"update\":function(_value){\n      this.element[this.element.nodeName.toLowerCase()==\"textarea\"||this.element.nodeName.toLowerCase()==\"input\"?\"value\":\"innerHTML\"]=_value;\n      return this;\n    },\n    \"attribute\":{\n      \"getAll\":function(){\n        return this._parent_.environment.getElement().attributes;\n      },\n      \"clear\":function(_name){\n        this.set(_name,\"\");\n        return this._parent_;\n      },\n      \"get\":function(_name){\n        return this._parent_.environment.getElement().getAttribute(_name);\n      },\n      \"has\":function(_name){\n        return pi.env.ie?(this.get(_name)!=null):this._parent_.environment.getElement().hasAttribute(_name);\n      },\n      \"remove\":function(_name){\n        this._parent_.environment.getElement().removeAttribute(_name);\n        return this._parent_;\n      },\n      \"set\":function(_name,_value){\n        this._parent_.environment.getElement().setAttribute(_name,_value);\n        return this._parent_;\n      },\n      \"addClass\":function(_classes){\n        for(var i=0,len=arguments.length; i<len; i++){\n          pi.util.Element.addClass(this._parent_.environment.getElement(),arguments[i]);\n        };\n        return this._parent_;\n      },\n      \"clearClass\":function(){\n        this.setClass(\"\");\n        this._parent_;\n      },\n      \"getClass\":function(){\n        return pi.util.Element.getClass( this._parent_.environment.getElement() );\n      },\n      \"hasClass\":function(_class){\n        return pi.util.Element.hasClass( this._parent_.environment.getElement(), _class );\n      },\n      \"setClass\":function(_value){\n        return pi.util.Element.setClass( this._parent_.environment.getElement(), _value );\n      },\n      \"removeClass\":function(_class){\n        pi.util.Element.removeClass( this._parent_.environment.getElement(), _class );\n        return this._parent_;\n      },\n      \"toggleClass\":function(_class){\n        pi.util.Element.toggleClass( this._parent_.environment.getElement(), _class );\n      }\n    },\n    \"child\":{\n      \"get\":function(){\n        return this._parent_.environment.getElement().childNodes;\n      },\n      \"add\":function(_elements){\n        for (var i = 0; i < arguments.length; i++) {\n          var el = arguments[i];\n          this._parent_.environment.getElement().appendChild(\n              el.environment ? el.environment.getElement() : el\n          );\n        }\n        return this._parent_;\n      },\n      \"addAfter\":function(_element,_referenceElement){\n        this.addBefore(\n            _element.environment?_element.environment.getElement():_element,\n                (_referenceElement.environment?_referenceElement.environment.getElement():_referenceElement).nextSibling\n        );\n        return this._parent_;\n      },\n      \"addBefore\":function(_element,_referenceElement){\n        this._parent_.environment.getElement().insertBefore(\n            _element.environment?_element.environment.getElement():_element,\n                _referenceElement.environment?_referenceElement.environment.getElement():_referenceElement\n        );\n        return this._parent_;\n      },\n      \"remove\":function(_element){\n        this._parent_.environment.getElement().removeChild(_element.environment?_element.environment.getElement():_element);\n      }\n    },\n    \"environment\":{\n      \"_element\":null,\n      \"setElement\":function(_value){\n        this._parent_.element = _value;\n        this._parent_.element.lib = this._parent_;\n        this._parent_.element.firebugElement = true;\n        this._setElement(_value);\n      },\n      \"getParent\":function(){\n        return this.getElement().parentNode;\n      },\n      \"getPosition\":function(){\n        return pi.util.Element.getPosition(this.getElement());\n      },\n      \"getSize\":function(){\n        return pi.util.Element.getSize( this.getElement() );\n      },\n      \"addStyle\":function(_styleObject){\n        pi.util.Element.addStyle(this.getElement(),_styleObject);\n        return this._parent_;\n      },\n      \"getStyle\":function(_property){\n        return pi.util.Element.getStyle(this.getElement(),_property);\n      },\n      \"getName\":function(){\n        return this.getElement().nodeName;\n      },\n      \"getType\":function(){\n        return this.getElement().nodeType;\n      },\n      \"getValue\":function(){\n        return pi.util.Element.getValue(this.getElement());\n      },\n      \"getView\":function(_property){\n        return pi.util.Element.getView(this.getElement(),_property);\n      }\n    },\n    \"event\":{\n      \"addListener\":function(_event,_fn,_useCapture){\n        pi.util.AddEvent(this._parent_.environment.getElement(),_event,_fn,_useCapture);\n        return this._parent_;\n      },\n      \"removeListener\":function(_event,_fn,_useCapture){\n        pi.util.RemoveEvent(this._parent_.environment.getElement(),_event,_fn,_useCapture);\n        return this._parent_;\n      }\n    }\n  };\n  pi.element = pi.element.build();\n\n  pi.xhr = new pi.base;\n  pi.xhr.init = function(_url){\n    if(!window.XMLHttpRequest){\n      var names = [\"Msxml2.XMLHTTP.6.0\",\"Msxml2.XMLHTTP.3.0\",\"Msxml2.XMLHTTP\",\"Microsoft.XMLHTTP\"];\n      for (var i = 0; i < names.length; i++) {\n        try {\n          this.environment.setApi(new ActiveXObject(names[i]));\n          break;\n        } catch (e) { continue; }\n      }\n    }\n    else {\n      this.environment.setApi(new XMLHttpRequest());\n    }\n    this.environment.getApi().onreadystatechange=pi.util.Curry(this.event.readystatechange,this);\n    this.environment.setUrl(_url);\n    this.environment.setCallback([]);\n\n    return this;\n  };\n  pi.xhr.body = {\n    \"addCallback\": function(){\n      return this.environment.addCallback.apply(this.environment,arguments);\n    },\n    \"addData\": function(){\n      return this.environment.addData.apply(this.environment,arguments);\n    },\n    \"abort\":function(){\n      this.environment.getApi().abort();\n      return this;\n    },\n    \"send\":function(){\n      var url = this.environment.getUrl(), data = this.environment.getData(),dataUrl = \"\"; \n\n      if(!this.environment.getCache())\n        data[\"forceCache\"] = Number(new Date);\n\n      for (var key in data)\n        dataUrl += pi.util.String.format(\"{0}={1}&\",key, data[key]);\n\n      if (this.environment.getType()==\"GET\")\n        url += (url.search(\"\\\\?\")==-1?\"?\":\"&\")+pi.util.String.format(\"{0}\",dataUrl);\n\n      this.api.open(this.environment.getType(),url,this.environment.getAsync());\n      if(this.environment.getType()==\"POST\"){\n        this.api.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded\");\n      };\n      this.api.send(this.environment.getType()==\"GET\"?\"\":dataUrl);\n      return this;\n    }\n  };\n  pi.xhr.body.environment = {\n    \"_async\":true, \"_api\":null, \"_cache\":true, \"_callback\":null, \"_data\":{}, \"_type\":\"GET\", \"_url\":\"\",\n    \"setApi\":function(_value){\n      this._parent_.api = _value;\n      this._setApi(_value);\n    },\n    \"addCallback\": function(_readyState,_fn){\n      this.getCallback().push({ \"fn\":_fn, \"readyState\":_readyState  });\n      return this._parent_;\n    },\n    \"addData\": function(_key,_value){\n      this.getData()[_key] = _value;\n      return this._parent_;\n    },\n    \"setType\": function(_value){\n      this._setType(_value);\n      return this._parent_;\n    }\n  };\n  pi.xhr.body.event = {\n    \"readystatechange\":function(){\n      var readyState = this.environment.getApi().readyState, callback=this.environment.getCallback();\n      for (var i = 0, len=callback.length; i < len; i++) {\n        if(pi.util.Array.indexOf(callback[i].readyState,readyState)>-1){\n          callback[i].fn.apply(this);\n        }\n      }\n    }\n  };\n  pi.xhr = pi.xhr.build();\n\n  /*\n   * xml.xhr.get\n   */\n\n  pi.xhr.get = function(_url,_returnPiObject){\n    var request = new pi.xhr();\n    request.environment.setAsync(false);\n    request.environment.setUrl(_url);\n    request.send();\n    return _returnPiObject?request:request.environment.getApi();\n  };\n\n  /*\n   * registering onload event for init functions\n   */\n  pi.util.AddEvent(\n    pi.env.ie?window:document,\n    pi.env.ie?\"load\":\"DOMContentLoaded\",\n    function(){\n      for(var i=0,len=pi.util.Init.length; i<len; i++){\n        pi.util.Init[ i ]();\n      }\n    }\n  );\n})(firebug);\n\nwith(firebug){\n  initConsole();\n  lib.util.Init.push(firebug.init);\n}\n","Magento_Tinymce3/tiny_mce/classes/ui/ListBox.js":"/**\n * ListBox.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n\tvar DOM = tinymce.DOM, Event = tinymce.dom.Event, each = tinymce.each, Dispatcher = tinymce.util.Dispatcher;\n\n\t/**\n\t * This class is used to create list boxes/select list. This one will generate\n\t * a non native control. This one has the benefits of having visual items added.\n\t *\n\t * @class tinymce.ui.ListBox\n\t * @extends tinymce.ui.Control\n\t * @example\n\t * // Creates a new plugin class and a custom listbox\n\t * tinymce.create('tinymce.plugins.ExamplePlugin', {\n\t *     createControl: function(n, cm) {\n\t *         switch (n) {\n\t *             case 'mylistbox':\n\t *                 var mlb = cm.createListBox('mylistbox', {\n\t *                      title : 'My list box',\n\t *                      onselect : function(v) {\n\t *                          tinyMCE.activeEditor.windowManager.alert('Value selected:' + v);\n\t *                      }\n\t *                 });\n\t * \n\t *                 // Add some values to the list box\n\t *                 mlb.add('Some item 1', 'val1');\n\t *                 mlb.add('some item 2', 'val2');\n\t *                 mlb.add('some item 3', 'val3');\n\t * \n\t *                 // Return the new listbox instance\n\t *                 return mlb;\n\t *         }\n\t * \n\t *         return null;\n\t *     }\n\t * });\n\t * \n\t * // Register plugin with a short name\n\t * tinymce.PluginManager.add('example', tinymce.plugins.ExamplePlugin);\n\t * \n\t * // Initialize TinyMCE with the new plugin and button\n\t * tinyMCE.init({\n\t *    ...\n\t *    plugins : '-example', // - means TinyMCE will not try to load it\n\t *    theme_advanced_buttons1 : 'mylistbox' // Add the new example listbox to the toolbar\n\t * });\n\t */\n\ttinymce.create('tinymce.ui.ListBox:tinymce.ui.Control', {\n\t\t/**\n\t\t * Constructs a new listbox control instance.\n\t\t *\n\t\t * @constructor\n\t\t * @method ListBox\n\t\t * @param {String} id Control id for the list box.\n\t\t * @param {Object} s Optional name/value settings object.\n\t\t * @param {Editor} ed Optional the editor instance this button is for.\n\t\t */\n\t\tListBox : function(id, s, ed) {\n\t\t\tvar t = this;\n\n\t\t\tt.parent(id, s, ed);\n\n\t\t\t/**\n\t\t\t * Array of ListBox items.\n\t\t\t *\n\t\t\t * @property items\n\t\t\t * @type Array\n\t\t\t */\n\t\t\tt.items = [];\n\n\t\t\t/**\n\t\t\t * Fires when the selection has been changed.\n\t\t\t *\n\t\t\t * @event onChange\n\t\t\t */\n\t\t\tt.onChange = new Dispatcher(t);\n\n\t\t\t/**\n\t\t\t * Fires after the element has been rendered to DOM.\n\t\t\t *\n\t\t\t * @event onPostRender\n\t\t\t */\n\t\t\tt.onPostRender = new Dispatcher(t);\n\n\t\t\t/**\n\t\t\t * Fires when a new item is added.\n\t\t\t *\n\t\t\t * @event onAdd\n\t\t\t */\n\t\t\tt.onAdd = new Dispatcher(t);\n\n\t\t\t/**\n\t\t\t * Fires when the menu gets rendered.\n\t\t\t *\n\t\t\t * @event onRenderMenu\n\t\t\t */\n\t\t\tt.onRenderMenu = new tinymce.util.Dispatcher(this);\n\n\t\t\tt.classPrefix = 'mceListBox';\n\t\t},\n\n\t\t/**\n\t\t * Selects a item/option by value. This will both add a visual selection to the\n\t\t * item and change the title of the control to the title of the option.\n\t\t *\n\t\t * @method select\n\t\t * @param {String/function} va Value to look for inside the list box or a function selector.\n\t\t */\n\t\tselect : function(va) {\n\t\t\tvar t = this, fv, f;\n\n\t\t\tif (va == undefined)\n\t\t\t\treturn t.selectByIndex(-1);\n\n\t\t\t// Is string or number make function selector\n\t\t\tif (va && va.call)\n\t\t\t\tf = va;\n\t\t\telse {\n\t\t\t\tf = function(v) {\n\t\t\t\t\treturn v == va;\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// Do we need to do something?\n\t\t\tif (va != t.selectedValue) {\n\t\t\t\t// Find item\n\t\t\t\teach(t.items, function(o, i) {\n\t\t\t\t\tif (f(o.value)) {\n\t\t\t\t\t\tfv = 1;\n\t\t\t\t\t\tt.selectByIndex(i);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (!fv)\n\t\t\t\t\tt.selectByIndex(-1);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Selects a item/option by index. This will both add a visual selection to the\n\t\t * item and change the title of the control to the title of the option.\n\t\t *\n\t\t * @method selectByIndex\n\t\t * @param {String} idx Index to select, pass -1 to select menu/title of select box.\n\t\t */\n\t\tselectByIndex : function(idx) {\n\t\t\tvar t = this, e, o, label;\n\n\t\t\tif (idx != t.selectedIndex) {\n\t\t\t\te = DOM.get(t.id + '_text');\n\t\t\t\tlabel = DOM.get(t.id + '_voiceDesc');\n\t\t\t\to = t.items[idx];\n\n\t\t\t\tif (o) {\n\t\t\t\t\tt.selectedValue = o.value;\n\t\t\t\t\tt.selectedIndex = idx;\n\t\t\t\t\tDOM.setHTML(e, DOM.encode(o.title));\n\t\t\t\t\tDOM.setHTML(label, t.settings.title + \" - \" + o.title);\n\t\t\t\t\tDOM.removeClass(e, 'mceTitle');\n\t\t\t\t\tDOM.setAttrib(t.id, 'aria-valuenow', o.title);\n\t\t\t\t} else {\n\t\t\t\t\tDOM.setHTML(e, DOM.encode(t.settings.title));\n\t\t\t\t\tDOM.setHTML(label, DOM.encode(t.settings.title));\n\t\t\t\t\tDOM.addClass(e, 'mceTitle');\n\t\t\t\t\tt.selectedValue = t.selectedIndex = null;\n\t\t\t\t\tDOM.setAttrib(t.id, 'aria-valuenow', t.settings.title);\n\t\t\t\t}\n\t\t\t\te = 0;\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Adds a option item to the list box.\n\t\t *\n\t\t * @method add\n\t\t * @param {String} n Title for the new option.\n\t\t * @param {String} v Value for the new option.\n\t\t * @param {Object} o Optional object with settings like for example class.\n\t\t */\n\t\tadd : function(n, v, o) {\n\t\t\tvar t = this;\n\n\t\t\to = o || {};\n\t\t\to = tinymce.extend(o, {\n\t\t\t\ttitle : n,\n\t\t\t\tvalue : v\n\t\t\t});\n\n\t\t\tt.items.push(o);\n\t\t\tt.onAdd.dispatch(t, o);\n\t\t},\n\n\t\t/**\n\t\t * Returns the number of items inside the list box.\n\t\t *\n\t\t * @method getLength\n\t\t * @param {Number} Number of items inside the list box.\n\t\t */\n\t\tgetLength : function() {\n\t\t\treturn this.items.length;\n\t\t},\n\n\t\t/**\n\t\t * Renders the list box as a HTML string. This method is much faster than using the DOM and when\n\t\t * creating a whole toolbar with buttons it does make a lot of difference.\n\t\t *\n\t\t * @method renderHTML\n\t\t * @return {String} HTML for the list box control element.\n\t\t */\n\t\trenderHTML : function() {\n\t\t\tvar h = '', t = this, s = t.settings, cp = t.classPrefix;\n\n\t\t\th = '<span role=\"listbox\" aria-haspopup=\"true\" aria-labelledby=\"' + t.id +'_voiceDesc\" aria-describedby=\"' + t.id + '_voiceDesc\"><table role=\"presentation\" tabindex=\"0\" id=\"' + t.id + '\" cellpadding=\"0\" cellspacing=\"0\" class=\"' + cp + ' ' + cp + 'Enabled' + (s['class'] ? (' ' + s['class']) : '') + '\"><tbody><tr>';\n\t\t\th += '<td>' + DOM.createHTML('span', {id: t.id + '_voiceDesc', 'class': 'voiceLabel', style:'display:none;'}, t.settings.title); \n\t\t\th += DOM.createHTML('a', {id : t.id + '_text', tabindex : -1, href : 'javascript:;', 'class' : 'mceText', onclick : \"return false;\", onmousedown : 'return false;'}, DOM.encode(t.settings.title)) + '</td>';\n\t\t\th += '<td>' + DOM.createHTML('a', {id : t.id + '_open', tabindex : -1, href : 'javascript:;', 'class' : 'mceOpen', onclick : \"return false;\", onmousedown : 'return false;'}, '<span><span style=\"display:none;\" class=\"mceIconOnly\" aria-hidden=\"true\">\\u25BC</span></span>') + '</td>';\n\t\t\th += '</tr></tbody></table></span>';\n\n\t\t\treturn h;\n\t\t},\n\n\t\t/**\n\t\t * Displays the drop menu with all items.\n\t\t *\n\t\t * @method showMenu\n\t\t */\n\t\tshowMenu : function() {\n\t\t\tvar t = this, p2, e = DOM.get(this.id), m;\n\n\t\t\tif (t.isDisabled() || t.items.length == 0)\n\t\t\t\treturn;\n\n\t\t\tif (t.menu && t.menu.isMenuVisible)\n\t\t\t\treturn t.hideMenu();\n\n\t\t\tif (!t.isMenuRendered) {\n\t\t\t\tt.renderMenu();\n\t\t\t\tt.isMenuRendered = true;\n\t\t\t}\n\n\t\t\tp2 = DOM.getPos(e);\n\n\t\t\tm = t.menu;\n\t\t\tm.settings.offset_x = p2.x;\n\t\t\tm.settings.offset_y = p2.y;\n\t\t\tm.settings.keyboard_focus = !tinymce.isOpera; // Opera is buggy when it comes to auto focus\n\n\t\t\t// Select in menu\n\t\t\tif (t.oldID)\n\t\t\t\tm.items[t.oldID].setSelected(0);\n\n\t\t\teach(t.items, function(o) {\n\t\t\t\tif (o.value === t.selectedValue) {\n\t\t\t\t\tm.items[o.id].setSelected(1);\n\t\t\t\t\tt.oldID = o.id;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tm.showMenu(0, e.clientHeight);\n\n\t\t\tEvent.add(DOM.doc, 'mousedown', t.hideMenu, t);\n\t\t\tDOM.addClass(t.id, t.classPrefix + 'Selected');\n\n\t\t\t//DOM.get(t.id + '_text').focus();\n\t\t},\n\n\t\t/**\n\t\t * Hides the drop menu.\n\t\t *\n\t\t * @method hideMenu\n\t\t */\n\t\thideMenu : function(e) {\n\t\t\tvar t = this;\n\n\t\t\tif (t.menu && t.menu.isMenuVisible) {\n\t\t\t\tDOM.removeClass(t.id, t.classPrefix + 'Selected');\n\n\t\t\t\t// Prevent double toogles by canceling the mouse click event to the button\n\t\t\t\tif (e && e.type == \"mousedown\" && (e.target.id == t.id + '_text' || e.target.id == t.id + '_open'))\n\t\t\t\t\treturn;\n\n\t\t\t\tif (!e || !DOM.getParent(e.target, '.mceMenu')) {\n\t\t\t\t\tDOM.removeClass(t.id, t.classPrefix + 'Selected');\n\t\t\t\t\tEvent.remove(DOM.doc, 'mousedown', t.hideMenu, t);\n\t\t\t\t\tt.menu.hideMenu();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Renders the menu to the DOM.\n\t\t *\n\t\t * @method renderMenu\n\t\t */\n\t\trenderMenu : function() {\n\t\t\tvar t = this, m;\n\n\t\t\tm = t.settings.control_manager.createDropMenu(t.id + '_menu', {\n\t\t\t\tmenu_line : 1,\n\t\t\t\t'class' : t.classPrefix + 'Menu mceNoIcons',\n\t\t\t\tmax_width : 150,\n\t\t\t\tmax_height : 150\n\t\t\t});\n\n\t\t\tm.onHideMenu.add(function() {\n\t\t\t\tt.hideMenu();\n\t\t\t\tt.focus();\n\t\t\t});\n\n\t\t\tm.add({\n\t\t\t\ttitle : t.settings.title,\n\t\t\t\t'class' : 'mceMenuItemTitle',\n\t\t\t\tonclick : function() {\n\t\t\t\t\tif (t.settings.onselect('') !== false)\n\t\t\t\t\t\tt.select(''); // Must be runned after\n\t\t\t\t}\n\t\t\t});\n\n\t\t\teach(t.items, function(o) {\n\t\t\t\t// No value then treat it as a title\n\t\t\t\tif (o.value === undefined) {\n\t\t\t\t\tm.add({\n\t\t\t\t\t\ttitle : o.title,\n\t\t\t\t\t\trole : \"option\",\n\t\t\t\t\t\t'class' : 'mceMenuItemTitle',\n\t\t\t\t\t\tonclick : function() {\n\t\t\t\t\t\t\tif (t.settings.onselect('') !== false)\n\t\t\t\t\t\t\t\tt.select(''); // Must be runned after\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\to.id = DOM.uniqueId();\n\t\t\t\t\to.role= \"option\";\n\t\t\t\t\to.onclick = function() {\n\t\t\t\t\t\tif (t.settings.onselect(o.value) !== false)\n\t\t\t\t\t\t\tt.select(o.value); // Must be runned after\n\t\t\t\t\t};\n\n\t\t\t\t\tm.add(o);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tt.onRenderMenu.dispatch(t, m);\n\t\t\tt.menu = m;\n\t\t},\n\n\t\t/**\n\t\t * Post render event. This will be executed after the control has been rendered and can be used to\n\t\t * set states, add events to the control etc. It's recommended for subclasses of the control to call this method by using this.parent().\n\t\t *\n\t\t * @method postRender\n\t\t */\n\t\tpostRender : function() {\n\t\t\tvar t = this, cp = t.classPrefix;\n\n\t\t\tEvent.add(t.id, 'click', t.showMenu, t);\n\t\t\tEvent.add(t.id, 'keydown', function(evt) {\n\t\t\t\tif (evt.keyCode == 32) { // Space\n\t\t\t\t\tt.showMenu(evt);\n\t\t\t\t\tEvent.cancel(evt);\n\t\t\t\t}\n\t\t\t});\n\t\t\tEvent.add(t.id, 'focus', function() {\n\t\t\t\tif (!t._focused) {\n\t\t\t\t\tt.keyDownHandler = Event.add(t.id, 'keydown', function(e) {\n\t\t\t\t\t\tif (e.keyCode == 40) {\n\t\t\t\t\t\t\tt.showMenu();\n\t\t\t\t\t\t\tEvent.cancel(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tt.keyPressHandler = Event.add(t.id, 'keypress', function(e) {\n\t\t\t\t\t\tvar v;\n\t\t\t\t\t\tif (e.keyCode == 13) {\n\t\t\t\t\t\t\t// Fake select on enter\n\t\t\t\t\t\t\tv = t.selectedValue;\n\t\t\t\t\t\t\tt.selectedValue = null; // Needs to be null to fake change\n\t\t\t\t\t\t\tEvent.cancel(e);\n\t\t\t\t\t\t\tt.settings.onselect(v);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tt._focused = 1;\n\t\t\t});\n\t\t\tEvent.add(t.id, 'blur', function() {\n\t\t\t\tEvent.remove(t.id, 'keydown', t.keyDownHandler);\n\t\t\t\tEvent.remove(t.id, 'keypress', t.keyPressHandler);\n\t\t\t\tt._focused = 0;\n\t\t\t});\n\n\t\t\t// Old IE doesn't have hover on all elements\n\t\t\tif (tinymce.isIE6 || !DOM.boxModel) {\n\t\t\t\tEvent.add(t.id, 'mouseover', function() {\n\t\t\t\t\tif (!DOM.hasClass(t.id, cp + 'Disabled'))\n\t\t\t\t\t\tDOM.addClass(t.id, cp + 'Hover');\n\t\t\t\t});\n\n\t\t\t\tEvent.add(t.id, 'mouseout', function() {\n\t\t\t\t\tif (!DOM.hasClass(t.id, cp + 'Disabled'))\n\t\t\t\t\t\tDOM.removeClass(t.id, cp + 'Hover');\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tt.onPostRender.dispatch(t, DOM.get(t.id));\n\t\t},\n\n\t\t/**\n\t\t * Destroys the ListBox i.e. clear memory and events.\n\t\t *\n\t\t * @method destroy\n\t\t */\n\t\tdestroy : function() {\n\t\t\tthis.parent();\n\n\t\t\tEvent.clear(this.id + '_text');\n\t\t\tEvent.clear(this.id + '_open');\n\t\t}\n\t});\n})(tinymce);\n","Magento_Tinymce3/tiny_mce/classes/ui/Control.js":"/**\n * Control.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n\t// Shorten class names\n\tvar DOM = tinymce.DOM, is = tinymce.is;\n\n\t/**\n\t * This class is the base class for all controls like buttons, toolbars, containers. This class should not\n\t * be instantiated directly other controls should inherit from this one.\n\t *\n\t * @class tinymce.ui.Control\n\t */\n\ttinymce.create('tinymce.ui.Control', {\n\t\t/**\n\t\t * Constructs a new control instance.\n\t\t *\n\t\t * @constructor\n\t\t * @method Control\n\t\t * @param {String} id Control id.\n\t\t * @param {Object} s Optional name/value settings object.\n\t\t */\n\t\tControl : function(id, s, editor) {\n\t\t\tthis.id = id;\n\t\t\tthis.settings = s = s || {};\n\t\t\tthis.rendered = false;\n\t\t\tthis.onRender = new tinymce.util.Dispatcher(this);\n\t\t\tthis.classPrefix = '';\n\t\t\tthis.scope = s.scope || this;\n\t\t\tthis.disabled = 0;\n\t\t\tthis.active = 0;\n\t\t\tthis.editor = editor;\n\t\t},\n\t\t\n\t\tsetAriaProperty : function(property, value) {\n\t\t\tvar element = DOM.get(this.id + '_aria') || DOM.get(this.id);\n\t\t\tif (element) {\n\t\t\t\tDOM.setAttrib(element, 'aria-' + property, !!value);\n\t\t\t}\n\t\t},\n\t\t\n\t\tfocus : function() {\n\t\t\tDOM.get(this.id).focus();\n\t\t},\n\n\t\t/**\n\t\t * Sets the disabled state for the control. This will add CSS classes to the\n\t\t * element that contains the control. So that it can be disabled visually.\n\t\t *\n\t\t * @method setDisabled\n\t\t * @param {Boolean} s Boolean state if the control should be disabled or not.\n\t\t */\n\t\tsetDisabled : function(s) {\n\t\t\tif (s != this.disabled) {\n\t\t\t\tthis.setAriaProperty('disabled', s);\n\n\t\t\t\tthis.setState('Disabled', s);\n\t\t\t\tthis.setState('Enabled', !s);\n\t\t\t\tthis.disabled = s;\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Returns true/false if the control is disabled or not. This is a method since you can then\n\t\t * choose to check some class or some internal bool state in subclasses.\n\t\t *\n\t\t * @method isDisabled\n\t\t * @return {Boolean} true/false if the control is disabled or not.\n\t\t */\n\t\tisDisabled : function() {\n\t\t\treturn this.disabled;\n\t\t},\n\n\t\t/**\n\t\t * Sets the activated state for the control. This will add CSS classes to the\n\t\t * element that contains the control. So that it can be activated visually.\n\t\t *\n\t\t * @method setActive\n\t\t * @param {Boolean} s Boolean state if the control should be activated or not.\n\t\t */\n\t\tsetActive : function(s) {\n\t\t\tif (s != this.active) {\n\t\t\t\tthis.setState('Active', s);\n\t\t\t\tthis.active = s;\n\t\t\t\tthis.setAriaProperty('pressed', s);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Returns true/false if the control is disabled or not. This is a method since you can then\n\t\t * choose to check some class or some internal bool state in subclasses.\n\t\t *\n\t\t * @method isActive\n\t\t * @return {Boolean} true/false if the control is disabled or not.\n\t\t */\n\t\tisActive : function() {\n\t\t\treturn this.active;\n\t\t},\n\n\t\t/**\n\t\t * Sets the specified class state for the control.\n\t\t *\n\t\t * @method setState\n\t\t * @param {String} c Class name to add/remove depending on state.\n\t\t * @param {Boolean} s True/false state if the class should be removed or added.\n\t\t */\n\t\tsetState : function(c, s) {\n\t\t\tvar n = DOM.get(this.id);\n\n\t\t\tc = this.classPrefix + c;\n\n\t\t\tif (s)\n\t\t\t\tDOM.addClass(n, c);\n\t\t\telse\n\t\t\t\tDOM.removeClass(n, c);\n\t\t},\n\n\t\t/**\n\t\t * Returns true/false if the control has been rendered or not.\n\t\t *\n\t\t * @method isRendered\n\t\t * @return {Boolean} State if the control has been rendered or not.\n\t\t */\n\t\tisRendered : function() {\n\t\t\treturn this.rendered;\n\t\t},\n\n\t\t/**\n\t\t * Renders the control as a HTML string. This method is much faster than using the DOM and when\n\t\t * creating a whole toolbar with buttons it does make a lot of difference.\n\t\t *\n\t\t * @method renderHTML\n\t\t * @return {String} HTML for the button control element.\n\t\t */\n\t\trenderHTML : function() {\n\t\t},\n\n\t\t/**\n\t\t * Renders the control to the specified container element.\n\t\t *\n\t\t * @method renderTo\n\t\t * @param {Element} n HTML DOM element to add control to.\n\t\t */\n\t\trenderTo : function(n) {\n\t\t\tDOM.setHTML(n, this.renderHTML());\n\t\t},\n\n\t\t/**\n\t\t * Post render event. This will be executed after the control has been rendered and can be used to\n\t\t * set states, add events to the control etc. It's recommended for subclasses of the control to call this method by using this.parent().\n\t\t *\n\t\t * @method postRender\n\t\t */\n\t\tpostRender : function() {\n\t\t\tvar t = this, b;\n\n\t\t\t// Set pending states\n\t\t\tif (is(t.disabled)) {\n\t\t\t\tb = t.disabled;\n\t\t\t\tt.disabled = -1;\n\t\t\t\tt.setDisabled(b);\n\t\t\t}\n\n\t\t\tif (is(t.active)) {\n\t\t\t\tb = t.active;\n\t\t\t\tt.active = -1;\n\t\t\t\tt.setActive(b);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Removes the control. This means it will be removed from the DOM and any\n\t\t * events tied to it will also be removed.\n\t\t *\n\t\t * @method remove\n\t\t */\n\t\tremove : function() {\n\t\t\tDOM.remove(this.id);\n\t\t\tthis.destroy();\n\t\t},\n\n\t\t/**\n\t\t * Destroys the control will free any memory by removing event listeners etc.\n\t\t *\n\t\t * @method destroy\n\t\t */\n\t\tdestroy : function() {\n\t\t\ttinymce.dom.Event.clear(this.id);\n\t\t}\n\t});\n})(tinymce);","Magento_Tinymce3/tiny_mce/classes/ui/Separator.js":"/**\n * Separator.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n/**\n * This class is used to create vertical separator between other controls.\n *\n * @class tinymce.ui.Separator\n * @extends tinymce.ui.Control\n */\ntinymce.create('tinymce.ui.Separator:tinymce.ui.Control', {\n\t/**\n\t * Separator constructor.\n\t *\n\t * @constructor\n\t * @method Separator\n\t * @param {String} id Control id to use for the Separator.\n\t * @param {Object} s Optional name/value settings object.\n\t */\n\tSeparator : function(id, s) {\n\t\tthis.parent(id, s);\n\t\tthis.classPrefix = 'mceSeparator';\n\t\tthis.setDisabled(true);\n\t},\n\n\t/**\n\t * Renders the separator as a HTML string. This method is much faster than using the DOM and when\n\t * creating a whole toolbar with buttons it does make a lot of difference.\n\t *\n\t * @method renderHTML\n\t * @return {String} HTML for the separator control element.\n\t */\n\trenderHTML : function() {\n\t\treturn tinymce.DOM.createHTML('span', {'class' : this.classPrefix, role : 'separator', 'aria-orientation' : 'vertical', tabindex : '-1'});\n\t}\n});\n","Magento_Tinymce3/tiny_mce/classes/ui/KeyboardNavigation.js":"/**\n * KeyboardNavigation.js\n *\n * Copyright 2011, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n\tvar Event = tinymce.dom.Event, each = tinymce.each;\n\n\t/**\n\t * This class provides basic keyboard navigation using the arrow keys to children of a component.\n\t * For example, this class handles moving between the buttons on the toolbars. \n\t * \n\t * @class tinymce.ui.KeyboardNavigation\n\t */\n\ttinymce.create('tinymce.ui.KeyboardNavigation', {\n\t\t/**\n\t\t * Create a new KeyboardNavigation instance to handle the focus for a specific element.\n\t\t * \n\t\t * @constructor\n\t\t * @method KeyboardNavigation\n\t\t * @param {Object} settings the settings object to define how keyboard navigation works.\n\t\t * @param {DOMUtils} dom the DOMUtils instance to use.\n\t\t * \n\t\t * @setting {Element/String} root the root element or ID of the root element for the control.\n\t\t * @setting {Array} items an array containing the items to move focus between. Every object in this array must have an id attribute which maps to the actual DOM element. If the actual elements are passed without an ID then one is automatically assigned.\n\t\t * @setting {Function} onCancel the callback for when the user presses escape or otherwise indicates cancelling.\n\t\t * @setting {Function} onAction (optional) the action handler to call when the user activates an item.\n\t\t * @setting {Boolean} enableLeftRight (optional, default) when true, the up/down arrows move through items.\n\t\t * @setting {Boolean} enableUpDown (optional) when true, the up/down arrows move through items.\n\t\t * Note for both up/down and left/right explicitly set both enableLeftRight and enableUpDown to true.\n\t\t */\n\t\tKeyboardNavigation: function(settings, dom) {\n\t\t\tvar t = this, root = settings.root, items = settings.items,\n\t\t\t\t\tenableUpDown = settings.enableUpDown, enableLeftRight = settings.enableLeftRight || !settings.enableUpDown,\n\t\t\t\t\texcludeFromTabOrder = settings.excludeFromTabOrder,\n\t\t\t\t\titemFocussed, itemBlurred, rootKeydown, rootFocussed, focussedId;\n\n\t\t\tdom = dom || tinymce.DOM;\n\n\t\t\titemFocussed = function(evt) {\n\t\t\t\tfocussedId = evt.target.id;\n\t\t\t};\n\t\t\t\n\t\t\titemBlurred = function(evt) {\n\t\t\t\tdom.setAttrib(evt.target.id, 'tabindex', '-1');\n\t\t\t};\n\t\t\t\n\t\t\trootFocussed = function(evt) {\n\t\t\t\tvar item = dom.get(focussedId);\n\t\t\t\tdom.setAttrib(item, 'tabindex', '0');\n\t\t\t\titem.focus();\n\t\t\t};\n\t\t\t\n\t\t\tt.focus = function() {\n\t\t\t\tdom.get(focussedId).focus();\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Destroys the KeyboardNavigation and unbinds any focus/blur event handles it might have added.\n\t\t\t *\n\t\t\t * @method destroy\n\t\t\t */\n\t\t\tt.destroy = function() {\n\t\t\t\teach(items, function(item) {\n\t\t\t\t\tdom.unbind(dom.get(item.id), 'focus', itemFocussed);\n\t\t\t\t\tdom.unbind(dom.get(item.id), 'blur', itemBlurred);\n\t\t\t\t});\n\n\t\t\t\tdom.unbind(dom.get(root), 'focus', rootFocussed);\n\t\t\t\tdom.unbind(dom.get(root), 'keydown', rootKeydown);\n\n\t\t\t\titems = dom = root = t.focus = itemFocussed = itemBlurred = rootKeydown = rootFocussed = null;\n\t\t\t\tt.destroy = function() {};\n\t\t\t};\n\t\t\t\n\t\t\tt.moveFocus = function(dir, evt) {\n\t\t\t\tvar idx = -1, controls = t.controls, newFocus;\n\n\t\t\t\tif (!focussedId)\n\t\t\t\t\treturn;\n\n\t\t\t\teach(items, function(item, index) {\n\t\t\t\t\tif (item.id === focussedId) {\n\t\t\t\t\t\tidx = index;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tidx += dir;\n\t\t\t\tif (idx < 0) {\n\t\t\t\t\tidx = items.length - 1;\n\t\t\t\t} else if (idx >= items.length) {\n\t\t\t\t\tidx = 0;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tnewFocus = items[idx];\n\t\t\t\tdom.setAttrib(focussedId, 'tabindex', '-1');\n\t\t\t\tdom.setAttrib(newFocus.id, 'tabindex', '0');\n\t\t\t\tdom.get(newFocus.id).focus();\n\n\t\t\t\tif (settings.actOnFocus) {\n\t\t\t\t\tsettings.onAction(newFocus.id);\n\t\t\t\t}\n\n\t\t\t\tif (evt)\n\t\t\t\t\tEvent.cancel(evt);\n\t\t\t};\n\t\t\t\n\t\t\trootKeydown = function(evt) {\n\t\t\t\tvar DOM_VK_LEFT = 37, DOM_VK_RIGHT = 39, DOM_VK_UP = 38, DOM_VK_DOWN = 40, DOM_VK_ESCAPE = 27, DOM_VK_ENTER = 14, DOM_VK_RETURN = 13, DOM_VK_SPACE = 32;\n\t\t\t\t\n\t\t\t\tswitch (evt.keyCode) {\n\t\t\t\t\tcase DOM_VK_LEFT:\n\t\t\t\t\t\tif (enableLeftRight) t.moveFocus(-1);\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase DOM_VK_RIGHT:\n\t\t\t\t\t\tif (enableLeftRight) t.moveFocus(1);\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase DOM_VK_UP:\n\t\t\t\t\t\tif (enableUpDown) t.moveFocus(-1);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase DOM_VK_DOWN:\n\t\t\t\t\t\tif (enableUpDown) t.moveFocus(1);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase DOM_VK_ESCAPE:\n\t\t\t\t\t\tif (settings.onCancel) {\n\t\t\t\t\t\t\tsettings.onCancel();\n\t\t\t\t\t\t\tEvent.cancel(evt);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase DOM_VK_ENTER:\n\t\t\t\t\tcase DOM_VK_RETURN:\n\t\t\t\t\tcase DOM_VK_SPACE:\n\t\t\t\t\t\tif (settings.onAction) {\n\t\t\t\t\t\t\tsettings.onAction(focussedId);\n\t\t\t\t\t\t\tEvent.cancel(evt);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Set up state and listeners for each item.\n\t\t\teach(items, function(item, idx) {\n\t\t\t\tvar tabindex;\n\n\t\t\t\tif (!item.id) {\n\t\t\t\t\titem.id = dom.uniqueId('_mce_item_');\n\t\t\t\t}\n\n\t\t\t\tif (excludeFromTabOrder) {\n\t\t\t\t\tdom.bind(item.id, 'blur', itemBlurred);\n\t\t\t\t\ttabindex = '-1';\n\t\t\t\t} else {\n\t\t\t\t\ttabindex = (idx === 0 ? '0' : '-1');\n\t\t\t\t}\n\n\t\t\t\tdom.setAttrib(item.id, 'tabindex', tabindex);\n\t\t\t\tdom.bind(dom.get(item.id), 'focus', itemFocussed);\n\t\t\t});\n\t\t\t\n\t\t\t// Setup initial state for root element.\n\t\t\tif (items[0]){\n\t\t\t\tfocussedId = items[0].id;\n\t\t\t}\n\n\t\t\tdom.setAttrib(root, 'tabindex', '-1');\n\t\t\t\n\t\t\t// Setup listeners for root element.\n\t\t\tdom.bind(dom.get(root), 'focus', rootFocussed);\n\t\t\tdom.bind(dom.get(root), 'keydown', rootKeydown);\n\t\t}\n\t});\n})(tinymce);\n","Magento_Tinymce3/tiny_mce/classes/ui/Toolbar.js":"/**\n * Toolbar.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n// Shorten class names\nvar dom = tinymce.DOM, each = tinymce.each;\n/**\n * This class is used to create toolbars a toolbar is a container for other controls like buttons etc.\n *\n * @class tinymce.ui.Toolbar\n * @extends tinymce.ui.Container\n */\ntinymce.create('tinymce.ui.Toolbar:tinymce.ui.Container', {\n\t/**\n\t * Renders the toolbar as a HTML string. This method is much faster than using the DOM and when\n\t * creating a whole toolbar with buttons it does make a lot of difference.\n\t *\n\t * @method renderHTML\n\t * @return {String} HTML for the toolbar control.\n\t */\n\trenderHTML : function() {\n\t\tvar t = this, h = '', c, co, s = t.settings, i, pr, nx, cl;\n\n\t\tcl = t.controls;\n\t\tfor (i=0; i<cl.length; i++) {\n\t\t\t// Get current control, prev control, next control and if the control is a list box or not\n\t\t\tco = cl[i];\n\t\t\tpr = cl[i - 1];\n\t\t\tnx = cl[i + 1];\n\n\t\t\t// Add toolbar start\n\t\t\tif (i === 0) {\n\t\t\t\tc = 'mceToolbarStart';\n\n\t\t\t\tif (co.Button)\n\t\t\t\t\tc += ' mceToolbarStartButton';\n\t\t\t\telse if (co.SplitButton)\n\t\t\t\t\tc += ' mceToolbarStartSplitButton';\n\t\t\t\telse if (co.ListBox)\n\t\t\t\t\tc += ' mceToolbarStartListBox';\n\n\t\t\t\th += dom.createHTML('td', {'class' : c}, dom.createHTML('span', null, '<!-- IE -->'));\n\t\t\t}\n\n\t\t\t// Add toolbar end before list box and after the previous button\n\t\t\t// This is to fix the o2k7 editor skins\n\t\t\tif (pr && co.ListBox) {\n\t\t\t\tif (pr.Button || pr.SplitButton)\n\t\t\t\t\th += dom.createHTML('td', {'class' : 'mceToolbarEnd'}, dom.createHTML('span', null, '<!-- IE -->'));\n\t\t\t}\n\n\t\t\t// Render control HTML\n\n\t\t\t// IE 8 quick fix, needed to propertly generate a hit area for anchors\n\t\t\tif (dom.stdMode)\n\t\t\t\th += '<td style=\"position: relative\">' + co.renderHTML() + '</td>';\n\t\t\telse\n\t\t\t\th += '<td>' + co.renderHTML() + '</td>';\n\n\t\t\t// Add toolbar start after list box and before the next button\n\t\t\t// This is to fix the o2k7 editor skins\n\t\t\tif (nx && co.ListBox) {\n\t\t\t\tif (nx.Button || nx.SplitButton)\n\t\t\t\t\th += dom.createHTML('td', {'class' : 'mceToolbarStart'}, dom.createHTML('span', null, '<!-- IE -->'));\n\t\t\t}\n\t\t}\n\n\t\tc = 'mceToolbarEnd';\n\n\t\tif (co.Button)\n\t\t\tc += ' mceToolbarEndButton';\n\t\telse if (co.SplitButton)\n\t\t\tc += ' mceToolbarEndSplitButton';\n\t\telse if (co.ListBox)\n\t\t\tc += ' mceToolbarEndListBox';\n\n\t\th += dom.createHTML('td', {'class' : c}, dom.createHTML('span', null, '<!-- IE -->'));\n\n\t\treturn dom.createHTML('table', {id : t.id, 'class' : 'mceToolbar' + (s['class'] ? ' ' + s['class'] : ''), cellpadding : '0', cellspacing : '0', align : t.settings.align || '', role: 'presentation', tabindex: '-1'}, '<tbody><tr>' + h + '</tr></tbody>');\n\t}\n});\n})(tinymce);\n","Magento_Tinymce3/tiny_mce/classes/ui/NativeListBox.js":"/**\n * NativeListBox.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n\tvar DOM = tinymce.DOM, Event = tinymce.dom.Event, each = tinymce.each, Dispatcher = tinymce.util.Dispatcher;\n\n\t/**\n\t * This class is used to create list boxes/select list. This one will generate\n\t * a native control the way that the browser produces them by default.\n\t *\n\t * @class tinymce.ui.NativeListBox\n\t * @extends tinymce.ui.ListBox\n\t */\n\ttinymce.create('tinymce.ui.NativeListBox:tinymce.ui.ListBox', {\n\t\t/**\n\t\t * Constructs a new button control instance.\n\t\t *\n\t\t * @constructor\n\t\t * @method NativeListBox\n\t\t * @param {String} id Button control id for the button.\n\t\t * @param {Object} s Optional name/value settings object.\n\t\t */\n\t\tNativeListBox : function(id, s) {\n\t\t\tthis.parent(id, s);\n\t\t\tthis.classPrefix = 'mceNativeListBox';\n\t\t},\n\n\t\t/**\n\t\t * Sets the disabled state for the control. This will add CSS classes to the\n\t\t * element that contains the control. So that it can be disabled visually.\n\t\t *\n\t\t * @method setDisabled\n\t\t * @param {Boolean} s Boolean state if the control should be disabled or not.\n\t\t */\n\t\tsetDisabled : function(s) {\n\t\t\tDOM.get(this.id).disabled = s;\n\t\t\tthis.setAriaProperty('disabled', s);\n\t\t},\n\n\t\t/**\n\t\t * Returns true/false if the control is disabled or not. This is a method since you can then\n\t\t * choose to check some class or some internal bool state in subclasses.\n\t\t *\n\t\t * @method isDisabled\n\t\t * @return {Boolean} true/false if the control is disabled or not.\n\t\t */\n\t\tisDisabled : function() {\n\t\t\treturn DOM.get(this.id).disabled;\n\t\t},\n\n\t\t/**\n\t\t * Selects a item/option by value. This will both add a visual selection to the\n\t\t * item and change the title of the control to the title of the option.\n\t\t *\n\t\t * @method select\n\t\t * @param {String/function} va Value to look for inside the list box or a function selector.\n\t\t */\n\t\tselect : function(va) {\n\t\t\tvar t = this, fv, f;\n\n\t\t\tif (va == undefined)\n\t\t\t\treturn t.selectByIndex(-1);\n\n\t\t\t// Is string or number make function selector\n\t\t\tif (va && va.call)\n\t\t\t\tf = va;\n\t\t\telse {\n\t\t\t\tf = function(v) {\n\t\t\t\t\treturn v == va;\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// Do we need to do something?\n\t\t\tif (va != t.selectedValue) {\n\t\t\t\t// Find item\n\t\t\t\teach(t.items, function(o, i) {\n\t\t\t\t\tif (f(o.value)) {\n\t\t\t\t\t\tfv = 1;\n\t\t\t\t\t\tt.selectByIndex(i);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (!fv)\n\t\t\t\t\tt.selectByIndex(-1);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Selects a item/option by index. This will both add a visual selection to the\n\t\t * item and change the title of the control to the title of the option.\n\t\t *\n\t\t * @method selectByIndex\n\t\t * @param {String} idx Index to select, pass -1 to select menu/title of select box.\n\t\t */\n\t\tselectByIndex : function(idx) {\n\t\t\tDOM.get(this.id).selectedIndex = idx + 1;\n\t\t\tthis.selectedValue = this.items[idx] ? this.items[idx].value : null;\n\t\t},\n\n\t\t/**\n\t\t * Adds a option item to the list box.\n\t\t *\n\t\t * @method add\n\t\t * @param {String} n Title for the new option.\n\t\t * @param {String} v Value for the new option.\n\t\t * @param {Object} o Optional object with settings like for example class.\n\t\t */\n\t\tadd : function(n, v, a) {\n\t\t\tvar o, t = this;\n\n\t\t\ta = a || {};\n\t\t\ta.value = v;\n\n\t\t\tif (t.isRendered())\n\t\t\t\tDOM.add(DOM.get(this.id), 'option', a, n);\n\n\t\t\to = {\n\t\t\t\ttitle : n,\n\t\t\t\tvalue : v,\n\t\t\t\tattribs : a\n\t\t\t};\n\n\t\t\tt.items.push(o);\n\t\t\tt.onAdd.dispatch(t, o);\n\t\t},\n\n\t\t/**\n\t\t * Executes the specified callback function for the menu item. In this case when the user clicks the menu item.\n\t\t *\n\t\t * @method getLength\n\t\t */\n\t\tgetLength : function() {\n\t\t\treturn this.items.length;\n\t\t},\n\n\t\t/**\n\t\t * Renders the list box as a HTML string. This method is much faster than using the DOM and when\n\t\t * creating a whole toolbar with buttons it does make a lot of difference.\n\t\t *\n\t\t * @method renderHTML\n\t\t * @return {String} HTML for the list box control element.\n\t\t */\n\t\trenderHTML : function() {\n\t\t\tvar h, t = this;\n\n\t\t\th = DOM.createHTML('option', {value : ''}, '-- ' + t.settings.title + ' --');\n\n\t\t\teach(t.items, function(it) {\n\t\t\t\th += DOM.createHTML('option', {value : it.value}, it.title);\n\t\t\t});\n\n\t\t\th = DOM.createHTML('select', {id : t.id, 'class' : 'mceNativeListBox', 'aria-labelledby': t.id + '_aria'}, h);\n\t\t\th += DOM.createHTML('span', {id : t.id + '_aria', 'style': 'display: none'}, t.settings.title);\n\t\t\treturn h;\n\t\t},\n\n\t\t/**\n\t\t * Post render handler. This function will be called after the UI has been\n\t\t * rendered so that events can be added.\n\t\t *\n\t\t * @method postRender\n\t\t */\n\t\tpostRender : function() {\n\t\t\tvar t = this, ch, changeListenerAdded = true;\n\n\t\t\tt.rendered = true;\n\n\t\t\tfunction onChange(e) {\n\t\t\t\tvar v = t.items[e.target.selectedIndex - 1];\n\n\t\t\t\tif (v && (v = v.value)) {\n\t\t\t\t\tt.onChange.dispatch(t, v);\n\n\t\t\t\t\tif (t.settings.onselect)\n\t\t\t\t\t\tt.settings.onselect(v);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tEvent.add(t.id, 'change', onChange);\n\n\t\t\t// Accessibility keyhandler\n\t\t\tEvent.add(t.id, 'keydown', function(e) {\n\t\t\t\tvar bf;\n\n\t\t\t\tEvent.remove(t.id, 'change', ch);\n\t\t\t\tchangeListenerAdded = false;\n\n\t\t\t\tbf = Event.add(t.id, 'blur', function() {\n\t\t\t\t\tif (changeListenerAdded) return;\n\t\t\t\t\tchangeListenerAdded = true;\n\t\t\t\t\tEvent.add(t.id, 'change', onChange);\n\t\t\t\t\tEvent.remove(t.id, 'blur', bf);\n\t\t\t\t});\n\n\t\t\t\t//prevent default left and right keys on chrome - so that the keyboard navigation is used.\n\t\t\t\tif (tinymce.isWebKit && (e.keyCode==37 ||e.keyCode==39)) {\n\t\t\t\t\treturn Event.prevent(e);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (e.keyCode == 13 || e.keyCode == 32) {\n\t\t\t\t\tonChange(e);\n\t\t\t\t\treturn Event.cancel(e);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tt.onPostRender.dispatch(t, DOM.get(t.id));\n\t\t}\n\t});\n})(tinymce);\n","Magento_Tinymce3/tiny_mce/classes/ui/SplitButton.js":"/**\n * SplitButton.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n\tvar DOM = tinymce.DOM, Event = tinymce.dom.Event, each = tinymce.each;\n\n\t/**\n\t * This class is used to create a split button. A button with a menu attached to it.\n\t *\n\t * @class tinymce.ui.SplitButton\n\t * @extends tinymce.ui.Button\n\t * @example\n\t * // Creates a new plugin class and a custom split button\n\t * tinymce.create('tinymce.plugins.ExamplePlugin', {\n\t *     createControl: function(n, cm) {\n\t *         switch (n) {\n\t *             case 'mysplitbutton':\n\t *                 var c = cm.createSplitButton('mysplitbutton', {\n\t *                     title : 'My split button',\n\t *                     image : 'some.gif',\n\t *                     onclick : function() {\n\t *                         alert('Button was clicked.');\n\t *                     }\n\t *                 });\n\t * \n\t *                 c.onRenderMenu.add(function(c, m) {\n\t *                     m.add({title : 'Some title', 'class' : 'mceMenuItemTitle'}).setDisabled(1);\n\t * \n\t *                     m.add({title : 'Some item 1', onclick : function() {\n\t *                         alert('Some item 1 was clicked.');\n\t *                     }});\n\t * \n\t *                     m.add({title : 'Some item 2', onclick : function() {\n\t *                         alert('Some item 2 was clicked.');\n\t *                     }});\n\t *                 });\n\t * \n\t *               // Return the new splitbutton instance\n\t *               return c;\n\t *         }\n\t * \n\t *         return null;\n\t *     }\n\t * });\n\t */\n\ttinymce.create('tinymce.ui.SplitButton:tinymce.ui.MenuButton', {\n\t\t/**\n\t\t * Constructs a new split button control instance.\n\t\t *\n\t\t * @constructor\n\t\t * @method SplitButton\n\t\t * @param {String} id Control id for the split button.\n\t\t * @param {Object} s Optional name/value settings object.\n\t\t * @param {Editor} ed Optional the editor instance this button is for.\n\t\t */\n\t\tSplitButton : function(id, s, ed) {\n\t\t\tthis.parent(id, s, ed);\n\t\t\tthis.classPrefix = 'mceSplitButton';\n\t\t},\n\n\t\t/**\n\t\t * Renders the split button as a HTML string. This method is much faster than using the DOM and when\n\t\t * creating a whole toolbar with buttons it does make a lot of difference.\n\t\t *\n\t\t * @method renderHTML\n\t\t * @return {String} HTML for the split button control element.\n\t\t */\n\t\trenderHTML : function() {\n\t\t\tvar h, t = this, s = t.settings, h1;\n\n\t\t\th = '<tbody><tr>';\n\n\t\t\tif (s.image)\n\t\t\t\th1 = DOM.createHTML('img ', {src : s.image, role: 'presentation', 'class' : 'mceAction ' + s['class']});\n\t\t\telse\n\t\t\t\th1 = DOM.createHTML('span', {'class' : 'mceAction ' + s['class']}, '');\n\n\t\t\th1 += DOM.createHTML('span', {'class': 'mceVoiceLabel mceIconOnly', id: t.id + '_voice', style: 'display:none;'}, s.title);\n\t\t\th += '<td >' + DOM.createHTML('a', {role: 'button', id : t.id + '_action', tabindex: '-1', href : 'javascript:;', 'class' : 'mceAction ' + s['class'], onclick : \"return false;\", onmousedown : 'return false;', title : s.title}, h1) + '</td>';\n\t\n\t\t\th1 = DOM.createHTML('span', {'class' : 'mceOpen ' + s['class']}, '<span style=\"display:none;\" class=\"mceIconOnly\" aria-hidden=\"true\">\\u25BC</span>');\n\t\t\th += '<td >' + DOM.createHTML('a', {role: 'button', id : t.id + '_open', tabindex: '-1', href : 'javascript:;', 'class' : 'mceOpen ' + s['class'], onclick : \"return false;\", onmousedown : 'return false;', title : s.title}, h1) + '</td>';\n\n\t\t\th += '</tr></tbody>';\n\t\t\th = DOM.createHTML('table', { role: 'presentation',   'class' : 'mceSplitButton mceSplitButtonEnabled ' + s['class'], cellpadding : '0', cellspacing : '0', title : s.title}, h);\n\t\t\treturn DOM.createHTML('div', {id : t.id, role: 'button', tabindex: '0', 'aria-labelledby': t.id + '_voice', 'aria-haspopup': 'true'}, h);\n\t\t},\n\n\t\t/**\n\t\t * Post render handler. This function will be called after the UI has been\n\t\t * rendered so that events can be added.\n\t\t *\n\t\t * @method postRender\n\t\t */\n\t\tpostRender : function() {\n\t\t\tvar t = this, s = t.settings, activate;\n\n\t\t\tif (s.onclick) {\n\t\t\t\tactivate = function(evt) {\n\t\t\t\t\tif (!t.isDisabled()) {\n\t\t\t\t\t\ts.onclick(t.value);\n\t\t\t\t\t\tEvent.cancel(evt);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tEvent.add(t.id + '_action', 'click', activate);\n\t\t\t\tEvent.add(t.id, ['click', 'keydown'], function(evt) {\n\t\t\t\t\tvar DOM_VK_SPACE = 32, DOM_VK_ENTER = 14, DOM_VK_RETURN = 13, DOM_VK_UP = 38, DOM_VK_DOWN = 40;\n\t\t\t\t\tif ((evt.keyCode === 32 || evt.keyCode === 13 || evt.keyCode === 14) && !evt.altKey && !evt.ctrlKey && !evt.metaKey) {\n\t\t\t\t\t\tactivate();\n\t\t\t\t\t\tEvent.cancel(evt);\n\t\t\t\t\t} else if (evt.type === 'click' || evt.keyCode === DOM_VK_DOWN) {\n\t\t\t\t\t\tt.showMenu();\n\t\t\t\t\t\tEvent.cancel(evt);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tEvent.add(t.id + '_open', 'click', function (evt) {\n\t\t\t\tt.showMenu();\n\t\t\t\tEvent.cancel(evt);\n\t\t\t});\n\t\t\tEvent.add([t.id, t.id + '_open'], 'focus', function() {t._focused = 1;});\n\t\t\tEvent.add([t.id, t.id + '_open'], 'blur', function() {t._focused = 0;});\n\n\t\t\t// Old IE doesn't have hover on all elements\n\t\t\tif (tinymce.isIE6 || !DOM.boxModel) {\n\t\t\t\tEvent.add(t.id, 'mouseover', function() {\n\t\t\t\t\tif (!DOM.hasClass(t.id, 'mceSplitButtonDisabled'))\n\t\t\t\t\t\tDOM.addClass(t.id, 'mceSplitButtonHover');\n\t\t\t\t});\n\n\t\t\t\tEvent.add(t.id, 'mouseout', function() {\n\t\t\t\t\tif (!DOM.hasClass(t.id, 'mceSplitButtonDisabled'))\n\t\t\t\t\t\tDOM.removeClass(t.id, 'mceSplitButtonHover');\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tdestroy : function() {\n\t\t\tthis.parent();\n\n\t\t\tEvent.clear(this.id + '_action');\n\t\t\tEvent.clear(this.id + '_open');\n\t\t\tEvent.clear(this.id);\n\t\t}\n\t});\n})(tinymce);\n","Magento_Tinymce3/tiny_mce/classes/ui/ColorSplitButton.js":"/**\n * ColorSplitButton.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n\tvar DOM = tinymce.DOM, Event = tinymce.dom.Event, is = tinymce.is, each = tinymce.each;\n\n\t/**\n\t * This class is used to create UI color split button. A color split button will present show a small color picker\n\t * when you press the open menu.\n\t *\n\t * @class tinymce.ui.ColorSplitButton\n\t * @extends tinymce.ui.SplitButton\n\t */\n\ttinymce.create('tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton', {\n\t\t/**\n\t\t * Constructs a new color split button control instance.\n\t\t *\n\t\t * @constructor\n\t\t * @method ColorSplitButton\n\t\t * @param {String} id Control id for the color split button.\n\t\t * @param {Object} s Optional name/value settings object.\n\t\t * @param {Editor} ed The editor instance this button is for.\n\t\t */\n\t\tColorSplitButton : function(id, s, ed) {\n\t\t\tvar t = this;\n\n\t\t\tt.parent(id, s, ed);\n\n\t\t\t/**\n\t\t\t * Settings object.\n\t\t\t *\n\t\t\t * @property settings\n\t\t\t * @type Object\n\t\t\t */\n\t\t\tt.settings = s = tinymce.extend({\n\t\t\t\tcolors : '000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF',\n\t\t\t\tgrid_width : 8,\n\t\t\t\tdefault_color : '#888888'\n\t\t\t}, t.settings);\n\n\t\t\t/**\n\t\t\t * Fires when the menu is shown.\n\t\t\t *\n\t\t\t * @event onShowMenu\n\t\t\t */\n\t\t\tt.onShowMenu = new tinymce.util.Dispatcher(t);\n\n\t\t\t/**\n\t\t\t * Fires when the menu is hidden.\n\t\t\t *\n\t\t\t * @event onHideMenu\n\t\t\t */\n\t\t\tt.onHideMenu = new tinymce.util.Dispatcher(t);\n\n\t\t\t/**\n\t\t\t * Current color value.\n\t\t\t *\n\t\t\t * @property value\n\t\t\t * @type String\n\t\t\t */\n\t\t\tt.value = s.default_color;\n\t\t},\n\n\t\t/**\n\t\t * Shows the color menu. The color menu is a layer places under the button\n\t\t * and displays a table of colors for the user to pick from.\n\t\t *\n\t\t * @method showMenu\n\t\t */\n\t\tshowMenu : function() {\n\t\t\tvar t = this, r, p, e, p2;\n\n\t\t\tif (t.isDisabled())\n\t\t\t\treturn;\n\n\t\t\tif (!t.isMenuRendered) {\n\t\t\t\tt.renderMenu();\n\t\t\t\tt.isMenuRendered = true;\n\t\t\t}\n\n\t\t\tif (t.isMenuVisible)\n\t\t\t\treturn t.hideMenu();\n\n\t\t\te = DOM.get(t.id);\n\t\t\tDOM.show(t.id + '_menu');\n\t\t\tDOM.addClass(e, 'mceSplitButtonSelected');\n\t\t\tp2 = DOM.getPos(e);\n\t\t\tDOM.setStyles(t.id + '_menu', {\n\t\t\t\tleft : p2.x,\n\t\t\t\ttop : p2.y + e.clientHeight,\n\t\t\t\tzIndex : 200000\n\t\t\t});\n\t\t\te = 0;\n\n\t\t\tEvent.add(DOM.doc, 'mousedown', t.hideMenu, t);\n\t\t\tt.onShowMenu.dispatch(t);\n\n\t\t\tif (t._focused) {\n\t\t\t\tt._keyHandler = Event.add(t.id + '_menu', 'keydown', function(e) {\n\t\t\t\t\tif (e.keyCode == 27)\n\t\t\t\t\t\tt.hideMenu();\n\t\t\t\t});\n\n\t\t\t\tDOM.select('a', t.id + '_menu')[0].focus(); // Select first link\n\t\t\t}\n\n\t\t\tt.isMenuVisible = 1;\n\t\t},\n\n\t\t/**\n\t\t * Hides the color menu. The optional event parameter is used to check where the event occurred so it\n\t\t * doesn't close them menu if it was a event inside the menu.\n\t\t *\n\t\t * @method hideMenu\n\t\t * @param {Event} e Optional event object.\n\t\t */\n\t\thideMenu : function(e) {\n\t\t\tvar t = this;\n\n\t\t\tif (t.isMenuVisible) {\n\t\t\t\t// Prevent double toogles by canceling the mouse click event to the button\n\t\t\t\tif (e && e.type == \"mousedown\" && DOM.getParent(e.target, function(e) {return e.id === t.id + '_open';}))\n\t\t\t\t\treturn;\n\n\t\t\t\tif (!e || !DOM.getParent(e.target, '.mceSplitButtonMenu')) {\n\t\t\t\t\tDOM.removeClass(t.id, 'mceSplitButtonSelected');\n\t\t\t\t\tEvent.remove(DOM.doc, 'mousedown', t.hideMenu, t);\n\t\t\t\t\tEvent.remove(t.id + '_menu', 'keydown', t._keyHandler);\n\t\t\t\t\tDOM.hide(t.id + '_menu');\n\t\t\t\t}\n\n\t\t\t\tt.isMenuVisible = 0;\n\t\t\t\tt.onHideMenu.dispatch();\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Renders the menu to the DOM.\n\t\t *\n\t\t * @method renderMenu\n\t\t */\n\t\trenderMenu : function() {\n\t\t\tvar t = this, m, i = 0, s = t.settings, n, tb, tr, w, context;\n\n\t\t\tw = DOM.add(s.menu_container, 'div', {role: 'listbox', id : t.id + '_menu', 'class' : s['menu_class'] + ' ' + s['class'], style : 'position:absolute;left:0;top:-1000px;'});\n\t\t\tm = DOM.add(w, 'div', {'class' : s['class'] + ' mceSplitButtonMenu'});\n\t\t\tDOM.add(m, 'span', {'class' : 'mceMenuLine'});\n\n\t\t\tn = DOM.add(m, 'table', {role: 'presentation', 'class' : 'mceColorSplitMenu'});\n\t\t\ttb = DOM.add(n, 'tbody');\n\n\t\t\t// Generate color grid\n\t\t\ti = 0;\n\t\t\teach(is(s.colors, 'array') ? s.colors : s.colors.split(','), function(c) {\n\t\t\t\tc = c.replace(/^#/, '');\n\n\t\t\t\tif (!i--) {\n\t\t\t\t\ttr = DOM.add(tb, 'tr');\n\t\t\t\t\ti = s.grid_width - 1;\n\t\t\t\t}\n\n\t\t\t\tn = DOM.add(tr, 'td');\n\t\t\t\tn = DOM.add(n, 'a', {\n\t\t\t\t\trole : 'option',\n\t\t\t\t\thref : 'javascript:;',\n\t\t\t\t\tstyle : {\n\t\t\t\t\t\tbackgroundColor : '#' + c\n\t\t\t\t\t},\n\t\t\t\t\t'title': t.editor.getLang('colors.' + c, c),\n\t\t\t\t\t'data-mce-color' : '#' + c\n\t\t\t\t});\n\n\t\t\t\tif (t.editor.forcedHighContrastMode) {\n\t\t\t\t\tn = DOM.add(n, 'canvas', { width: 16, height: 16, 'aria-hidden': 'true' });\n\t\t\t\t\tif (n.getContext && (context = n.getContext(\"2d\"))) {\n\t\t\t\t\t\tcontext.fillStyle = '#' + c;\n\t\t\t\t\t\tcontext.fillRect(0, 0, 16, 16);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// No point leaving a canvas element around if it's not supported for drawing on anyway.\n\t\t\t\t\t\tDOM.remove(n);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (s.more_colors_func) {\n\t\t\t\tn = DOM.add(tb, 'tr');\n\t\t\t\tn = DOM.add(n, 'td', {colspan : s.grid_width, 'class' : 'mceMoreColors'});\n\t\t\t\tn = DOM.add(n, 'a', {role: 'option', id : t.id + '_more', href : 'javascript:;', onclick : 'return false;', 'class' : 'mceMoreColors'}, s.more_colors_title);\n\n\t\t\t\tEvent.add(n, 'click', function(e) {\n\t\t\t\t\ts.more_colors_func.call(s.more_colors_scope || this);\n\t\t\t\t\treturn Event.cancel(e); // Cancel to fix onbeforeunload problem\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tDOM.addClass(m, 'mceColorSplitMenu');\n\t\t\t\n\t\t\tnew tinymce.ui.KeyboardNavigation({\n\t\t\t\troot: t.id + '_menu',\n\t\t\t\titems: DOM.select('a', t.id + '_menu'),\n\t\t\t\tonCancel: function() {\n\t\t\t\t\tt.hideMenu();\n\t\t\t\t\tt.focus();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Prevent IE from scrolling and hindering click to occur #4019\n\t\t\tEvent.add(t.id + '_menu', 'mousedown', function(e) {return Event.cancel(e);});\n\n\t\t\tEvent.add(t.id + '_menu', 'click', function(e) {\n\t\t\t\tvar c;\n\n\t\t\t\te = DOM.getParent(e.target, 'a', tb);\n\n\t\t\t\tif (e && e.nodeName.toLowerCase() == 'a' && (c = e.getAttribute('data-mce-color')))\n\t\t\t\t\tt.setColor(c);\n\n\t\t\t\treturn Event.cancel(e); // Prevent IE auto save warning\n\t\t\t});\n\n\t\t\treturn w;\n\t\t},\n\n\t\t/**\n\t\t * Sets the current color for the control and hides the menu if it should be visible.\n\t\t *\n\t\t * @method setColor\n\t\t * @param {String} c Color code value in hex for example: #FF00FF\n\t\t */\n\t\tsetColor : function(c) {\n\t\t\tthis.displayColor(c);\n\t\t\tthis.hideMenu();\n\t\t\tthis.settings.onselect(c);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Change the currently selected color for the control.\n\t\t *\n\t\t * @method displayColor\n\t\t * @param {String} c Color code value in hex for example: #FF00FF\n\t\t */\n\t\tdisplayColor : function(c) {\n\t\t\tvar t = this;\n\n\t\t\tDOM.setStyle(t.id + '_preview', 'backgroundColor', c);\n\n\t\t\tt.value = c;\n\t\t},\n\n\t\t/**\n\t\t * Post render event. This will be executed after the control has been rendered and can be used to\n\t\t * set states, add events to the control etc. It's recommended for subclasses of the control to call this method by using this.parent().\n\t\t *\n\t\t * @method postRender\n\t\t */\n\t\tpostRender : function() {\n\t\t\tvar t = this, id = t.id;\n\n\t\t\tt.parent();\n\t\t\tDOM.add(id + '_action', 'div', {id : id + '_preview', 'class' : 'mceColorPreview'});\n\t\t\tDOM.setStyle(t.id + '_preview', 'backgroundColor', t.value);\n\t\t},\n\n\t\t/**\n\t\t * Destroys the control. This means it will be removed from the DOM and any\n\t\t * events tied to it will also be removed.\n\t\t *\n\t\t * @method destroy\n\t\t */\n\t\tdestroy : function() {\n\t\t\tthis.parent();\n\n\t\t\tEvent.clear(this.id + '_menu');\n\t\t\tEvent.clear(this.id + '_more');\n\t\t\tDOM.remove(this.id + '_menu');\n\t\t}\n\t});\n})(tinymce);\n","Magento_Tinymce3/tiny_mce/classes/ui/ToolbarGroup.js":"/**\n * ToolbarGroup.js\n *\n * Copyright 2010, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n// Shorten class names\nvar dom = tinymce.DOM, each = tinymce.each, Event = tinymce.dom.Event;\n/**\n * This class is used to group a set of toolbars together and control the keyboard navigation and focus.\n *\n * @class tinymce.ui.ToolbarGroup\n * @extends tinymce.ui.Container\n */\ntinymce.create('tinymce.ui.ToolbarGroup:tinymce.ui.Container', {\n\t/**\n\t * Renders the toolbar group as a HTML string.\n\t *\n\t * @method renderHTML\n\t * @return {String} HTML for the toolbar control.\n\t */\n\trenderHTML : function() {\n\t\tvar t = this, h = [], controls = t.controls, each = tinymce.each, settings = t.settings;\n\n\t\th.push('<div id=\"' + t.id + '\" role=\"group\" aria-labelledby=\"' + t.id + '_voice\">');\n\t\t//TODO: ACC test this out - adding a role = application for getting the landmarks working well.\n\t\th.push(\"<span role='application'>\");\n\t\th.push('<span id=\"' + t.id + '_voice\" class=\"mceVoiceLabel\" style=\"display:none;\">' + dom.encode(settings.name) + '</span>');\n\t\teach(controls, function(toolbar) {\n\t\t\th.push(toolbar.renderHTML());\n\t\t});\n\t\th.push(\"</span>\");\n\t\th.push('</div>');\n\n\t\treturn h.join('');\n\t},\n\t\n\tfocus : function() {\n\t\tvar t = this;\n\t\tdom.get(t.id).focus();\n\t},\n\t\n\tpostRender : function() {\n\t\tvar t = this, items = [];\n\n\t\teach(t.controls, function(toolbar) {\n\t\t\teach (toolbar.controls, function(control) {\n\t\t\t\tif (control.id) {\n\t\t\t\t\titems.push(control);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tt.keyNav = new tinymce.ui.KeyboardNavigation({\n\t\t\troot: t.id,\n\t\t\titems: items,\n\t\t\tonCancel: function() {\n\t\t\t\t//Move focus if webkit so that navigation back will read the item.\n\t\t\t\tif (tinymce.isWebKit) {\n\t\t\t\t\tdom.get(t.editor.id+\"_ifr\").focus();\n\t\t\t\t}\n\t\t\t\tt.editor.focus();\n\t\t\t},\n\t\t\texcludeFromTabOrder: !t.settings.tab_focus_toolbar\n\t\t});\n\t},\n\t\n\tdestroy : function() {\n\t\tvar self = this;\n\n\t\tself.parent();\n\t\tself.keyNav.destroy();\n\t\tEvent.clear(self.id);\n\t}\n});\n})(tinymce);\n","Magento_Tinymce3/tiny_mce/classes/ui/Container.js":"/**\n * Container.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n/**\n * This class is the base class for all container controls like toolbars. This class should not\n * be instantiated directly other container controls should inherit from this one.\n *\n * @class tinymce.ui.Container\n * @extends tinymce.ui.Control\n */\ntinymce.create('tinymce.ui.Container:tinymce.ui.Control', {\n\t/**\n\t * Base contrustor a new container control instance.\n\t *\n\t * @constructor\n\t * @method Container\n\t * @param {String} id Control id to use for the container.\n\t * @param {Object} s Optional name/value settings object.\n\t */\n\tContainer : function(id, s, editor) {\n\t\tthis.parent(id, s, editor);\n\n\t\t/**\n\t\t * Array of controls added to the container.\n\t\t *\n\t\t * @property controls\n\t\t * @type Array\n\t\t */\n\t\tthis.controls = [];\n\n\t\tthis.lookup = {};\n\t},\n\n\t/**\n\t * Adds a control to the collection of controls for the container.\n\t *\n\t * @method add\n\t * @param {tinymce.ui.Control} c Control instance to add to the container.\n\t * @return {tinymce.ui.Control} Same control instance that got passed in.\n\t */\n\tadd : function(c) {\n\t\tthis.lookup[c.id] = c;\n\t\tthis.controls.push(c);\n\n\t\treturn c;\n\t},\n\n\t/**\n\t * Returns a control by id from the containers collection.\n\t *\n\t * @method get\n\t * @param {String} n Id for the control to retrieve.\n\t * @return {tinymce.ui.Control} Control instance by the specified name or undefined if it wasn't found.\n\t */\n\tget : function(n) {\n\t\treturn this.lookup[n];\n\t}\n});\n\n","Magento_Tinymce3/tiny_mce/classes/ui/MenuButton.js":"/**\n * MenuButton.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n\tvar DOM = tinymce.DOM, Event = tinymce.dom.Event, each = tinymce.each;\n\n\t/**\n\t * This class is used to create a UI button. A button is basically a link\n\t * that is styled to look like a button or icon.\n\t *\n\t * @class tinymce.ui.MenuButton\n\t * @extends tinymce.ui.Control\n\t * @example\n\t * // Creates a new plugin class and a custom menu button\n\t * tinymce.create('tinymce.plugins.ExamplePlugin', {\n\t *     createControl: function(n, cm) {\n\t *         switch (n) {\n\t *             case 'mymenubutton':\n\t *                 var c = cm.createSplitButton('mysplitbutton', {\n\t *                     title : 'My menu button',\n\t *                     image : 'some.gif'\n\t *                 });\n\t * \n\t *                 c.onRenderMenu.add(function(c, m) {\n\t *                     m.add({title : 'Some title', 'class' : 'mceMenuItemTitle'}).setDisabled(1);\n\t * \n\t *                     m.add({title : 'Some item 1', onclick : function() {\n\t *                         alert('Some item 1 was clicked.');\n\t *                     }});\n\t * \n\t *                     m.add({title : 'Some item 2', onclick : function() {\n\t *                         alert('Some item 2 was clicked.');\n\t *                     }});\n\t *               });\n\t * \n\t *               // Return the new menubutton instance\n\t *               return c;\n\t *         }\n\t * \n\t *         return null;\n\t *     }\n\t * });\n\t */\n\ttinymce.create('tinymce.ui.MenuButton:tinymce.ui.Button', {\n\t\t/**\n\t\t * Constructs a new split button control instance.\n\t\t *\n\t\t * @constructor\n\t\t * @method MenuButton\n\t\t * @param {String} id Control id for the split button.\n\t\t * @param {Object} s Optional name/value settings object.\n\t\t * @param {Editor} ed Optional the editor instance this button is for.\n\t\t */\n\t\tMenuButton : function(id, s, ed) {\n\t\t\tthis.parent(id, s, ed);\n\n\t\t\t/**\n\t\t\t * Fires when the menu is rendered.\n\t\t\t *\n\t\t\t * @event onRenderMenu\n\t\t\t */\n\t\t\tthis.onRenderMenu = new tinymce.util.Dispatcher(this);\n\n\t\t\ts.menu_container = s.menu_container || DOM.doc.body;\n\t\t},\n\n\t\t/**\n\t\t * Shows the menu.\n\t\t *\n\t\t * @method showMenu\n\t\t */\n\t\tshowMenu : function() {\n\t\t\tvar t = this, p1, p2, e = DOM.get(t.id), m;\n\n\t\t\tif (t.isDisabled())\n\t\t\t\treturn;\n\n\t\t\tif (!t.isMenuRendered) {\n\t\t\t\tt.renderMenu();\n\t\t\t\tt.isMenuRendered = true;\n\t\t\t}\n\n\t\t\tif (t.isMenuVisible)\n\t\t\t\treturn t.hideMenu();\n\n\t\t\tp1 = DOM.getPos(t.settings.menu_container);\n\t\t\tp2 = DOM.getPos(e);\n\n\t\t\tm = t.menu;\n\t\t\tm.settings.offset_x = p2.x;\n\t\t\tm.settings.offset_y = p2.y;\n\t\t\tm.settings.vp_offset_x = p2.x;\n\t\t\tm.settings.vp_offset_y = p2.y;\n\t\t\tm.settings.keyboard_focus = t._focused;\n\t\t\tm.showMenu(0, e.clientHeight);\n\n\t\t\tEvent.add(DOM.doc, 'mousedown', t.hideMenu, t);\n\t\t\tt.setState('Selected', 1);\n\n\t\t\tt.isMenuVisible = 1;\n\t\t},\n\n\t\t/**\n\t\t * Renders the menu to the DOM.\n\t\t *\n\t\t * @method renderMenu\n\t\t */\n\t\trenderMenu : function() {\n\t\t\tvar t = this, m;\n\n\t\t\tm = t.settings.control_manager.createDropMenu(t.id + '_menu', {\n\t\t\t\tmenu_line : 1,\n\t\t\t\t'class' : this.classPrefix + 'Menu',\n\t\t\t\ticons : t.settings.icons\n\t\t\t});\n\n\t\t\tm.onHideMenu.add(function() {\n\t\t\t\tt.hideMenu();\n\t\t\t\tt.focus();\n\t\t\t});\n\n\t\t\tt.onRenderMenu.dispatch(t, m);\n\t\t\tt.menu = m;\n\t\t},\n\n\t\t/**\n\t\t * Hides the menu. The optional event parameter is used to check where the event occurred so it\n\t\t * doesn't close them menu if it was a event inside the menu.\n\t\t *\n\t\t * @method hideMenu\n\t\t * @param {Event} e Optional event object.\n\t\t */\n\t\thideMenu : function(e) {\n\t\t\tvar t = this;\n\n\t\t\t// Prevent double toogles by canceling the mouse click event to the button\n\t\t\tif (e && e.type == \"mousedown\" && DOM.getParent(e.target, function(e) {return e.id === t.id || e.id === t.id + '_open';}))\n\t\t\t\treturn;\n\n\t\t\tif (!e || !DOM.getParent(e.target, '.mceMenu')) {\n\t\t\t\tt.setState('Selected', 0);\n\t\t\t\tEvent.remove(DOM.doc, 'mousedown', t.hideMenu, t);\n\t\t\t\tif (t.menu)\n\t\t\t\t\tt.menu.hideMenu();\n\t\t\t}\n\n\t\t\tt.isMenuVisible = 0;\n\t\t},\n\n\t\t/**\n\t\t * Post render handler. This function will be called after the UI has been\n\t\t * rendered so that events can be added.\n\t\t *\n\t\t * @method postRender\n\t\t */\n\t\tpostRender : function() {\n\t\t\tvar t = this, s = t.settings;\n\n\t\t\tEvent.add(t.id, 'click', function() {\n\t\t\t\tif (!t.isDisabled()) {\n\t\t\t\t\tif (s.onclick)\n\t\t\t\t\t\ts.onclick(t.value);\n\n\t\t\t\t\tt.showMenu();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n})(tinymce);\n","Magento_Tinymce3/tiny_mce/classes/ui/Menu.js":"/**\n * Menu.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n\tvar is = tinymce.is, DOM = tinymce.DOM, each = tinymce.each, walk = tinymce.walk;\n\n\t/**\n\t * This class is base class for all menu types like DropMenus etc. This class should not\n\t * be instantiated directly other menu controls should inherit from this one.\n\t *\n\t * @class tinymce.ui.Menu\n\t * @extends tinymce.ui.MenuItem\n\t */\n\ttinymce.create('tinymce.ui.Menu:tinymce.ui.MenuItem', {\n\t\t/**\n\t\t * Constructs a new button control instance.\n\t\t *\n\t\t * @constructor\n\t\t * @method Menu\n\t\t * @param {String} id Button control id for the button.\n\t\t * @param {Object} s Optional name/value settings object.\n\t\t */\n\t\tMenu : function(id, s) {\n\t\t\tvar t = this;\n\n\t\t\tt.parent(id, s);\n\t\t\tt.items = {};\n\t\t\tt.collapsed = false;\n\t\t\tt.menuCount = 0;\n\t\t\tt.onAddItem = new tinymce.util.Dispatcher(this);\n\t\t},\n\n\t\t/**\n\t\t * Expands the menu, this will show them menu and all menu items.\n\t\t *\n\t\t * @method expand\n\t\t * @param {Boolean} d Optional deep state. If this is set to true all children will be expanded as well.\n\t\t */\n\t\texpand : function(d) {\n\t\t\tvar t = this;\n\n\t\t\tif (d) {\n\t\t\t\twalk(t, function(o) {\n\t\t\t\t\tif (o.expand)\n\t\t\t\t\t\to.expand();\n\t\t\t\t}, 'items', t);\n\t\t\t}\n\n\t\t\tt.collapsed = false;\n\t\t},\n\n\t\t/**\n\t\t * Collapses the menu, this will hide the menu and all menu items.\n\t\t *\n\t\t * @method collapse\n\t\t * @param {Boolean} d Optional deep state. If this is set to true all children will be collapsed as well.\n\t\t */\n\t\tcollapse : function(d) {\n\t\t\tvar t = this;\n\n\t\t\tif (d) {\n\t\t\t\twalk(t, function(o) {\n\t\t\t\t\tif (o.collapse)\n\t\t\t\t\t\to.collapse();\n\t\t\t\t}, 'items', t);\n\t\t\t}\n\n\t\t\tt.collapsed = true;\n\t\t},\n\n\t\t/**\n\t\t * Returns true/false if the menu has been collapsed or not.\n\t\t *\n\t\t * @method isCollapsed\n\t\t * @return {Boolean} True/false state if the menu has been collapsed or not.\n\t\t */\n\t\tisCollapsed : function() {\n\t\t\treturn this.collapsed;\n\t\t},\n\n\t\t/**\n\t\t * Adds a new menu, menu item or sub classes of them to the drop menu.\n\t\t *\n\t\t * @method add\n\t\t * @param {tinymce.ui.Control} o Menu or menu item to add to the drop menu.\n\t\t * @return {tinymce.ui.Control} Same as the input control, the menu or menu item.\n\t\t */\n\t\tadd : function(o) {\n\t\t\tif (!o.settings)\n\t\t\t\to = new tinymce.ui.MenuItem(o.id || DOM.uniqueId(), o);\n\n\t\t\tthis.onAddItem.dispatch(this, o);\n\n\t\t\treturn this.items[o.id] = o;\n\t\t},\n\n\t\t/**\n\t\t * Adds a menu separator between the menu items.\n\t\t *\n\t\t * @method addSeparator\n\t\t * @return {tinymce.ui.MenuItem} Menu item instance for the separator.\n\t\t */\n\t\taddSeparator : function() {\n\t\t\treturn this.add({separator : true});\n\t\t},\n\n\t\t/**\n\t\t * Adds a sub menu to the menu.\n\t\t *\n\t\t * @method addMenu\n\t\t * @param {Object} o Menu control or a object with settings to be created into an control.\n\t\t * @return {tinymce.ui.Menu} Menu control instance passed in or created.\n\t\t */\n\t\taddMenu : function(o) {\n\t\t\tif (!o.collapse)\n\t\t\t\to = this.createMenu(o);\n\n\t\t\tthis.menuCount++;\n\n\t\t\treturn this.add(o);\n\t\t},\n\n\t\t/**\n\t\t * Returns true/false if the menu has sub menus or not.\n\t\t *\n\t\t * @method hasMenus\n\t\t * @return {Boolean} True/false state if the menu has sub menues or not.\n\t\t */\n\t\thasMenus : function() {\n\t\t\treturn this.menuCount !== 0;\n\t\t},\n\n\t\t/**\n\t\t * Removes a specific sub menu or menu item from the menu.\n\t\t *\n\t\t * @method remove\n\t\t * @param {tinymce.ui.Control} o Menu item or menu to remove from menu.\n\t\t * @return {tinymce.ui.Control} Control instance or null if it wasn't found.\n\t\t */\n\t\tremove : function(o) {\n\t\t\tdelete this.items[o.id];\n\t\t},\n\n\t\t/**\n\t\t * Removes all menu items and sub menu items from the menu.\n\t\t *\n\t\t * @method removeAll\n\t\t */\n\t\tremoveAll : function() {\n\t\t\tvar t = this;\n\n\t\t\twalk(t, function(o) {\n\t\t\t\tif (o.removeAll)\n\t\t\t\t\to.removeAll();\n\t\t\t\telse\n\t\t\t\t\to.remove();\n\n\t\t\t\to.destroy();\n\t\t\t}, 'items', t);\n\n\t\t\tt.items = {};\n\t\t},\n\n\t\t/**\n\t\t * Created a new sub menu for the menu control.\n\t\t *\n\t\t * @method createMenu\n\t\t * @param {Object} s Optional name/value settings object.\n\t\t * @return {tinymce.ui.Menu} New drop menu instance.\n\t\t */\n\t\tcreateMenu : function(o) {\n\t\t\tvar m = new tinymce.ui.Menu(o.id || DOM.uniqueId(), o);\n\n\t\t\tm.onAddItem.add(this.onAddItem.dispatch, this.onAddItem);\n\n\t\t\treturn m;\n\t\t}\n\t});\n})(tinymce);","Magento_Tinymce3/tiny_mce/classes/ui/DropMenu.js":"/**\n * DropMenu.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n\tvar is = tinymce.is, DOM = tinymce.DOM, each = tinymce.each, Event = tinymce.dom.Event, Element = tinymce.dom.Element;\n\n\t/**\n\t * This class is used to create drop menus, a drop menu can be a\n\t * context menu, or a menu for a list box or a menu bar.\n\t *\n\t * @class tinymce.ui.DropMenu\n\t * @extends tinymce.ui.Menu\n\t * @example\n\t * // Adds a menu to the currently active editor instance\n\t * var dm = tinyMCE.activeEditor.controlManager.createDropMenu('somemenu');\n\t * \n\t * // Add some menu items\n\t * dm.add({title : 'Menu 1', onclick : function() {\n\t *     alert('Item 1 was clicked.');\n\t * }});\n\t * \n\t * dm.add({title : 'Menu 2', onclick : function() {\n\t *     alert('Item 2 was clicked.');\n\t * }});\n\t * \n\t * // Adds a submenu\n\t * var sub1 = dm.addMenu({title : 'Menu 3'});\n\t * sub1.add({title : 'Menu 1.1', onclick : function() {\n\t *     alert('Item 1.1 was clicked.');\n\t * }});\n\t * \n\t * // Adds a horizontal separator\n\t * sub1.addSeparator();\n\t * \n\t * sub1.add({title : 'Menu 1.2', onclick : function() {\n\t *     alert('Item 1.2 was clicked.');\n\t * }});\n\t * \n\t * // Adds a submenu to the submenu\n\t * var sub2 = sub1.addMenu({title : 'Menu 1.3'});\n\t * \n\t * // Adds items to the sub sub menu\n\t * sub2.add({title : 'Menu 1.3.1', onclick : function() {\n\t *     alert('Item 1.3.1 was clicked.');\n\t * }});\n\t * \n\t * sub2.add({title : 'Menu 1.3.2', onclick : function() {\n\t *     alert('Item 1.3.2 was clicked.');\n\t * }});\n\t * \n\t * dm.add({title : 'Menu 4', onclick : function() {\n\t *     alert('Item 3 was clicked.');\n\t * }});\n\t * \n\t * // Display the menu at position 100, 100\n\t * dm.showMenu(100, 100);\n\t */\n\ttinymce.create('tinymce.ui.DropMenu:tinymce.ui.Menu', {\n\t\t/**\n\t\t * Constructs a new drop menu control instance.\n\t\t *\n\t\t * @constructor\n\t\t * @method DropMenu\n\t\t * @param {String} id Button control id for the button.\n\t\t * @param {Object} s Optional name/value settings object.\n\t\t */\n\t\tDropMenu : function(id, s) {\n\t\t\ts = s || {};\n\t\t\ts.container = s.container || DOM.doc.body;\n\t\t\ts.offset_x = s.offset_x || 0;\n\t\t\ts.offset_y = s.offset_y || 0;\n\t\t\ts.vp_offset_x = s.vp_offset_x || 0;\n\t\t\ts.vp_offset_y = s.vp_offset_y || 0;\n\n\t\t\tif (is(s.icons) && !s.icons)\n\t\t\t\ts['class'] += ' mceNoIcons';\n\n\t\t\tthis.parent(id, s);\n\t\t\tthis.onShowMenu = new tinymce.util.Dispatcher(this);\n\t\t\tthis.onHideMenu = new tinymce.util.Dispatcher(this);\n\t\t\tthis.classPrefix = 'mceMenu';\n\t\t},\n\n\t\t/**\n\t\t * Created a new sub menu for the drop menu control.\n\t\t *\n\t\t * @method createMenu\n\t\t * @param {Object} s Optional name/value settings object.\n\t\t * @return {tinymce.ui.DropMenu} New drop menu instance.\n\t\t */\n\t\tcreateMenu : function(s) {\n\t\t\tvar t = this, cs = t.settings, m;\n\n\t\t\ts.container = s.container || cs.container;\n\t\t\ts.parent = t;\n\t\t\ts.constrain = s.constrain || cs.constrain;\n\t\t\ts['class'] = s['class'] || cs['class'];\n\t\t\ts.vp_offset_x = s.vp_offset_x || cs.vp_offset_x;\n\t\t\ts.vp_offset_y = s.vp_offset_y || cs.vp_offset_y;\n\t\t\ts.keyboard_focus = cs.keyboard_focus;\n\t\t\tm = new tinymce.ui.DropMenu(s.id || DOM.uniqueId(), s);\n\n\t\t\tm.onAddItem.add(t.onAddItem.dispatch, t.onAddItem);\n\n\t\t\treturn m;\n\t\t},\n\t\t\n\t\tfocus : function() {\n\t\t\tvar t = this;\n\t\t\tif (t.keyboardNav) {\n\t\t\t\tt.keyboardNav.focus();\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Repaints the menu after new items have been added dynamically.\n\t\t *\n\t\t * @method update\n\t\t */\n\t\tupdate : function() {\n\t\t\tvar t = this, s = t.settings, tb = DOM.get('menu_' + t.id + '_tbl'), co = DOM.get('menu_' + t.id + '_co'), tw, th;\n\n\t\t\ttw = s.max_width ? Math.min(tb.clientWidth, s.max_width) : tb.clientWidth;\n\t\t\tth = s.max_height ? Math.min(tb.clientHeight, s.max_height) : tb.clientHeight;\n\n\t\t\tif (!DOM.boxModel)\n\t\t\t\tt.element.setStyles({width : tw + 2, height : th + 2});\n\t\t\telse\n\t\t\t\tt.element.setStyles({width : tw, height : th});\n\n\t\t\tif (s.max_width)\n\t\t\t\tDOM.setStyle(co, 'width', tw);\n\n\t\t\tif (s.max_height) {\n\t\t\t\tDOM.setStyle(co, 'height', th);\n\n\t\t\t\tif (tb.clientHeight < s.max_height)\n\t\t\t\t\tDOM.setStyle(co, 'overflow', 'hidden');\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Displays the menu at the specified cordinate.\n\t\t *\n\t\t * @method showMenu\n\t\t * @param {Number} x Horizontal position of the menu.\n\t\t * @param {Number} y Vertical position of the menu.\n\t\t * @param {Numner} px Optional parent X position used when menus are cascading.\n\t\t */\n\t\tshowMenu : function(x, y, px) {\n\t\t\tvar t = this, s = t.settings, co, vp = DOM.getViewPort(), w, h, mx, my, ot = 2, dm, tb, cp = t.classPrefix;\n\n\t\t\tt.collapse(1);\n\n\t\t\tif (t.isMenuVisible)\n\t\t\t\treturn;\n\n\t\t\tif (!t.rendered) {\n\t\t\t\tco = DOM.add(t.settings.container, t.renderNode());\n\n\t\t\t\teach(t.items, function(o) {\n\t\t\t\t\to.postRender();\n\t\t\t\t});\n\n\t\t\t\tt.element = new Element('menu_' + t.id, {blocker : 1, container : s.container});\n\t\t\t} else\n\t\t\t\tco = DOM.get('menu_' + t.id);\n\n\t\t\t// Move layer out of sight unless it's Opera since it scrolls to top of page due to an bug\n\t\t\tif (!tinymce.isOpera)\n\t\t\t\tDOM.setStyles(co, {left : -0xFFFF , top : -0xFFFF});\n\n\t\t\tDOM.show(co);\n\t\t\tt.update();\n\n\t\t\tx += s.offset_x || 0;\n\t\t\ty += s.offset_y || 0;\n\t\t\tvp.w -= 4;\n\t\t\tvp.h -= 4;\n\n\t\t\t// Move inside viewport if not submenu\n\t\t\tif (s.constrain) {\n\t\t\t\tw = co.clientWidth - ot;\n\t\t\t\th = co.clientHeight - ot;\n\t\t\t\tmx = vp.x + vp.w;\n\t\t\t\tmy = vp.y + vp.h;\n\n\t\t\t\tif ((x + s.vp_offset_x + w) > mx)\n\t\t\t\t\tx = px ? px - w : Math.max(0, (mx - s.vp_offset_x) - w);\n\n\t\t\t\tif ((y + s.vp_offset_y + h) > my)\n\t\t\t\t\ty = Math.max(0, (my - s.vp_offset_y) - h);\n\t\t\t}\n\n\t\t\tDOM.setStyles(co, {left : x , top : y});\n\t\t\tt.element.update();\n\n\t\t\tt.isMenuVisible = 1;\n\t\t\tt.mouseClickFunc = Event.add(co, 'click', function(e) {\n\t\t\t\tvar m;\n\n\t\t\t\te = e.target;\n\n\t\t\t\tif (e && (e = DOM.getParent(e, 'tr')) && !DOM.hasClass(e, cp + 'ItemSub')) {\n\t\t\t\t\tm = t.items[e.id];\n\n\t\t\t\t\tif (m.isDisabled())\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tdm = t;\n\n\t\t\t\t\twhile (dm) {\n\t\t\t\t\t\tif (dm.hideMenu)\n\t\t\t\t\t\t\tdm.hideMenu();\n\n\t\t\t\t\t\tdm = dm.settings.parent;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (m.settings.onclick)\n\t\t\t\t\t\tm.settings.onclick(e);\n\n\t\t\t\t\treturn Event.cancel(e); // Cancel to fix onbeforeunload problem\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (t.hasMenus()) {\n\t\t\t\tt.mouseOverFunc = Event.add(co, 'mouseover', function(e) {\n\t\t\t\t\tvar m, r, mi;\n\n\t\t\t\t\te = e.target;\n\t\t\t\t\tif (e && (e = DOM.getParent(e, 'tr'))) {\n\t\t\t\t\t\tm = t.items[e.id];\n\n\t\t\t\t\t\tif (t.lastMenu)\n\t\t\t\t\t\t\tt.lastMenu.collapse(1);\n\n\t\t\t\t\t\tif (m.isDisabled())\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\tif (e && DOM.hasClass(e, cp + 'ItemSub')) {\n\t\t\t\t\t\t\t//p = DOM.getPos(s.container);\n\t\t\t\t\t\t\tr = DOM.getRect(e);\n\t\t\t\t\t\t\tm.showMenu((r.x + r.w - ot), r.y - ot, r.x);\n\t\t\t\t\t\t\tt.lastMenu = m;\n\t\t\t\t\t\t\tDOM.addClass(DOM.get(m.id).firstChild, cp + 'ItemActive');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tEvent.add(co, 'keydown', t._keyHandler, t);\n\n\t\t\tt.onShowMenu.dispatch(t);\n\n\t\t\tif (s.keyboard_focus) { \n\t\t\t\tt._setupKeyboardNav(); \n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Hides the displayed menu.\n\t\t *\n\t\t * @method hideMenu\n\t\t */\n\t\thideMenu : function(c) {\n\t\t\tvar t = this, co = DOM.get('menu_' + t.id), e;\n\n\t\t\tif (!t.isMenuVisible)\n\t\t\t\treturn;\n\n\t\t\tif (t.keyboardNav) t.keyboardNav.destroy();\n\t\t\tEvent.remove(co, 'mouseover', t.mouseOverFunc);\n\t\t\tEvent.remove(co, 'click', t.mouseClickFunc);\n\t\t\tEvent.remove(co, 'keydown', t._keyHandler);\n\t\t\tDOM.hide(co);\n\t\t\tt.isMenuVisible = 0;\n\n\t\t\tif (!c)\n\t\t\t\tt.collapse(1);\n\n\t\t\tif (t.element)\n\t\t\t\tt.element.hide();\n\n\t\t\tif (e = DOM.get(t.id))\n\t\t\t\tDOM.removeClass(e.firstChild, t.classPrefix + 'ItemActive');\n\n\t\t\tt.onHideMenu.dispatch(t);\n\t\t},\n\n\t\t/**\n\t\t * Adds a new menu, menu item or sub classes of them to the drop menu.\n\t\t *\n\t\t * @method add\n\t\t * @param {tinymce.ui.Control} o Menu or menu item to add to the drop menu.\n\t\t * @return {tinymce.ui.Control} Same as the input control, the menu or menu item.\n\t\t */\n\t\tadd : function(o) {\n\t\t\tvar t = this, co;\n\n\t\t\to = t.parent(o);\n\n\t\t\tif (t.isRendered && (co = DOM.get('menu_' + t.id)))\n\t\t\t\tt._add(DOM.select('tbody', co)[0], o);\n\n\t\t\treturn o;\n\t\t},\n\n\t\t/**\n\t\t * Collapses the menu, this will hide the menu and all menu items.\n\t\t *\n\t\t * @method collapse\n\t\t * @param {Boolean} d Optional deep state. If this is set to true all children will be collapsed as well.\n\t\t */\n\t\tcollapse : function(d) {\n\t\t\tthis.parent(d);\n\t\t\tthis.hideMenu(1);\n\t\t},\n\n\t\t/**\n\t\t * Removes a specific sub menu or menu item from the drop menu.\n\t\t *\n\t\t * @method remove\n\t\t * @param {tinymce.ui.Control} o Menu item or menu to remove from drop menu.\n\t\t * @return {tinymce.ui.Control} Control instance or null if it wasn't found.\n\t\t */\n\t\tremove : function(o) {\n\t\t\tDOM.remove(o.id);\n\t\t\tthis.destroy();\n\n\t\t\treturn this.parent(o);\n\t\t},\n\n\t\t/**\n\t\t * Destroys the menu. This will remove the menu from the DOM and any events added to it etc.\n\t\t *\n\t\t * @method destroy\n\t\t */\n\t\tdestroy : function() {\n\t\t\tvar t = this, co = DOM.get('menu_' + t.id);\n\n\t\t\tif (t.keyboardNav) t.keyboardNav.destroy();\n\t\t\tEvent.remove(co, 'mouseover', t.mouseOverFunc);\n\t\t\tEvent.remove(DOM.select('a', co), 'focus', t.mouseOverFunc);\n\t\t\tEvent.remove(co, 'click', t.mouseClickFunc);\n\t\t\tEvent.remove(co, 'keydown', t._keyHandler);\n\n\t\t\tif (t.element)\n\t\t\t\tt.element.remove();\n\n\t\t\tDOM.remove(co);\n\t\t},\n\n\t\t/**\n\t\t * Renders the specified menu node to the dom.\n\t\t *\n\t\t * @method renderNode\n\t\t * @return {Element} Container element for the drop menu.\n\t\t */\n\t\trenderNode : function() {\n\t\t\tvar t = this, s = t.settings, n, tb, co, w;\n\n\t\t\tw = DOM.create('div', {role: 'listbox', id : 'menu_' + t.id, 'class' : s['class'], 'style' : 'position:absolute;left:0;top:0;z-index:200000;outline:0'});\n\t\t\tif (t.settings.parent) {\n\t\t\t\tDOM.setAttrib(w, 'aria-parent', 'menu_' + t.settings.parent.id);\n\t\t\t}\n\t\t\tco = DOM.add(w, 'div', {role: 'presentation', id : 'menu_' + t.id + '_co', 'class' : t.classPrefix + (s['class'] ? ' ' + s['class'] : '')});\n\t\t\tt.element = new Element('menu_' + t.id, {blocker : 1, container : s.container});\n\n\t\t\tif (s.menu_line)\n\t\t\t\tDOM.add(co, 'span', {'class' : t.classPrefix + 'Line'});\n\n//\t\t\tn = DOM.add(co, 'div', {id : 'menu_' + t.id + '_co', 'class' : 'mceMenuContainer'});\n\t\t\tn = DOM.add(co, 'table', {role: 'presentation', id : 'menu_' + t.id + '_tbl', border : 0, cellPadding : 0, cellSpacing : 0});\n\t\t\ttb = DOM.add(n, 'tbody');\n\n\t\t\teach(t.items, function(o) {\n\t\t\t\tt._add(tb, o);\n\t\t\t});\n\n\t\t\tt.rendered = true;\n\n\t\t\treturn w;\n\t\t},\n\n\t\t// Internal functions\n\t\t_setupKeyboardNav : function(){\n\t\t\tvar contextMenu, menuItems, t=this; \n\t\t\tcontextMenu = DOM.select('#menu_' + t.id)[0];\n\t\t\tmenuItems = DOM.select('a[role=option]', 'menu_' + t.id);\n\t\t\tmenuItems.splice(0,0,contextMenu);\n\t\t\tt.keyboardNav = new tinymce.ui.KeyboardNavigation({\n\t\t\t\troot: 'menu_' + t.id,\n\t\t\t\titems: menuItems,\n\t\t\t\tonCancel: function() {\n\t\t\t\t\tt.hideMenu();\n\t\t\t\t},\n\t\t\t\tenableUpDown: true\n\t\t\t});\n\t\t\tcontextMenu.focus();\n\t\t},\n\n\t\t_keyHandler : function(evt) {\n\t\t\tvar t = this, e;\n\t\t\tswitch (evt.keyCode) {\n\t\t\t\tcase 37: // Left\n\t\t\t\t\tif (t.settings.parent) {\n\t\t\t\t\t\tt.hideMenu();\n\t\t\t\t\t\tt.settings.parent.focus();\n\t\t\t\t\t\tEvent.cancel(evt);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 39: // Right\n\t\t\t\t\tif (t.mouseOverFunc)\n\t\t\t\t\t\tt.mouseOverFunc(evt);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\n\t\t_add : function(tb, o) {\n\t\t\tvar n, s = o.settings, a, ro, it, cp = this.classPrefix, ic;\n\n\t\t\tif (s.separator) {\n\t\t\t\tro = DOM.add(tb, 'tr', {id : o.id, 'class' : cp + 'ItemSeparator'});\n\t\t\t\tDOM.add(ro, 'td', {'class' : cp + 'ItemSeparator'});\n\n\t\t\t\tif (n = ro.previousSibling)\n\t\t\t\t\tDOM.addClass(n, 'mceLast');\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tn = ro = DOM.add(tb, 'tr', {id : o.id, 'class' : cp + 'Item ' + cp + 'ItemEnabled'});\n\t\t\tn = it = DOM.add(n, s.titleItem ? 'th' : 'td');\n\t\t\tn = a = DOM.add(n, 'a', {id: o.id + '_aria',  role: s.titleItem ? 'presentation' : 'option', href : 'javascript:;', onclick : \"return false;\", onmousedown : 'return false;'});\n\n\t\t\tif (s.parent) {\n\t\t\t\tDOM.setAttrib(a, 'aria-haspopup', 'true');\n\t\t\t\tDOM.setAttrib(a, 'aria-owns', 'menu_' + o.id);\n\t\t\t}\n\n\t\t\tDOM.addClass(it, s['class']);\n//\t\t\tn = DOM.add(n, 'span', {'class' : 'item'});\n\n\t\t\tic = DOM.add(n, 'span', {'class' : 'mceIcon' + (s.icon ? ' mce_' + s.icon : '')});\n\n\t\t\tif (s.icon_src)\n\t\t\t\tDOM.add(ic, 'img', {src : s.icon_src});\n\n\t\t\tn = DOM.add(n, s.element || 'span', {'class' : 'mceText', title : o.settings.title}, o.settings.title);\n\n\t\t\tif (o.settings.style)\n\t\t\t\tDOM.setAttrib(n, 'style', o.settings.style);\n\n\t\t\tif (tb.childNodes.length == 1)\n\t\t\t\tDOM.addClass(ro, 'mceFirst');\n\n\t\t\tif ((n = ro.previousSibling) && DOM.hasClass(n, cp + 'ItemSeparator'))\n\t\t\t\tDOM.addClass(ro, 'mceFirst');\n\n\t\t\tif (o.collapse)\n\t\t\t\tDOM.addClass(ro, cp + 'ItemSub');\n\n\t\t\tif (n = ro.previousSibling)\n\t\t\t\tDOM.removeClass(n, 'mceLast');\n\n\t\t\tDOM.addClass(ro, 'mceLast');\n\t\t}\n\t});\n})(tinymce);","Magento_Tinymce3/tiny_mce/classes/ui/Button.js":"/**\n * Button.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n\tvar DOM = tinymce.DOM;\n\n\t/**\n\t * This class is used to create a UI button. A button is basically a link\n\t * that is styled to look like a button or icon.\n\t *\n\t * @class tinymce.ui.Button\n\t * @extends tinymce.ui.Control\n\t */\n\ttinymce.create('tinymce.ui.Button:tinymce.ui.Control', {\n\t\t/**\n\t\t * Constructs a new button control instance.\n\t\t *\n\t\t * @constructor\n\t\t * @method Button\n\t\t * @param {String} id Control id for the button.\n\t\t * @param {Object} s Optional name/value settings object.\n\t\t * @param {Editor} ed Optional the editor instance this button is for.\n\t\t */\n\t\tButton : function(id, s, ed) {\n\t\t\tthis.parent(id, s, ed);\n\t\t\tthis.classPrefix = 'mceButton';\n\t\t},\n\n\t\t/**\n\t\t * Renders the button as a HTML string. This method is much faster than using the DOM and when\n\t\t * creating a whole toolbar with buttons it does make a lot of difference.\n\t\t *\n\t\t * @method renderHTML\n\t\t * @return {String} HTML for the button control element.\n\t\t */\n\t\trenderHTML : function() {\n\t\t\tvar cp = this.classPrefix, s = this.settings, h, l;\n\n\t\t\tl = DOM.encode(s.label || '');\n\t\t\th = '<a role=\"button\" id=\"' + this.id + '\" href=\"javascript:;\" class=\"' + cp + ' ' + cp + 'Enabled ' + s['class'] + (l ? ' ' + cp + 'Labeled' : '') +'\" onmousedown=\"return false;\" onclick=\"return false;\" aria-labelledby=\"' + this.id + '_voice\" title=\"' + DOM.encode(s.title) + '\">';\n\t\t\tif (s.image && !(this.editor  &&this.editor.forcedHighContrastMode) )\n\t\t\t\th += '<img class=\"mceIcon\" src=\"' + s.image + '\" alt=\"' + DOM.encode(s.title) + '\" />' + l;\n\t\t\telse\n\t\t\t\th += '<span class=\"mceIcon ' + s['class'] + '\"></span>' + (l ? '<span class=\"' + cp + 'Label\">' + l + '</span>' : '');\n\n\t\t\th += '<span class=\"mceVoiceLabel mceIconOnly\" style=\"display: none;\" id=\"' + this.id + '_voice\">' + s.title + '</span>'; \n\t\t\th += '</a>';\n\t\t\treturn h;\n\t\t},\n\n\t\t/**\n\t\t * Post render handler. This function will be called after the UI has been\n\t\t * rendered so that events can be added.\n\t\t *\n\t\t * @method postRender\n\t\t */\n\t\tpostRender : function() {\n\t\t\tvar t = this, s = t.settings;\n\n\t\t\ttinymce.dom.Event.add(t.id, 'click', function(e) {\n\t\t\t\tif (!t.isDisabled())\n\t\t\t\t\treturn s.onclick.call(s.scope, e);\n\t\t\t});\n\t\t}\n\t});\n})(tinymce);\n","Magento_Tinymce3/tiny_mce/classes/ui/MenuItem.js":"/**\n * MenuItem.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n\tvar is = tinymce.is, DOM = tinymce.DOM, each = tinymce.each, walk = tinymce.walk;\n\n\t/**\n\t * This class is base class for all menu item types like DropMenus items etc. This class should not\n\t * be instantiated directly other menu items should inherit from this one.\n\t *\n\t * @class tinymce.ui.MenuItem\n\t * @extends tinymce.ui.Control\n\t */\n\ttinymce.create('tinymce.ui.MenuItem:tinymce.ui.Control', {\n\t\t/**\n\t\t * Constructs a new button control instance.\n\t\t *\n\t\t * @constructor\n\t\t * @method MenuItem\n\t\t * @param {String} id Button control id for the button.\n\t\t * @param {Object} s Optional name/value settings object.\n\t\t */\n\t\tMenuItem : function(id, s) {\n\t\t\tthis.parent(id, s);\n\t\t\tthis.classPrefix = 'mceMenuItem';\n\t\t},\n\n\t\t/**\n\t\t * Sets the selected state for the control. This will add CSS classes to the\n\t\t * element that contains the control. So that it can be selected visually.\n\t\t *\n\t\t * @method setSelected\n\t\t * @param {Boolean} s Boolean state if the control should be selected or not.\n\t\t */\n\t\tsetSelected : function(s) {\n\t\t\tthis.setState('Selected', s);\n\t\t\tthis.setAriaProperty('checked', !!s);\n\t\t\tthis.selected = s;\n\t\t},\n\n\t\t/**\n\t\t * Returns true/false if the control is selected or not.\n\t\t *\n\t\t * @method isSelected\n\t\t * @return {Boolean} true/false if the control is selected or not.\n\t\t */\n\t\tisSelected : function() {\n\t\t\treturn this.selected;\n\t\t},\n\n\t\t/**\n\t\t * Post render handler. This function will be called after the UI has been\n\t\t * rendered so that events can be added.\n\t\t *\n\t\t * @method postRender\n\t\t */\n\t\tpostRender : function() {\n\t\t\tvar t = this;\n\t\t\t\n\t\t\tt.parent();\n\n\t\t\t// Set pending state\n\t\t\tif (is(t.selected))\n\t\t\t\tt.setSelected(t.selected);\n\t\t}\n\t});\n})(tinymce);\n","Magento_Tinymce3/tiny_mce/classes/dom/TreeWalker.js":"/**\n * TreeWalker.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\ntinymce.dom.TreeWalker = function(start_node, root_node) {\n\tvar node = start_node;\n\n\tfunction findSibling(node, start_name, sibling_name, shallow) {\n\t\tvar sibling, parent;\n\n\t\tif (node) {\n\t\t\t// Walk into nodes if it has a start\n\t\t\tif (!shallow && node[start_name])\n\t\t\t\treturn node[start_name];\n\n\t\t\t// Return the sibling if it has one\n\t\t\tif (node != root_node) {\n\t\t\t\tsibling = node[sibling_name];\n\t\t\t\tif (sibling)\n\t\t\t\t\treturn sibling;\n\n\t\t\t\t// Walk up the parents to look for siblings\n\t\t\t\tfor (parent = node.parentNode; parent && parent != root_node; parent = parent.parentNode) {\n\t\t\t\t\tsibling = parent[sibling_name];\n\t\t\t\t\tif (sibling)\n\t\t\t\t\t\treturn sibling;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Returns the current node.\n\t *\n\t * @return {Node} Current node where the walker is.\n\t */\n\tthis.current = function() {\n\t\treturn node;\n\t};\n\n\t/**\n\t * Walks to the next node in tree.\n\t *\n\t * @return {Node} Current node where the walker is after moving to the next node.\n\t */\n\tthis.next = function(shallow) {\n\t\treturn (node = findSibling(node, 'firstChild', 'nextSibling', shallow));\n\t};\n\n\t/**\n\t * Walks to the previous node in tree.\n\t *\n\t * @return {Node} Current node where the walker is after moving to the previous node.\n\t */\n\tthis.prev = function(shallow) {\n\t\treturn (node = findSibling(node, 'lastChild', 'previousSibling', shallow));\n\t};\n};\n","Magento_Tinymce3/tiny_mce/classes/dom/Selection.js":"/**\n * Selection.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n\tfunction trimNl(s) {\n\t\treturn s.replace(/[\\n\\r]+/g, '');\n\t};\n\n\t// Shorten names\n\tvar is = tinymce.is, isIE = tinymce.isIE, each = tinymce.each;\n\n\t/**\n\t * This class handles text and control selection it's an crossbrowser utility class.\n\t * Consult the TinyMCE Wiki API for more details and examples on how to use this class.\n\t *\n\t * @class tinymce.dom.Selection\n\t * @example\n\t * // Getting the currently selected node for the active editor\n\t * alert(tinymce.activeEditor.selection.getNode().nodeName);\n\t */\n\ttinymce.create('tinymce.dom.Selection', {\n\t\t/**\n\t\t * Constructs a new selection instance.\n\t\t *\n\t\t * @constructor\n\t\t * @method Selection\n\t\t * @param {tinymce.dom.DOMUtils} dom DOMUtils object reference.\n\t\t * @param {Window} win Window to bind the selection object to.\n\t\t * @param {tinymce.dom.Serializer} serializer DOM serialization class to use for getContent.\n\t\t */\n\t\tSelection : function(dom, win, serializer) {\n\t\t\tvar t = this;\n\n\t\t\tt.dom = dom;\n\t\t\tt.win = win;\n\t\t\tt.serializer = serializer;\n\n\t\t\t// Add events\n\t\t\teach([\n\t\t\t\t/**\n\t\t\t\t * This event gets executed before contents is extracted from the selection.\n\t\t\t\t *\n\t\t\t\t * @event onBeforeSetContent\n\t\t\t\t * @param {tinymce.dom.Selection} selection Selection object that fired the event.\n\t\t\t\t * @param {Object} args Contains things like the contents that will be returned. \n\t\t\t\t */\n\t\t\t\t'onBeforeSetContent',\n\n\t\t\t\t/**\n\t\t\t\t * This event gets executed before contents is inserted into selection. \n\t\t\t\t *\n\t\t\t\t * @event onBeforeGetContent\n\t\t\t\t * @param {tinymce.dom.Selection} selection Selection object that fired the event.\n\t\t\t\t * @param {Object} args Contains things like the contents that will be inserted. \n\t\t\t\t */\n\t\t\t\t'onBeforeGetContent',\n\n\t\t\t\t/**\n\t\t\t\t * This event gets executed when contents is inserted into selection.\n\t\t\t\t *\n\t\t\t\t * @event onSetContent\n\t\t\t\t * @param {tinymce.dom.Selection} selection Selection object that fired the event.\n\t\t\t\t * @param {Object} args Contains things like the contents that will be inserted. \n\t\t\t\t */\n\t\t\t\t'onSetContent',\n\n\t\t\t\t/**\n\t\t\t\t * This event gets executed when contents is extracted from the selection.\n\t\t\t\t *\n\t\t\t\t * @event onGetContent\n\t\t\t\t * @param {tinymce.dom.Selection} selection Selection object that fired the event.\n\t\t\t\t * @param {Object} args Contains things like the contents that will be returned. \n\t\t\t\t */\n\t\t\t\t'onGetContent'\n\t\t\t], function(e) {\n\t\t\t\tt[e] = new tinymce.util.Dispatcher(t);\n\t\t\t});\n\n\t\t\t// No W3C Range support\n\t\t\tif (!t.win.getSelection)\n\t\t\t\tt.tridentSel = new tinymce.dom.TridentSelection(t);\n\n\t\t\tif (tinymce.isIE && dom.boxModel)\n\t\t\t\tthis._fixIESelection();\n\n\t\t\t// Prevent leaks\n\t\t\ttinymce.addUnload(t.destroy, t);\n\t\t},\n\n\t\t/**\n\t\t * Move the selection cursor range to the specified node and offset.\n\t\t * @param node Node to put the cursor in.\n\t\t * @param offset Offset from the start of the node to put the cursor at.\n\t\t */\n\t\tsetCursorLocation: function(node, offset) {\n\t\t\tvar t = this; var r = t.dom.createRng();\n\t\t\tr.setStart(node, offset);\n\t\t\tr.setEnd(node, offset);\n\t\t\tt.setRng(r);\n\t\t\tt.collapse(false);\n\t\t},\n\t\t/**\n\t\t * Returns the selected contents using the DOM serializer passed in to this class.\n\t\t *\n\t\t * @method getContent\n\t\t * @param {Object} s Optional settings class with for example output format text or html.\n\t\t * @return {String} Selected contents in for example HTML format.\n\t\t * @example\n\t\t * // Alerts the currently selected contents\n\t\t * alert(tinyMCE.activeEditor.selection.getContent());\n\t\t * \n\t\t * // Alerts the currently selected contents as plain text\n\t\t * alert(tinyMCE.activeEditor.selection.getContent({format : 'text'}));\n\t\t */\n\t\tgetContent : function(s) {\n\t\t\tvar t = this, r = t.getRng(), e = t.dom.create(\"body\"), se = t.getSel(), wb, wa, n;\n\n\t\t\ts = s || {};\n\t\t\twb = wa = '';\n\t\t\ts.get = true;\n\t\t\ts.format = s.format || 'html';\n\t\t\ts.forced_root_block = '';\n\t\t\tt.onBeforeGetContent.dispatch(t, s);\n\n\t\t\tif (s.format == 'text')\n\t\t\t\treturn t.isCollapsed() ? '' : (r.text || (se.toString ? se.toString() : ''));\n\n\t\t\tif (r.cloneContents) {\n\t\t\t\tn = r.cloneContents();\n\n\t\t\t\tif (n)\n\t\t\t\t\te.appendChild(n);\n\t\t\t} else if (is(r.item) || is(r.htmlText)) {\n\t\t\t\t// IE will produce invalid markup if elements are present that\n\t\t\t\t// it doesn't understand like custom elements or HTML5 elements.\n\t\t\t\t// Adding a BR in front of the contents and then remoiving it seems to fix it though.\n\t\t\t\te.innerHTML = '<br>' + (r.item ? r.item(0).outerHTML : r.htmlText);\n\t\t\t\te.removeChild(e.firstChild);\n\t\t\t} else\n\t\t\t\te.innerHTML = r.toString();\n\n\t\t\t// Keep whitespace before and after\n\t\t\tif (/^\\s/.test(e.innerHTML))\n\t\t\t\twb = ' ';\n\n\t\t\tif (/\\s+$/.test(e.innerHTML))\n\t\t\t\twa = ' ';\n\n\t\t\ts.getInner = true;\n\n\t\t\ts.content = t.isCollapsed() ? '' : wb + t.serializer.serialize(e, s) + wa;\n\t\t\tt.onGetContent.dispatch(t, s);\n\n\t\t\treturn s.content;\n\t\t},\n\n\t\t/**\n\t\t * Sets the current selection to the specified content. If any contents is selected it will be replaced\n\t\t * with the contents passed in to this function. If there is no selection the contents will be inserted\n\t\t * where the caret is placed in the editor/page.\n\t\t *\n\t\t * @method setContent\n\t\t * @param {String} content HTML contents to set could also be other formats depending on settings.\n\t\t * @param {Object} args Optional settings object with for example data format.\n\t\t * @example\n\t\t * // Inserts some HTML contents at the current selection\n\t\t * tinyMCE.activeEditor.selection.setContent('<strong>Some contents</strong>');\n\t\t */\n\t\tsetContent : function(content, args) {\n\t\t\tvar self = this, rng = self.getRng(), caretNode, doc = self.win.document, frag, temp;\n\n\t\t\targs = args || {format : 'html'};\n\t\t\targs.set = true;\n\t\t\tcontent = args.content = content;\n\n\t\t\t// Dispatch before set content event\n\t\t\tif (!args.no_events)\n\t\t\t\tself.onBeforeSetContent.dispatch(self, args);\n\n\t\t\tcontent = args.content;\n\n\t\t\tif (rng.insertNode) {\n\t\t\t\t// Make caret marker since insertNode places the caret in the beginning of text after insert\n\t\t\t\tcontent += '<span id=\"__caret\">_</span>';\n\n\t\t\t\t// Delete and insert new node\n\t\t\t\tif (rng.startContainer == doc && rng.endContainer == doc) {\n\t\t\t\t\t// WebKit will fail if the body is empty since the range is then invalid and it can't insert contents\n\t\t\t\t\tdoc.body.innerHTML = content;\n\t\t\t\t} else {\n\t\t\t\t\trng.deleteContents();\n\n\t\t\t\t\tif (doc.body.childNodes.length == 0) {\n\t\t\t\t\t\tdoc.body.innerHTML = content;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// createContextualFragment doesn't exists in IE 9 DOMRanges\n\t\t\t\t\t\tif (rng.createContextualFragment) {\n\t\t\t\t\t\t\trng.insertNode(rng.createContextualFragment(content));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Fake createContextualFragment call in IE 9\n\t\t\t\t\t\t\tfrag = doc.createDocumentFragment();\n\t\t\t\t\t\t\ttemp = doc.createElement('div');\n\n\t\t\t\t\t\t\tfrag.appendChild(temp);\n\t\t\t\t\t\t\ttemp.outerHTML = content;\n\n\t\t\t\t\t\t\trng.insertNode(frag);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Move to caret marker\n\t\t\t\tcaretNode = self.dom.get('__caret');\n\n\t\t\t\t// Make sure we wrap it compleatly, Opera fails with a simple select call\n\t\t\t\trng = doc.createRange();\n\t\t\t\trng.setStartBefore(caretNode);\n\t\t\t\trng.setEndBefore(caretNode);\n\t\t\t\tself.setRng(rng);\n\n\t\t\t\t// Remove the caret position\n\t\t\t\tself.dom.remove('__caret');\n\n\t\t\t\ttry {\n\t\t\t\t\tself.setRng(rng);\n\t\t\t\t} catch (ex) {\n\t\t\t\t\t// Might fail on Opera for some odd reason\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (rng.item) {\n\t\t\t\t\t// Delete content and get caret text selection\n\t\t\t\t\tdoc.execCommand('Delete', false, null);\n\t\t\t\t\trng = self.getRng();\n\t\t\t\t}\n\n\t\t\t\t// Explorer removes spaces from the beginning of pasted contents\n\t\t\t\tif (/^\\s+/.test(content)) {\n\t\t\t\t\trng.pasteHTML('<span id=\"__mce_tmp\">_</span>' + content);\n\t\t\t\t\tself.dom.remove('__mce_tmp');\n\t\t\t\t} else\n\t\t\t\t\trng.pasteHTML(content);\n\t\t\t}\n\n\t\t\t// Dispatch set content event\n\t\t\tif (!args.no_events)\n\t\t\t\tself.onSetContent.dispatch(self, args);\n\t\t},\n\n\t\t/**\n\t\t * Returns the start element of a selection range. If the start is in a text\n\t\t * node the parent element will be returned.\n\t\t *\n\t\t * @method getStart\n\t\t * @return {Element} Start element of selection range.\n\t\t */\n\t\tgetStart : function() {\n\t\t\tvar rng = this.getRng(), startElement, parentElement, checkRng, node;\n\n\t\t\tif (rng.duplicate || rng.item) {\n\t\t\t\t// Control selection, return first item\n\t\t\t\tif (rng.item)\n\t\t\t\t\treturn rng.item(0);\n\n\t\t\t\t// Get start element\n\t\t\t\tcheckRng = rng.duplicate();\n\t\t\t\tcheckRng.collapse(1);\n\t\t\t\tstartElement = checkRng.parentElement();\n\n\t\t\t\t// Check if range parent is inside the start element, then return the inner parent element\n\t\t\t\t// This will fix issues when a single element is selected, IE would otherwise return the wrong start element\n\t\t\t\tparentElement = node = rng.parentElement();\n\t\t\t\twhile (node = node.parentNode) {\n\t\t\t\t\tif (node == startElement) {\n\t\t\t\t\t\tstartElement = parentElement;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn startElement;\n\t\t\t} else {\n\t\t\t\tstartElement = rng.startContainer;\n\n\t\t\t\tif (startElement.nodeType == 1 && startElement.hasChildNodes())\n\t\t\t\t\tstartElement = startElement.childNodes[Math.min(startElement.childNodes.length - 1, rng.startOffset)];\n\n\t\t\t\tif (startElement && startElement.nodeType == 3)\n\t\t\t\t\treturn startElement.parentNode;\n\n\t\t\t\treturn startElement;\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Returns the end element of a selection range. If the end is in a text\n\t\t * node the parent element will be returned.\n\t\t *\n\t\t * @method getEnd\n\t\t * @return {Element} End element of selection range.\n\t\t */\n\t\tgetEnd : function() {\n\t\t\tvar t = this, r = t.getRng(), e, eo;\n\n\t\t\tif (r.duplicate || r.item) {\n\t\t\t\tif (r.item)\n\t\t\t\t\treturn r.item(0);\n\n\t\t\t\tr = r.duplicate();\n\t\t\t\tr.collapse(0);\n\t\t\t\te = r.parentElement();\n\n\t\t\t\tif (e && e.nodeName == 'BODY')\n\t\t\t\t\treturn e.lastChild || e;\n\n\t\t\t\treturn e;\n\t\t\t} else {\n\t\t\t\te = r.endContainer;\n\t\t\t\teo = r.endOffset;\n\n\t\t\t\tif (e.nodeType == 1 && e.hasChildNodes())\n\t\t\t\t\te = e.childNodes[eo > 0 ? eo - 1 : eo];\n\n\t\t\t\tif (e && e.nodeType == 3)\n\t\t\t\t\treturn e.parentNode;\n\n\t\t\t\treturn e;\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Returns a bookmark location for the current selection. This bookmark object\n\t\t * can then be used to restore the selection after some content modification to the document.\n\t\t *\n\t\t * @method getBookmark\n\t\t * @param {Number} type Optional state if the bookmark should be simple or not. Default is complex.\n\t\t * @param {Boolean} normalized Optional state that enables you to get a position that it would be after normalization.\n\t\t * @return {Object} Bookmark object, use moveToBookmark with this object to restore the selection.\n\t\t * @example\n\t\t * // Stores a bookmark of the current selection\n\t\t * var bm = tinyMCE.activeEditor.selection.getBookmark();\n\t\t * \n\t\t * tinyMCE.activeEditor.setContent(tinyMCE.activeEditor.getContent() + 'Some new content');\n\t\t * \n\t\t * // Restore the selection bookmark\n\t\t * tinyMCE.activeEditor.selection.moveToBookmark(bm);\n\t\t */\n\t\tgetBookmark : function(type, normalized) {\n\t\t\tvar t = this, dom = t.dom, rng, rng2, id, collapsed, name, element, index, chr = '\\uFEFF', styles;\n\n\t\t\tfunction findIndex(name, element) {\n\t\t\t\tvar index = 0;\n\n\t\t\t\teach(dom.select(name), function(node, i) {\n\t\t\t\t\tif (node == element)\n\t\t\t\t\t\tindex = i;\n\t\t\t\t});\n\n\t\t\t\treturn index;\n\t\t\t};\n\n\t\t\tif (type == 2) {\n\t\t\t\tfunction getLocation() {\n\t\t\t\t\tvar rng = t.getRng(true), root = dom.getRoot(), bookmark = {};\n\n\t\t\t\t\tfunction getPoint(rng, start) {\n\t\t\t\t\t\tvar container = rng[start ? 'startContainer' : 'endContainer'],\n\t\t\t\t\t\t\toffset = rng[start ? 'startOffset' : 'endOffset'], point = [], node, childNodes, after = 0;\n\n\t\t\t\t\t\tif (container.nodeType == 3) {\n\t\t\t\t\t\t\tif (normalized) {\n\t\t\t\t\t\t\t\tfor (node = container.previousSibling; node && node.nodeType == 3; node = node.previousSibling)\n\t\t\t\t\t\t\t\t\toffset += node.nodeValue.length;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tpoint.push(offset);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tchildNodes = container.childNodes;\n\n\t\t\t\t\t\t\tif (offset >= childNodes.length && childNodes.length) {\n\t\t\t\t\t\t\t\tafter = 1;\n\t\t\t\t\t\t\t\toffset = Math.max(0, childNodes.length - 1);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tpoint.push(t.dom.nodeIndex(childNodes[offset], normalized) + after);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (; container && container != root; container = container.parentNode)\n\t\t\t\t\t\t\tpoint.push(t.dom.nodeIndex(container, normalized));\n\n\t\t\t\t\t\treturn point;\n\t\t\t\t\t};\n\n\t\t\t\t\tbookmark.start = getPoint(rng, true);\n\n\t\t\t\t\tif (!t.isCollapsed())\n\t\t\t\t\t\tbookmark.end = getPoint(rng);\n\n\t\t\t\t\treturn bookmark;\n\t\t\t\t};\n\n\t\t\t\tif (t.tridentSel)\n\t\t\t\t\treturn t.tridentSel.getBookmark(type);\n\n\t\t\t\treturn getLocation();\n\t\t\t}\n\n\t\t\t// Handle simple range\n\t\t\tif (type)\n\t\t\t\treturn {rng : t.getRng()};\n\n\t\t\trng = t.getRng();\n\t\t\tid = dom.uniqueId();\n\t\t\tcollapsed = tinyMCE.activeEditor.selection.isCollapsed();\n\t\t\tstyles = 'overflow:hidden;line-height:0px';\n\n\t\t\t// Explorer method\n\t\t\tif (rng.duplicate || rng.item) {\n\t\t\t\t// Text selection\n\t\t\t\tif (!rng.item) {\n\t\t\t\t\trng2 = rng.duplicate();\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// Insert start marker\n\t\t\t\t\t\trng.collapse();\n\t\t\t\t\t\trng.pasteHTML('<span data-mce-type=\"bookmark\" id=\"' + id + '_start\" style=\"' + styles + '\">' + chr + '</span>');\n\n\t\t\t\t\t\t// Insert end marker\n\t\t\t\t\t\tif (!collapsed) {\n\t\t\t\t\t\t\trng2.collapse(false);\n\n\t\t\t\t\t\t\t// Detect the empty space after block elements in IE and move the end back one character <p></p>] becomes <p>]</p>\n\t\t\t\t\t\t\trng.moveToElementText(rng2.parentElement());\n\t\t\t\t\t\t\tif (rng.compareEndPoints('StartToEnd', rng2) == 0)\n\t\t\t\t\t\t\t\trng2.move('character', -1);\n\n\t\t\t\t\t\t\trng2.pasteHTML('<span data-mce-type=\"bookmark\" id=\"' + id + '_end\" style=\"' + styles + '\">' + chr + '</span>');\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t// IE might throw unspecified error so lets ignore it\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Control selection\n\t\t\t\t\telement = rng.item(0);\n\t\t\t\t\tname = element.nodeName;\n\n\t\t\t\t\treturn {name : name, index : findIndex(name, element)};\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\telement = t.getNode();\n\t\t\t\tname = element.nodeName;\n\t\t\t\tif (name == 'IMG')\n\t\t\t\t\treturn {name : name, index : findIndex(name, element)};\n\n\t\t\t\t// W3C method\n\t\t\t\trng2 = rng.cloneRange();\n\n\t\t\t\t// Insert end marker\n\t\t\t\tif (!collapsed) {\n\t\t\t\t\trng2.collapse(false);\n\t\t\t\t\trng2.insertNode(dom.create('span', {'data-mce-type' : \"bookmark\", id : id + '_end', style : styles}, chr));\n\t\t\t\t}\n\n\t\t\t\trng.collapse(true);\n\t\t\t\trng.insertNode(dom.create('span', {'data-mce-type' : \"bookmark\", id : id + '_start', style : styles}, chr));\n\t\t\t}\n\n\t\t\tt.moveToBookmark({id : id, keep : 1});\n\n\t\t\treturn {id : id};\n\t\t},\n\n\t\t/**\n\t\t * Restores the selection to the specified bookmark.\n\t\t *\n\t\t * @method moveToBookmark\n\t\t * @param {Object} bookmark Bookmark to restore selection from.\n\t\t * @return {Boolean} true/false if it was successful or not.\n\t\t * @example\n\t\t * // Stores a bookmark of the current selection\n\t\t * var bm = tinyMCE.activeEditor.selection.getBookmark();\n\t\t * \n\t\t * tinyMCE.activeEditor.setContent(tinyMCE.activeEditor.getContent() + 'Some new content');\n\t\t * \n\t\t * // Restore the selection bookmark\n\t\t * tinyMCE.activeEditor.selection.moveToBookmark(bm);\n\t\t */\n\t\tmoveToBookmark : function(bookmark) {\n\t\t\tvar t = this, dom = t.dom, marker1, marker2, rng, root, startContainer, endContainer, startOffset, endOffset;\n\n\t\t\tif (bookmark) {\n\t\t\t\tif (bookmark.start) {\n\t\t\t\t\trng = dom.createRng();\n\t\t\t\t\troot = dom.getRoot();\n\n\t\t\t\t\tfunction setEndPoint(start) {\n\t\t\t\t\t\tvar point = bookmark[start ? 'start' : 'end'], i, node, offset, children;\n\n\t\t\t\t\t\tif (point) {\n\t\t\t\t\t\t\toffset = point[0];\n\n\t\t\t\t\t\t\t// Find container node\n\t\t\t\t\t\t\tfor (node = root, i = point.length - 1; i >= 1; i--) {\n\t\t\t\t\t\t\t\tchildren = node.childNodes;\n\n\t\t\t\t\t\t\t\tif (point[i] > children.length - 1)\n\t\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\t\tnode = children[point[i]];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Move text offset to best suitable location\n\t\t\t\t\t\t\tif (node.nodeType === 3)\n\t\t\t\t\t\t\t\toffset = Math.min(point[0], node.nodeValue.length);\n\n\t\t\t\t\t\t\t// Move element offset to best suitable location\n\t\t\t\t\t\t\tif (node.nodeType === 1)\n\t\t\t\t\t\t\t\toffset = Math.min(point[0], node.childNodes.length);\n\n\t\t\t\t\t\t\t// Set offset within container node\n\t\t\t\t\t\t\tif (start)\n\t\t\t\t\t\t\t\trng.setStart(node, offset);\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\trng.setEnd(node, offset);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t};\n\n\t\t\t\t\tif (t.tridentSel)\n\t\t\t\t\t\treturn t.tridentSel.moveToBookmark(bookmark);\n\n\t\t\t\t\tif (setEndPoint(true) && setEndPoint()) {\n\t\t\t\t\t\tt.setRng(rng);\n\t\t\t\t\t}\n\t\t\t\t} else if (bookmark.id) {\n\t\t\t\t\tfunction restoreEndPoint(suffix) {\n\t\t\t\t\t\tvar marker = dom.get(bookmark.id + '_' + suffix), node, idx, next, prev, keep = bookmark.keep;\n\n\t\t\t\t\t\tif (marker) {\n\t\t\t\t\t\t\tnode = marker.parentNode;\n\n\t\t\t\t\t\t\tif (suffix == 'start') {\n\t\t\t\t\t\t\t\tif (!keep) {\n\t\t\t\t\t\t\t\t\tidx = dom.nodeIndex(marker);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnode = marker.firstChild;\n\t\t\t\t\t\t\t\t\tidx = 1;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tstartContainer = endContainer = node;\n\t\t\t\t\t\t\t\tstartOffset = endOffset = idx;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (!keep) {\n\t\t\t\t\t\t\t\t\tidx = dom.nodeIndex(marker);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnode = marker.firstChild;\n\t\t\t\t\t\t\t\t\tidx = 1;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tendContainer = node;\n\t\t\t\t\t\t\t\tendOffset = idx;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!keep) {\n\t\t\t\t\t\t\t\tprev = marker.previousSibling;\n\t\t\t\t\t\t\t\tnext = marker.nextSibling;\n\n\t\t\t\t\t\t\t\t// Remove all marker text nodes\n\t\t\t\t\t\t\t\teach(tinymce.grep(marker.childNodes), function(node) {\n\t\t\t\t\t\t\t\t\tif (node.nodeType == 3)\n\t\t\t\t\t\t\t\t\t\tnode.nodeValue = node.nodeValue.replace(/\\uFEFF/g, '');\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t// Remove marker but keep children if for example contents where inserted into the marker\n\t\t\t\t\t\t\t\t// Also remove duplicated instances of the marker for example by a split operation or by WebKit auto split on paste feature\n\t\t\t\t\t\t\t\twhile (marker = dom.get(bookmark.id + '_' + suffix))\n\t\t\t\t\t\t\t\t\tdom.remove(marker, 1);\n\n\t\t\t\t\t\t\t\t// If siblings are text nodes then merge them unless it's Opera since it some how removes the node\n\t\t\t\t\t\t\t\t// and we are sniffing since adding a lot of detection code for a browser with 3% of the market isn't worth the effort. Sorry, Opera but it's just a fact\n\t\t\t\t\t\t\t\tif (prev && next && prev.nodeType == next.nodeType && prev.nodeType == 3 && !tinymce.isOpera) {\n\t\t\t\t\t\t\t\t\tidx = prev.nodeValue.length;\n\t\t\t\t\t\t\t\t\tprev.appendData(next.nodeValue);\n\t\t\t\t\t\t\t\t\tdom.remove(next);\n\n\t\t\t\t\t\t\t\t\tif (suffix == 'start') {\n\t\t\t\t\t\t\t\t\t\tstartContainer = endContainer = prev;\n\t\t\t\t\t\t\t\t\t\tstartOffset = endOffset = idx;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tendContainer = prev;\n\t\t\t\t\t\t\t\t\t\tendOffset = idx;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tfunction addBogus(node) {\n\t\t\t\t\t\t// Adds a bogus BR element for empty block elements or just a space on IE since it renders BR elements incorrectly\n\t\t\t\t\t\tif (dom.isBlock(node) && !node.innerHTML)\n\t\t\t\t\t\t\tnode.innerHTML = !isIE ? '<br data-mce-bogus=\"1\" />' : ' ';\n\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t};\n\n\t\t\t\t\t// Restore start/end points\n\t\t\t\t\trestoreEndPoint('start');\n\t\t\t\t\trestoreEndPoint('end');\n\n\t\t\t\t\tif (startContainer) {\n\t\t\t\t\t\trng = dom.createRng();\n\t\t\t\t\t\trng.setStart(addBogus(startContainer), startOffset);\n\t\t\t\t\t\trng.setEnd(addBogus(endContainer), endOffset);\n\t\t\t\t\t\tt.setRng(rng);\n\t\t\t\t\t}\n\t\t\t\t} else if (bookmark.name) {\n\t\t\t\t\tt.select(dom.select(bookmark.name)[bookmark.index]);\n\t\t\t\t} else if (bookmark.rng)\n\t\t\t\t\tt.setRng(bookmark.rng);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Selects the specified element. This will place the start and end of the selection range around the element.\n\t\t *\n\t\t * @method select\n\t\t * @param {Element} node HMTL DOM element to select.\n\t\t * @param {Boolean} content Optional bool state if the contents should be selected or not on non IE browser.\n\t\t * @return {Element} Selected element the same element as the one that got passed in.\n\t\t * @example\n\t\t * // Select the first paragraph in the active editor\n\t\t * tinyMCE.activeEditor.selection.select(tinyMCE.activeEditor.dom.select('p')[0]);\n\t\t */\n\t\tselect : function(node, content) {\n\t\t\tvar t = this, dom = t.dom, rng = dom.createRng(), idx;\n\n\t\t\tif (node) {\n\t\t\t\tidx = dom.nodeIndex(node);\n\t\t\t\trng.setStart(node.parentNode, idx);\n\t\t\t\trng.setEnd(node.parentNode, idx + 1);\n\n\t\t\t\t// Find first/last text node or BR element\n\t\t\t\tif (content) {\n\t\t\t\t\tfunction setPoint(node, start) {\n\t\t\t\t\t\tvar walker = new tinymce.dom.TreeWalker(node, node);\n\n\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\t// Text node\n\t\t\t\t\t\t\tif (node.nodeType == 3 && tinymce.trim(node.nodeValue).length != 0) {\n\t\t\t\t\t\t\t\tif (start)\n\t\t\t\t\t\t\t\t\trng.setStart(node, 0);\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\trng.setEnd(node, node.nodeValue.length);\n\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// BR element\n\t\t\t\t\t\t\tif (node.nodeName == 'BR') {\n\t\t\t\t\t\t\t\tif (start)\n\t\t\t\t\t\t\t\t\trng.setStartBefore(node);\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\trng.setEndBefore(node);\n\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} while (node = (start ? walker.next() : walker.prev()));\n\t\t\t\t\t};\n\n\t\t\t\t\tsetPoint(node, 1);\n\t\t\t\t\tsetPoint(node);\n\t\t\t\t}\n\n\t\t\t\tt.setRng(rng);\n\t\t\t}\n\n\t\t\treturn node;\n\t\t},\n\n\t\t/**\n\t\t * Returns true/false if the selection range is collapsed or not. Collapsed means if it's a caret or a larger selection.\n\t\t *\n\t\t * @method isCollapsed\n\t\t * @return {Boolean} true/false state if the selection range is collapsed or not. Collapsed means if it's a caret or a larger selection.\n\t\t */\n\t\tisCollapsed : function() {\n\t\t\tvar t = this, r = t.getRng(), s = t.getSel();\n\n\t\t\tif (!r || r.item)\n\t\t\t\treturn false;\n\n\t\t\tif (r.compareEndPoints)\n\t\t\t\treturn r.compareEndPoints('StartToEnd', r) === 0;\n\n\t\t\treturn !s || r.collapsed;\n\t\t},\n\n\t\t/**\n\t\t * Collapse the selection to start or end of range.\n\t\t *\n\t\t * @method collapse\n\t\t * @param {Boolean} to_start Optional boolean state if to collapse to end or not. Defaults to start.\n\t\t */\n\t\tcollapse : function(to_start) {\n\t\t\tvar self = this, rng = self.getRng(), node;\n\n\t\t\t// Control range on IE\n\t\t\tif (rng.item) {\n\t\t\t\tnode = rng.item(0);\n\t\t\t\trng = self.win.document.body.createTextRange();\n\t\t\t\trng.moveToElementText(node);\n\t\t\t}\n\n\t\t\trng.collapse(!!to_start);\n\t\t\tself.setRng(rng);\n\t\t},\n\n\t\t/**\n\t\t * Returns the browsers internal selection object.\n\t\t *\n\t\t * @method getSel\n\t\t * @return {Selection} Internal browser selection object.\n\t\t */\n\t\tgetSel : function() {\n\t\t\tvar t = this, w = this.win;\n\n\t\t\treturn w.getSelection ? w.getSelection() : w.document.selection;\n\t\t},\n\n\t\t/**\n\t\t * Returns the browsers internal range object.\n\t\t *\n\t\t * @method getRng\n\t\t * @param {Boolean} w3c Forces a compatible W3C range on IE.\n\t\t * @return {Range} Internal browser range object.\n\t\t * @see http://www.quirksmode.org/dom/range_intro.html\n\t\t * @see http://www.dotvoid.com/2001/03/using-the-range-object-in-mozilla/\n\t\t */\n\t\tgetRng : function(w3c) {\n\t\t\tvar t = this, s, r, elm, doc = t.win.document;\n\n\t\t\t// Found tridentSel object then we need to use that one\n\t\t\tif (w3c && t.tridentSel)\n\t\t\t\treturn t.tridentSel.getRangeAt(0);\n\n\t\t\ttry {\n\t\t\t\tif (s = t.getSel())\n\t\t\t\t\tr = s.rangeCount > 0 ? s.getRangeAt(0) : (s.createRange ? s.createRange() : doc.createRange());\n\t\t\t} catch (ex) {\n\t\t\t\t// IE throws unspecified error here if TinyMCE is placed in a frame/iframe\n\t\t\t}\n\n\t\t\t// We have W3C ranges and it's IE then fake control selection since IE9 doesn't handle that correctly yet\n\t\t\tif (tinymce.isIE && r && r.setStart && doc.selection.createRange().item) {\n\t\t\t\telm = doc.selection.createRange().item(0);\n\t\t\t\tr = doc.createRange();\n\t\t\t\tr.setStartBefore(elm);\n\t\t\t\tr.setEndAfter(elm);\n\t\t\t}\n\n\t\t\t// No range found then create an empty one\n\t\t\t// This can occur when the editor is placed in a hidden container element on Gecko\n\t\t\t// Or on IE when there was an exception\n\t\t\tif (!r)\n\t\t\t\tr = doc.createRange ? doc.createRange() : doc.body.createTextRange();\n\n\t\t\tif (t.selectedRange && t.explicitRange) {\n\t\t\t\tif (r.compareBoundaryPoints(r.START_TO_START, t.selectedRange) === 0 && r.compareBoundaryPoints(r.END_TO_END, t.selectedRange) === 0) {\n\t\t\t\t\t// Safari, Opera and Chrome only ever select text which causes the range to change.\n\t\t\t\t\t// This lets us use the originally set range if the selection hasn't been changed by the user.\n\t\t\t\t\tr = t.explicitRange;\n\t\t\t\t} else {\n\t\t\t\t\tt.selectedRange = null;\n\t\t\t\t\tt.explicitRange = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn r;\n\t\t},\n\n\t\t/**\n\t\t * Changes the selection to the specified DOM range.\n\t\t *\n\t\t * @method setRng\n\t\t * @param {Range} r Range to select.\n\t\t */\n\t\tsetRng : function(r) {\n\t\t\tvar s, t = this;\n\t\t\t\n\t\t\tif (!t.tridentSel) {\n\t\t\t\ts = t.getSel();\n\n\t\t\t\tif (s) {\n\t\t\t\t\tt.explicitRange = r;\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\ts.removeAllRanges();\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t// IE9 might throw errors here don't know why\n\t\t\t\t\t}\n\n\t\t\t\t\ts.addRange(r);\n\t\t\t\t\tt.selectedRange = s.getRangeAt(0);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Is W3C Range\n\t\t\t\tif (r.cloneRange) {\n\t\t\t\t\tt.tridentSel.addRange(r);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Is IE specific range\n\t\t\t\ttry {\n\t\t\t\t\tr.select();\n\t\t\t\t} catch (ex) {\n\t\t\t\t\t// Needed for some odd IE bug #1843306\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Sets the current selection to the specified DOM element.\n\t\t *\n\t\t * @method setNode\n\t\t * @param {Element} n Element to set as the contents of the selection.\n\t\t * @return {Element} Returns the element that got passed in.\n\t\t * @example\n\t\t * // Inserts a DOM node at current selection/caret location\n\t\t * tinyMCE.activeEditor.selection.setNode(tinyMCE.activeEditor.dom.create('img', {src : 'some.gif', title : 'some title'}));\n\t\t */\n\t\tsetNode : function(n) {\n\t\t\tvar t = this;\n\n\t\t\tt.setContent(t.dom.getOuterHTML(n));\n\n\t\t\treturn n;\n\t\t},\n\n\t\t/**\n\t\t * Returns the currently selected element or the common ancestor element for both start and end of the selection.\n\t\t *\n\t\t * @method getNode\n\t\t * @return {Element} Currently selected element or common ancestor element.\n\t\t * @example\n\t\t * // Alerts the currently selected elements node name\n\t\t * alert(tinyMCE.activeEditor.selection.getNode().nodeName);\n\t\t */\n\t\tgetNode : function() {\n\t\t\tvar t = this, rng = t.getRng(), sel = t.getSel(), elm, start = rng.startContainer, end = rng.endContainer;\n\n\t\t\t// Range maybe lost after the editor is made visible again\n\t\t\tif (!rng)\n\t\t\t\treturn t.dom.getRoot();\n\n\t\t\tif (rng.setStart) {\n\t\t\t\telm = rng.commonAncestorContainer;\n\n\t\t\t\t// Handle selection a image or other control like element such as anchors\n\t\t\t\tif (!rng.collapsed) {\n\t\t\t\t\tif (rng.startContainer == rng.endContainer) {\n\t\t\t\t\t\tif (rng.endOffset - rng.startOffset < 2) {\n\t\t\t\t\t\t\tif (rng.startContainer.hasChildNodes())\n\t\t\t\t\t\t\t\telm = rng.startContainer.childNodes[rng.startOffset];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// If the anchor node is a element instead of a text node then return this element\n\t\t\t\t\t//if (tinymce.isWebKit && sel.anchorNode && sel.anchorNode.nodeType == 1) \n\t\t\t\t\t//\treturn sel.anchorNode.childNodes[sel.anchorOffset];\n\n\t\t\t\t\t// Handle cases where the selection is immediately wrapped around a node and return that node instead of it's parent.\n\t\t\t\t\t// This happens when you double click an underlined word in FireFox.\n\t\t\t\t\tif (start.nodeType === 3 && end.nodeType === 3) {\n\t\t\t\t\t\tfunction skipEmptyTextNodes(n, forwards) {\n\t\t\t\t\t\t\tvar orig = n;\n\t\t\t\t\t\t\twhile (n && n.nodeType === 3 && n.length === 0) {\n\t\t\t\t\t\t\t\tn = forwards ? n.nextSibling : n.previousSibling;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn n || orig;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (start.length === rng.startOffset) {\n\t\t\t\t\t\t\tstart = skipEmptyTextNodes(start.nextSibling, true);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstart = start.parentNode;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (rng.endOffset === 0) {\n\t\t\t\t\t\t\tend = skipEmptyTextNodes(end.previousSibling, false);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tend = end.parentNode;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (start && start === end)\n\t\t\t\t\t\t\treturn start;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (elm && elm.nodeType == 3)\n\t\t\t\t\treturn elm.parentNode;\n\n\t\t\t\treturn elm;\n\t\t\t}\n\n\t\t\treturn rng.item ? rng.item(0) : rng.parentElement();\n\t\t},\n\n\t\tgetSelectedBlocks : function(st, en) {\n\t\t\tvar t = this, dom = t.dom, sb, eb, n, bl = [];\n\n\t\t\tsb = dom.getParent(st || t.getStart(), dom.isBlock);\n\t\t\teb = dom.getParent(en || t.getEnd(), dom.isBlock);\n\n\t\t\tif (sb)\n\t\t\t\tbl.push(sb);\n\n\t\t\tif (sb && eb && sb != eb) {\n\t\t\t\tn = sb;\n\n\t\t\t\tvar walker = new tinymce.dom.TreeWalker(sb, dom.getRoot());\n\t\t\t\twhile ((n = walker.next()) && n != eb) {\n\t\t\t\t\tif (dom.isBlock(n))\n\t\t\t\t\t\tbl.push(n);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (eb && sb != eb)\n\t\t\t\tbl.push(eb);\n\n\t\t\treturn bl;\n\t\t},\n\n\t\tnormalize : function() {\n\t\t\tvar self = this, rng, normalized;\n\n\t\t\t// Normalize only on non IE browsers for now\n\t\t\tif (tinymce.isIE)\n\t\t\t\treturn;\n\n\t\t\tfunction normalizeEndPoint(start) {\n\t\t\t\tvar container, offset, walker, dom = self.dom, body = dom.getRoot(), node;\n\n\t\t\t\tcontainer = rng[(start ? 'start' : 'end') + 'Container'];\n\t\t\t\toffset = rng[(start ? 'start' : 'end') + 'Offset'];\n\n\t\t\t\t// If the container is a document move it to the body element\n\t\t\t\tif (container.nodeType === 9) {\n\t\t\t\t\tcontainer = container.body;\n\t\t\t\t\toffset = 0;\n\t\t\t\t}\n\n\t\t\t\t// If the container is body try move it into the closest text node or position\n\t\t\t\t// TODO: Add more logic here to handle element selection cases\n\t\t\t\tif (container === body) {\n\t\t\t\t\t// Resolve the index\n\t\t\t\t\tif (container.hasChildNodes()) {\n\t\t\t\t\t\tcontainer = container.childNodes[Math.min(!start && offset > 0 ? offset - 1 : offset, container.childNodes.length - 1)];\n\t\t\t\t\t\toffset = 0;\n\n\t\t\t\t\t\t// Don't walk into elements that doesn't have any child nodes like a IMG\n\t\t\t\t\t\tif (container.hasChildNodes()) {\n\t\t\t\t\t\t\t// Walk the DOM to find a text node to place the caret at or a BR\n\t\t\t\t\t\t\tnode = container;\n\t\t\t\t\t\t\twalker = new tinymce.dom.TreeWalker(container, body);\n\t\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\t\t// Found a text node use that position\n\t\t\t\t\t\t\t\tif (node.nodeType === 3) {\n\t\t\t\t\t\t\t\t\toffset = start ? 0 : node.nodeValue.length - 1;\n\t\t\t\t\t\t\t\t\tcontainer = node;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Found a BR element that we can place the caret before\n\t\t\t\t\t\t\t\tif (node.nodeName === 'BR') {\n\t\t\t\t\t\t\t\t\toffset = dom.nodeIndex(node);\n\t\t\t\t\t\t\t\t\tcontainer = node.parentNode;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} while (node = (start ? walker.next() : walker.prev()));\n\n\t\t\t\t\t\t\tnormalized = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Set endpoint if it was normalized\n\t\t\t\tif (normalized)\n\t\t\t\t\trng['set' + (start ? 'Start' : 'End')](container, offset);\n\t\t\t};\n\n\t\t\trng = self.getRng();\n\n\t\t\t// Normalize the end points\n\t\t\tnormalizeEndPoint(true);\n\t\t\t\n\t\t\tif (rng.collapsed)\n\t\t\t\tnormalizeEndPoint();\n\n\t\t\t// Set the selection if it was normalized\n\t\t\tif (normalized) {\n\t\t\t\t//console.log(self.dom.dumpRng(rng));\n\t\t\t\tself.setRng(rng);\n\t\t\t}\n\t\t},\n\n\t\tdestroy : function(s) {\n\t\t\tvar t = this;\n\n\t\t\tt.win = null;\n\n\t\t\t// Manual destroy then remove unload handler\n\t\t\tif (!s)\n\t\t\t\ttinymce.removeUnload(t.destroy);\n\t\t},\n\n\t\t// IE has an issue where you can't select/move the caret by clicking outside the body if the document is in standards mode\n\t\t_fixIESelection : function() {\n\t\t\tvar dom = this.dom, doc = dom.doc, body = doc.body, started, startRng, htmlElm;\n\n\t\t\t// Make HTML element unselectable since we are going to handle selection by hand\n\t\t\tdoc.documentElement.unselectable = true;\n\n\t\t\t// Return range from point or null if it failed\n\t\t\tfunction rngFromPoint(x, y) {\n\t\t\t\tvar rng = body.createTextRange();\n\n\t\t\t\ttry {\n\t\t\t\t\trng.moveToPoint(x, y);\n\t\t\t\t} catch (ex) {\n\t\t\t\t\t// IE sometimes throws and exception, so lets just ignore it\n\t\t\t\t\trng = null;\n\t\t\t\t}\n\n\t\t\t\treturn rng;\n\t\t\t};\n\n\t\t\t// Fires while the selection is changing\n\t\t\tfunction selectionChange(e) {\n\t\t\t\tvar pointRng;\n\n\t\t\t\t// Check if the button is down or not\n\t\t\t\tif (e.button) {\n\t\t\t\t\t// Create range from mouse position\n\t\t\t\t\tpointRng = rngFromPoint(e.x, e.y);\n\n\t\t\t\t\tif (pointRng) {\n\t\t\t\t\t\t// Check if pointRange is before/after selection then change the endPoint\n\t\t\t\t\t\tif (pointRng.compareEndPoints('StartToStart', startRng) > 0)\n\t\t\t\t\t\t\tpointRng.setEndPoint('StartToStart', startRng);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tpointRng.setEndPoint('EndToEnd', startRng);\n\n\t\t\t\t\t\tpointRng.select();\n\t\t\t\t\t}\n\t\t\t\t} else\n\t\t\t\t\tendSelection();\n\t\t\t}\n\n\t\t\t// Removes listeners\n\t\t\tfunction endSelection() {\n\t\t\t\tvar rng = doc.selection.createRange();\n\n\t\t\t\t// If the range is collapsed then use the last start range\n\t\t\t\tif (startRng && !rng.item && rng.compareEndPoints('StartToEnd', rng) === 0)\n\t\t\t\t\tstartRng.select();\n\n\t\t\t\tdom.unbind(doc, 'mouseup', endSelection);\n\t\t\t\tdom.unbind(doc, 'mousemove', selectionChange);\n\t\t\t\tstartRng = started = 0;\n\t\t\t};\n\n\t\t\t// Detect when user selects outside BODY\n\t\t\tdom.bind(doc, ['mousedown', 'contextmenu'], function(e) {\n\t\t\t\tif (e.target.nodeName === 'HTML') {\n\t\t\t\t\tif (started)\n\t\t\t\t\t\tendSelection();\n\n\t\t\t\t\t// Detect vertical scrollbar, since IE will fire a mousedown on the scrollbar and have target set as HTML\n\t\t\t\t\thtmlElm = doc.documentElement;\n\t\t\t\t\tif (htmlElm.scrollHeight > htmlElm.clientHeight)\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tstarted = 1;\n\t\t\t\t\t// Setup start position\n\t\t\t\t\tstartRng = rngFromPoint(e.x, e.y);\n\t\t\t\t\tif (startRng) {\n\t\t\t\t\t\t// Listen for selection change events\n\t\t\t\t\t\tdom.bind(doc, 'mouseup', endSelection);\n\t\t\t\t\t\tdom.bind(doc, 'mousemove', selectionChange);\n\n\t\t\t\t\t\tdom.win.focus();\n\t\t\t\t\t\tstartRng.select();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n})(tinymce);\n","Magento_Tinymce3/tiny_mce/classes/dom/TridentSelection.js":"/**\n * TridentSelection.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function() {\n\tfunction Selection(selection) {\n\t\tvar self = this, dom = selection.dom, TRUE = true, FALSE = false;\n\n\t\tfunction getPosition(rng, start) {\n\t\t\tvar checkRng, startIndex = 0, endIndex, inside,\n\t\t\t\tchildren, child, offset, index, position = -1, parent;\n\n\t\t\t// Setup test range, collapse it and get the parent\n\t\t\tcheckRng = rng.duplicate();\n\t\t\tcheckRng.collapse(start);\n\t\t\tparent = checkRng.parentElement();\n\n\t\t\t// Check if the selection is within the right document\n\t\t\tif (parent.ownerDocument !== selection.dom.doc)\n\t\t\t\treturn;\n\n\t\t\t// IE will report non editable elements as it's parent so look for an editable one\n\t\t\twhile (parent.contentEditable === \"false\") {\n\t\t\t\tparent = parent.parentNode;\n\t\t\t}\n\n\t\t\t// If parent doesn't have any children then return that we are inside the element\n\t\t\tif (!parent.hasChildNodes()) {\n\t\t\t\treturn {node : parent, inside : 1};\n\t\t\t}\n\n\t\t\t// Setup node list and endIndex\n\t\t\tchildren = parent.children;\n\t\t\tendIndex = children.length - 1;\n\n\t\t\t// Perform a binary search for the position\n\t\t\twhile (startIndex <= endIndex) {\n\t\t\t\tindex = Math.floor((startIndex + endIndex) / 2);\n\n\t\t\t\t// Move selection to node and compare the ranges\n\t\t\t\tchild = children[index];\n\t\t\t\tcheckRng.moveToElementText(child);\n\t\t\t\tposition = checkRng.compareEndPoints(start ? 'StartToStart' : 'EndToEnd', rng);\n\n\t\t\t\t// Before/after or an exact match\n\t\t\t\tif (position > 0) {\n\t\t\t\t\tendIndex = index - 1;\n\t\t\t\t} else if (position < 0) {\n\t\t\t\t\tstartIndex = index + 1;\n\t\t\t\t} else {\n\t\t\t\t\treturn {node : child};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Check if child position is before or we didn't find a position\n\t\t\tif (position < 0) {\n\t\t\t\t// No element child was found use the parent element and the offset inside that\n\t\t\t\tif (!child) {\n\t\t\t\t\tcheckRng.moveToElementText(parent);\n\t\t\t\t\tcheckRng.collapse(true);\n\t\t\t\t\tchild = parent;\n\t\t\t\t\tinside = true;\n\t\t\t\t} else\n\t\t\t\t\tcheckRng.collapse(false);\n\n\t\t\t\tcheckRng.setEndPoint(start ? 'EndToStart' : 'EndToEnd', rng);\n\n\t\t\t\t// Fix for edge case: <div style=\"width: 100px; height:100px;\"><table>..</table>ab|c</div>\n\t\t\t\tif (checkRng.compareEndPoints(start ? 'StartToStart' : 'StartToEnd', rng) > 0) {\n\t\t\t\t\tcheckRng = rng.duplicate();\n\t\t\t\t\tcheckRng.collapse(start);\n\n\t\t\t\t\toffset = -1;\n\t\t\t\t\twhile (parent == checkRng.parentElement()) {\n\t\t\t\t\t\tif (checkRng.move('character', -1) == 0)\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\toffset++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\toffset = offset || checkRng.text.replace('\\r\\n', ' ').length;\n\t\t\t} else {\n\t\t\t\t// Child position is after the selection endpoint\n\t\t\t\tcheckRng.collapse(true);\n\t\t\t\tcheckRng.setEndPoint(start ? 'StartToStart' : 'StartToEnd', rng);\n\n\t\t\t\t// Get the length of the text to find where the endpoint is relative to it's container\n\t\t\t\toffset = checkRng.text.replace('\\r\\n', ' ').length;\n\t\t\t}\n\n\t\t\treturn {node : child, position : position, offset : offset, inside : inside};\n\t\t};\n\n\t\t// Returns a W3C DOM compatible range object by using the IE Range API\n\t\tfunction getRange() {\n\t\t\tvar ieRange = selection.getRng(), domRange = dom.createRng(), element, collapsed, tmpRange, element2, bookmark, fail;\n\n\t\t\t// If selection is outside the current document just return an empty range\n\t\t\telement = ieRange.item ? ieRange.item(0) : ieRange.parentElement();\n\t\t\tif (element.ownerDocument != dom.doc)\n\t\t\t\treturn domRange;\n\n\t\t\tcollapsed = selection.isCollapsed();\n\n\t\t\t// Handle control selection\n\t\t\tif (ieRange.item) {\n\t\t\t\tdomRange.setStart(element.parentNode, dom.nodeIndex(element));\n\t\t\t\tdomRange.setEnd(domRange.startContainer, domRange.startOffset + 1);\n\n\t\t\t\treturn domRange;\n\t\t\t}\n\n\t\t\tfunction findEndPoint(start) {\n\t\t\t\tvar endPoint = getPosition(ieRange, start), container, offset, textNodeOffset = 0, sibling, undef, nodeValue;\n\n\t\t\t\tcontainer = endPoint.node;\n\t\t\t\toffset = endPoint.offset;\n\n\t\t\t\tif (endPoint.inside && !container.hasChildNodes()) {\n\t\t\t\t\tdomRange[start ? 'setStart' : 'setEnd'](container, 0);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (offset === undef) {\n\t\t\t\t\tdomRange[start ? 'setStartBefore' : 'setEndAfter'](container);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (endPoint.position < 0) {\n\t\t\t\t\tsibling = endPoint.inside ? container.firstChild : container.nextSibling;\n\n\t\t\t\t\tif (!sibling) {\n\t\t\t\t\t\tdomRange[start ? 'setStartAfter' : 'setEndAfter'](container);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!offset) {\n\t\t\t\t\t\tif (sibling.nodeType == 3)\n\t\t\t\t\t\t\tdomRange[start ? 'setStart' : 'setEnd'](sibling, 0);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tdomRange[start ? 'setStartBefore' : 'setEndBefore'](sibling);\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Find the text node and offset\n\t\t\t\t\twhile (sibling) {\n\t\t\t\t\t\tnodeValue = sibling.nodeValue;\n\t\t\t\t\t\ttextNodeOffset += nodeValue.length;\n\n\t\t\t\t\t\t// We are at or passed the position we where looking for\n\t\t\t\t\t\tif (textNodeOffset >= offset) {\n\t\t\t\t\t\t\tcontainer = sibling;\n\t\t\t\t\t\t\ttextNodeOffset -= offset;\n\t\t\t\t\t\t\ttextNodeOffset = nodeValue.length - textNodeOffset;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsibling = sibling.nextSibling;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Find the text node and offset\n\t\t\t\t\tsibling = container.previousSibling;\n\n\t\t\t\t\tif (!sibling)\n\t\t\t\t\t\treturn domRange[start ? 'setStartBefore' : 'setEndBefore'](container);\n\n\t\t\t\t\t// If there isn't any text to loop then use the first position\n\t\t\t\t\tif (!offset) {\n\t\t\t\t\t\tif (container.nodeType == 3)\n\t\t\t\t\t\t\tdomRange[start ? 'setStart' : 'setEnd'](sibling, container.nodeValue.length);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tdomRange[start ? 'setStartAfter' : 'setEndAfter'](sibling);\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\twhile (sibling) {\n\t\t\t\t\t\ttextNodeOffset += sibling.nodeValue.length;\n\n\t\t\t\t\t\t// We are at or passed the position we where looking for\n\t\t\t\t\t\tif (textNodeOffset >= offset) {\n\t\t\t\t\t\t\tcontainer = sibling;\n\t\t\t\t\t\t\ttextNodeOffset -= offset;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsibling = sibling.previousSibling;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tdomRange[start ? 'setStart' : 'setEnd'](container, textNodeOffset);\n\t\t\t};\n\n\t\t\ttry {\n\t\t\t\t// Find start point\n\t\t\t\tfindEndPoint(true);\n\n\t\t\t\t// Find end point if needed\n\t\t\t\tif (!collapsed)\n\t\t\t\t\tfindEndPoint();\n\t\t\t} catch (ex) {\n\t\t\t\t// IE has a nasty bug where text nodes might throw \"invalid argument\" when you\n\t\t\t\t// access the nodeValue or other properties of text nodes. This seems to happend when\n\t\t\t\t// text nodes are split into two nodes by a delete/backspace call. So lets detect it and try to fix it.\n\t\t\t\tif (ex.number == -2147024809) {\n\t\t\t\t\t// Get the current selection\n\t\t\t\t\tbookmark = self.getBookmark(2);\n\n\t\t\t\t\t// Get start element\n\t\t\t\t\ttmpRange = ieRange.duplicate();\n\t\t\t\t\ttmpRange.collapse(true);\n\t\t\t\t\telement = tmpRange.parentElement();\n\n\t\t\t\t\t// Get end element\n\t\t\t\t\tif (!collapsed) {\n\t\t\t\t\t\ttmpRange = ieRange.duplicate();\n\t\t\t\t\t\ttmpRange.collapse(false);\n\t\t\t\t\t\telement2 = tmpRange.parentElement();\n\t\t\t\t\t\telement2.innerHTML = element2.innerHTML;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Remove the broken elements\n\t\t\t\t\telement.innerHTML = element.innerHTML;\n\n\t\t\t\t\t// Restore the selection\n\t\t\t\t\tself.moveToBookmark(bookmark);\n\n\t\t\t\t\t// Since the range has moved we need to re-get it\n\t\t\t\t\tieRange = selection.getRng();\n\n\t\t\t\t\t// Find start point\n\t\t\t\t\tfindEndPoint(true);\n\n\t\t\t\t\t// Find end point if needed\n\t\t\t\t\tif (!collapsed)\n\t\t\t\t\t\tfindEndPoint();\n\t\t\t\t} else\n\t\t\t\t\tthrow ex; // Throw other errors\n\t\t\t}\n\n\t\t\treturn domRange;\n\t\t};\n\n\t\tthis.getBookmark = function(type) {\n\t\t\tvar rng = selection.getRng(), start, end, bookmark = {};\n\n\t\t\tfunction getIndexes(node) {\n\t\t\t\tvar node, parent, root, children, i, indexes = [];\n\n\t\t\t\tparent = node.parentNode;\n\t\t\t\troot = dom.getRoot().parentNode;\n\n\t\t\t\twhile (parent != root && parent.nodeType !== 9) {\n\t\t\t\t\tchildren = parent.children;\n\n\t\t\t\t\ti = children.length;\n\t\t\t\t\twhile (i--) {\n\t\t\t\t\t\tif (node === children[i]) {\n\t\t\t\t\t\t\tindexes.push(i);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tnode = parent;\n\t\t\t\t\tparent = parent.parentNode;\n\t\t\t\t}\n\n\t\t\t\treturn indexes;\n\t\t\t};\n\n\t\t\tfunction getBookmarkEndPoint(start) {\n\t\t\t\tvar position;\n\n\t\t\t\tposition = getPosition(rng, start);\n\t\t\t\tif (position) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tposition : position.position,\n\t\t\t\t\t\toffset : position.offset,\n\t\t\t\t\t\tindexes : getIndexes(position.node),\n\t\t\t\t\t\tinside : position.inside\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Non ubstructive bookmark\n\t\t\tif (type === 2) {\n\t\t\t\t// Handle text selection\n\t\t\t\tif (!rng.item) {\n\t\t\t\t\tbookmark.start = getBookmarkEndPoint(true);\n\n\t\t\t\t\tif (!selection.isCollapsed())\n\t\t\t\t\t\tbookmark.end = getBookmarkEndPoint();\n\t\t\t\t} else\n\t\t\t\t\tbookmark.start = {ctrl : true, indexes : getIndexes(rng.item(0))};\n\t\t\t}\n\n\t\t\treturn bookmark;\n\t\t};\n\n\t\tthis.moveToBookmark = function(bookmark) {\n\t\t\tvar rng, body = dom.doc.body;\n\n\t\t\tfunction resolveIndexes(indexes) {\n\t\t\t\tvar node, i, idx, children;\n\n\t\t\t\tnode = dom.getRoot();\n\t\t\t\tfor (i = indexes.length - 1; i >= 0; i--) {\n\t\t\t\t\tchildren = node.children;\n\t\t\t\t\tidx = indexes[i];\n\n\t\t\t\t\tif (idx <= children.length - 1) {\n\t\t\t\t\t\tnode = children[idx];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn node;\n\t\t\t};\n\t\t\t\n\t\t\tfunction setBookmarkEndPoint(start) {\n\t\t\t\tvar endPoint = bookmark[start ? 'start' : 'end'], moveLeft, moveRng, undef;\n\n\t\t\t\tif (endPoint) {\n\t\t\t\t\tmoveLeft = endPoint.position > 0;\n\n\t\t\t\t\tmoveRng = body.createTextRange();\n\t\t\t\t\tmoveRng.moveToElementText(resolveIndexes(endPoint.indexes));\n\n\t\t\t\t\toffset = endPoint.offset;\n\t\t\t\t\tif (offset !== undef) {\n\t\t\t\t\t\tmoveRng.collapse(endPoint.inside || moveLeft);\n\t\t\t\t\t\tmoveRng.moveStart('character', moveLeft ? -offset : offset);\n\t\t\t\t\t} else\n\t\t\t\t\t\tmoveRng.collapse(start);\n\n\t\t\t\t\trng.setEndPoint(start ? 'StartToStart' : 'EndToStart', moveRng);\n\n\t\t\t\t\tif (start)\n\t\t\t\t\t\trng.collapse(true);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (bookmark.start) {\n\t\t\t\tif (bookmark.start.ctrl) {\n\t\t\t\t\trng = body.createControlRange();\n\t\t\t\t\trng.addElement(resolveIndexes(bookmark.start.indexes));\n\t\t\t\t\trng.select();\n\t\t\t\t} else {\n\t\t\t\t\trng = body.createTextRange();\n\t\t\t\t\tsetBookmarkEndPoint(true);\n\t\t\t\t\tsetBookmarkEndPoint();\n\t\t\t\t\trng.select();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.addRange = function(rng) {\n\t\t\tvar ieRng, ctrlRng, startContainer, startOffset, endContainer, endOffset, doc = selection.dom.doc, body = doc.body;\n\n\t\t\tfunction setEndPoint(start) {\n\t\t\t\tvar container, offset, marker, tmpRng, nodes;\n\n\t\t\t\tmarker = dom.create('a');\n\t\t\t\tcontainer = start ? startContainer : endContainer;\n\t\t\t\toffset = start ? startOffset : endOffset;\n\t\t\t\ttmpRng = ieRng.duplicate();\n\n\t\t\t\tif (container == doc || container == doc.documentElement) {\n\t\t\t\t\tcontainer = body;\n\t\t\t\t\toffset = 0;\n\t\t\t\t}\n\n\t\t\t\tif (container.nodeType == 3) {\n\t\t\t\t\tcontainer.parentNode.insertBefore(marker, container);\n\t\t\t\t\ttmpRng.moveToElementText(marker);\n\t\t\t\t\ttmpRng.moveStart('character', offset);\n\t\t\t\t\tdom.remove(marker);\n\t\t\t\t\tieRng.setEndPoint(start ? 'StartToStart' : 'EndToEnd', tmpRng);\n\t\t\t\t} else {\n\t\t\t\t\tnodes = container.childNodes;\n\n\t\t\t\t\tif (nodes.length) {\n\t\t\t\t\t\tif (offset >= nodes.length) {\n\t\t\t\t\t\t\tdom.insertAfter(marker, nodes[nodes.length - 1]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcontainer.insertBefore(marker, nodes[offset]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttmpRng.moveToElementText(marker);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Empty node selection for example <div>|</div>\n\t\t\t\t\t\tmarker = doc.createTextNode('\\uFEFF');\n\t\t\t\t\t\tcontainer.appendChild(marker);\n\t\t\t\t\t\ttmpRng.moveToElementText(marker.parentNode);\n\t\t\t\t\t\ttmpRng.collapse(TRUE);\n\t\t\t\t\t}\n\n\t\t\t\t\tieRng.setEndPoint(start ? 'StartToStart' : 'EndToEnd', tmpRng);\n\t\t\t\t\tdom.remove(marker);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Setup some shorter versions\n\t\t\tstartContainer = rng.startContainer;\n\t\t\tstartOffset = rng.startOffset;\n\t\t\tendContainer = rng.endContainer;\n\t\t\tendOffset = rng.endOffset;\n\t\t\tieRng = body.createTextRange();\n\n\t\t\t// If single element selection then try making a control selection out of it\n\t\t\tif (startContainer == endContainer && startContainer.nodeType == 1 && startOffset == endOffset - 1) {\n\t\t\t\tif (startOffset == endOffset - 1) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tctrlRng = body.createControlRange();\n\t\t\t\t\t\tctrlRng.addElement(startContainer.childNodes[startOffset]);\n\t\t\t\t\t\tctrlRng.select();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t// Ignore\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Set start/end point of selection\n\t\t\tsetEndPoint(true);\n\t\t\tsetEndPoint();\n\n\t\t\t// Select the new range and scroll it into view\n\t\t\tieRng.select();\n\t\t};\n\n\t\t// Expose range method\n\t\tthis.getRangeAt = getRange;\n\t};\n\n\t// Expose the selection object\n\ttinymce.dom.TridentSelection = Selection;\n})();\n","Magento_Tinymce3/tiny_mce/classes/dom/Element.js":"/**\n * Element.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n\t/**\n\t * Element class, this enables element blocking in IE. Element blocking is a method to block out select blockes that\n\t * gets visible though DIVs on IE 6 it uses a iframe for this blocking. This class also shortens the length of some DOM API calls\n\t * since it's bound to an element.\n\t *\n\t * @class tinymce.dom.Element\n\t * @example\n\t * // Creates an basic element for an existing element\n\t * var elm = new tinymce.dom.Element('someid');\n\t * \n\t * elm.setStyle('background-color', 'red');\n\t * elm.moveTo(10, 10);\n\t */\n\n\t/**\n\t * Constructs a new Element instance. Consult the Wiki for more details on this class.\n\t *\n\t * @constructor\n\t * @method Element\n\t * @param {String} id Element ID to bind/execute methods on.\n\t * @param {Object} settings Optional settings name/value collection.\n\t */\n\ttinymce.dom.Element = function(id, settings) {\n\t\tvar t = this, dom, el;\n\n\t\tt.settings = settings = settings || {};\n\t\tt.id = id;\n\t\tt.dom = dom = settings.dom || tinymce.DOM;\n\n\t\t// Only IE leaks DOM references, this is a lot faster\n\t\tif (!tinymce.isIE)\n\t\t\tel = dom.get(t.id);\n\n\t\ttinymce.each(\n\t\t\t\t('getPos,getRect,getParent,add,setStyle,getStyle,setStyles,' + \n\t\t\t\t'setAttrib,setAttribs,getAttrib,addClass,removeClass,' + \n\t\t\t\t'hasClass,getOuterHTML,setOuterHTML,remove,show,hide,' + \n\t\t\t\t'isHidden,setHTML,get').split(/,/)\n\t\t\t, function(k) {\n\t\t\t\tt[k] = function() {\n\t\t\t\t\tvar a = [id], i;\n\n\t\t\t\t\tfor (i = 0; i < arguments.length; i++)\n\t\t\t\t\t\ta.push(arguments[i]);\n\n\t\t\t\t\ta = dom[k].apply(dom, a);\n\t\t\t\t\tt.update(k);\n\n\t\t\t\t\treturn a;\n\t\t\t\t};\n\t\t});\n\n\t\ttinymce.extend(t, {\n\t\t\t/**\n\t\t\t * Adds a event handler to the element.\n\t\t\t *\n\t\t\t * @method on\n\t\t\t * @param {String} n Event name like for example \"click\".\n\t\t\t * @param {function} f Function to execute on the specified event.\n\t\t\t * @param {Object} s Optional scope to execute function on.\n\t\t\t * @return {function} Event handler function the same as the input function.\n\t\t\t */\n\t\t\ton : function(n, f, s) {\n\t\t\t\treturn tinymce.dom.Event.add(t.id, n, f, s);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns the absolute X, Y cordinate of the element.\n\t\t\t *\n\t\t\t * @method getXY\n\t\t\t * @return {Object} Objext with x, y cordinate fields.\n\t\t\t */\n\t\t\tgetXY : function() {\n\t\t\t\treturn {\n\t\t\t\t\tx : parseInt(t.getStyle('left')),\n\t\t\t\t\ty : parseInt(t.getStyle('top'))\n\t\t\t\t};\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns the size of the element by a object with w and h fields.\n\t\t\t *\n\t\t\t * @method getSize\n\t\t\t * @return {Object} Object with element size with a w and h field.\n\t\t\t */\n\t\t\tgetSize : function() {\n\t\t\t\tvar n = dom.get(t.id);\n\n\t\t\t\treturn {\n\t\t\t\t\tw : parseInt(t.getStyle('width') || n.clientWidth),\n\t\t\t\t\th : parseInt(t.getStyle('height') || n.clientHeight)\n\t\t\t\t};\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Moves the element to a specific absolute position.\n\t\t\t *\n\t\t\t * @method moveTo\n\t\t\t * @param {Number} x X cordinate of element position.\n\t\t\t * @param {Number} y Y cordinate of element position.\n\t\t\t */\n\t\t\tmoveTo : function(x, y) {\n\t\t\t\tt.setStyles({left : x, top : y});\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Moves the element relative to the current position.\n\t\t\t *\n\t\t\t * @method moveBy\n\t\t\t * @param {Number} x Relative X cordinate of element position.\n\t\t\t * @param {Number} y Relative Y cordinate of element position.\n\t\t\t */\n\t\t\tmoveBy : function(x, y) {\n\t\t\t\tvar p = t.getXY();\n\n\t\t\t\tt.moveTo(p.x + x, p.y + y);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Resizes the element to a specific size.\n\t\t\t *\n\t\t\t * @method resizeTo\n\t\t\t * @param {Number} w New width of element.\n\t\t\t * @param {Numner} h New height of element.\n\t\t\t */\n\t\t\tresizeTo : function(w, h) {\n\t\t\t\tt.setStyles({width : w, height : h});\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Resizes the element relative to the current sizeto a specific size.\n\t\t\t *\n\t\t\t * @method resizeBy\n\t\t\t * @param {Number} w Relative width of element.\n\t\t\t * @param {Numner} h Relative height of element.\n\t\t\t */\n\t\t\tresizeBy : function(w, h) {\n\t\t\t\tvar s = t.getSize();\n\n\t\t\t\tt.resizeTo(s.w + w, s.h + h);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Updates the element blocker in IE6 based on the style information of the element.\n\t\t\t *\n\t\t\t * @method update\n\t\t\t * @param {String} k Optional function key. Used internally.\n\t\t\t */\n\t\t\tupdate : function(k) {\n\t\t\t\tvar b;\n\n\t\t\t\tif (tinymce.isIE6 && settings.blocker) {\n\t\t\t\t\tk = k || '';\n\n\t\t\t\t\t// Ignore getters\n\t\t\t\t\tif (k.indexOf('get') === 0 || k.indexOf('has') === 0 || k.indexOf('is') === 0)\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t// Remove blocker on remove\n\t\t\t\t\tif (k == 'remove') {\n\t\t\t\t\t\tdom.remove(t.blocker);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!t.blocker) {\n\t\t\t\t\t\tt.blocker = dom.uniqueId();\n\t\t\t\t\t\tb = dom.add(settings.container || dom.getRoot(), 'iframe', {id : t.blocker, style : 'position:absolute;', frameBorder : 0, src : 'javascript:\"\"'});\n\t\t\t\t\t\tdom.setStyle(b, 'opacity', 0);\n\t\t\t\t\t} else\n\t\t\t\t\t\tb = dom.get(t.blocker);\n\n\t\t\t\t\tdom.setStyles(b, {\n\t\t\t\t\t\tleft : t.getStyle('left', 1),\n\t\t\t\t\t\ttop : t.getStyle('top', 1),\n\t\t\t\t\t\twidth : t.getStyle('width', 1),\n\t\t\t\t\t\theight : t.getStyle('height', 1),\n\t\t\t\t\t\tdisplay : t.getStyle('display', 1),\n\t\t\t\t\t\tzIndex : parseInt(t.getStyle('zIndex', 1) || 0) - 1\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n})(tinymce);\n","Magento_Tinymce3/tiny_mce/classes/dom/Range.js":"/**\n * Range.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(ns) {\n\t// Range constructor\n\tfunction Range(dom) {\n\t\tvar t = this,\n\t\t\tdoc = dom.doc,\n\t\t\tEXTRACT = 0,\n\t\t\tCLONE = 1,\n\t\t\tDELETE = 2,\n\t\t\tTRUE = true,\n\t\t\tFALSE = false,\n\t\t\tSTART_OFFSET = 'startOffset',\n\t\t\tSTART_CONTAINER = 'startContainer',\n\t\t\tEND_CONTAINER = 'endContainer',\n\t\t\tEND_OFFSET = 'endOffset',\n\t\t\textend = tinymce.extend,\n\t\t\tnodeIndex = dom.nodeIndex;\n\n\t\textend(t, {\n\t\t\t// Inital states\n\t\t\tstartContainer : doc,\n\t\t\tstartOffset : 0,\n\t\t\tendContainer : doc,\n\t\t\tendOffset : 0,\n\t\t\tcollapsed : TRUE,\n\t\t\tcommonAncestorContainer : doc,\n\n\t\t\t// Range constants\n\t\t\tSTART_TO_START : 0,\n\t\t\tSTART_TO_END : 1,\n\t\t\tEND_TO_END : 2,\n\t\t\tEND_TO_START : 3,\n\n\t\t\t// Public methods\n\t\t\tsetStart : setStart,\n\t\t\tsetEnd : setEnd,\n\t\t\tsetStartBefore : setStartBefore,\n\t\t\tsetStartAfter : setStartAfter,\n\t\t\tsetEndBefore : setEndBefore,\n\t\t\tsetEndAfter : setEndAfter,\n\t\t\tcollapse : collapse,\n\t\t\tselectNode : selectNode,\n\t\t\tselectNodeContents : selectNodeContents,\n\t\t\tcompareBoundaryPoints : compareBoundaryPoints,\n\t\t\tdeleteContents : deleteContents,\n\t\t\textractContents : extractContents,\n\t\t\tcloneContents : cloneContents,\n\t\t\tinsertNode : insertNode,\n\t\t\tsurroundContents : surroundContents,\n\t\t\tcloneRange : cloneRange\n\t\t});\n\n\t\tfunction setStart(n, o) {\n\t\t\t_setEndPoint(TRUE, n, o);\n\t\t};\n\n\t\tfunction setEnd(n, o) {\n\t\t\t_setEndPoint(FALSE, n, o);\n\t\t};\n\n\t\tfunction setStartBefore(n) {\n\t\t\tsetStart(n.parentNode, nodeIndex(n));\n\t\t};\n\n\t\tfunction setStartAfter(n) {\n\t\t\tsetStart(n.parentNode, nodeIndex(n) + 1);\n\t\t};\n\n\t\tfunction setEndBefore(n) {\n\t\t\tsetEnd(n.parentNode, nodeIndex(n));\n\t\t};\n\n\t\tfunction setEndAfter(n) {\n\t\t\tsetEnd(n.parentNode, nodeIndex(n) + 1);\n\t\t};\n\n\t\tfunction collapse(ts) {\n\t\t\tif (ts) {\n\t\t\t\tt[END_CONTAINER] = t[START_CONTAINER];\n\t\t\t\tt[END_OFFSET] = t[START_OFFSET];\n\t\t\t} else {\n\t\t\t\tt[START_CONTAINER] = t[END_CONTAINER];\n\t\t\t\tt[START_OFFSET] = t[END_OFFSET];\n\t\t\t}\n\n\t\t\tt.collapsed = TRUE;\n\t\t};\n\n\t\tfunction selectNode(n) {\n\t\t\tsetStartBefore(n);\n\t\t\tsetEndAfter(n);\n\t\t};\n\n\t\tfunction selectNodeContents(n) {\n\t\t\tsetStart(n, 0);\n\t\t\tsetEnd(n, n.nodeType === 1 ? n.childNodes.length : n.nodeValue.length);\n\t\t};\n\n\t\tfunction compareBoundaryPoints(h, r) {\n\t\t\tvar sc = t[START_CONTAINER], so = t[START_OFFSET], ec = t[END_CONTAINER], eo = t[END_OFFSET],\n\t\t\trsc = r.startContainer, rso = r.startOffset, rec = r.endContainer, reo = r.endOffset;\n\n\t\t\t// Check START_TO_START\n\t\t\tif (h === 0)\n\t\t\t\treturn _compareBoundaryPoints(sc, so, rsc, rso);\n\t\n\t\t\t// Check START_TO_END\n\t\t\tif (h === 1)\n\t\t\t\treturn _compareBoundaryPoints(ec, eo, rsc, rso);\n\t\n\t\t\t// Check END_TO_END\n\t\t\tif (h === 2)\n\t\t\t\treturn _compareBoundaryPoints(ec, eo, rec, reo);\n\t\n\t\t\t// Check END_TO_START\n\t\t\tif (h === 3) \n\t\t\t\treturn _compareBoundaryPoints(sc, so, rec, reo);\n\t\t};\n\n\t\tfunction deleteContents() {\n\t\t\t_traverse(DELETE);\n\t\t};\n\n\t\tfunction extractContents() {\n\t\t\treturn _traverse(EXTRACT);\n\t\t};\n\n\t\tfunction cloneContents() {\n\t\t\treturn _traverse(CLONE);\n\t\t};\n\n\t\tfunction insertNode(n) {\n\t\t\tvar startContainer = this[START_CONTAINER],\n\t\t\t\tstartOffset = this[START_OFFSET], nn, o;\n\n\t\t\t// Node is TEXT_NODE or CDATA\n\t\t\tif ((startContainer.nodeType === 3 || startContainer.nodeType === 4) && startContainer.nodeValue) {\n\t\t\t\tif (!startOffset) {\n\t\t\t\t\t// At the start of text\n\t\t\t\t\tstartContainer.parentNode.insertBefore(n, startContainer);\n\t\t\t\t} else if (startOffset >= startContainer.nodeValue.length) {\n\t\t\t\t\t// At the end of text\n\t\t\t\t\tdom.insertAfter(n, startContainer);\n\t\t\t\t} else {\n\t\t\t\t\t// Middle, need to split\n\t\t\t\t\tnn = startContainer.splitText(startOffset);\n\t\t\t\t\tstartContainer.parentNode.insertBefore(n, nn);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Insert element node\n\t\t\t\tif (startContainer.childNodes.length > 0)\n\t\t\t\t\to = startContainer.childNodes[startOffset];\n\n\t\t\t\tif (o)\n\t\t\t\t\tstartContainer.insertBefore(n, o);\n\t\t\t\telse\n\t\t\t\t\tstartContainer.appendChild(n);\n\t\t\t}\n\t\t};\n\n\t\tfunction surroundContents(n) {\n\t\t\tvar f = t.extractContents();\n\n\t\t\tt.insertNode(n);\n\t\t\tn.appendChild(f);\n\t\t\tt.selectNode(n);\n\t\t};\n\n\t\tfunction cloneRange() {\n\t\t\treturn extend(new Range(dom), {\n\t\t\t\tstartContainer : t[START_CONTAINER],\n\t\t\t\tstartOffset : t[START_OFFSET],\n\t\t\t\tendContainer : t[END_CONTAINER],\n\t\t\t\tendOffset : t[END_OFFSET],\n\t\t\t\tcollapsed : t.collapsed,\n\t\t\t\tcommonAncestorContainer : t.commonAncestorContainer\n\t\t\t});\n\t\t};\n\n\t\t// Private methods\n\n\t\tfunction _getSelectedNode(container, offset) {\n\t\t\tvar child;\n\n\t\t\tif (container.nodeType == 3 /* TEXT_NODE */)\n\t\t\t\treturn container;\n\n\t\t\tif (offset < 0)\n\t\t\t\treturn container;\n\n\t\t\tchild = container.firstChild;\n\t\t\twhile (child && offset > 0) {\n\t\t\t\t--offset;\n\t\t\t\tchild = child.nextSibling;\n\t\t\t}\n\n\t\t\tif (child)\n\t\t\t\treturn child;\n\n\t\t\treturn container;\n\t\t};\n\n\t\tfunction _isCollapsed() {\n\t\t\treturn (t[START_CONTAINER] == t[END_CONTAINER] && t[START_OFFSET] == t[END_OFFSET]);\n\t\t};\n\n\t\tfunction _compareBoundaryPoints(containerA, offsetA, containerB, offsetB) {\n\t\t\tvar c, offsetC, n, cmnRoot, childA, childB;\n\t\t\t\n\t\t\t// In the first case the boundary-points have the same container. A is before B\n\t\t\t// if its offset is less than the offset of B, A is equal to B if its offset is\n\t\t\t// equal to the offset of B, and A is after B if its offset is greater than the\n\t\t\t// offset of B.\n\t\t\tif (containerA == containerB) {\n\t\t\t\tif (offsetA == offsetB)\n\t\t\t\t\treturn 0; // equal\n\n\t\t\t\tif (offsetA < offsetB)\n\t\t\t\t\treturn -1; // before\n\n\t\t\t\treturn 1; // after\n\t\t\t}\n\n\t\t\t// In the second case a child node C of the container of A is an ancestor\n\t\t\t// container of B. In this case, A is before B if the offset of A is less than or\n\t\t\t// equal to the index of the child node C and A is after B otherwise.\n\t\t\tc = containerB;\n\t\t\twhile (c && c.parentNode != containerA)\n\t\t\t\tc = c.parentNode;\n\n\t\t\tif (c) {\n\t\t\t\toffsetC = 0;\n\t\t\t\tn = containerA.firstChild;\n\n\t\t\t\twhile (n != c && offsetC < offsetA) {\n\t\t\t\t\toffsetC++;\n\t\t\t\t\tn = n.nextSibling;\n\t\t\t\t}\n\n\t\t\t\tif (offsetA <= offsetC)\n\t\t\t\t\treturn -1; // before\n\n\t\t\t\treturn 1; // after\n\t\t\t}\n\n\t\t\t// In the third case a child node C of the container of B is an ancestor container\n\t\t\t// of A. In this case, A is before B if the index of the child node C is less than\n\t\t\t// the offset of B and A is after B otherwise.\n\t\t\tc = containerA;\n\t\t\twhile (c && c.parentNode != containerB) {\n\t\t\t\tc = c.parentNode;\n\t\t\t}\n\n\t\t\tif (c) {\n\t\t\t\toffsetC = 0;\n\t\t\t\tn = containerB.firstChild;\n\n\t\t\t\twhile (n != c && offsetC < offsetB) {\n\t\t\t\t\toffsetC++;\n\t\t\t\t\tn = n.nextSibling;\n\t\t\t\t}\n\n\t\t\t\tif (offsetC < offsetB)\n\t\t\t\t\treturn -1; // before\n\n\t\t\t\treturn 1; // after\n\t\t\t}\n\n\t\t\t// In the fourth case, none of three other cases hold: the containers of A and B\n\t\t\t// are siblings or descendants of sibling nodes. In this case, A is before B if\n\t\t\t// the container of A is before the container of B in a pre-order traversal of the\n\t\t\t// Ranges' context tree and A is after B otherwise.\n\t\t\tcmnRoot = dom.findCommonAncestor(containerA, containerB);\n\t\t\tchildA = containerA;\n\n\t\t\twhile (childA && childA.parentNode != cmnRoot)\n\t\t\t\tchildA = childA.parentNode;\n\n\t\t\tif (!childA)\n\t\t\t\tchildA = cmnRoot;\n\n\t\t\tchildB = containerB;\n\t\t\twhile (childB && childB.parentNode != cmnRoot)\n\t\t\t\tchildB = childB.parentNode;\n\n\t\t\tif (!childB)\n\t\t\t\tchildB = cmnRoot;\n\n\t\t\tif (childA == childB)\n\t\t\t\treturn 0; // equal\n\n\t\t\tn = cmnRoot.firstChild;\n\t\t\twhile (n) {\n\t\t\t\tif (n == childA)\n\t\t\t\t\treturn -1; // before\n\n\t\t\t\tif (n == childB)\n\t\t\t\t\treturn 1; // after\n\n\t\t\t\tn = n.nextSibling;\n\t\t\t}\n\t\t};\n\n\t\tfunction _setEndPoint(st, n, o) {\n\t\t\tvar ec, sc;\n\n\t\t\tif (st) {\n\t\t\t\tt[START_CONTAINER] = n;\n\t\t\t\tt[START_OFFSET] = o;\n\t\t\t} else {\n\t\t\t\tt[END_CONTAINER] = n;\n\t\t\t\tt[END_OFFSET] = o;\n\t\t\t}\n\n\t\t\t// If one boundary-point of a Range is set to have a root container\n\t\t\t// other than the current one for the Range, the Range is collapsed to\n\t\t\t// the new position. This enforces the restriction that both boundary-\n\t\t\t// points of a Range must have the same root container.\n\t\t\tec = t[END_CONTAINER];\n\t\t\twhile (ec.parentNode)\n\t\t\t\tec = ec.parentNode;\n\n\t\t\tsc = t[START_CONTAINER];\n\t\t\twhile (sc.parentNode)\n\t\t\t\tsc = sc.parentNode;\n\n\t\t\tif (sc == ec) {\n\t\t\t\t// The start position of a Range is guaranteed to never be after the\n\t\t\t\t// end position. To enforce this restriction, if the start is set to\n\t\t\t\t// be at a position after the end, the Range is collapsed to that\n\t\t\t\t// position.\n\t\t\t\tif (_compareBoundaryPoints(t[START_CONTAINER], t[START_OFFSET], t[END_CONTAINER], t[END_OFFSET]) > 0)\n\t\t\t\t\tt.collapse(st);\n\t\t\t} else\n\t\t\t\tt.collapse(st);\n\n\t\t\tt.collapsed = _isCollapsed();\n\t\t\tt.commonAncestorContainer = dom.findCommonAncestor(t[START_CONTAINER], t[END_CONTAINER]);\n\t\t};\n\n\t\tfunction _traverse(how) {\n\t\t\tvar c, endContainerDepth = 0, startContainerDepth = 0, p, depthDiff, startNode, endNode, sp, ep;\n\n\t\t\tif (t[START_CONTAINER] == t[END_CONTAINER])\n\t\t\t\treturn _traverseSameContainer(how);\n\n\t\t\tfor (c = t[END_CONTAINER], p = c.parentNode; p; c = p, p = p.parentNode) {\n\t\t\t\tif (p == t[START_CONTAINER])\n\t\t\t\t\treturn _traverseCommonStartContainer(c, how);\n\n\t\t\t\t++endContainerDepth;\n\t\t\t}\n\n\t\t\tfor (c = t[START_CONTAINER], p = c.parentNode; p; c = p, p = p.parentNode) {\n\t\t\t\tif (p == t[END_CONTAINER])\n\t\t\t\t\treturn _traverseCommonEndContainer(c, how);\n\n\t\t\t\t++startContainerDepth;\n\t\t\t}\n\n\t\t\tdepthDiff = startContainerDepth - endContainerDepth;\n\n\t\t\tstartNode = t[START_CONTAINER];\n\t\t\twhile (depthDiff > 0) {\n\t\t\t\tstartNode = startNode.parentNode;\n\t\t\t\tdepthDiff--;\n\t\t\t}\n\n\t\t\tendNode = t[END_CONTAINER];\n\t\t\twhile (depthDiff < 0) {\n\t\t\t\tendNode = endNode.parentNode;\n\t\t\t\tdepthDiff++;\n\t\t\t}\n\n\t\t\t// ascend the ancestor hierarchy until we have a common parent.\n\t\t\tfor (sp = startNode.parentNode, ep = endNode.parentNode; sp != ep; sp = sp.parentNode, ep = ep.parentNode) {\n\t\t\t\tstartNode = sp;\n\t\t\t\tendNode = ep;\n\t\t\t}\n\n\t\t\treturn _traverseCommonAncestors(startNode, endNode, how);\n\t\t};\n\n\t\t function _traverseSameContainer(how) {\n\t\t\tvar frag, s, sub, n, cnt, sibling, xferNode;\n\n\t\t\tif (how != DELETE)\n\t\t\t\tfrag = doc.createDocumentFragment();\n\n\t\t\t// If selection is empty, just return the fragment\n\t\t\tif (t[START_OFFSET] == t[END_OFFSET])\n\t\t\t\treturn frag;\n\n\t\t\t// Text node needs special case handling\n\t\t\tif (t[START_CONTAINER].nodeType == 3 /* TEXT_NODE */) {\n\t\t\t\t// get the substring\n\t\t\t\ts = t[START_CONTAINER].nodeValue;\n\t\t\t\tsub = s.substring(t[START_OFFSET], t[END_OFFSET]);\n\n\t\t\t\t// set the original text node to its new value\n\t\t\t\tif (how != CLONE) {\n\t\t\t\t\tt[START_CONTAINER].deleteData(t[START_OFFSET], t[END_OFFSET] - t[START_OFFSET]);\n\n\t\t\t\t\t// Nothing is partially selected, so collapse to start point\n\t\t\t\t\tt.collapse(TRUE);\n\t\t\t\t}\n\n\t\t\t\tif (how == DELETE)\n\t\t\t\t\treturn;\n\n\t\t\t\tfrag.appendChild(doc.createTextNode(sub));\n\t\t\t\treturn frag;\n\t\t\t}\n\n\t\t\t// Copy nodes between the start/end offsets.\n\t\t\tn = _getSelectedNode(t[START_CONTAINER], t[START_OFFSET]);\n\t\t\tcnt = t[END_OFFSET] - t[START_OFFSET];\n\n\t\t\twhile (cnt > 0) {\n\t\t\t\tsibling = n.nextSibling;\n\t\t\t\txferNode = _traverseFullySelected(n, how);\n\n\t\t\t\tif (frag)\n\t\t\t\t\tfrag.appendChild( xferNode );\n\n\t\t\t\t--cnt;\n\t\t\t\tn = sibling;\n\t\t\t}\n\n\t\t\t// Nothing is partially selected, so collapse to start point\n\t\t\tif (how != CLONE)\n\t\t\t\tt.collapse(TRUE);\n\n\t\t\treturn frag;\n\t\t};\n\n\t\tfunction _traverseCommonStartContainer(endAncestor, how) {\n\t\t\tvar frag, n, endIdx, cnt, sibling, xferNode;\n\n\t\t\tif (how != DELETE)\n\t\t\t\tfrag = doc.createDocumentFragment();\n\n\t\t\tn = _traverseRightBoundary(endAncestor, how);\n\n\t\t\tif (frag)\n\t\t\t\tfrag.appendChild(n);\n\n\t\t\tendIdx = nodeIndex(endAncestor);\n\t\t\tcnt = endIdx - t[START_OFFSET];\n\n\t\t\tif (cnt <= 0) {\n\t\t\t\t// Collapse to just before the endAncestor, which\n\t\t\t\t// is partially selected.\n\t\t\t\tif (how != CLONE) {\n\t\t\t\t\tt.setEndBefore(endAncestor);\n\t\t\t\t\tt.collapse(FALSE);\n\t\t\t\t}\n\n\t\t\t\treturn frag;\n\t\t\t}\n\n\t\t\tn = endAncestor.previousSibling;\n\t\t\twhile (cnt > 0) {\n\t\t\t\tsibling = n.previousSibling;\n\t\t\t\txferNode = _traverseFullySelected(n, how);\n\n\t\t\t\tif (frag)\n\t\t\t\t\tfrag.insertBefore(xferNode, frag.firstChild);\n\n\t\t\t\t--cnt;\n\t\t\t\tn = sibling;\n\t\t\t}\n\n\t\t\t// Collapse to just before the endAncestor, which\n\t\t\t// is partially selected.\n\t\t\tif (how != CLONE) {\n\t\t\t\tt.setEndBefore(endAncestor);\n\t\t\t\tt.collapse(FALSE);\n\t\t\t}\n\n\t\t\treturn frag;\n\t\t};\n\n\t\tfunction _traverseCommonEndContainer(startAncestor, how) {\n\t\t\tvar frag, startIdx, n, cnt, sibling, xferNode;\n\n\t\t\tif (how != DELETE)\n\t\t\t\tfrag = doc.createDocumentFragment();\n\n\t\t\tn = _traverseLeftBoundary(startAncestor, how);\n\t\t\tif (frag)\n\t\t\t\tfrag.appendChild(n);\n\n\t\t\tstartIdx = nodeIndex(startAncestor);\n\t\t\t++startIdx; // Because we already traversed it\n\n\t\t\tcnt = t[END_OFFSET] - startIdx;\n\t\t\tn = startAncestor.nextSibling;\n\t\t\twhile (cnt > 0) {\n\t\t\t\tsibling = n.nextSibling;\n\t\t\t\txferNode = _traverseFullySelected(n, how);\n\n\t\t\t\tif (frag)\n\t\t\t\t\tfrag.appendChild(xferNode);\n\n\t\t\t\t--cnt;\n\t\t\t\tn = sibling;\n\t\t\t}\n\n\t\t\tif (how != CLONE) {\n\t\t\t\tt.setStartAfter(startAncestor);\n\t\t\t\tt.collapse(TRUE);\n\t\t\t}\n\n\t\t\treturn frag;\n\t\t};\n\n\t\tfunction _traverseCommonAncestors(startAncestor, endAncestor, how) {\n\t\t\tvar n, frag, commonParent, startOffset, endOffset, cnt, sibling, nextSibling;\n\n\t\t\tif (how != DELETE)\n\t\t\t\tfrag = doc.createDocumentFragment();\n\n\t\t\tn = _traverseLeftBoundary(startAncestor, how);\n\t\t\tif (frag)\n\t\t\t\tfrag.appendChild(n);\n\n\t\t\tcommonParent = startAncestor.parentNode;\n\t\t\tstartOffset = nodeIndex(startAncestor);\n\t\t\tendOffset = nodeIndex(endAncestor);\n\t\t\t++startOffset;\n\n\t\t\tcnt = endOffset - startOffset;\n\t\t\tsibling = startAncestor.nextSibling;\n\n\t\t\twhile (cnt > 0) {\n\t\t\t\tnextSibling = sibling.nextSibling;\n\t\t\t\tn = _traverseFullySelected(sibling, how);\n\n\t\t\t\tif (frag)\n\t\t\t\t\tfrag.appendChild(n);\n\n\t\t\t\tsibling = nextSibling;\n\t\t\t\t--cnt;\n\t\t\t}\n\n\t\t\tn = _traverseRightBoundary(endAncestor, how);\n\n\t\t\tif (frag)\n\t\t\t\tfrag.appendChild(n);\n\n\t\t\tif (how != CLONE) {\n\t\t\t\tt.setStartAfter(startAncestor);\n\t\t\t\tt.collapse(TRUE);\n\t\t\t}\n\n\t\t\treturn frag;\n\t\t};\n\n\t\tfunction _traverseRightBoundary(root, how) {\n\t\t\tvar next = _getSelectedNode(t[END_CONTAINER], t[END_OFFSET] - 1), parent, clonedParent, prevSibling, clonedChild, clonedGrandParent, isFullySelected = next != t[END_CONTAINER];\n\n\t\t\tif (next == root)\n\t\t\t\treturn _traverseNode(next, isFullySelected, FALSE, how);\n\n\t\t\tparent = next.parentNode;\n\t\t\tclonedParent = _traverseNode(parent, FALSE, FALSE, how);\n\n\t\t\twhile (parent) {\n\t\t\t\twhile (next) {\n\t\t\t\t\tprevSibling = next.previousSibling;\n\t\t\t\t\tclonedChild = _traverseNode(next, isFullySelected, FALSE, how);\n\n\t\t\t\t\tif (how != DELETE)\n\t\t\t\t\t\tclonedParent.insertBefore(clonedChild, clonedParent.firstChild);\n\n\t\t\t\t\tisFullySelected = TRUE;\n\t\t\t\t\tnext = prevSibling;\n\t\t\t\t}\n\n\t\t\t\tif (parent == root)\n\t\t\t\t\treturn clonedParent;\n\n\t\t\t\tnext = parent.previousSibling;\n\t\t\t\tparent = parent.parentNode;\n\n\t\t\t\tclonedGrandParent = _traverseNode(parent, FALSE, FALSE, how);\n\n\t\t\t\tif (how != DELETE)\n\t\t\t\t\tclonedGrandParent.appendChild(clonedParent);\n\n\t\t\t\tclonedParent = clonedGrandParent;\n\t\t\t}\n\t\t};\n\n\t\tfunction _traverseLeftBoundary(root, how) {\n\t\t\tvar next = _getSelectedNode(t[START_CONTAINER], t[START_OFFSET]), isFullySelected = next != t[START_CONTAINER], parent, clonedParent, nextSibling, clonedChild, clonedGrandParent;\n\n\t\t\tif (next == root)\n\t\t\t\treturn _traverseNode(next, isFullySelected, TRUE, how);\n\n\t\t\tparent = next.parentNode;\n\t\t\tclonedParent = _traverseNode(parent, FALSE, TRUE, how);\n\n\t\t\twhile (parent) {\n\t\t\t\twhile (next) {\n\t\t\t\t\tnextSibling = next.nextSibling;\n\t\t\t\t\tclonedChild = _traverseNode(next, isFullySelected, TRUE, how);\n\n\t\t\t\t\tif (how != DELETE)\n\t\t\t\t\t\tclonedParent.appendChild(clonedChild);\n\n\t\t\t\t\tisFullySelected = TRUE;\n\t\t\t\t\tnext = nextSibling;\n\t\t\t\t}\n\n\t\t\t\tif (parent == root)\n\t\t\t\t\treturn clonedParent;\n\n\t\t\t\tnext = parent.nextSibling;\n\t\t\t\tparent = parent.parentNode;\n\n\t\t\t\tclonedGrandParent = _traverseNode(parent, FALSE, TRUE, how);\n\n\t\t\t\tif (how != DELETE)\n\t\t\t\t\tclonedGrandParent.appendChild(clonedParent);\n\n\t\t\t\tclonedParent = clonedGrandParent;\n\t\t\t}\n\t\t};\n\n\t\tfunction _traverseNode(n, isFullySelected, isLeft, how) {\n\t\t\tvar txtValue, newNodeValue, oldNodeValue, offset, newNode;\n\n\t\t\tif (isFullySelected)\n\t\t\t\treturn _traverseFullySelected(n, how);\n\n\t\t\tif (n.nodeType == 3 /* TEXT_NODE */) {\n\t\t\t\ttxtValue = n.nodeValue;\n\n\t\t\t\tif (isLeft) {\n\t\t\t\t\toffset = t[START_OFFSET];\n\t\t\t\t\tnewNodeValue = txtValue.substring(offset);\n\t\t\t\t\toldNodeValue = txtValue.substring(0, offset);\n\t\t\t\t} else {\n\t\t\t\t\toffset = t[END_OFFSET];\n\t\t\t\t\tnewNodeValue = txtValue.substring(0, offset);\n\t\t\t\t\toldNodeValue = txtValue.substring(offset);\n\t\t\t\t}\n\n\t\t\t\tif (how != CLONE)\n\t\t\t\t\tn.nodeValue = oldNodeValue;\n\n\t\t\t\tif (how == DELETE)\n\t\t\t\t\treturn;\n\n\t\t\t\tnewNode = n.cloneNode(FALSE);\n\t\t\t\tnewNode.nodeValue = newNodeValue;\n\n\t\t\t\treturn newNode;\n\t\t\t}\n\n\t\t\tif (how == DELETE)\n\t\t\t\treturn;\n\n\t\t\treturn n.cloneNode(FALSE);\n\t\t};\n\n\t\tfunction _traverseFullySelected(n, how) {\n\t\t\tif (how != DELETE)\n\t\t\t\treturn how == CLONE ? n.cloneNode(TRUE) : n;\n\n\t\t\tn.parentNode.removeChild(n);\n\t\t};\n\t};\n\n\tns.Range = Range;\n})(tinymce.dom);\n","Magento_Tinymce3/tiny_mce/classes/dom/EventUtils.js":"/**\n * EventUtils.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n\t// Shorten names\n\tvar each = tinymce.each, DOM = tinymce.DOM, isIE = tinymce.isIE, isWebKit = tinymce.isWebKit, Event;\n\n\t/**\n\t * This class handles DOM events in a cross platform fasion it also keeps track of element\n\t * and handler references to be able to clean elements to reduce IE memory leaks.\n\t *\n\t * @class tinymce.dom.EventUtils\n\t */\n\ttinymce.create('tinymce.dom.EventUtils', {\n\t\t/**\n\t\t * Constructs a new EventUtils instance.\n\t\t *\n\t\t * @constructor\n\t\t * @method EventUtils\n\t\t */\n\t\tEventUtils : function() {\n\t\t\tthis.inits = [];\n\t\t\tthis.events = [];\n\t\t},\n\n\t\t/**\n\t\t * Adds an event handler to the specified object.\n\t\t *\n\t\t * @method add\n\t\t * @param {Element/Document/Window/Array/String} o Object or element id string to add event handler to or an array of elements/ids/documents.\n\t\t * @param {String/Array} n Name of event handler to add for example: click.\n\t\t * @param {function} f Function to execute when the event occurs.\n\t\t * @param {Object} s Optional scope to execute the function in.\n\t\t * @return {function} Function callback handler the same as the one passed in.\n\t\t * @example\n\t\t * // Adds a click handler to the current document\n\t\t * tinymce.dom.Event.add(document, 'click', function(e) {\n\t\t *    console.debug(e.target);\n\t\t * });\n\t\t */\n\t\tadd : function(o, n, f, s) {\n\t\t\tvar cb, t = this, el = t.events, r;\n\n\t\t\tif (n instanceof Array) {\n\t\t\t\tr = [];\n\n\t\t\t\teach(n, function(n) {\n\t\t\t\t\tr.push(t.add(o, n, f, s));\n\t\t\t\t});\n\n\t\t\t\treturn r;\n\t\t\t}\n\n\t\t\t// Handle array\n\t\t\tif (o && o.hasOwnProperty && o instanceof Array) {\n\t\t\t\tr = [];\n\n\t\t\t\teach(o, function(o) {\n\t\t\t\t\to = DOM.get(o);\n\t\t\t\t\tr.push(t.add(o, n, f, s));\n\t\t\t\t});\n\n\t\t\t\treturn r;\n\t\t\t}\n\n\t\t\to = DOM.get(o);\n\n\t\t\tif (!o)\n\t\t\t\treturn;\n\n\t\t\t// Setup event callback\n\t\t\tcb = function(e) {\n\t\t\t\t// Is all events disabled\n\t\t\t\tif (t.disabled)\n\t\t\t\t\treturn;\n\n\t\t\t\te = e || window.event;\n\n\t\t\t\t// Patch in target, preventDefault and stopPropagation in IE it's W3C valid\n\t\t\t\tif (e && isIE) {\n\t\t\t\t\tif (!e.target)\n\t\t\t\t\t\te.target = e.srcElement;\n\n\t\t\t\t\t// Patch in preventDefault, stopPropagation methods for W3C compatibility\n\t\t\t\t\ttinymce.extend(e, t._stoppers);\n\t\t\t\t}\n\n\t\t\t\tif (!s)\n\t\t\t\t\treturn f(e);\n\n\t\t\t\treturn f.call(s, e);\n\t\t\t};\n\n\t\t\tif (n == 'unload') {\n\t\t\t\ttinymce.unloads.unshift({func : cb});\n\t\t\t\treturn cb;\n\t\t\t}\n\n\t\t\tif (n == 'init') {\n\t\t\t\tif (t.domLoaded)\n\t\t\t\t\tcb();\n\t\t\t\telse\n\t\t\t\t\tt.inits.push(cb);\n\n\t\t\t\treturn cb;\n\t\t\t}\n\n\t\t\t// Store away listener reference\n\t\t\tel.push({\n\t\t\t\tobj : o,\n\t\t\t\tname : n,\n\t\t\t\tfunc : f,\n\t\t\t\tcfunc : cb,\n\t\t\t\tscope : s\n\t\t\t});\n\n\t\t\tt._add(o, n, cb);\n\n\t\t\treturn f;\n\t\t},\n\n\t\t/**\n\t\t * Removes the specified event handler by name and function from a element or collection of elements.\n\t\t *\n\t\t * @method remove\n\t\t * @param {String/Element/Array} o Element ID string or HTML element or an array of elements or ids to remove handler from.\n\t\t * @param {String} n Event handler name like for example: \"click\"\n\t\t * @param {function} f Function to remove.\n\t\t * @return {bool/Array} Bool state if true if the handler was removed or an array with states if multiple elements where passed in.\n\t\t * @example\n\t\t * // Adds a click handler to the current document\n\t\t * var func = tinymce.dom.Event.add(document, 'click', function(e) {\n\t\t *    console.debug(e.target);\n\t\t * });\n\t\t * \n\t\t * // Removes the click handler from the document\n\t\t * tinymce.dom.Event.remove(document, 'click', func);\n\t\t */\n\t\tremove : function(o, n, f) {\n\t\t\tvar t = this, a = t.events, s = false, r;\n\n\t\t\t// Handle array\n\t\t\tif (o && o.hasOwnProperty && o instanceof Array) {\n\t\t\t\tr = [];\n\n\t\t\t\teach(o, function(o) {\n\t\t\t\t\to = DOM.get(o);\n\t\t\t\t\tr.push(t.remove(o, n, f));\n\t\t\t\t});\n\n\t\t\t\treturn r;\n\t\t\t}\n\n\t\t\to = DOM.get(o);\n\n\t\t\teach(a, function(e, i) {\n\t\t\t\tif (e.obj == o && e.name == n && (!f || (e.func == f || e.cfunc == f))) {\n\t\t\t\t\ta.splice(i, 1);\n\t\t\t\t\tt._remove(o, n, e.cfunc);\n\t\t\t\t\ts = true;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn s;\n\t\t},\n\n\t\t/**\n\t\t * Clears all events of a specific object.\n\t\t *\n\t\t * @method clear\n\t\t * @param {Object} o DOM element or object to remove all events from.\n\t\t * @example\n\t\t * // Cancels all mousedown events in the active editor\n\t\t * tinyMCE.activeEditor.onMouseDown.add(function(ed, e) {\n\t\t *    return tinymce.dom.Event.cancel(e);\n\t\t * });\n\t\t */\n\t\tclear : function(o) {\n\t\t\tvar t = this, a = t.events, i, e;\n\n\t\t\tif (o) {\n\t\t\t\to = DOM.get(o);\n\n\t\t\t\tfor (i = a.length - 1; i >= 0; i--) {\n\t\t\t\t\te = a[i];\n\n\t\t\t\t\tif (e.obj === o) {\n\t\t\t\t\t\tt._remove(e.obj, e.name, e.cfunc);\n\t\t\t\t\t\te.obj = e.cfunc = null;\n\t\t\t\t\t\ta.splice(i, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Cancels an event for both bubbeling and the default browser behavior.\n\t\t *\n\t\t * @method cancel\n\t\t * @param {Event} e Event object to cancel.\n\t\t * @return {Boolean} Always false.\n\t\t */\n\t\tcancel : function(e) {\n\t\t\tif (!e)\n\t\t\t\treturn false;\n\n\t\t\tthis.stop(e);\n\n\t\t\treturn this.prevent(e);\n\t\t},\n\n\t\t/**\n\t\t * Stops propogation/bubbeling of an event.\n\t\t *\n\t\t * @method stop\n\t\t * @param {Event} e Event to cancel bubbeling on.\n\t\t * @return {Boolean} Always false.\n\t\t */\n\t\tstop : function(e) {\n\t\t\tif (e.stopPropagation)\n\t\t\t\te.stopPropagation();\n\t\t\telse\n\t\t\t\te.cancelBubble = true;\n\n\t\t\treturn false;\n\t\t},\n\n\t\t/**\n\t\t * Prevent default browser behvaior of an event.\n\t\t *\n\t\t * @method prevent\n\t\t * @param {Event} e Event to prevent default browser behvaior of an event.\n\t\t * @return {Boolean} Always false.\n\t\t */\n\t\tprevent : function(e) {\n\t\t\tif (e.preventDefault)\n\t\t\t\te.preventDefault();\n\t\t\telse\n\t\t\t\te.returnValue = false;\n\n\t\t\treturn false;\n\t\t},\n\n\t\t/**\n\t\t * Destroys the instance.\n\t\t *\n\t\t * @method destroy\n\t\t */\n\t\tdestroy : function() {\n\t\t\tvar t = this;\n\n\t\t\teach(t.events, function(e, i) {\n\t\t\t\tt._remove(e.obj, e.name, e.cfunc);\n\t\t\t\te.obj = e.cfunc = null;\n\t\t\t});\n\n\t\t\tt.events = [];\n\t\t\tt = null;\n\t\t},\n\n\t\t_add : function(o, n, f) {\n\t\t\tif (o.attachEvent)\n\t\t\t\to.attachEvent('on' + n, f);\n\t\t\telse if (o.addEventListener)\n\t\t\t\to.addEventListener(n, f, false);\n\t\t\telse\n\t\t\t\to['on' + n] = f;\n\t\t},\n\n\t\t_remove : function(o, n, f) {\n\t\t\tif (o) {\n\t\t\t\ttry {\n\t\t\t\t\tif (o.detachEvent)\n\t\t\t\t\t\to.detachEvent('on' + n, f);\n\t\t\t\t\telse if (o.removeEventListener)\n\t\t\t\t\t\to.removeEventListener(n, f, false);\n\t\t\t\t\telse\n\t\t\t\t\t\to['on' + n] = null;\n\t\t\t\t} catch (ex) {\n\t\t\t\t\t// Might fail with permission denined on IE so we just ignore that\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_pageInit : function(win) {\n\t\t\tvar t = this;\n\n\t\t\t// Keep it from running more than once\n\t\t\tif (t.domLoaded)\n\t\t\t\treturn;\n\n\t\t\tt.domLoaded = true;\n\n\t\t\teach(t.inits, function(c) {\n\t\t\t\tc();\n\t\t\t});\n\n\t\t\tt.inits = [];\n\t\t},\n\n\t\t_wait : function(win) {\n\t\t\tvar t = this, doc = win.document;\n\n\t\t\t// No need since the document is already loaded\n\t\t\tif (win.tinyMCE_GZ && tinyMCE_GZ.loaded) {\n\t\t\t\tt.domLoaded = 1;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Use IE method\n\t\t\tif (doc.attachEvent) {\n\t\t\t\tdoc.attachEvent(\"onreadystatechange\", function() {\n\t\t\t\t\tif (doc.readyState === \"complete\") {\n\t\t\t\t\t\tdoc.detachEvent(\"onreadystatechange\", arguments.callee);\n\t\t\t\t\t\tt._pageInit(win);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (doc.documentElement.doScroll && win == win.top) {\n\t\t\t\t\t(function() {\n\t\t\t\t\t\tif (t.domLoaded)\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t// If IE is used, use the trick by Diego Perini licensed under MIT by request to the author.\n\t\t\t\t\t\t\t// http://javascript.nwbox.com/IEContentLoaded/\n\t\t\t\t\t\t\tdoc.documentElement.doScroll(\"left\");\n\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\tsetTimeout(arguments.callee, 0);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tt._pageInit(win);\n\t\t\t\t\t})();\n\t\t\t\t}\n\t\t\t} else if (doc.addEventListener) {\n\t\t\t\tt._add(win, 'DOMContentLoaded', function() {\n\t\t\t\t\tt._pageInit(win);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tt._add(win, 'load', function() {\n\t\t\t\tt._pageInit(win);\n\t\t\t});\n\t\t},\n\n\t\t_stoppers : {\n\t\t\tpreventDefault : function() {\n\t\t\t\tthis.returnValue = false;\n\t\t\t},\n\n\t\t\tstopPropagation : function() {\n\t\t\t\tthis.cancelBubble = true;\n\t\t\t}\n\t\t}\n\t});\n\n\t/**\n\t * Instance of EventUtils for the current document.\n\t *\n\t * @property Event\n\t * @member tinymce.dom\n\t * @type tinymce.dom.EventUtils\n\t */\n\tEvent = tinymce.dom.Event = new tinymce.dom.EventUtils();\n\n\t// Dispatch DOM content loaded event for IE and Safari\n\tEvent._wait(window);\n\n\ttinymce.addUnload(function() {\n\t\tEvent.destroy();\n\t});\n})(tinymce);\n","Magento_Tinymce3/tiny_mce/classes/dom/DOMUtils.js":"/**\n * DOMUtils.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n\t// Shorten names\n\tvar each = tinymce.each,\n\t\tis = tinymce.is,\n\t\tisWebKit = tinymce.isWebKit,\n\t\tisIE = tinymce.isIE,\n\t\tEntities = tinymce.html.Entities,\n\t\tsimpleSelectorRe = /^([a-z0-9],?)+$/i,\n\t\tblockElementsMap = tinymce.html.Schema.blockElementsMap,\n\t\twhiteSpaceRegExp = /^[ \\t\\r\\n]*$/;\n\n\t/**\n\t * Utility class for various DOM manipulation and retrival functions.\n\t *\n\t * @class tinymce.dom.DOMUtils\n\t * @example\n\t * // Add a class to an element by id in the page\n\t * tinymce.DOM.addClass('someid', 'someclass');\n\t *\n\t * // Add a class to an element by id inside the editor\n\t * tinyMCE.activeEditor.dom.addClass('someid', 'someclass');\n\t */\n\ttinymce.create('tinymce.dom.DOMUtils', {\n\t\tdoc : null,\n\t\troot : null,\n\t\tfiles : null,\n\t\tpixelStyles : /^(top|left|bottom|right|width|height|borderWidth)$/,\n\t\tprops : {\n\t\t\t\"for\" : \"htmlFor\",\n\t\t\t\"class\" : \"className\",\n\t\t\tclassName : \"className\",\n\t\t\tchecked : \"checked\",\n\t\t\tdisabled : \"disabled\",\n\t\t\tmaxlength : \"maxLength\",\n\t\t\treadonly : \"readOnly\",\n\t\t\tselected : \"selected\",\n\t\t\tvalue : \"value\",\n\t\t\tid : \"id\",\n\t\t\tname : \"name\",\n\t\t\ttype : \"type\"\n\t\t},\n\n\t\t/**\n\t\t * Constructs a new DOMUtils instance. Consult the Wiki for more details on settings etc for this class.\n\t\t *\n\t\t * @constructor\n\t\t * @method DOMUtils\n\t\t * @param {Document} d Document reference to bind the utility class to.\n\t\t * @param {settings} s Optional settings collection.\n\t\t */\n\t\tDOMUtils : function(d, s) {\n\t\t\tvar t = this, globalStyle, name;\n\n\t\t\tt.doc = d;\n\t\t\tt.win = window;\n\t\t\tt.files = {};\n\t\t\tt.cssFlicker = false;\n\t\t\tt.counter = 0;\n\t\t\tt.stdMode = !tinymce.isIE || d.documentMode >= 8;\n\t\t\tt.boxModel = !tinymce.isIE || d.compatMode == \"CSS1Compat\" || t.stdMode;\n\t\t\tt.hasOuterHTML = \"outerHTML\" in d.createElement(\"a\");\n\n\t\t\tt.settings = s = tinymce.extend({\n\t\t\t\tkeep_values : false,\n\t\t\t\thex_colors : 1\n\t\t\t}, s);\n\t\t\t\n\t\t\tt.schema = s.schema;\n\t\t\tt.styles = new tinymce.html.Styles({\n\t\t\t\turl_converter : s.url_converter,\n\t\t\t\turl_converter_scope : s.url_converter_scope\n\t\t\t}, s.schema);\n\n\t\t\t// Fix IE6SP2 flicker and check it failed for pre SP2\n\t\t\tif (tinymce.isIE6) {\n\t\t\t\ttry {\n\t\t\t\t\td.execCommand('BackgroundImageCache', false, true);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tt.cssFlicker = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (isIE && s.schema) {\n\t\t\t\t// Add missing HTML 4/5 elements to IE\n\t\t\t\t('abbr article aside audio canvas ' +\n\t\t\t\t'details figcaption figure footer ' +\n\t\t\t\t'header hgroup mark menu meter nav ' +\n\t\t\t\t'output progress section summary ' +\n\t\t\t\t'time video').replace(/\\w+/g, function(name) {\n\t\t\t\t\td.createElement(name);\n\t\t\t\t});\n\n\t\t\t\t// Create all custom elements\n\t\t\t\tfor (name in s.schema.getCustomElements()) {\n\t\t\t\t\td.createElement(name);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttinymce.addUnload(t.destroy, t);\n\t\t},\n\n\t\t/**\n\t\t * Returns the root node of the document this is normally the body but might be a DIV. Parents like getParent will not\n\t\t * go above the point of this root node.\n\t\t *\n\t\t * @method getRoot\n\t\t * @return {Element} Root element for the utility class.\n\t\t */\n\t\tgetRoot : function() {\n\t\t\tvar t = this, s = t.settings;\n\n\t\t\treturn (s && t.get(s.root_element)) || t.doc.body;\n\t\t},\n\n\t\t/**\n\t\t * Returns the viewport of the window.\n\t\t *\n\t\t * @method getViewPort\n\t\t * @param {Window} w Optional window to get viewport of.\n\t\t * @return {Object} Viewport object with fields x, y, w and h.\n\t\t */\n\t\tgetViewPort : function(w) {\n\t\t\tvar d, b;\n\n\t\t\tw = !w ? this.win : w;\n\t\t\td = w.document;\n\t\t\tb = this.boxModel ? d.documentElement : d.body;\n\n\t\t\t// Returns viewport size excluding scrollbars\n\t\t\treturn {\n\t\t\t\tx : w.pageXOffset || b.scrollLeft,\n\t\t\t\ty : w.pageYOffset || b.scrollTop,\n\t\t\t\tw : w.innerWidth || b.clientWidth,\n\t\t\t\th : w.innerHeight || b.clientHeight\n\t\t\t};\n\t\t},\n\n\t\t/**\n\t\t * Returns the rectangle for a specific element.\n\t\t *\n\t\t * @method getRect\n\t\t * @param {Element/String} e Element object or element ID to get rectange from.\n\t\t * @return {object} Rectange for specified element object with x, y, w, h fields.\n\t\t */\n\t\tgetRect : function(e) {\n\t\t\tvar p, t = this, sr;\n\n\t\t\te = t.get(e);\n\t\t\tp = t.getPos(e);\n\t\t\tsr = t.getSize(e);\n\n\t\t\treturn {\n\t\t\t\tx : p.x,\n\t\t\t\ty : p.y,\n\t\t\t\tw : sr.w,\n\t\t\t\th : sr.h\n\t\t\t};\n\t\t},\n\n\t\t/**\n\t\t * Returns the size dimensions of the specified element.\n\t\t *\n\t\t * @method getSize\n\t\t * @param {Element/String} e Element object or element ID to get rectange from.\n\t\t * @return {object} Rectange for specified element object with w, h fields.\n\t\t */\n\t\tgetSize : function(e) {\n\t\t\tvar t = this, w, h;\n\n\t\t\te = t.get(e);\n\t\t\tw = t.getStyle(e, 'width');\n\t\t\th = t.getStyle(e, 'height');\n\n\t\t\t// Non pixel value, then force offset/clientWidth\n\t\t\tif (w.indexOf('px') === -1)\n\t\t\t\tw = 0;\n\n\t\t\t// Non pixel value, then force offset/clientWidth\n\t\t\tif (h.indexOf('px') === -1)\n\t\t\t\th = 0;\n\n\t\t\treturn {\n\t\t\t\tw : parseInt(w) || e.offsetWidth || e.clientWidth,\n\t\t\t\th : parseInt(h) || e.offsetHeight || e.clientHeight\n\t\t\t};\n\t\t},\n\n\t\t/**\n\t\t * Returns a node by the specified selector function. This function will\n\t\t * loop through all parent nodes and call the specified function for each node.\n\t\t * If the function then returns true indicating that it has found what it was looking for, the loop execution will then end\n\t\t * and the node it found will be returned.\n\t\t *\n\t\t * @method getParent\n\t\t * @param {Node/String} n DOM node to search parents on or ID string.\n\t\t * @param {function} f Selection function to execute on each node or CSS pattern.\n\t\t * @param {Node} r Optional root element, never go below this point.\n\t\t * @return {Node} DOM Node or null if it wasn't found.\n\t\t */\n\t\tgetParent : function(n, f, r) {\n\t\t\treturn this.getParents(n, f, r, false);\n\t\t},\n\n\t\t/**\n\t\t * Returns a node list of all parents matching the specified selector function or pattern.\n\t\t * If the function then returns true indicating that it has found what it was looking for and that node will be collected.\n\t\t *\n\t\t * @method getParents\n\t\t * @param {Node/String} n DOM node to search parents on or ID string.\n\t\t * @param {function} f Selection function to execute on each node or CSS pattern.\n\t\t * @param {Node} r Optional root element, never go below this point.\n\t\t * @return {Array} Array of nodes or null if it wasn't found.\n\t\t */\n\t\tgetParents : function(n, f, r, c) {\n\t\t\tvar t = this, na, se = t.settings, o = [];\n\n\t\t\tn = t.get(n);\n\t\t\tc = c === undefined;\n\n\t\t\tif (se.strict_root)\n\t\t\t\tr = r || t.getRoot();\n\n\t\t\t// Wrap node name as func\n\t\t\tif (is(f, 'string')) {\n\t\t\t\tna = f;\n\n\t\t\t\tif (f === '*') {\n\t\t\t\t\tf = function(n) {return n.nodeType == 1;};\n\t\t\t\t} else {\n\t\t\t\t\tf = function(n) {\n\t\t\t\t\t\treturn t.is(n, na);\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\twhile (n) {\n\t\t\t\tif (n == r || !n.nodeType || n.nodeType === 9)\n\t\t\t\t\tbreak;\n\n\t\t\t\tif (!f || f(n)) {\n\t\t\t\t\tif (c)\n\t\t\t\t\t\to.push(n);\n\t\t\t\t\telse\n\t\t\t\t\t\treturn n;\n\t\t\t\t}\n\n\t\t\t\tn = n.parentNode;\n\t\t\t}\n\n\t\t\treturn c ? o : null;\n\t\t},\n\n\t\t/**\n\t\t * Returns the specified element by ID or the input element if it isn't a string.\n\t\t *\n\t\t * @method get\n\t\t * @param {String/Element} n Element id to look for or element to just pass though.\n\t\t * @return {Element} Element matching the specified id or null if it wasn't found.\n\t\t */\n\t\tget : function(e) {\n\t\t\tvar n;\n\n\t\t\tif (e && this.doc && typeof(e) == 'string') {\n\t\t\t\tn = e;\n\t\t\t\te = this.doc.getElementById(e);\n\n\t\t\t\t// IE and Opera returns meta elements when they match the specified input ID, but getElementsByName seems to do the trick\n\t\t\t\tif (e && e.id !== n)\n\t\t\t\t\treturn this.doc.getElementsByName(n)[1];\n\t\t\t}\n\n\t\t\treturn e;\n\t\t},\n\n\t\t/**\n\t\t * Returns the next node that matches selector or function\n\t\t *\n\t\t * @method getNext\n\t\t * @param {Node} node Node to find siblings from.\n\t\t * @param {String/function} selector Selector CSS expression or function.\n\t\t * @return {Node} Next node item matching the selector or null if it wasn't found.\n\t\t */\n\t\tgetNext : function(node, selector) {\n\t\t\treturn this._findSib(node, selector, 'nextSibling');\n\t\t},\n\n\t\t/**\n\t\t * Returns the previous node that matches selector or function\n\t\t *\n\t\t * @method getPrev\n\t\t * @param {Node} node Node to find siblings from.\n\t\t * @param {String/function} selector Selector CSS expression or function.\n\t\t * @return {Node} Previous node item matching the selector or null if it wasn't found.\n\t\t */\n\t\tgetPrev : function(node, selector) {\n\t\t\treturn this._findSib(node, selector, 'previousSibling');\n\t\t},\n\n\t\t// #ifndef jquery\n\n\t\t/**\n\t\t * Selects specific elements by a CSS level 3 pattern. For example \"div#a1 p.test\".\n\t\t * This function is optimized for the most common patterns needed in TinyMCE but it also performes good enough\n\t\t * on more complex patterns.\n\t\t *\n\t\t * @method select\n\t\t * @param {String} p CSS level 1 pattern to select/find elements by.\n\t\t * @param {Object} s Optional root element/scope element to search in.\n\t\t * @return {Array} Array with all matched elements.\n\t\t * @example\n\t\t * // Adds a class to all paragraphs in the currently active editor\n\t\t * tinyMCE.activeEditor.dom.addClass(tinyMCE.activeEditor.dom.select('p'), 'someclass');\n\t\t * \n\t\t * // Adds a class to all spans that has the test class in the currently active editor\n\t\t * tinyMCE.activeEditor.dom.addClass(tinyMCE.activeEditor.dom.select('span.test'), 'someclass')\n\t\t */\n\t\tselect : function(pa, s) {\n\t\t\tvar t = this;\n\n\t\t\treturn tinymce.dom.Sizzle(pa, t.get(s) || t.get(t.settings.root_element) || t.doc, []);\n\t\t},\n\n\t\t/**\n\t\t * Returns true/false if the specified element matches the specified css pattern.\n\t\t *\n\t\t * @method is\n\t\t * @param {Node/NodeList} n DOM node to match or an array of nodes to match.\n\t\t * @param {String} selector CSS pattern to match the element agains.\n\t\t */\n\t\tis : function(n, selector) {\n\t\t\tvar i;\n\n\t\t\t// If it isn't an array then try to do some simple selectors instead of Sizzle for to boost performance\n\t\t\tif (n.length === undefined) {\n\t\t\t\t// Simple all selector\n\t\t\t\tif (selector === '*')\n\t\t\t\t\treturn n.nodeType == 1;\n\n\t\t\t\t// Simple selector just elements\n\t\t\t\tif (simpleSelectorRe.test(selector)) {\n\t\t\t\t\tselector = selector.toLowerCase().split(/,/);\n\t\t\t\t\tn = n.nodeName.toLowerCase();\n\n\t\t\t\t\tfor (i = selector.length - 1; i >= 0; i--) {\n\t\t\t\t\t\tif (selector[i] == n)\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn tinymce.dom.Sizzle.matches(selector, n.nodeType ? [n] : n).length > 0;\n\t\t},\n\n\t\t// #endif\n\n\t\t/**\n\t\t * Adds the specified element to another element or elements.\n\t\t *\n\t\t * @method add\n\t\t * @param {String/Element/Array} Element id string, DOM node element or array of id's or elements to add to.\n\t\t * @param {String/Element} n Name of new element to add or existing element to add.\n\t\t * @param {Object} a Optional object collection with arguments to add to the new element(s).\n\t\t * @param {String} h Optional inner HTML contents to add for each element.\n\t\t * @param {Boolean} c Optional internal state to indicate if it should create or add.\n\t\t * @return {Element/Array} Element that got created or array with elements if multiple elements where passed.\n\t\t * @example\n\t\t * // Adds a new paragraph to the end of the active editor\n\t\t * tinyMCE.activeEditor.dom.add(tinyMCE.activeEditor.getBody(), 'p', {title : 'my title'}, 'Some content');\n\t\t */\n\t\tadd : function(p, n, a, h, c) {\n\t\t\tvar t = this;\n\n\t\t\treturn this.run(p, function(p) {\n\t\t\t\tvar e, k;\n\n\t\t\t\te = is(n, 'string') ? t.doc.createElement(n) : n;\n\t\t\t\tt.setAttribs(e, a);\n\n\t\t\t\tif (h) {\n\t\t\t\t\tif (h.nodeType)\n\t\t\t\t\t\te.appendChild(h);\n\t\t\t\t\telse\n\t\t\t\t\t\tt.setHTML(e, h);\n\t\t\t\t}\n\n\t\t\t\treturn !c ? p.appendChild(e) : e;\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Creates a new element.\n\t\t *\n\t\t * @method create\n\t\t * @param {String} n Name of new element.\n\t\t * @param {Object} a Optional object name/value collection with element attributes.\n\t\t * @param {String} h Optional HTML string to set as inner HTML of the element.\n\t\t * @return {Element} HTML DOM node element that got created.\n\t\t * @example\n\t\t * // Adds an element where the caret/selection is in the active editor\n\t\t * var el = tinyMCE.activeEditor.dom.create('div', {id : 'test', 'class' : 'myclass'}, 'some content');\n\t\t * tinyMCE.activeEditor.selection.setNode(el);\n\t\t */\n\t\tcreate : function(n, a, h) {\n\t\t\treturn this.add(this.doc.createElement(n), n, a, h, 1);\n\t\t},\n\n\t\t/**\n\t\t * Create HTML string for element. The element will be closed unless an empty inner HTML string is passed.\n\t\t *\n\t\t * @method createHTML\n\t\t * @param {String} n Name of new element.\n\t\t * @param {Object} a Optional object name/value collection with element attributes.\n\t\t * @param {String} h Optional HTML string to set as inner HTML of the element.\n\t\t * @return {String} String with new HTML element like for example: <a href=\"#\">test</a>.\n\t\t * @example\n\t\t * // Creates a html chunk and inserts it at the current selection/caret location\n\t\t * tinyMCE.activeEditor.selection.setContent(tinyMCE.activeEditor.dom.createHTML('a', {href : 'test.html'}, 'some line'));\n\t\t */\n\t\tcreateHTML : function(n, a, h) {\n\t\t\tvar o = '', t = this, k;\n\n\t\t\to += '<' + n;\n\n\t\t\tfor (k in a) {\n\t\t\t\tif (a.hasOwnProperty(k))\n\t\t\t\t\to += ' ' + k + '=\"' + t.encode(a[k]) + '\"';\n\t\t\t}\n\n\t\t\t// A call to tinymce.is doesn't work for some odd reason on IE9 possible bug inside their JS runtime\n\t\t\tif (typeof(h) != \"undefined\")\n\t\t\t\treturn o + '>' + h + '</' + n + '>';\n\n\t\t\treturn o + ' />';\n\t\t},\n\n\t\t/**\n\t\t * Removes/deletes the specified element(s) from the DOM.\n\t\t *\n\t\t * @method remove\n\t\t * @param {String/Element/Array} node ID of element or DOM element object or array containing multiple elements/ids.\n\t\t * @param {Boolean} keep_children Optional state to keep children or not. If set to true all children will be placed at the location of the removed element.\n\t\t * @return {Element/Array} HTML DOM element that got removed or array of elements depending on input.\n\t\t * @example\n\t\t * // Removes all paragraphs in the active editor\n\t\t * tinyMCE.activeEditor.dom.remove(tinyMCE.activeEditor.dom.select('p'));\n\t\t * \n\t\t * // Removes a element by id in the document\n\t\t * tinyMCE.DOM.remove('mydiv');\n\t\t */\n\t\tremove : function(node, keep_children) {\n\t\t\treturn this.run(node, function(node) {\n\t\t\t\tvar child, parent = node.parentNode;\n\n\t\t\t\tif (!parent)\n\t\t\t\t\treturn null;\n\n\t\t\t\tif (keep_children) {\n\t\t\t\t\twhile (child = node.firstChild) {\n\t\t\t\t\t\t// IE 8 will crash if you don't remove completely empty text nodes\n\t\t\t\t\t\tif (!tinymce.isIE || child.nodeType !== 3 || child.nodeValue)\n\t\t\t\t\t\t\tparent.insertBefore(child, node);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tnode.removeChild(child);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn parent.removeChild(node);\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Sets the CSS style value on a HTML element. The name can be a camelcase string\n\t\t * or the CSS style name like background-color.\n\t\t *\n\t\t * @method setStyle\n\t\t * @param {String/Element/Array} n HTML element/Element ID or Array of elements/ids to set CSS style value on.\n\t\t * @param {String} na Name of the style value to set.\n\t\t * @param {String} v Value to set on the style.\n\t\t * @example\n\t\t * // Sets a style value on all paragraphs in the currently active editor\n\t\t * tinyMCE.activeEditor.dom.setStyle(tinyMCE.activeEditor.dom.select('p'), 'background-color', 'red');\n\t\t * \n\t\t * // Sets a style value to an element by id in the current document\n\t\t * tinyMCE.DOM.setStyle('mydiv', 'background-color', 'red');\n\t\t */\n\t\tsetStyle : function(n, na, v) {\n\t\t\tvar t = this;\n\n\t\t\treturn t.run(n, function(e) {\n\t\t\t\tvar s, i;\n\n\t\t\t\ts = e.style;\n\n\t\t\t\t// Camelcase it, if needed\n\t\t\t\tna = na.replace(/-(\\D)/g, function(a, b){\n\t\t\t\t\treturn b.toUpperCase();\n\t\t\t\t});\n\n\t\t\t\t// Default px suffix on these\n\t\t\t\tif (t.pixelStyles.test(na) && (tinymce.is(v, 'number') || /^[\\-0-9\\.]+$/.test(v)))\n\t\t\t\t\tv += 'px';\n\n\t\t\t\tswitch (na) {\n\t\t\t\t\tcase 'opacity':\n\t\t\t\t\t\t// IE specific opacity\n\t\t\t\t\t\tif (isIE) {\n\t\t\t\t\t\t\ts.filter = v === '' ? '' : \"alpha(opacity=\" + (v * 100) + \")\";\n\n\t\t\t\t\t\t\tif (!n.currentStyle || !n.currentStyle.hasLayout)\n\t\t\t\t\t\t\t\ts.display = 'inline-block';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Fix for older browsers\n\t\t\t\t\t\ts[na] = s['-moz-opacity'] = s['-khtml-opacity'] = v || '';\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'float':\n\t\t\t\t\t\tisIE ? s.styleFloat = v : s.cssFloat = v;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tdefault:\n\t\t\t\t\t\ts[na] = v || '';\n\t\t\t\t}\n\n\t\t\t\t// Force update of the style data\n\t\t\t\tif (t.settings.update_styles)\n\t\t\t\t\tt.setAttrib(e, 'data-mce-style');\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Returns the current style or runtime/computed value of a element.\n\t\t *\n\t\t * @method getStyle\n\t\t * @param {String/Element} n HTML element or element id string to get style from.\n\t\t * @param {String} na Style name to return.\n\t\t * @param {Boolean} c Computed style.\n\t\t * @return {String} Current style or computed style value of a element.\n\t\t */\n\t\tgetStyle : function(n, na, c) {\n\t\t\tn = this.get(n);\n\n\t\t\tif (!n)\n\t\t\t\treturn;\n\n\t\t\t// Gecko\n\t\t\tif (this.doc.defaultView && c) {\n\t\t\t\t// Remove camelcase\n\t\t\t\tna = na.replace(/[A-Z]/g, function(a){\n\t\t\t\t\treturn '-' + a;\n\t\t\t\t});\n\n\t\t\t\ttry {\n\t\t\t\t\treturn this.doc.defaultView.getComputedStyle(n, null).getPropertyValue(na);\n\t\t\t\t} catch (ex) {\n\t\t\t\t\t// Old safari might fail\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Camelcase it, if needed\n\t\t\tna = na.replace(/-(\\D)/g, function(a, b){\n\t\t\t\treturn b.toUpperCase();\n\t\t\t});\n\n\t\t\tif (na == 'float')\n\t\t\t\tna = isIE ? 'styleFloat' : 'cssFloat';\n\n\t\t\t// IE & Opera\n\t\t\tif (n.currentStyle && c)\n\t\t\t\treturn n.currentStyle[na];\n\n\t\t\treturn n.style ? n.style[na] : undefined;\n\t\t},\n\n\t\t/**\n\t\t * Sets multiple styles on the specified element(s).\n\t\t *\n\t\t * @method setStyles\n\t\t * @param {Element/String/Array} e DOM element, element id string or array of elements/ids to set styles on.\n\t\t * @param {Object} o Name/Value collection of style items to add to the element(s).\n\t\t * @example\n\t\t * // Sets styles on all paragraphs in the currently active editor\n\t\t * tinyMCE.activeEditor.dom.setStyles(tinyMCE.activeEditor.dom.select('p'), {'background-color' : 'red', 'color' : 'green'});\n\t\t * \n\t\t * // Sets styles to an element by id in the current document\n\t\t * tinyMCE.DOM.setStyles('mydiv', {'background-color' : 'red', 'color' : 'green'});\n\t\t */\n\t\tsetStyles : function(e, o) {\n\t\t\tvar t = this, s = t.settings, ol;\n\n\t\t\tol = s.update_styles;\n\t\t\ts.update_styles = 0;\n\n\t\t\teach(o, function(v, n) {\n\t\t\t\tt.setStyle(e, n, v);\n\t\t\t});\n\n\t\t\t// Update style info\n\t\t\ts.update_styles = ol;\n\t\t\tif (s.update_styles)\n\t\t\t\tt.setAttrib(e, s.cssText);\n\t\t},\n\n\t\t/**\n\t\t * Removes all attributes from an element or elements.\n\t\t * \n\t\t * @param {Element/String/Array} e DOM element, element id string or array of elements/ids to remove attributes from.\n\t\t */\n\t\tremoveAllAttribs: function(e) {\n\t\t\treturn this.run(e, function(e) {\n\t\t\t\tvar i, attrs = e.attributes;\n\t\t\t\tfor (i = attrs.length - 1; i >= 0; i--) {\n\t\t\t\t\te.removeAttributeNode(attrs.item(i));\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Sets the specified attributes value of a element or elements.\n\t\t *\n\t\t * @method setAttrib\n\t\t * @param {Element/String/Array} e DOM element, element id string or array of elements/ids to set attribute on.\n\t\t * @param {String} n Name of attribute to set.\n\t\t * @param {String} v Value to set on the attribute of this value is falsy like null 0 or '' it will remove the attribute instead.\n\t\t * @example\n\t\t * // Sets an attribute to all paragraphs in the active editor\n\t\t * tinyMCE.activeEditor.dom.setAttrib(tinyMCE.activeEditor.dom.select('p'), 'class', 'myclass');\n\t\t * \n\t\t * // Sets an attribute to a specific element in the current page\n\t\t * tinyMCE.dom.setAttrib('mydiv', 'class', 'myclass');\n\t\t */\n\t\tsetAttrib : function(e, n, v) {\n\t\t\tvar t = this;\n\n\t\t\t// Whats the point\n\t\t\tif (!e || !n)\n\t\t\t\treturn;\n\n\t\t\t// Strict XML mode\n\t\t\tif (t.settings.strict)\n\t\t\t\tn = n.toLowerCase();\n\n\t\t\treturn this.run(e, function(e) {\n\t\t\t\tvar s = t.settings;\n\t\t\t\tif (v !== null) {\n\t\t\t\t\tswitch (n) {\n\t\t\t\t\t\tcase \"style\":\n\t\t\t\t\t\t\tif (!is(v, 'string')) {\n\t\t\t\t\t\t\t\teach(v, function(v, n) {\n\t\t\t\t\t\t\t\t\tt.setStyle(e, n, v);\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// No mce_style for elements with these since they might get resized by the user\n\t\t\t\t\t\t\tif (s.keep_values) {\n\t\t\t\t\t\t\t\tif (v && !t._isRes(v))\n\t\t\t\t\t\t\t\t\te.setAttribute('data-mce-style', v, 2);\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\te.removeAttribute('data-mce-style', 2);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\te.style.cssText = v;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"class\":\n\t\t\t\t\t\t\te.className = v || ''; // Fix IE null bug\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"src\":\n\t\t\t\t\t\tcase \"href\":\n\t\t\t\t\t\t\tif (s.keep_values) {\n\t\t\t\t\t\t\t\tif (s.url_converter)\n\t\t\t\t\t\t\t\t\tv = s.url_converter.call(s.url_converter_scope || t, v, n, e);\n\n\t\t\t\t\t\t\t\tt.setAttrib(e, 'data-mce-' + n, v, 2);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"shape\":\n\t\t\t\t\t\t\te.setAttribute('data-mce-style', v);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (is(v) && v !== null && v.length !== 0)\n\t\t\t\t\te.setAttribute(n, '' + v, 2);\n\t\t\t\telse\n\t\t\t\t\te.removeAttribute(n, 2);\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Sets the specified attributes of a element or elements.\n\t\t *\n\t\t * @method setAttribs\n\t\t * @param {Element/String/Array} e DOM element, element id string or array of elements/ids to set attributes on.\n\t\t * @param {Object} o Name/Value collection of attribute items to add to the element(s).\n\t\t * @example\n\t\t * // Sets some attributes to all paragraphs in the active editor\n\t\t * tinyMCE.activeEditor.dom.setAttribs(tinyMCE.activeEditor.dom.select('p'), {'class' : 'myclass', title : 'some title'});\n\t\t * \n\t\t * // Sets some attributes to a specific element in the current page\n\t\t * tinyMCE.DOM.setAttribs('mydiv', {'class' : 'myclass', title : 'some title'});\n\t\t */\n\t\tsetAttribs : function(e, o) {\n\t\t\tvar t = this;\n\n\t\t\treturn this.run(e, function(e) {\n\t\t\t\teach(o, function(v, n) {\n\t\t\t\t\tt.setAttrib(e, n, v);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Returns the specified attribute by name.\n\t\t *\n\t\t * @method getAttrib\n\t\t * @param {String/Element} e Element string id or DOM element to get attribute from.\n\t\t * @param {String} n Name of attribute to get.\n\t\t * @param {String} dv Optional default value to return if the attribute didn't exist.\n\t\t * @return {String} Attribute value string, default value or null if the attribute wasn't found.\n\t\t */\n\t\tgetAttrib : function(e, n, dv) {\n\t\t\tvar v, t = this, undef;\n\n\t\t\te = t.get(e);\n\n\t\t\tif (!e || e.nodeType !== 1)\n\t\t\t\treturn dv === undef ? false : dv;\n\n\t\t\tif (!is(dv))\n\t\t\t\tdv = '';\n\n\t\t\t// Try the mce variant for these\n\t\t\tif (/^(src|href|style|coords|shape)$/.test(n)) {\n\t\t\t\tv = e.getAttribute(\"data-mce-\" + n);\n\n\t\t\t\tif (v)\n\t\t\t\t\treturn v;\n\t\t\t}\n\n\t\t\tif (isIE && t.props[n]) {\n\t\t\t\tv = e[t.props[n]];\n\t\t\t\tv = v && v.nodeValue ? v.nodeValue : v;\n\t\t\t}\n\n\t\t\tif (!v)\n\t\t\t\tv = e.getAttribute(n, 2);\n\n\t\t\t// Check boolean attribs\n\t\t\tif (/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(n)) {\n\t\t\t\tif (e[t.props[n]] === true && v === '')\n\t\t\t\t\treturn n;\n\n\t\t\t\treturn v ? n : '';\n\t\t\t}\n\n\t\t\t// Inner input elements will override attributes on form elements\n\t\t\tif (e.nodeName === \"FORM\" && e.getAttributeNode(n))\n\t\t\t\treturn e.getAttributeNode(n).nodeValue;\n\n\t\t\tif (n === 'style') {\n\t\t\t\tv = v || e.style.cssText;\n\n\t\t\t\tif (v) {\n\t\t\t\t\tv = t.serializeStyle(t.parseStyle(v), e.nodeName);\n\n\t\t\t\t\tif (t.settings.keep_values && !t._isRes(v))\n\t\t\t\t\t\te.setAttribute('data-mce-style', v);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove Apple and WebKit stuff\n\t\t\tif (isWebKit && n === \"class\" && v)\n\t\t\t\tv = v.replace(/(apple|webkit)\\-[a-z\\-]+/gi, '');\n\n\t\t\t// Handle IE issues\n\t\t\tif (isIE) {\n\t\t\t\tswitch (n) {\n\t\t\t\t\tcase 'rowspan':\n\t\t\t\t\tcase 'colspan':\n\t\t\t\t\t\t// IE returns 1 as default value\n\t\t\t\t\t\tif (v === 1)\n\t\t\t\t\t\t\tv = '';\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'size':\n\t\t\t\t\t\t// IE returns +0 as default value for size\n\t\t\t\t\t\tif (v === '+0' || v === 20 || v === 0)\n\t\t\t\t\t\t\tv = '';\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'width':\n\t\t\t\t\tcase 'height':\n\t\t\t\t\tcase 'vspace':\n\t\t\t\t\tcase 'checked':\n\t\t\t\t\tcase 'disabled':\n\t\t\t\t\tcase 'readonly':\n\t\t\t\t\t\tif (v === 0)\n\t\t\t\t\t\t\tv = '';\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'hspace':\n\t\t\t\t\t\t// IE returns -1 as default value\n\t\t\t\t\t\tif (v === -1)\n\t\t\t\t\t\t\tv = '';\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'maxlength':\n\t\t\t\t\tcase 'tabindex':\n\t\t\t\t\t\t// IE returns default value\n\t\t\t\t\t\tif (v === 32768 || v === 2147483647 || v === '32768')\n\t\t\t\t\t\t\tv = '';\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'multiple':\n\t\t\t\t\tcase 'compact':\n\t\t\t\t\tcase 'noshade':\n\t\t\t\t\tcase 'nowrap':\n\t\t\t\t\t\tif (v === 65535)\n\t\t\t\t\t\t\treturn n;\n\n\t\t\t\t\t\treturn dv;\n\n\t\t\t\t\tcase 'shape':\n\t\t\t\t\t\tv = v.toLowerCase();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t// IE has odd anonymous function for event attributes\n\t\t\t\t\t\tif (n.indexOf('on') === 0 && v)\n\t\t\t\t\t\t\tv = tinymce._replace(/^function\\s+\\w+\\(\\)\\s+\\{\\s+(.*)\\s+\\}$/, '$1', '' + v);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn (v !== undef && v !== null && v !== '') ? '' + v : dv;\n\t\t},\n\n\t\t/**\n\t\t * Returns the absolute x, y position of a node. The position will be returned in a object with x, y fields.\n\t\t *\n\t\t * @method getPos\n\t\t * @param {Element/String} n HTML element or element id to get x, y position from.\n\t\t * @param {Element} ro Optional root element to stop calculations at.\n\t\t * @return {object} Absolute position of the specified element object with x, y fields.\n\t\t */\n\t\tgetPos : function(n, ro) {\n\t\t\tvar t = this, x = 0, y = 0, e, d = t.doc, r;\n\n\t\t\tn = t.get(n);\n\t\t\tro = ro || d.body;\n\n\t\t\tif (n) {\n\t\t\t\t// Use getBoundingClientRect if it exists since it's faster than looping offset nodes\n\t\t\t\tif (n.getBoundingClientRect) {\n\t\t\t\t\tn = n.getBoundingClientRect();\n\t\t\t\t\te = t.boxModel ? d.documentElement : d.body;\n\n\t\t\t\t\t// Add scroll offsets from documentElement or body since IE with the wrong box model will use d.body and so do WebKit\n\t\t\t\t\t// Also remove the body/documentelement clientTop/clientLeft on IE 6, 7 since they offset the position\n\t\t\t\t\tx = n.left + (d.documentElement.scrollLeft || d.body.scrollLeft) - e.clientTop;\n\t\t\t\t\ty = n.top + (d.documentElement.scrollTop || d.body.scrollTop) - e.clientLeft;\n\n\t\t\t\t\treturn {x : x, y : y};\n\t\t\t\t}\n\n\t\t\t\tr = n;\n\t\t\t\twhile (r && r != ro && r.nodeType) {\n\t\t\t\t\tx += r.offsetLeft || 0;\n\t\t\t\t\ty += r.offsetTop || 0;\n\t\t\t\t\tr = r.offsetParent;\n\t\t\t\t}\n\n\t\t\t\tr = n.parentNode;\n\t\t\t\twhile (r && r != ro && r.nodeType) {\n\t\t\t\t\tx -= r.scrollLeft || 0;\n\t\t\t\t\ty -= r.scrollTop || 0;\n\t\t\t\t\tr = r.parentNode;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn {x : x, y : y};\n\t\t},\n\n\t\t/**\n\t\t * Parses the specified style value into an object collection. This parser will also\n\t\t * merge and remove any redundant items that browsers might have added. It will also convert non hex\n\t\t * colors to hex values. Urls inside the styles will also be converted to absolute/relative based on settings.\n\t\t *\n\t\t * @method parseStyle\n\t\t * @param {String} st Style value to parse for example: border:1px solid red;.\n\t\t * @return {Object} Object representation of that style like {border : '1px solid red'}\n\t\t */\n\t\tparseStyle : function(st) {\n\t\t\treturn this.styles.parse(st);\n\t\t},\n\n\t\t/**\n\t\t * Serializes the specified style object into a string.\n\t\t *\n\t\t * @method serializeStyle\n\t\t * @param {Object} o Object to serialize as string for example: {border : '1px solid red'}\n\t\t * @param {String} name Optional element name.\n\t\t * @return {String} String representation of the style object for example: border: 1px solid red.\n\t\t */\n\t\tserializeStyle : function(o, name) {\n\t\t\treturn this.styles.serialize(o, name);\n\t\t},\n\n\t\t/**\n\t\t * Imports/loads the specified CSS file into the document bound to the class.\n\t\t *\n\t\t * @method loadCSS\n\t\t * @param {String} u URL to CSS file to load.\n\t\t * @example\n\t\t * // Loads a CSS file dynamically into the current document\n\t\t * tinymce.DOM.loadCSS('somepath/some.css');\n\t\t * \n\t\t * // Loads a CSS file into the currently active editor instance\n\t\t * tinyMCE.activeEditor.dom.loadCSS('somepath/some.css');\n\t\t * \n\t\t * // Loads a CSS file into an editor instance by id\n\t\t * tinyMCE.get('someid').dom.loadCSS('somepath/some.css');\n\t\t * \n\t\t * // Loads multiple CSS files into the current document\n\t\t * tinymce.DOM.loadCSS('somepath/some.css,somepath/someother.css');\n\t\t */\n\t\tloadCSS : function(u) {\n\t\t\tvar t = this, d = t.doc, head;\n\n\t\t\tif (!u)\n\t\t\t\tu = '';\n\n\t\t\thead = t.select('head')[0];\n\n\t\t\teach(u.split(','), function(u) {\n\t\t\t\tvar link;\n\n\t\t\t\tif (t.files[u])\n\t\t\t\t\treturn;\n\n\t\t\t\tt.files[u] = true;\n\t\t\t\tlink = t.create('link', {rel : 'stylesheet', href : tinymce._addVer(u)});\n\n\t\t\t\t// IE 8 has a bug where dynamically loading stylesheets would produce a 1 item remaining bug\n\t\t\t\t// This fix seems to resolve that issue by realcing the document ones a stylesheet finishes loading\n\t\t\t\t// It's ugly but it seems to work fine.\n\t\t\t\tif (isIE && d.documentMode && d.recalc) {\n\t\t\t\t\tlink.onload = function() {\n\t\t\t\t\t\tif (d.recalc)\n\t\t\t\t\t\t\td.recalc();\n\n\t\t\t\t\t\tlink.onload = null;\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\thead.appendChild(link);\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Adds a class to the specified element or elements.\n\t\t *\n\t\t * @method addClass\n\t\t * @param {String/Element/Array} Element ID string or DOM element or array with elements or IDs.\n\t\t * @param {String} c Class name to add to each element.\n\t\t * @return {String/Array} String with new class value or array with new class values for all elements.\n\t\t * @example\n\t\t * // Adds a class to all paragraphs in the active editor\n\t\t * tinyMCE.activeEditor.dom.addClass(tinyMCE.activeEditor.dom.select('p'), 'myclass');\n\t\t * \n\t\t * // Adds a class to a specific element in the current page\n\t\t * tinyMCE.DOM.addClass('mydiv', 'myclass');\n\t\t */\n\t\taddClass : function(e, c) {\n\t\t\treturn this.run(e, function(e) {\n\t\t\t\tvar o;\n\n\t\t\t\tif (!c)\n\t\t\t\t\treturn 0;\n\n\t\t\t\tif (this.hasClass(e, c))\n\t\t\t\t\treturn e.className;\n\n\t\t\t\to = this.removeClass(e, c);\n\n\t\t\t\treturn e.className = (o != '' ? (o + ' ') : '') + c;\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Removes a class from the specified element or elements.\n\t\t *\n\t\t * @method removeClass\n\t\t * @param {String/Element/Array} Element ID string or DOM element or array with elements or IDs.\n\t\t * @param {String} c Class name to remove to each element.\n\t\t * @return {String/Array} String with new class value or array with new class values for all elements.\n\t\t * @example\n\t\t * // Removes a class from all paragraphs in the active editor\n\t\t * tinyMCE.activeEditor.dom.removeClass(tinyMCE.activeEditor.dom.select('p'), 'myclass');\n\t\t * \n\t\t * // Removes a class from a specific element in the current page\n\t\t * tinyMCE.DOM.removeClass('mydiv', 'myclass');\n\t\t */\n\t\tremoveClass : function(e, c) {\n\t\t\tvar t = this, re;\n\n\t\t\treturn t.run(e, function(e) {\n\t\t\t\tvar v;\n\n\t\t\t\tif (t.hasClass(e, c)) {\n\t\t\t\t\tif (!re)\n\t\t\t\t\t\tre = new RegExp(\"(^|\\\\s+)\" + c + \"(\\\\s+|$)\", \"g\");\n\n\t\t\t\t\tv = e.className.replace(re, ' ');\n\t\t\t\t\tv = tinymce.trim(v != ' ' ? v : '');\n\n\t\t\t\t\te.className = v;\n\n\t\t\t\t\t// Empty class attr\n\t\t\t\t\tif (!v) {\n\t\t\t\t\t\te.removeAttribute('class');\n\t\t\t\t\t\te.removeAttribute('className');\n\t\t\t\t\t}\n\n\t\t\t\t\treturn v;\n\t\t\t\t}\n\n\t\t\t\treturn e.className;\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Returns true if the specified element has the specified class.\n\t\t *\n\t\t * @method hasClass\n\t\t * @param {String/Element} n HTML element or element id string to check CSS class on.\n\t\t * @param {String} c CSS class to check for.\n\t\t * @return {Boolean} true/false if the specified element has the specified class.\n\t\t */\n\t\thasClass : function(n, c) {\n\t\t\tn = this.get(n);\n\n\t\t\tif (!n || !c)\n\t\t\t\treturn false;\n\n\t\t\treturn (' ' + n.className + ' ').indexOf(' ' + c + ' ') !== -1;\n\t\t},\n\n\t\t/**\n\t\t * Shows the specified element(s) by ID by setting the \"display\" style.\n\t\t *\n\t\t * @method show\n\t\t * @param {String/Element/Array} e ID of DOM element or DOM element or array with elements or IDs to show.\n\t\t */\n\t\tshow : function(e) {\n\t\t\treturn this.setStyle(e, 'display', 'block');\n\t\t},\n\n\t\t/**\n\t\t * Hides the specified element(s) by ID by setting the \"display\" style.\n\t\t *\n\t\t * @method hide\n\t\t * @param {String/Element/Array} e ID of DOM element or DOM element or array with elements or IDs to hide.\n\t\t * @example\n\t\t * // Hides a element by id in the document\n\t\t * tinymce.DOM.hide('myid');\n\t\t */\n\t\thide : function(e) {\n\t\t\treturn this.setStyle(e, 'display', 'none');\n\t\t},\n\n\t\t/**\n\t\t * Returns true/false if the element is hidden or not by checking the \"display\" style.\n\t\t *\n\t\t * @method isHidden\n\t\t * @param {String/Element} e Id or element to check display state on.\n\t\t * @return {Boolean} true/false if the element is hidden or not.\n\t\t */\n\t\tisHidden : function(e) {\n\t\t\te = this.get(e);\n\n\t\t\treturn !e || e.style.display == 'none' || this.getStyle(e, 'display') == 'none';\n\t\t},\n\n\t\t/**\n\t\t * Returns a unique id. This can be useful when generating elements on the fly.\n\t\t * This method will not check if the element already exists.\n\t\t *\n\t\t * @method uniqueId\n\t\t * @param {String} p Optional prefix to add infront of all ids defaults to \"mce_\".\n\t\t * @return {String} Unique id.\n\t\t */\n\t\tuniqueId : function(p) {\n\t\t\treturn (!p ? 'mce_' : p) + (this.counter++);\n\t\t},\n\n\t\t/**\n\t\t * Sets the specified HTML content inside the element or elements. The HTML will first be processed this means\n\t\t * URLs will get converted, hex color values fixed etc. Check processHTML for details.\n\t\t *\n\t\t * @method setHTML\n\t\t * @param {Element/String/Array} e DOM element, element id string or array of elements/ids to set HTML inside.\n\t\t * @param {String} h HTML content to set as inner HTML of the element.\n\t\t * @example\n\t\t * // Sets the inner HTML of all paragraphs in the active editor\n\t\t * tinyMCE.activeEditor.dom.setHTML(tinyMCE.activeEditor.dom.select('p'), 'some inner html');\n\t\t * \n\t\t * // Sets the inner HTML of a element by id in the document\n\t\t * tinyMCE.DOM.setHTML('mydiv', 'some inner html');\n\t\t */\n\t\tsetHTML : function(element, html) {\n\t\t\tvar self = this;\n\n\t\t\treturn self.run(element, function(element) {\n\t\t\t\tif (isIE) {\n\t\t\t\t\t// Remove all child nodes, IE keeps empty text nodes in DOM\n\t\t\t\t\twhile (element.firstChild)\n\t\t\t\t\t\telement.removeChild(element.firstChild);\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// IE will remove comments from the beginning\n\t\t\t\t\t\t// unless you padd the contents with something\n\t\t\t\t\t\telement.innerHTML = '<br />' + html;\n\t\t\t\t\t\telement.removeChild(element.firstChild);\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t// IE sometimes produces an unknown runtime error on innerHTML if it's an block element within a block element for example a div inside a p\n\t\t\t\t\t\t// This seems to fix this problem\n\n\t\t\t\t\t\t// Create new div with HTML contents and a BR infront to keep comments\n\t\t\t\t\t\telement = self.create('div');\n\t\t\t\t\t\telement.innerHTML = '<br />' + html;\n\n\t\t\t\t\t\t// Add all children from div to target\n\t\t\t\t\t\teach (element.childNodes, function(node, i) {\n\t\t\t\t\t\t\t// Skip br element\n\t\t\t\t\t\t\tif (i)\n\t\t\t\t\t\t\t\telement.appendChild(node);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else\n\t\t\t\t\telement.innerHTML = html;\n\n\t\t\t\treturn html;\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Returns the outer HTML of an element.\n\t\t *\n\t\t * @method getOuterHTML\n\t\t * @param {String/Element} elm Element ID or element object to get outer HTML from.\n\t\t * @return {String} Outer HTML string.\n\t\t * @example\n\t\t * tinymce.DOM.getOuterHTML(editorElement);\n\t\t * tinyMCE.activeEditor.getOuterHTML(tinyMCE.activeEditor.getBody());\n\t\t */\n\t\tgetOuterHTML : function(elm) {\n\t\t\tvar doc, self = this;\n\n\t\t\telm = self.get(elm);\n\n\t\t\tif (!elm)\n\t\t\t\treturn null;\n\n\t\t\tif (elm.nodeType === 1 && self.hasOuterHTML)\n\t\t\t\treturn elm.outerHTML;\n\n\t\t\tdoc = (elm.ownerDocument || self.doc).createElement(\"body\");\n\t\t\tdoc.appendChild(elm.cloneNode(true));\n\n\t\t\treturn doc.innerHTML;\n\t\t},\n\n\t\t/**\n\t\t * Sets the specified outer HTML on a element or elements.\n\t\t *\n\t\t * @method setOuterHTML\n\t\t * @param {Element/String/Array} e DOM element, element id string or array of elements/ids to set outer HTML on.\n\t\t * @param {Object} h HTML code to set as outer value for the element.\n\t\t * @param {Document} d Optional document scope to use in this process defaults to the document of the DOM class.\n\t\t * @example\n\t\t * // Sets the outer HTML of all paragraphs in the active editor\n\t\t * tinyMCE.activeEditor.dom.setOuterHTML(tinyMCE.activeEditor.dom.select('p'), '<div>some html</div>');\n\t\t * \n\t\t * // Sets the outer HTML of a element by id in the document\n\t\t * tinyMCE.DOM.setOuterHTML('mydiv', '<div>some html</div>');\n\t\t */\n\t\tsetOuterHTML : function(e, h, d) {\n\t\t\tvar t = this;\n\n\t\t\tfunction setHTML(e, h, d) {\n\t\t\t\tvar n, tp;\n\n\t\t\t\ttp = d.createElement(\"body\");\n\t\t\t\ttp.innerHTML = h;\n\n\t\t\t\tn = tp.lastChild;\n\t\t\t\twhile (n) {\n\t\t\t\t\tt.insertAfter(n.cloneNode(true), e);\n\t\t\t\t\tn = n.previousSibling;\n\t\t\t\t}\n\n\t\t\t\tt.remove(e);\n\t\t\t};\n\n\t\t\treturn this.run(e, function(e) {\n\t\t\t\te = t.get(e);\n\n\t\t\t\t// Only set HTML on elements\n\t\t\t\tif (e.nodeType == 1) {\n\t\t\t\t\td = d || e.ownerDocument || t.doc;\n\n\t\t\t\t\tif (isIE) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t// Try outerHTML for IE it sometimes produces an unknown runtime error\n\t\t\t\t\t\t\tif (isIE && e.nodeType == 1)\n\t\t\t\t\t\t\t\te.outerHTML = h;\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tsetHTML(e, h, d);\n\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\t// Fix for unknown runtime error\n\t\t\t\t\t\t\tsetHTML(e, h, d);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else\n\t\t\t\t\t\tsetHTML(e, h, d);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Entity decode a string, resolves any HTML entities like &aring;.\n\t\t *\n\t\t * @method decode\n\t\t * @param {String} s String to decode entities on.\n\t\t * @return {String} Entity decoded string.\n\t\t */\n\t\tdecode : Entities.decode,\n\n\t\t/**\n\t\t * Entity encodes a string, encodes the most common entities <>\"& into entities.\n\t\t *\n\t\t * @method encode\n\t\t * @param {String} text String to encode with entities.\n\t\t * @return {String} Entity encoded string.\n\t\t */\n\t\tencode : Entities.encodeAllRaw,\n\n\t\t/**\n\t\t * Inserts a element after the reference element.\n\t\t *\n\t\t * @method insertAfter\n\t\t * @param {Element} node Element to insert after the reference.\n\t\t * @param {Element/String/Array} reference_node Reference element, element id or array of elements to insert after.\n\t\t * @return {Element/Array} Element that got added or an array with elements. \n\t\t */\n\t\tinsertAfter : function(node, reference_node) {\n\t\t\treference_node = this.get(reference_node);\n\n\t\t\treturn this.run(node, function(node) {\n\t\t\t\tvar parent, nextSibling;\n\n\t\t\t\tparent = reference_node.parentNode;\n\t\t\t\tnextSibling = reference_node.nextSibling;\n\n\t\t\t\tif (nextSibling)\n\t\t\t\t\tparent.insertBefore(node, nextSibling);\n\t\t\t\telse\n\t\t\t\t\tparent.appendChild(node);\n\n\t\t\t\treturn node;\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Returns true/false if the specified element is a block element or not.\n\t\t *\n\t\t * @method isBlock\n\t\t * @param {Node/String} node Element/Node to check.\n\t\t * @return {Boolean} True/False state if the node is a block element or not.\n\t\t */\n\t\tisBlock : function(node) {\n\t\t\tvar type = node.nodeType;\n\n\t\t\t// If it's a node then check the type and use the nodeName\n\t\t\tif (type)\n\t\t\t\treturn !!(type === 1 && blockElementsMap[node.nodeName]);\n\n\t\t\treturn !!blockElementsMap[node];\n\t\t},\n\n\t\t/**\n\t\t * Replaces the specified element or elements with the specified element, the new element will\n\t\t * be cloned if multiple inputs elements are passed.\n\t\t *\n\t\t * @method replace\n\t\t * @param {Element} n New element to replace old ones with.\n\t\t * @param {Element/String/Array} o Element DOM node, element id or array of elements or ids to replace.\n\t\t * @param {Boolean} k Optional keep children state, if set to true child nodes from the old object will be added to new ones.\n\t\t */\n\t\treplace : function(n, o, k) {\n\t\t\tvar t = this;\n\n\t\t\tif (is(o, 'array'))\n\t\t\t\tn = n.cloneNode(true);\n\n\t\t\treturn t.run(o, function(o) {\n\t\t\t\tif (k) {\n\t\t\t\t\teach(tinymce.grep(o.childNodes), function(c) {\n\t\t\t\t\t\tn.appendChild(c);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn o.parentNode.replaceChild(n, o);\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Renames the specified element to a new name and keep it's attributes and children.\n\t\t *\n\t\t * @method rename\n\t\t * @param {Element} elm Element to rename.\n\t\t * @param {String} name Name of the new element.\n\t\t * @return New element or the old element if it needed renaming.\n\t\t */\n\t\trename : function(elm, name) {\n\t\t\tvar t = this, newElm;\n\n\t\t\tif (elm.nodeName != name.toUpperCase()) {\n\t\t\t\t// Rename block element\n\t\t\t\tnewElm = t.create(name);\n\n\t\t\t\t// Copy attribs to new block\n\t\t\t\teach(t.getAttribs(elm), function(attr_node) {\n\t\t\t\t\tt.setAttrib(newElm, attr_node.nodeName, t.getAttrib(elm, attr_node.nodeName));\n\t\t\t\t});\n\n\t\t\t\t// Replace block\n\t\t\t\tt.replace(newElm, elm, 1);\n\t\t\t}\n\n\t\t\treturn newElm || elm;\n\t\t},\n\n\t\t/**\n\t\t * Find the common ancestor of two elements. This is a shorter method than using the DOM Range logic.\n\t\t *\n\t\t * @method findCommonAncestor\n\t\t * @param {Element} a Element to find common ancestor of.\n\t\t * @param {Element} b Element to find common ancestor of.\n\t\t * @return {Element} Common ancestor element of the two input elements.\n\t\t */\n\t\tfindCommonAncestor : function(a, b) {\n\t\t\tvar ps = a, pe;\n\n\t\t\twhile (ps) {\n\t\t\t\tpe = b;\n\n\t\t\t\twhile (pe && ps != pe)\n\t\t\t\t\tpe = pe.parentNode;\n\n\t\t\t\tif (ps == pe)\n\t\t\t\t\tbreak;\n\n\t\t\t\tps = ps.parentNode;\n\t\t\t}\n\n\t\t\tif (!ps && a.ownerDocument)\n\t\t\t\treturn a.ownerDocument.documentElement;\n\n\t\t\treturn ps;\n\t\t},\n\n\t\t/**\n\t\t * Parses the specified RGB color value and returns a hex version of that color.\n\t\t *\n\t\t * @method toHex\n\t\t * @param {String} s RGB string value like rgb(1,2,3)\n\t\t * @return {String} Hex version of that RGB value like #FF00FF.\n\t\t */\n\t\ttoHex : function(s) {\n\t\t\tvar c = /^\\s*rgb\\s*?\\(\\s*?([0-9]+)\\s*?,\\s*?([0-9]+)\\s*?,\\s*?([0-9]+)\\s*?\\)\\s*$/i.exec(s);\n\n\t\t\tfunction hex(s) {\n\t\t\t\ts = parseInt(s).toString(16);\n\n\t\t\t\treturn s.length > 1 ? s : '0' + s; // 0 -> 00\n\t\t\t};\n\n\t\t\tif (c) {\n\t\t\t\ts = '#' + hex(c[1]) + hex(c[2]) + hex(c[3]);\n\n\t\t\t\treturn s;\n\t\t\t}\n\n\t\t\treturn s;\n\t\t},\n\n\t\t/**\n\t\t * Returns a array of all single CSS classes in the document. A single CSS class is a simple\n\t\t * rule like \".class\" complex ones like \"div td.class\" will not be added to output.\n\t\t *\n\t\t * @method getClasses\n\t\t * @return {Array} Array with class objects each object has a class field might be other fields in the future.\n\t\t */\n\t\tgetClasses : function() {\n\t\t\tvar t = this, cl = [], i, lo = {}, f = t.settings.class_filter, ov;\n\n\t\t\tif (t.classes)\n\t\t\t\treturn t.classes;\n\n\t\t\tfunction addClasses(s) {\n\t\t\t\t// IE style imports\n\t\t\t\teach(s.imports, function(r) {\n\t\t\t\t\taddClasses(r);\n\t\t\t\t});\n\n\t\t\t\teach(s.cssRules || s.rules, function(r) {\n\t\t\t\t\t// Real type or fake it on IE\n\t\t\t\t\tswitch (r.type || 1) {\n\t\t\t\t\t\t// Rule\n\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\tif (r.selectorText) {\n\t\t\t\t\t\t\t\teach(r.selectorText.split(','), function(v) {\n\t\t\t\t\t\t\t\t\tv = v.replace(/^\\s*|\\s*$|^\\s\\./g, \"\");\n\n\t\t\t\t\t\t\t\t\t// Is internal or it doesn't contain a class\n\t\t\t\t\t\t\t\t\tif (/\\.mce/.test(v) || !/\\.[\\w\\-]+$/.test(v))\n\t\t\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\t\t\t// Remove everything but class name\n\t\t\t\t\t\t\t\t\tov = v;\n\t\t\t\t\t\t\t\t\tv = tinymce._replace(/.*\\.([a-z0-9_\\-]+).*/i, '$1', v);\n\n\t\t\t\t\t\t\t\t\t// Filter classes\n\t\t\t\t\t\t\t\t\tif (f && !(v = f(v, ov)))\n\t\t\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\t\t\tif (!lo[v]) {\n\t\t\t\t\t\t\t\t\t\tcl.push({'class' : v});\n\t\t\t\t\t\t\t\t\t\tlo[v] = 1;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t// Import\n\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\taddClasses(r.styleSheet);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\n\t\t\ttry {\n\t\t\t\teach(t.doc.styleSheets, addClasses);\n\t\t\t} catch (ex) {\n\t\t\t\t// Ignore\n\t\t\t}\n\n\t\t\tif (cl.length > 0)\n\t\t\t\tt.classes = cl;\n\n\t\t\treturn cl;\n\t\t},\n\n\t\t/**\n\t\t * Executes the specified function on the element by id or dom element node or array of elements/id.\n\t\t *\n\t\t * @method run\n\t\t * @param {String/Element/Array} Element ID or DOM element object or array with ids or elements.\n\t\t * @param {function} f Function to execute for each item.\n\t\t * @param {Object} s Optional scope to execute the function in.\n\t\t * @return {Object/Array} Single object or array with objects depending on multiple input or not.\n\t\t */\n\t\trun : function(e, f, s) {\n\t\t\tvar t = this, o;\n\n\t\t\tif (t.doc && typeof(e) === 'string')\n\t\t\t\te = t.get(e);\n\n\t\t\tif (!e)\n\t\t\t\treturn false;\n\n\t\t\ts = s || this;\n\t\t\tif (!e.nodeType && (e.length || e.length === 0)) {\n\t\t\t\to = [];\n\n\t\t\t\teach(e, function(e, i) {\n\t\t\t\t\tif (e) {\n\t\t\t\t\t\tif (typeof(e) == 'string')\n\t\t\t\t\t\t\te = t.doc.getElementById(e);\n\n\t\t\t\t\t\to.push(f.call(s, e, i));\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn o;\n\t\t\t}\n\n\t\t\treturn f.call(s, e);\n\t\t},\n\n\t\t/**\n\t\t * Returns an NodeList with attributes for the element.\n\t\t *\n\t\t * @method getAttribs\n\t\t * @param {HTMLElement/string} n Element node or string id to get attributes from.\n\t\t * @return {NodeList} NodeList with attributes.\n\t\t */\n\t\tgetAttribs : function(n) {\n\t\t\tvar o;\n\n\t\t\tn = this.get(n);\n\n\t\t\tif (!n)\n\t\t\t\treturn [];\n\n\t\t\tif (isIE) {\n\t\t\t\to = [];\n\n\t\t\t\t// Object will throw exception in IE\n\t\t\t\tif (n.nodeName == 'OBJECT')\n\t\t\t\t\treturn n.attributes;\n\n\t\t\t\t// IE doesn't keep the selected attribute if you clone option elements\n\t\t\t\tif (n.nodeName === 'OPTION' && this.getAttrib(n, 'selected'))\n\t\t\t\t\to.push({specified : 1, nodeName : 'selected'});\n\n\t\t\t\t// It's crazy that this is faster in IE but it's because it returns all attributes all the time\n\t\t\t\tn.cloneNode(false).outerHTML.replace(/<\\/?[\\w:\\-]+ ?|=[\\\"][^\\\"]+\\\"|=\\'[^\\']+\\'|=[\\w\\-]+|>/gi, '').replace(/[\\w:\\-]+/gi, function(a) {\n\t\t\t\t\to.push({specified : 1, nodeName : a});\n\t\t\t\t});\n\n\t\t\t\treturn o;\n\t\t\t}\n\n\t\t\treturn n.attributes;\n\t\t},\n\n\t\t/**\n\t\t * Returns true/false if the specified node is to be considered empty or not.\n\t\t *\n\t\t * @example\n\t\t * tinymce.DOM.isEmpty(node, {img : true});\n\t\t * @method isEmpty\n\t\t * @param {Object} elements Optional name/value object with elements that are automatically treated as non empty elements.\n\t\t * @return {Boolean} true/false if the node is empty or not.\n\t\t */\n\t\tisEmpty : function(node, elements) {\n\t\t\tvar self = this, i, attributes, type, walker, name, parentNode;\n\n\t\t\tnode = node.firstChild;\n\t\t\tif (node) {\n\t\t\t\twalker = new tinymce.dom.TreeWalker(node);\n\t\t\t\telements = elements || self.schema ? self.schema.getNonEmptyElements() : null;\n\n\t\t\t\tdo {\n\t\t\t\t\ttype = node.nodeType;\n\n\t\t\t\t\tif (type === 1) {\n\t\t\t\t\t\t// Ignore bogus elements\n\t\t\t\t\t\tif (node.getAttribute('data-mce-bogus'))\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\t// Keep empty elements like <img />\n\t\t\t\t\t\tname = node.nodeName.toLowerCase();\n\t\t\t\t\t\tif (elements && elements[name]) {\n\t\t\t\t\t\t\t// Ignore single BR elements in blocks like <p><br /></p>\n\t\t\t\t\t\t\tparentNode = node.parentNode;\n\t\t\t\t\t\t\tif (name === 'br' && self.isBlock(parentNode) && parentNode.firstChild === node && parentNode.lastChild === node) {\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Keep elements with data-bookmark attributes or name attribute like <a name=\"1\"></a>\n\t\t\t\t\t\tattributes = self.getAttribs(node);\n\t\t\t\t\t\ti = node.attributes.length;\n\t\t\t\t\t\twhile (i--) {\n\t\t\t\t\t\t\tname = node.attributes[i].nodeName;\n\t\t\t\t\t\t\tif (name === \"name\" || name === 'data-mce-bookmark')\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Keep non whitespace text nodes\n\t\t\t\t\tif ((type === 3 && !whiteSpaceRegExp.test(node.nodeValue)))\n\t\t\t\t\t\treturn false;\n\t\t\t\t} while (node = walker.next());\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\t/**\n\t\t * Destroys all internal references to the DOM to solve IE leak issues.\n\t\t *\n\t\t * @method destroy\n\t\t */\n\t\tdestroy : function(s) {\n\t\t\tvar t = this;\n\n\t\t\tif (t.events)\n\t\t\t\tt.events.destroy();\n\n\t\t\tt.win = t.doc = t.root = t.events = null;\n\n\t\t\t// Manual destroy then remove unload handler\n\t\t\tif (!s)\n\t\t\t\ttinymce.removeUnload(t.destroy);\n\t\t},\n\n\t\t/**\n\t\t * Created a new DOM Range object. This will use the native DOM Range API if it's\n\t\t * available if it's not it will fallback to the custom TinyMCE implementation.\n\t\t *\n\t\t * @method createRng\n\t\t * @return {DOMRange} DOM Range object.\n\t\t * @example\n\t\t * var rng = tinymce.DOM.createRng();\n\t\t * alert(rng.startContainer + \",\" + rng.startOffset);\n\t\t */\n\t\tcreateRng : function() {\n\t\t\tvar d = this.doc;\n\n\t\t\treturn d.createRange ? d.createRange() : new tinymce.dom.Range(this);\n\t\t},\n\n\t\t/**\n\t\t * Returns the index of the specified node within it's parent.\n\t\t *\n\t\t * @param {Node} node Node to look for.\n\t\t * @param {boolean} normalized Optional true/false state if the index is what it would be after a normalization.\n\t\t * @return {Number} Index of the specified node.\n\t\t */\n\t\tnodeIndex : function(node, normalized) {\n\t\t\tvar idx = 0, lastNodeType, lastNode, nodeType;\n\n\t\t\tif (node) {\n\t\t\t\tfor (lastNodeType = node.nodeType, node = node.previousSibling, lastNode = node; node; node = node.previousSibling) {\n\t\t\t\t\tnodeType = node.nodeType;\n\n\t\t\t\t\t// Normalize text nodes\n\t\t\t\t\tif (normalized && nodeType == 3) {\n\t\t\t\t\t\tif (nodeType == lastNodeType || !node.nodeValue.length)\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tidx++;\n\t\t\t\t\tlastNodeType = nodeType;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn idx;\n\t\t},\n\n\t\t/**\n\t\t * Splits an element into two new elements and places the specified split\n\t\t * element or element between the new ones. For example splitting the paragraph at the bold element in\n\t\t * this example <p>abc<b>abc</b>123</p> would produce <p>abc</p><b>abc</b><p>123</p>. \n\t\t *\n\t\t * @method split\n\t\t * @param {Element} pe Parent element to split.\n\t\t * @param {Element} e Element to split at.\n\t\t * @param {Element} re Optional replacement element to replace the split element by.\n\t\t * @return {Element} Returns the split element or the replacement element if that is specified.\n\t\t */\n\t\tsplit : function(pe, e, re) {\n\t\t\tvar t = this, r = t.createRng(), bef, aft, pa;\n\n\t\t\t// W3C valid browsers tend to leave empty nodes to the left/right side of the contents, this makes sense\n\t\t\t// but we don't want that in our code since it serves no purpose for the end user\n\t\t\t// For example if this is chopped:\n\t\t\t//   <p>text 1<span><b>CHOP</b></span>text 2</p>\n\t\t\t// would produce:\n\t\t\t//   <p>text 1<span></span></p><b>CHOP</b><p><span></span>text 2</p>\n\t\t\t// this function will then trim of empty edges and produce:\n\t\t\t//   <p>text 1</p><b>CHOP</b><p>text 2</p>\n\t\t\tfunction trim(node) {\n\t\t\t\tvar i, children = node.childNodes, type = node.nodeType;\n\n\t\t\t\tif (type == 1 && node.getAttribute('data-mce-type') == 'bookmark')\n\t\t\t\t\treturn;\n\n\t\t\t\tfor (i = children.length - 1; i >= 0; i--)\n\t\t\t\t\ttrim(children[i]);\n\n\t\t\t\tif (type != 9) {\n\t\t\t\t\t// Keep non whitespace text nodes\n\t\t\t\t\tif (type == 3 && node.nodeValue.length > 0) {\n\t\t\t\t\t\t// If parent element isn't a block or there isn't any useful contents for example \"<p>   </p>\"\n\t\t\t\t\t\tif (!t.isBlock(node.parentNode) || tinymce.trim(node.nodeValue).length > 0)\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t} else if (type == 1) {\n\t\t\t\t\t\t// If the only child is a bookmark then move it up\n\t\t\t\t\t\tchildren = node.childNodes;\n\t\t\t\t\t\tif (children.length == 1 && children[0] && children[0].nodeType == 1 && children[0].getAttribute('data-mce-type') == 'bookmark')\n\t\t\t\t\t\t\tnode.parentNode.insertBefore(children[0], node);\n\n\t\t\t\t\t\t// Keep non empty elements or img, hr etc\n\t\t\t\t\t\tif (children.length || /^(br|hr|input|img)$/i.test(node.nodeName))\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tt.remove(node);\n\t\t\t\t}\n\n\t\t\t\treturn node;\n\t\t\t};\n\n\t\t\tif (pe && e) {\n\t\t\t\t// Get before chunk\n\t\t\t\tr.setStart(pe.parentNode, t.nodeIndex(pe));\n\t\t\t\tr.setEnd(e.parentNode, t.nodeIndex(e));\n\t\t\t\tbef = r.extractContents();\n\n\t\t\t\t// Get after chunk\n\t\t\t\tr = t.createRng();\n\t\t\t\tr.setStart(e.parentNode, t.nodeIndex(e) + 1);\n\t\t\t\tr.setEnd(pe.parentNode, t.nodeIndex(pe) + 1);\n\t\t\t\taft = r.extractContents();\n\n\t\t\t\t// Insert before chunk\n\t\t\t\tpa = pe.parentNode;\n\t\t\t\tpa.insertBefore(trim(bef), pe);\n\n\t\t\t\t// Insert middle chunk\n\t\t\t\tif (re)\n\t\t\t\t\tpa.replaceChild(re, e);\n\t\t\t\telse\n\t\t\t\t\tpa.insertBefore(e, pe);\n\n\t\t\t\t// Insert after chunk\n\t\t\t\tpa.insertBefore(trim(aft), pe);\n\t\t\t\tt.remove(pe);\n\n\t\t\t\treturn re || e;\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Adds an event handler to the specified object.\n\t\t *\n\t\t * @method bind\n\t\t * @param {Element/Document/Window/Array/String} o Object or element id string to add event handler to or an array of elements/ids/documents.\n\t\t * @param {String} n Name of event handler to add for example: click.\n\t\t * @param {function} f Function to execute when the event occurs.\n\t\t * @param {Object} s Optional scope to execute the function in.\n\t\t * @return {function} Function callback handler the same as the one passed in.\n\t\t */\n\t\tbind : function(target, name, func, scope) {\n\t\t\tvar t = this;\n\n\t\t\tif (!t.events)\n\t\t\t\tt.events = new tinymce.dom.EventUtils();\n\n\t\t\treturn t.events.add(target, name, func, scope || this);\n\t\t},\n\n\t\t/**\n\t\t * Removes the specified event handler by name and function from a element or collection of elements.\n\t\t *\n\t\t * @method unbind\n\t\t * @param {String/Element/Array} o Element ID string or HTML element or an array of elements or ids to remove handler from.\n\t\t * @param {String} n Event handler name like for example: \"click\"\n\t\t * @param {function} f Function to remove.\n\t\t * @return {bool/Array} Bool state if true if the handler was removed or an array with states if multiple elements where passed in.\n\t\t */\n\t\tunbind : function(target, name, func) {\n\t\t\tvar t = this;\n\n\t\t\tif (!t.events)\n\t\t\t\tt.events = new tinymce.dom.EventUtils();\n\n\t\t\treturn t.events.remove(target, name, func);\n\t\t},\n\n\t\t// #ifdef debug\n\n\t\tdumpRng : function(r) {\n\t\t\treturn 'startContainer: ' + r.startContainer.nodeName + ', startOffset: ' + r.startOffset + ', endContainer: ' + r.endContainer.nodeName + ', endOffset: ' + r.endOffset;\n\t\t},\n\n\t\t// #endif\n\n\t\t_findSib : function(node, selector, name) {\n\t\t\tvar t = this, f = selector;\n\n\t\t\tif (node) {\n\t\t\t\t// If expression make a function of it using is\n\t\t\t\tif (is(f, 'string')) {\n\t\t\t\t\tf = function(node) {\n\t\t\t\t\t\treturn t.is(node, selector);\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\t// Loop all siblings\n\t\t\t\tfor (node = node[name]; node; node = node[name]) {\n\t\t\t\t\tif (f(node))\n\t\t\t\t\t\treturn node;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\t_isRes : function(c) {\n\t\t\t// Is live resizble element\n\t\t\treturn /^(top|left|bottom|right|width|height)/i.test(c) || /;\\s*(top|left|bottom|right|width|height)/i.test(c);\n\t\t}\n\n\t\t/*\n\t\twalk : function(n, f, s) {\n\t\t\tvar d = this.doc, w;\n\n\t\t\tif (d.createTreeWalker) {\n\t\t\t\tw = d.createTreeWalker(n, NodeFilter.SHOW_TEXT, null, false);\n\n\t\t\t\twhile ((n = w.nextNode()) != null)\n\t\t\t\t\tf.call(s || this, n);\n\t\t\t} else\n\t\t\t\ttinymce.walk(n, f, 'childNodes', s);\n\t\t}\n\t\t*/\n\n\t\t/*\n\t\ttoRGB : function(s) {\n\t\t\tvar c = /^\\s*?#([0-9A-F]{2})([0-9A-F]{1,2})([0-9A-F]{2})?\\s*?$/.exec(s);\n\n\t\t\tif (c) {\n\t\t\t\t// #FFF -> #FFFFFF\n\t\t\t\tif (!is(c[3]))\n\t\t\t\t\tc[3] = c[2] = c[1];\n\n\t\t\t\treturn \"rgb(\" + parseInt(c[1], 16) + \",\" + parseInt(c[2], 16) + \",\" + parseInt(c[3], 16) + \")\";\n\t\t\t}\n\n\t\t\treturn s;\n\t\t}\n\t\t*/\n\t});\n\n\t/**\n\t * Instance of DOMUtils for the current document.\n\t *\n\t * @property DOM\n\t * @member tinymce\n\t * @type tinymce.dom.DOMUtils\n\t * @example\n\t * // Example of how to add a class to some element by id\n\t * tinymce.DOM.addClass('someid', 'someclass');\n\t */\n\ttinymce.DOM = new tinymce.dom.DOMUtils(document, {process_html : 0});\n})(tinymce);\n","Magento_Tinymce3/tiny_mce/classes/dom/Serializer.js":"/**\n * Serializer.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n\t/**\n\t * This class is used to serialize DOM trees into a string. Consult the TinyMCE Wiki API for more details and examples on how to use this class. \n\t *\n\t * @class tinymce.dom.Serializer\n\t */\n\n\t/**\n\t * Constucts a new DOM serializer class.\n\t *\n\t * @constructor\n\t * @method Serializer\n\t * @param {Object} settings Serializer settings object.\n\t * @param {tinymce.dom.DOMUtils} dom DOMUtils instance reference.\n\t * @param {tinymce.html.Schema} schema Optional schema reference.\n\t */\n\ttinymce.dom.Serializer = function(settings, dom, schema) {\n\t\tvar onPreProcess, onPostProcess, isIE = tinymce.isIE, each = tinymce.each, htmlParser;\n\n\t\t// Support the old apply_source_formatting option\n\t\tif (!settings.apply_source_formatting)\n\t\t\tsettings.indent = false;\n\n\t\tsettings.remove_trailing_brs = true;\n\n\t\t// Default DOM and Schema if they are undefined\n\t\tdom = dom || tinymce.DOM;\n\t\tschema = schema || new tinymce.html.Schema(settings);\n\t\tsettings.entity_encoding = settings.entity_encoding || 'named';\n\n\t\t/**\n\t\t * This event gets executed before a HTML fragment gets serialized into a HTML string. This event enables you to do modifications to the DOM before the serialization occurs. It's important to know that the element that is getting serialized is cloned so it's not inside a document.\n\t\t *\n\t\t * @event onPreProcess\n\t\t * @param {tinymce.dom.Serializer} sender object/Serializer instance that is serializing an element.\n\t\t * @param {Object} args Object containing things like the current node.\n\t\t * @example\n\t\t * // Adds an observer to the onPreProcess event\n\t\t * serializer.onPreProcess.add(function(se, o) {\n\t\t *     // Add a class to each paragraph\n\t\t *     se.dom.addClass(se.dom.select('p', o.node), 'myclass');\n\t\t * });\n\t\t */\n\t\tonPreProcess = new tinymce.util.Dispatcher(self);\n\n\t\t/**\n\t\t * This event gets executed after a HTML fragment has been serialized into a HTML string. This event enables you to do modifications to the HTML string like regexp replaces etc. \n\t\t *\n\t\t * @event onPreProcess\n\t\t * @param {tinymce.dom.Serializer} sender object/Serializer instance that is serializing an element.\n\t\t * @param {Object} args Object containing things like the current contents. \n\t\t * @example\n\t\t * // Adds an observer to the onPostProcess event\n\t\t * serializer.onPostProcess.add(function(se, o) {\n\t\t *    // Remove all paragraphs and replace with BR\n\t\t *    o.content = o.content.replace(/<p[^>]+>|<p>/g, '');\n\t\t *    o.content = o.content.replace(/<\\/p>/g, '<br />');\n\t\t * });\n\t\t */\n\t\tonPostProcess = new tinymce.util.Dispatcher(self);\n\n\t\thtmlParser = new tinymce.html.DomParser(settings, schema);\n\n\t\t// Convert move data-mce-src, data-mce-href and data-mce-style into nodes or process them if needed\n\t\thtmlParser.addAttributeFilter('src,href,style', function(nodes, name) {\n\t\t\tvar i = nodes.length, node, value, internalName = 'data-mce-' + name, urlConverter = settings.url_converter, urlConverterScope = settings.url_converter_scope, undef;\n\n\t\t\twhile (i--) {\n\t\t\t\tnode = nodes[i];\n\n\t\t\t\tvalue = node.attributes.map[internalName];\n\t\t\t\tif (value !== undef) {\n\t\t\t\t\t// Set external name to internal value and remove internal\n\t\t\t\t\tnode.attr(name, value.length > 0 ? value : null);\n\t\t\t\t\tnode.attr(internalName, null);\n\t\t\t\t} else {\n\t\t\t\t\t// No internal attribute found then convert the value we have in the DOM\n\t\t\t\t\tvalue = node.attributes.map[name];\n\n\t\t\t\t\tif (name === \"style\")\n\t\t\t\t\t\tvalue = dom.serializeStyle(dom.parseStyle(value), node.name);\n\t\t\t\t\telse if (urlConverter)\n\t\t\t\t\t\tvalue = urlConverter.call(urlConverterScope, value, name, node.name);\n\n\t\t\t\t\tnode.attr(name, value.length > 0 ? value : null);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Remove internal classes mceItem<..>\n\t\thtmlParser.addAttributeFilter('class', function(nodes, name) {\n\t\t\tvar i = nodes.length, node, value;\n\n\t\t\twhile (i--) {\n\t\t\t\tnode = nodes[i];\n\t\t\t\tvalue = node.attr('class').replace(/\\s*mce(Item\\w+|Selected)\\s*/g, '');\n\t\t\t\tnode.attr('class', value.length > 0 ? value : null);\n\t\t\t}\n\t\t});\n\n\t\t// Remove bookmark elements\n\t\thtmlParser.addAttributeFilter('data-mce-type', function(nodes, name, args) {\n\t\t\tvar i = nodes.length, node;\n\n\t\t\twhile (i--) {\n\t\t\t\tnode = nodes[i];\n\n\t\t\t\tif (node.attributes.map['data-mce-type'] === 'bookmark' && !args.cleanup)\n\t\t\t\t\tnode.remove();\n\t\t\t}\n\t\t});\n\n\t\t// Force script into CDATA sections and remove the mce- prefix also add comments around styles\n\t\thtmlParser.addNodeFilter('script,style', function(nodes, name) {\n\t\t\tvar i = nodes.length, node, value;\n\n\t\t\tfunction trim(value) {\n\t\t\t\treturn value.replace(/(<!--\\[CDATA\\[|\\]\\]-->)/g, '\\n')\n\t\t\t\t\t\t.replace(/^[\\r\\n]*|[\\r\\n]*$/g, '')\n\t\t\t\t\t\t.replace(/^\\s*(\\/\\/\\s*<!--|\\/\\/\\s*<!\\[CDATA\\[|<!--|<!\\[CDATA\\[)[\\r\\n]*/g, '')\n\t\t\t\t\t\t.replace(/\\s*(\\/\\/\\s*\\]\\]>|\\/\\/\\s*-->|\\]\\]>|-->|\\]\\]-->)\\s*$/g, '');\n\t\t\t};\n\n\t\t\twhile (i--) {\n\t\t\t\tnode = nodes[i];\n\t\t\t\tvalue = node.firstChild ? node.firstChild.value : '';\n\n\t\t\t\tif (name === \"script\") {\n\t\t\t\t\t// Remove mce- prefix from script elements\n\t\t\t\t\tnode.attr('type', (node.attr('type') || 'text/javascript').replace(/^mce\\-/, ''));\n\n\t\t\t\t\tif (value.length > 0)\n\t\t\t\t\t\tnode.firstChild.value = '// <![CDATA[\\n' + trim(value) + '\\n// ]]>';\n\t\t\t\t} else {\n\t\t\t\t\tif (value.length > 0)\n\t\t\t\t\t\tnode.firstChild.value = '<!--\\n' + trim(value) + '\\n-->';\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Convert comments to cdata and handle protected comments\n\t\thtmlParser.addNodeFilter('#comment', function(nodes, name) {\n\t\t\tvar i = nodes.length, node;\n\n\t\t\twhile (i--) {\n\t\t\t\tnode = nodes[i];\n\n\t\t\t\tif (node.value.indexOf('[CDATA[') === 0) {\n\t\t\t\t\tnode.name = '#cdata';\n\t\t\t\t\tnode.type = 4;\n\t\t\t\t\tnode.value = node.value.replace(/^\\[CDATA\\[|\\]\\]$/g, '');\n\t\t\t\t} else if (node.value.indexOf('mce:protected ') === 0) {\n\t\t\t\t\tnode.name = \"#text\";\n\t\t\t\t\tnode.type = 3;\n\t\t\t\t\tnode.raw = true;\n\t\t\t\t\tnode.value = unescape(node.value).substr(14);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\thtmlParser.addNodeFilter('xml:namespace,input', function(nodes, name) {\n\t\t\tvar i = nodes.length, node;\n\n\t\t\twhile (i--) {\n\t\t\t\tnode = nodes[i];\n\t\t\t\tif (node.type === 7)\n\t\t\t\t\tnode.remove();\n\t\t\t\telse if (node.type === 1) {\n\t\t\t\t\tif (name === \"input\" && !(\"type\" in node.attributes.map))\n\t\t\t\t\t\tnode.attr('type', 'text');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Fix list elements, TODO: Replace this later\n\t\tif (settings.fix_list_elements) {\n\t\t\thtmlParser.addNodeFilter('ul,ol', function(nodes, name) {\n\t\t\t\tvar i = nodes.length, node, parentNode;\n\n\t\t\t\twhile (i--) {\n\t\t\t\t\tnode = nodes[i];\n\t\t\t\t\tparentNode = node.parent;\n\n\t\t\t\t\tif (parentNode.name === 'ul' || parentNode.name === 'ol') {\n\t\t\t\t\t\tif (node.prev && node.prev.name === 'li') {\n\t\t\t\t\t\t\tnode.prev.append(node);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// Remove internal data attributes\n\t\thtmlParser.addAttributeFilter('data-mce-src,data-mce-href,data-mce-style', function(nodes, name) {\n\t\t\tvar i = nodes.length;\n\n\t\t\twhile (i--) {\n\t\t\t\tnodes[i].attr(name, null);\n\t\t\t}\n\t\t});\n\n\t\t// Return public methods\n\t\treturn {\n\t\t\t/**\n\t\t\t * Schema instance that was used to when the Serializer was constructed.\n\t\t\t *\n\t\t\t * @field {tinymce.html.Schema} schema\n\t\t\t */\n\t\t\tschema : schema,\n\n\t\t\t/**\n\t\t\t * Adds a node filter function to the parser used by the serializer, the parser will collect the specified nodes by name\n\t\t\t * and then execute the callback ones it has finished parsing the document.\n\t\t\t *\n\t\t\t * @example\n\t\t\t * parser.addNodeFilter('p,h1', function(nodes, name) {\n\t\t\t *\t\tfor (var i = 0; i < nodes.length; i++) {\n\t\t\t *\t\t\tconsole.log(nodes[i].name);\n\t\t\t *\t\t}\n\t\t\t * });\n\t\t\t * @method addNodeFilter\n\t\t\t * @method {String} name Comma separated list of nodes to collect.\n\t\t\t * @param {function} callback Callback function to execute once it has collected nodes.\n\t\t\t */\n\t\t\taddNodeFilter : htmlParser.addNodeFilter,\n\n\t\t\t/**\n\t\t\t * Adds a attribute filter function to the parser used by the serializer, the parser will collect nodes that has the specified attributes\n\t\t\t * and then execute the callback ones it has finished parsing the document.\n\t\t\t *\n\t\t\t * @example\n\t\t\t * parser.addAttributeFilter('src,href', function(nodes, name) {\n\t\t\t *\t\tfor (var i = 0; i < nodes.length; i++) {\n\t\t\t *\t\t\tconsole.log(nodes[i].name);\n\t\t\t *\t\t}\n\t\t\t * });\n\t\t\t * @method addAttributeFilter\n\t\t\t * @method {String} name Comma separated list of nodes to collect.\n\t\t\t * @param {function} callback Callback function to execute once it has collected nodes.\n\t\t\t */\n\t\t\taddAttributeFilter : htmlParser.addAttributeFilter,\n\n\t\t\t/**\n\t\t\t * Fires when the Serializer does a preProcess on the contents.\n\t\t\t *\n\t\t\t * @event onPreProcess\n\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t * @param {Object} obj PreProcess object.\n\t\t\t * @option {Node} node DOM node for the item being serialized.\n\t\t\t * @option {String} format The specified output format normally \"html\".\n\t\t\t * @option {Boolean} get Is true if the process is on a getContent operation.\n\t\t\t * @option {Boolean} set Is true if the process is on a setContent operation.\n\t\t\t * @option {Boolean} cleanup Is true if the process is on a cleanup operation.\n\t\t\t */\n\t\t\tonPreProcess : onPreProcess,\n\n\t\t\t/**\n\t\t\t * Fires when the Serializer does a postProcess on the contents.\n\t\t\t *\n\t\t\t * @event onPostProcess\n\t\t\t * @param {tinymce.Editor} sender Editor instance.\n\t\t\t * @param {Object} obj PreProcess object.\n\t\t\t */\n\t\t\tonPostProcess : onPostProcess,\n\n\t\t\t/**\n\t\t\t * Serializes the specified browser DOM node into a HTML string.\n\t\t\t *\n\t\t\t * @method serialize\n\t\t\t * @param {DOMNode} node DOM node to serialize.\n\t\t\t * @param {Object} args Arguments option that gets passed to event handlers.\n\t\t\t */\n\t\t\tserialize : function(node, args) {\n\t\t\t\tvar impl, doc, oldDoc, htmlSerializer, content;\n\n\t\t\t\t// Explorer won't clone contents of script and style and the\n\t\t\t\t// selected index of select elements are cleared on a clone operation.\n\t\t\t\tif (isIE && dom.select('script,style,select,map').length > 0) {\n\t\t\t\t\tcontent = node.innerHTML;\n\t\t\t\t\tnode = node.cloneNode(false);\n\t\t\t\t\tdom.setHTML(node, content);\n\t\t\t\t} else\n\t\t\t\t\tnode = node.cloneNode(true);\n\n\t\t\t\t// Nodes needs to be attached to something in WebKit/Opera\n\t\t\t\t// Older builds of Opera crashes if you attach the node to an document created dynamically\n\t\t\t\t// and since we can't feature detect a crash we need to sniff the acutal build number\n\t\t\t\t// This fix will make DOM ranges and make Sizzle happy!\n\t\t\t\timpl = node.ownerDocument.implementation;\n\t\t\t\tif (impl.createHTMLDocument) {\n\t\t\t\t\t// Create an empty HTML document\n\t\t\t\t\tdoc = impl.createHTMLDocument(\"\");\n\n\t\t\t\t\t// Add the element or it's children if it's a body element to the new document\n\t\t\t\t\teach(node.nodeName == 'BODY' ? node.childNodes : [node], function(node) {\n\t\t\t\t\t\tdoc.body.appendChild(doc.importNode(node, true));\n\t\t\t\t\t});\n\n\t\t\t\t\t// Grab first child or body element for serialization\n\t\t\t\t\tif (node.nodeName != 'BODY')\n\t\t\t\t\t\tnode = doc.body.firstChild;\n\t\t\t\t\telse\n\t\t\t\t\t\tnode = doc.body;\n\n\t\t\t\t\t// set the new document in DOMUtils so createElement etc works\n\t\t\t\t\toldDoc = dom.doc;\n\t\t\t\t\tdom.doc = doc;\n\t\t\t\t}\n\n\t\t\t\targs = args || {};\n\t\t\t\targs.format = args.format || 'html';\n\n\t\t\t\t// Pre process\n\t\t\t\tif (!args.no_events) {\n\t\t\t\t\targs.node = node;\n\t\t\t\t\tonPreProcess.dispatch(self, args);\n\t\t\t\t}\n\n\t\t\t\t// Setup serializer\n\t\t\t\thtmlSerializer = new tinymce.html.Serializer(settings, schema);\n\n\t\t\t\t// Parse and serialize HTML\n\t\t\t\targs.content = htmlSerializer.serialize(\n\t\t\t\t\thtmlParser.parse(args.getInner ? node.innerHTML : tinymce.trim(dom.getOuterHTML(node), args), args)\n\t\t\t\t);\n\n\t\t\t\t// Replace all BOM characters for now until we can find a better solution\n\t\t\t\tif (!args.cleanup)\n\t\t\t\t\targs.content = args.content.replace(/\\uFEFF|\\u200B/g, '');\n\n\t\t\t\t// Post process\n\t\t\t\tif (!args.no_events)\n\t\t\t\t\tonPostProcess.dispatch(self, args);\n\n\t\t\t\t// Restore the old document if it was changed\n\t\t\t\tif (oldDoc)\n\t\t\t\t\tdom.doc = oldDoc;\n\n\t\t\t\targs.node = null;\n\n\t\t\t\treturn args.content;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Adds valid elements rules to the serializers schema instance this enables you to specify things\n\t\t\t * like what elements should be outputted and what attributes specific elements might have.\n\t\t\t * Consult the Wiki for more details on this format.\n\t\t\t *\n\t\t\t * @method addRules\n\t\t\t * @param {String} rules Valid elements rules string to add to schema.\n\t\t\t */\n\t\t\taddRules : function(rules) {\n\t\t\t\tschema.addValidElements(rules);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Sets the valid elements rules to the serializers schema instance this enables you to specify things\n\t\t\t * like what elements should be outputted and what attributes specific elements might have.\n\t\t\t * Consult the Wiki for more details on this format.\n\t\t\t *\n\t\t\t * @method setRules\n\t\t\t * @param {String} rules Valid elements rules string.\n\t\t\t */\n\t\t\tsetRules : function(rules) {\n\t\t\t\tschema.setValidElements(rules);\n\t\t\t}\n\t\t};\n\t};\n})(tinymce);","Magento_Tinymce3/tiny_mce/classes/dom/ScriptLoader.js":"/**\n * ScriptLoader.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n\t/**\n\t * This class handles asynchronous/synchronous loading of JavaScript files it will execute callbacks when various items gets loaded. This class is useful to load external JavaScript files. \n\t *\n\t * @class tinymce.dom.ScriptLoader\n\t * @example\n\t * // Load a script from a specific URL using the global script loader\n\t * tinymce.ScriptLoader.load('somescript.js');\n\t * \n\t * // Load a script using a unique instance of the script loader\n\t * var scriptLoader = new tinymce.dom.ScriptLoader();\n\t * \n\t * scriptLoader.load('somescript.js');\n\t * \n\t * // Load multiple scripts\n\t * var scriptLoader = new tinymce.dom.ScriptLoader();\n\t * \n\t * scriptLoader.add('somescript1.js');\n\t * scriptLoader.add('somescript2.js');\n\t * scriptLoader.add('somescript3.js');\n\t * \n\t * scriptLoader.loadQueue(function() {\n\t *    alert('All scripts are now loaded.');\n\t * });\n\t */\n\ttinymce.dom.ScriptLoader = function(settings) {\n\t\tvar QUEUED = 0,\n\t\t\tLOADING = 1,\n\t\t\tLOADED = 2,\n\t\t\tstates = {},\n\t\t\tqueue = [],\n\t\t\tscriptLoadedCallbacks = {},\n\t\t\tqueueLoadedCallbacks = [],\n\t\t\tloading = 0,\n\t\t\tundefined;\n\n\t\t/**\n\t\t * Loads a specific script directly without adding it to the load queue.\n\t\t *\n\t\t * @method load\n\t\t * @param {String} url Absolute URL to script to add.\n\t\t * @param {function} callback Optional callback function to execute ones this script gets loaded.\n\t\t * @param {Object} scope Optional scope to execute callback in.\n\t\t */\n\t\tfunction loadScript(url, callback) {\n\t\t\tvar t = this, dom = tinymce.DOM, elm, uri, loc, id;\n\n\t\t\t// Execute callback when script is loaded\n\t\t\tfunction done() {\n\t\t\t\tdom.remove(id);\n\n\t\t\t\tif (elm)\n\t\t\t\t\telm.onreadystatechange = elm.onload = elm = null;\n\n\t\t\t\tcallback();\n\t\t\t};\n\t\t\t\n\t\t\tfunction error() {\n\t\t\t\t// Report the error so it's easier for people to spot loading errors\n\t\t\t\tif (typeof(console) !== \"undefined\" && console.log)\n\t\t\t\t\tconsole.log(\"Failed to load: \" + url);\n\n\t\t\t\t// We can't mark it as done if there is a load error since\n\t\t\t\t// A) We don't want to produce 404 errors on the server and\n\t\t\t\t// B) the onerror event won't fire on all browsers.\n\t\t\t\t// done();\n\t\t\t};\n\n\t\t\tid = dom.uniqueId();\n\n\t\t\tif (tinymce.isIE6) {\n\t\t\t\turi = new tinymce.util.URI(url);\n\t\t\t\tloc = location;\n\n\t\t\t\t// If script is from same domain and we\n\t\t\t\t// use IE 6 then use XHR since it's more reliable\n\t\t\t\tif (uri.host == loc.hostname && uri.port == loc.port && (uri.protocol + ':') == loc.protocol && uri.protocol.toLowerCase() != 'file') {\n\t\t\t\t\ttinymce.util.XHR.send({\n\t\t\t\t\t\turl : tinymce._addVer(uri.getURI()),\n\t\t\t\t\t\tsuccess : function(content) {\n\t\t\t\t\t\t\t// Create new temp script element\n\t\t\t\t\t\t\tvar script = dom.create('script', {\n\t\t\t\t\t\t\t\ttype : 'text/javascript'\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t// Evaluate script in global scope\n\t\t\t\t\t\t\tscript.text = content;\n\t\t\t\t\t\t\tdocument.getElementsByTagName('head')[0].appendChild(script);\n\t\t\t\t\t\t\tdom.remove(script);\n\n\t\t\t\t\t\t\tdone();\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\n\t\t\t\t\t\terror : error\n\t\t\t\t\t});\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Create new script element\n\t\t\telm = dom.create('script', {\n\t\t\t\tid : id,\n\t\t\t\ttype : 'text/javascript',\n\t\t\t\tsrc : tinymce._addVer(url)\n\t\t\t});\n\n\t\t\t// Add onload listener for non IE browsers since IE9\n\t\t\t// fires onload event before the script is parsed and executed\n\t\t\tif (!tinymce.isIE)\n\t\t\t\telm.onload = done;\n\n\t\t\t// Add onerror event will get fired on some browsers but not all of them\n\t\t\telm.onerror = error;\n\n\t\t\t// Opera 9.60 doesn't seem to fire the onreadystate event at correctly\n\t\t\tif (!tinymce.isOpera) {\n\t\t\t\telm.onreadystatechange = function() {\n\t\t\t\t\tvar state = elm.readyState;\n\n\t\t\t\t\t// Loaded state is passed on IE 6 however there\n\t\t\t\t\t// are known issues with this method but we can't use\n\t\t\t\t\t// XHR in a cross domain loading\n\t\t\t\t\tif (state == 'complete' || state == 'loaded')\n\t\t\t\t\t\tdone();\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// Most browsers support this feature so we report errors\n\t\t\t// for those at least to help users track their missing plugins etc\n\t\t\t// todo: Removed since it produced error if the document is unloaded by navigating away, re-add it as an option\n\t\t\t/*elm.onerror = function() {\n\t\t\t\talert('Failed to load: ' + url);\n\t\t\t};*/\n\n\t\t\t// Add script to document\n\t\t\t(document.getElementsByTagName('head')[0] || document.body).appendChild(elm);\n\t\t};\n\n\t\t/**\n\t\t * Returns true/false if a script has been loaded or not.\n\t\t *\n\t\t * @method isDone\n\t\t * @param {String} url URL to check for.\n\t\t * @return [Boolean} true/false if the URL is loaded.\n\t\t */\n\t\tthis.isDone = function(url) {\n\t\t\treturn states[url] == LOADED;\n\t\t};\n\n\t\t/**\n\t\t * Marks a specific script to be loaded. This can be useful if a script got loaded outside\n\t\t * the script loader or to skip it from loading some script.\n\t\t *\n\t\t * @method markDone\n\t\t * @param {string} u Absolute URL to the script to mark as loaded.\n\t\t */\n\t\tthis.markDone = function(url) {\n\t\t\tstates[url] = LOADED;\n\t\t};\n\n\t\t/**\n\t\t * Adds a specific script to the load queue of the script loader.\n\t\t *\n\t\t * @method add\n\t\t * @param {String} url Absolute URL to script to add.\n\t\t * @param {function} callback Optional callback function to execute ones this script gets loaded.\n\t\t * @param {Object} scope Optional scope to execute callback in.\n\t\t */\n\t\tthis.add = this.load = function(url, callback, scope) {\n\t\t\tvar item, state = states[url];\n\n\t\t\t// Add url to load queue\n\t\t\tif (state == undefined) {\n\t\t\t\tqueue.push(url);\n\t\t\t\tstates[url] = QUEUED;\n\t\t\t}\n\n\t\t\tif (callback) {\n\t\t\t\t// Store away callback for later execution\n\t\t\t\tif (!scriptLoadedCallbacks[url])\n\t\t\t\t\tscriptLoadedCallbacks[url] = [];\n\n\t\t\t\tscriptLoadedCallbacks[url].push({\n\t\t\t\t\tfunc : callback,\n\t\t\t\t\tscope : scope || this\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Starts the loading of the queue.\n\t\t *\n\t\t * @method loadQueue\n\t\t * @param {function} callback Optional callback to execute when all queued items are loaded.\n\t\t * @param {Object} scope Optional scope to execute the callback in.\n\t\t */\n\t\tthis.loadQueue = function(callback, scope) {\n\t\t\tthis.loadScripts(queue, callback, scope);\n\t\t};\n\n\t\t/**\n\t\t * Loads the specified queue of files and executes the callback ones they are loaded.\n\t\t * This method is generally not used outside this class but it might be useful in some scenarios. \n\t\t *\n\t\t * @method loadScripts\n\t\t * @param {Array} scripts Array of queue items to load.\n\t\t * @param {function} callback Optional callback to execute ones all items are loaded.\n\t\t * @param {Object} scope Optional scope to execute callback in.\n\t\t */\n\t\tthis.loadScripts = function(scripts, callback, scope) {\n\t\t\tvar loadScripts;\n\n\t\t\tfunction execScriptLoadedCallbacks(url) {\n\t\t\t\t// Execute URL callback functions\n\t\t\t\ttinymce.each(scriptLoadedCallbacks[url], function(callback) {\n\t\t\t\t\tcallback.func.call(callback.scope);\n\t\t\t\t});\n\n\t\t\t\tscriptLoadedCallbacks[url] = undefined;\n\t\t\t};\n\n\t\t\tqueueLoadedCallbacks.push({\n\t\t\t\tfunc : callback,\n\t\t\t\tscope : scope || this\n\t\t\t});\n\n\t\t\tloadScripts = function() {\n\t\t\t\tvar loadingScripts = tinymce.grep(scripts);\n\n\t\t\t\t// Current scripts has been handled\n\t\t\t\tscripts.length = 0;\n\n\t\t\t\t// Load scripts that needs to be loaded\n\t\t\t\ttinymce.each(loadingScripts, function(url) {\n\t\t\t\t\t// Script is already loaded then execute script callbacks directly\n\t\t\t\t\tif (states[url] == LOADED) {\n\t\t\t\t\t\texecScriptLoadedCallbacks(url);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Is script not loading then start loading it\n\t\t\t\t\tif (states[url] != LOADING) {\n\t\t\t\t\t\tstates[url] = LOADING;\n\t\t\t\t\t\tloading++;\n\n\t\t\t\t\t\tloadScript(url, function() {\n\t\t\t\t\t\t\tstates[url] = LOADED;\n\t\t\t\t\t\t\tloading--;\n\n\t\t\t\t\t\t\texecScriptLoadedCallbacks(url);\n\n\t\t\t\t\t\t\t// Load more scripts if they where added by the recently loaded script\n\t\t\t\t\t\t\tloadScripts();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// No scripts are currently loading then execute all pending queue loaded callbacks\n\t\t\t\tif (!loading) {\n\t\t\t\t\ttinymce.each(queueLoadedCallbacks, function(callback) {\n\t\t\t\t\t\tcallback.func.call(callback.scope);\n\t\t\t\t\t});\n\n\t\t\t\t\tqueueLoadedCallbacks.length = 0;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tloadScripts();\n\t\t};\n\t};\n\n\t// Global script loader\n\ttinymce.ScriptLoader = new tinymce.dom.ScriptLoader();\n})(tinymce);\n","Magento_Tinymce3/tiny_mce/classes/dom/Sizzle.js":"// #ifndef jquery\n\n/*\n * Sizzle CSS Selector Engine - v1.0\n *  Copyright 2009, The Dojo Foundation\n *  Released under the MIT, BSD, and GPL Licenses.\n *  More information: http://sizzlejs.com/\n */\n(function(){\n\nvar chunker = /((?:\\((?:\\([^()]+\\)|[^()]+)+\\)|\\[(?:\\[[^\\[\\]]*\\]|['\"][^'\"]*['\"]|[^\\[\\]'\"]+)+\\]|\\\\.|[^ >+~,(\\[\\\\]+)+|[>+~])(\\s*,\\s*)?((?:.|\\r|\\n)*)/g,\n\tdone = 0,\n\ttoString = Object.prototype.toString,\n\thasDuplicate = false,\n\tbaseHasDuplicate = true;\n\n// Here we check if the JavaScript engine is using some sort of\n// optimization where it does not always call our comparision\n// function. If that is the case, discard the hasDuplicate value.\n//   Thus far that includes Google Chrome.\n[0, 0].sort(function(){\n\tbaseHasDuplicate = false;\n\treturn 0;\n});\n\nvar Sizzle = function(selector, context, results, seed) {\n\tresults = results || [];\n\tcontext = context || document;\n\n\tvar origContext = context;\n\n\tif ( context.nodeType !== 1 && context.nodeType !== 9 ) {\n\t\treturn [];\n\t}\n\t\n\tif ( !selector || typeof selector !== \"string\" ) {\n\t\treturn results;\n\t}\n\n\tvar parts = [], m, set, checkSet, extra, prune = true, contextXML = Sizzle.isXML(context),\n\t\tsoFar = selector, ret, cur, pop, i;\n\t\n\t// Reset the position of the chunker regexp (start from head)\n\tdo {\n\t\tchunker.exec(\"\");\n\t\tm = chunker.exec(soFar);\n\n\t\tif ( m ) {\n\t\t\tsoFar = m[3];\n\t\t\n\t\t\tparts.push( m[1] );\n\t\t\n\t\t\tif ( m[2] ) {\n\t\t\t\textra = m[3];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t} while ( m );\n\n\tif ( parts.length > 1 && origPOS.exec( selector ) ) {\n\t\tif ( parts.length === 2 && Expr.relative[ parts[0] ] ) {\n\t\t\tset = posProcess( parts[0] + parts[1], context );\n\t\t} else {\n\t\t\tset = Expr.relative[ parts[0] ] ?\n\t\t\t\t[ context ] :\n\t\t\t\tSizzle( parts.shift(), context );\n\n\t\t\twhile ( parts.length ) {\n\t\t\t\tselector = parts.shift();\n\n\t\t\t\tif ( Expr.relative[ selector ] ) {\n\t\t\t\t\tselector += parts.shift();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tset = posProcess( selector, set );\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// Take a shortcut and set the context if the root selector is an ID\n\t\t// (but not if it'll be faster if the inner selector is an ID)\n\t\tif ( !seed && parts.length > 1 && context.nodeType === 9 && !contextXML &&\n\t\t\t\tExpr.match.ID.test(parts[0]) && !Expr.match.ID.test(parts[parts.length - 1]) ) {\n\t\t\tret = Sizzle.find( parts.shift(), context, contextXML );\n\t\t\tcontext = ret.expr ? Sizzle.filter( ret.expr, ret.set )[0] : ret.set[0];\n\t\t}\n\n\t\tif ( context ) {\n\t\t\tret = seed ?\n\t\t\t\t{ expr: parts.pop(), set: makeArray(seed) } :\n\t\t\t\tSizzle.find( parts.pop(), parts.length === 1 && (parts[0] === \"~\" || parts[0] === \"+\") && context.parentNode ? context.parentNode : context, contextXML );\n\t\t\tset = ret.expr ? Sizzle.filter( ret.expr, ret.set ) : ret.set;\n\n\t\t\tif ( parts.length > 0 ) {\n\t\t\t\tcheckSet = makeArray(set);\n\t\t\t} else {\n\t\t\t\tprune = false;\n\t\t\t}\n\n\t\t\twhile ( parts.length ) {\n\t\t\t\tcur = parts.pop();\n\t\t\t\tpop = cur;\n\n\t\t\t\tif ( !Expr.relative[ cur ] ) {\n\t\t\t\t\tcur = \"\";\n\t\t\t\t} else {\n\t\t\t\t\tpop = parts.pop();\n\t\t\t\t}\n\n\t\t\t\tif ( pop == null ) {\n\t\t\t\t\tpop = context;\n\t\t\t\t}\n\n\t\t\t\tExpr.relative[ cur ]( checkSet, pop, contextXML );\n\t\t\t}\n\t\t} else {\n\t\t\tcheckSet = parts = [];\n\t\t}\n\t}\n\n\tif ( !checkSet ) {\n\t\tcheckSet = set;\n\t}\n\n\tif ( !checkSet ) {\n\t\tSizzle.error( cur || selector );\n\t}\n\n\tif ( toString.call(checkSet) === \"[object Array]\" ) {\n\t\tif ( !prune ) {\n\t\t\tresults.push.apply( results, checkSet );\n\t\t} else if ( context && context.nodeType === 1 ) {\n\t\t\tfor ( i = 0; checkSet[i] != null; i++ ) {\n\t\t\t\tif ( checkSet[i] && (checkSet[i] === true || checkSet[i].nodeType === 1 && Sizzle.contains(context, checkSet[i])) ) {\n\t\t\t\t\tresults.push( set[i] );\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor ( i = 0; checkSet[i] != null; i++ ) {\n\t\t\t\tif ( checkSet[i] && checkSet[i].nodeType === 1 ) {\n\t\t\t\t\tresults.push( set[i] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\tmakeArray( checkSet, results );\n\t}\n\n\tif ( extra ) {\n\t\tSizzle( extra, origContext, results, seed );\n\t\tSizzle.uniqueSort( results );\n\t}\n\n\treturn results;\n};\n\nSizzle.uniqueSort = function(results){\n\tif ( sortOrder ) {\n\t\thasDuplicate = baseHasDuplicate;\n\t\tresults.sort(sortOrder);\n\n\t\tif ( hasDuplicate ) {\n\t\t\tfor ( var i = 1; i < results.length; i++ ) {\n\t\t\t\tif ( results[i] === results[i-1] ) {\n\t\t\t\t\tresults.splice(i--, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn results;\n};\n\nSizzle.matches = function(expr, set){\n\treturn Sizzle(expr, null, null, set);\n};\n\nSizzle.find = function(expr, context, isXML){\n\tvar set;\n\n\tif ( !expr ) {\n\t\treturn [];\n\t}\n\n\tfor ( var i = 0, l = Expr.order.length; i < l; i++ ) {\n\t\tvar type = Expr.order[i], match;\n\t\t\n\t\tif ( (match = Expr.leftMatch[ type ].exec( expr )) ) {\n\t\t\tvar left = match[1];\n\t\t\tmatch.splice(1,1);\n\n\t\t\tif ( left.substr( left.length - 1 ) !== \"\\\\\" ) {\n\t\t\t\tmatch[1] = (match[1] || \"\").replace(/\\\\/g, \"\");\n\t\t\t\tset = Expr.find[ type ]( match, context, isXML );\n\t\t\t\tif ( set != null ) {\n\t\t\t\t\texpr = expr.replace( Expr.match[ type ], \"\" );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( !set ) {\n\t\tset = context.getElementsByTagName(\"*\");\n\t}\n\n\treturn {set: set, expr: expr};\n};\n\nSizzle.filter = function(expr, set, inplace, not){\n\tvar old = expr, result = [], curLoop = set, match, anyFound,\n\t\tisXMLFilter = set && set[0] && Sizzle.isXML(set[0]);\n\n\twhile ( expr && set.length ) {\n\t\tfor ( var type in Expr.filter ) {\n\t\t\tif ( (match = Expr.leftMatch[ type ].exec( expr )) != null && match[2] ) {\n\t\t\t\tvar filter = Expr.filter[ type ], found, item, left = match[1];\n\t\t\t\tanyFound = false;\n\n\t\t\t\tmatch.splice(1,1);\n\n\t\t\t\tif ( left.substr( left.length - 1 ) === \"\\\\\" ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif ( curLoop === result ) {\n\t\t\t\t\tresult = [];\n\t\t\t\t}\n\n\t\t\t\tif ( Expr.preFilter[ type ] ) {\n\t\t\t\t\tmatch = Expr.preFilter[ type ]( match, curLoop, inplace, result, not, isXMLFilter );\n\n\t\t\t\t\tif ( !match ) {\n\t\t\t\t\t\tanyFound = found = true;\n\t\t\t\t\t} else if ( match === true ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( match ) {\n\t\t\t\t\tfor ( var i = 0; (item = curLoop[i]) != null; i++ ) {\n\t\t\t\t\t\tif ( item ) {\n\t\t\t\t\t\t\tfound = filter( item, match, i, curLoop );\n\t\t\t\t\t\t\tvar pass = not ^ !!found;\n\n\t\t\t\t\t\t\tif ( inplace && found != null ) {\n\t\t\t\t\t\t\t\tif ( pass ) {\n\t\t\t\t\t\t\t\t\tanyFound = true;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tcurLoop[i] = false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if ( pass ) {\n\t\t\t\t\t\t\t\tresult.push( item );\n\t\t\t\t\t\t\t\tanyFound = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( found !== undefined ) {\n\t\t\t\t\tif ( !inplace ) {\n\t\t\t\t\t\tcurLoop = result;\n\t\t\t\t\t}\n\n\t\t\t\t\texpr = expr.replace( Expr.match[ type ], \"\" );\n\n\t\t\t\t\tif ( !anyFound ) {\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Improper expression\n\t\tif ( expr === old ) {\n\t\t\tif ( anyFound == null ) {\n\t\t\t\tSizzle.error( expr );\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\told = expr;\n\t}\n\n\treturn curLoop;\n};\n\nSizzle.error = function( msg ) {\n\tthrow \"Syntax error, unrecognized expression: \" + msg;\n};\n\nvar Expr = Sizzle.selectors = {\n\torder: [ \"ID\", \"NAME\", \"TAG\" ],\n\tmatch: {\n\t\tID: /#((?:[\\w\\u00c0-\\uFFFF\\-]|\\\\.)+)/,\n\t\tCLASS: /\\.((?:[\\w\\u00c0-\\uFFFF\\-]|\\\\.)+)/,\n\t\tNAME: /\\[name=['\"]*((?:[\\w\\u00c0-\\uFFFF\\-]|\\\\.)+)['\"]*\\]/,\n\t\tATTR: /\\[\\s*((?:[\\w\\u00c0-\\uFFFF\\-]|\\\\.)+)\\s*(?:(\\S?=)\\s*(['\"]*)(.*?)\\3|)\\s*\\]/,\n\t\tTAG: /^((?:[\\w\\u00c0-\\uFFFF\\*\\-]|\\\\.)+)/,\n\t\tCHILD: /:(only|nth|last|first)-child(?:\\((even|odd|[\\dn+\\-]*)\\))?/,\n\t\tPOS: /:(nth|eq|gt|lt|first|last|even|odd)(?:\\((\\d*)\\))?(?=[^\\-]|$)/,\n\t\tPSEUDO: /:((?:[\\w\\u00c0-\\uFFFF\\-]|\\\\.)+)(?:\\((['\"]?)((?:\\([^\\)]+\\)|[^\\(\\)]*)+)\\2\\))?/\n\t},\n\tleftMatch: {},\n\tattrMap: {\n\t\t\"class\": \"className\",\n\t\t\"for\": \"htmlFor\"\n\t},\n\tattrHandle: {\n\t\thref: function(elem){\n\t\t\treturn elem.getAttribute(\"href\");\n\t\t}\n\t},\n\trelative: {\n\t\t\"+\": function(checkSet, part){\n\t\t\tvar isPartStr = typeof part === \"string\",\n\t\t\t\tisTag = isPartStr && !/\\W/.test(part),\n\t\t\t\tisPartStrNotTag = isPartStr && !isTag;\n\n\t\t\tif ( isTag ) {\n\t\t\t\tpart = part.toLowerCase();\n\t\t\t}\n\n\t\t\tfor ( var i = 0, l = checkSet.length, elem; i < l; i++ ) {\n\t\t\t\tif ( (elem = checkSet[i]) ) {\n\t\t\t\t\twhile ( (elem = elem.previousSibling) && elem.nodeType !== 1 ) {}\n\n\t\t\t\t\tcheckSet[i] = isPartStrNotTag || elem && elem.nodeName.toLowerCase() === part ?\n\t\t\t\t\t\telem || false :\n\t\t\t\t\t\telem === part;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( isPartStrNotTag ) {\n\t\t\t\tSizzle.filter( part, checkSet, true );\n\t\t\t}\n\t\t},\n\t\t\">\": function(checkSet, part){\n\t\t\tvar isPartStr = typeof part === \"string\",\n\t\t\t\telem, i = 0, l = checkSet.length;\n\n\t\t\tif ( isPartStr && !/\\W/.test(part) ) {\n\t\t\t\tpart = part.toLowerCase();\n\n\t\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\t\telem = checkSet[i];\n\t\t\t\t\tif ( elem ) {\n\t\t\t\t\t\tvar parent = elem.parentNode;\n\t\t\t\t\t\tcheckSet[i] = parent.nodeName.toLowerCase() === part ? parent : false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\t\telem = checkSet[i];\n\t\t\t\t\tif ( elem ) {\n\t\t\t\t\t\tcheckSet[i] = isPartStr ?\n\t\t\t\t\t\t\telem.parentNode :\n\t\t\t\t\t\t\telem.parentNode === part;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( isPartStr ) {\n\t\t\t\t\tSizzle.filter( part, checkSet, true );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\"\": function(checkSet, part, isXML){\n\t\t\tvar doneName = done++, checkFn = dirCheck, nodeCheck;\n\n\t\t\tif ( typeof part === \"string\" && !/\\W/.test(part) ) {\n\t\t\t\tpart = part.toLowerCase();\n\t\t\t\tnodeCheck = part;\n\t\t\t\tcheckFn = dirNodeCheck;\n\t\t\t}\n\n\t\t\tcheckFn(\"parentNode\", part, doneName, checkSet, nodeCheck, isXML);\n\t\t},\n\t\t\"~\": function(checkSet, part, isXML){\n\t\t\tvar doneName = done++, checkFn = dirCheck, nodeCheck;\n\n\t\t\tif ( typeof part === \"string\" && !/\\W/.test(part) ) {\n\t\t\t\tpart = part.toLowerCase();\n\t\t\t\tnodeCheck = part;\n\t\t\t\tcheckFn = dirNodeCheck;\n\t\t\t}\n\n\t\t\tcheckFn(\"previousSibling\", part, doneName, checkSet, nodeCheck, isXML);\n\t\t}\n\t},\n\tfind: {\n\t\tID: function(match, context, isXML){\n\t\t\tif ( typeof context.getElementById !== \"undefined\" && !isXML ) {\n\t\t\t\tvar m = context.getElementById(match[1]);\n\t\t\t\treturn m ? [m] : [];\n\t\t\t}\n\t\t},\n\t\tNAME: function(match, context){\n\t\t\tif ( typeof context.getElementsByName !== \"undefined\" ) {\n\t\t\t\tvar ret = [], results = context.getElementsByName(match[1]);\n\n\t\t\t\tfor ( var i = 0, l = results.length; i < l; i++ ) {\n\t\t\t\t\tif ( results[i].getAttribute(\"name\") === match[1] ) {\n\t\t\t\t\t\tret.push( results[i] );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn ret.length === 0 ? null : ret;\n\t\t\t}\n\t\t},\n\t\tTAG: function(match, context){\n\t\t\treturn context.getElementsByTagName(match[1]);\n\t\t}\n\t},\n\tpreFilter: {\n\t\tCLASS: function(match, curLoop, inplace, result, not, isXML){\n\t\t\tmatch = \" \" + match[1].replace(/\\\\/g, \"\") + \" \";\n\n\t\t\tif ( isXML ) {\n\t\t\t\treturn match;\n\t\t\t}\n\n\t\t\tfor ( var i = 0, elem; (elem = curLoop[i]) != null; i++ ) {\n\t\t\t\tif ( elem ) {\n\t\t\t\t\tif ( not ^ (elem.className && (\" \" + elem.className + \" \").replace(/[\\t\\n]/g, \" \").indexOf(match) >= 0) ) {\n\t\t\t\t\t\tif ( !inplace ) {\n\t\t\t\t\t\t\tresult.push( elem );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if ( inplace ) {\n\t\t\t\t\t\tcurLoop[i] = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\t\tID: function(match){\n\t\t\treturn match[1].replace(/\\\\/g, \"\");\n\t\t},\n\t\tTAG: function(match, curLoop){\n\t\t\treturn match[1].toLowerCase();\n\t\t},\n\t\tCHILD: function(match){\n\t\t\tif ( match[1] === \"nth\" ) {\n\t\t\t\t// parse equations like 'even', 'odd', '5', '2n', '3n+2', '4n-1', '-n+6'\n\t\t\t\tvar test = /(-?)(\\d*)n((?:\\+|-)?\\d*)/.exec(\n\t\t\t\t\tmatch[2] === \"even\" && \"2n\" || match[2] === \"odd\" && \"2n+1\" ||\n\t\t\t\t\t!/\\D/.test( match[2] ) && \"0n+\" + match[2] || match[2]);\n\n\t\t\t\t// calculate the numbers (first)n+(last) including if they are negative\n\t\t\t\tmatch[2] = (test[1] + (test[2] || 1)) - 0;\n\t\t\t\tmatch[3] = test[3] - 0;\n\t\t\t}\n\n\t\t\t// TODO: Move to normal caching system\n\t\t\tmatch[0] = done++;\n\n\t\t\treturn match;\n\t\t},\n\t\tATTR: function(match, curLoop, inplace, result, not, isXML){\n\t\t\tvar name = match[1].replace(/\\\\/g, \"\");\n\t\t\t\n\t\t\tif ( !isXML && Expr.attrMap[name] ) {\n\t\t\t\tmatch[1] = Expr.attrMap[name];\n\t\t\t}\n\n\t\t\tif ( match[2] === \"~=\" ) {\n\t\t\t\tmatch[4] = \" \" + match[4] + \" \";\n\t\t\t}\n\n\t\t\treturn match;\n\t\t},\n\t\tPSEUDO: function(match, curLoop, inplace, result, not){\n\t\t\tif ( match[1] === \"not\" ) {\n\t\t\t\t// If we're dealing with a complex expression, or a simple one\n\t\t\t\tif ( ( chunker.exec(match[3]) || \"\" ).length > 1 || /^\\w/.test(match[3]) ) {\n\t\t\t\t\tmatch[3] = Sizzle(match[3], null, null, curLoop);\n\t\t\t\t} else {\n\t\t\t\t\tvar ret = Sizzle.filter(match[3], curLoop, inplace, true ^ not);\n\t\t\t\t\tif ( !inplace ) {\n\t\t\t\t\t\tresult.push.apply( result, ret );\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else if ( Expr.match.POS.test( match[0] ) || Expr.match.CHILD.test( match[0] ) ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t\n\t\t\treturn match;\n\t\t},\n\t\tPOS: function(match){\n\t\t\tmatch.unshift( true );\n\t\t\treturn match;\n\t\t}\n\t},\n\tfilters: {\n\t\tenabled: function(elem){\n\t\t\treturn elem.disabled === false && elem.type !== \"hidden\";\n\t\t},\n\t\tdisabled: function(elem){\n\t\t\treturn elem.disabled === true;\n\t\t},\n\t\tchecked: function(elem){\n\t\t\treturn elem.checked === true;\n\t\t},\n\t\tselected: function(elem){\n\t\t\t// Accessing this property makes selected-by-default\n\t\t\t// options in Safari work properly\n\t\t\telem.parentNode.selectedIndex;\n\t\t\treturn elem.selected === true;\n\t\t},\n\t\tparent: function(elem){\n\t\t\treturn !!elem.firstChild;\n\t\t},\n\t\tempty: function(elem){\n\t\t\treturn !elem.firstChild;\n\t\t},\n\t\thas: function(elem, i, match){\n\t\t\treturn !!Sizzle( match[3], elem ).length;\n\t\t},\n\t\theader: function(elem){\n\t\t\treturn (/h\\d/i).test( elem.nodeName );\n\t\t},\n\t\ttext: function(elem){\n\t\t\treturn \"text\" === elem.type;\n\t\t},\n\t\tradio: function(elem){\n\t\t\treturn \"radio\" === elem.type;\n\t\t},\n\t\tcheckbox: function(elem){\n\t\t\treturn \"checkbox\" === elem.type;\n\t\t},\n\t\tfile: function(elem){\n\t\t\treturn \"file\" === elem.type;\n\t\t},\n\t\tpassword: function(elem){\n\t\t\treturn \"password\" === elem.type;\n\t\t},\n\t\tsubmit: function(elem){\n\t\t\treturn \"submit\" === elem.type;\n\t\t},\n\t\timage: function(elem){\n\t\t\treturn \"image\" === elem.type;\n\t\t},\n\t\treset: function(elem){\n\t\t\treturn \"reset\" === elem.type;\n\t\t},\n\t\tbutton: function(elem){\n\t\t\treturn \"button\" === elem.type || elem.nodeName.toLowerCase() === \"button\";\n\t\t},\n\t\tinput: function(elem){\n\t\t\treturn (/input|select|textarea|button/i).test(elem.nodeName);\n\t\t}\n\t},\n\tsetFilters: {\n\t\tfirst: function(elem, i){\n\t\t\treturn i === 0;\n\t\t},\n\t\tlast: function(elem, i, match, array){\n\t\t\treturn i === array.length - 1;\n\t\t},\n\t\teven: function(elem, i){\n\t\t\treturn i % 2 === 0;\n\t\t},\n\t\todd: function(elem, i){\n\t\t\treturn i % 2 === 1;\n\t\t},\n\t\tlt: function(elem, i, match){\n\t\t\treturn i < match[3] - 0;\n\t\t},\n\t\tgt: function(elem, i, match){\n\t\t\treturn i > match[3] - 0;\n\t\t},\n\t\tnth: function(elem, i, match){\n\t\t\treturn match[3] - 0 === i;\n\t\t},\n\t\teq: function(elem, i, match){\n\t\t\treturn match[3] - 0 === i;\n\t\t}\n\t},\n\tfilter: {\n\t\tPSEUDO: function(elem, match, i, array){\n\t\t\tvar name = match[1], filter = Expr.filters[ name ];\n\n\t\t\tif ( filter ) {\n\t\t\t\treturn filter( elem, i, match, array );\n\t\t\t} else if ( name === \"contains\" ) {\n\t\t\t\treturn (elem.textContent || elem.innerText || Sizzle.getText([ elem ]) || \"\").indexOf(match[3]) >= 0;\n\t\t\t} else if ( name === \"not\" ) {\n\t\t\t\tvar not = match[3];\n\n\t\t\t\tfor ( var j = 0, l = not.length; j < l; j++ ) {\n\t\t\t\t\tif ( not[j] === elem ) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tSizzle.error( \"Syntax error, unrecognized expression: \" + name );\n\t\t\t}\n\t\t},\n\t\tCHILD: function(elem, match){\n\t\t\tvar type = match[1], node = elem;\n\t\t\tswitch (type) {\n\t\t\t\tcase 'only':\n\t\t\t\tcase 'first':\n\t\t\t\t\twhile ( (node = node.previousSibling) )\t {\n\t\t\t\t\t\tif ( node.nodeType === 1 ) { \n\t\t\t\t\t\t\treturn false; \n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( type === \"first\" ) { \n\t\t\t\t\t\treturn true; \n\t\t\t\t\t}\n\t\t\t\t\tnode = elem;\n\t\t\t\tcase 'last':\n\t\t\t\t\twhile ( (node = node.nextSibling) )\t {\n\t\t\t\t\t\tif ( node.nodeType === 1 ) { \n\t\t\t\t\t\t\treturn false; \n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\tcase 'nth':\n\t\t\t\t\tvar first = match[2], last = match[3];\n\n\t\t\t\t\tif ( first === 1 && last === 0 ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar doneName = match[0],\n\t\t\t\t\t\tparent = elem.parentNode;\n\t\n\t\t\t\t\tif ( parent && (parent.sizcache !== doneName || !elem.nodeIndex) ) {\n\t\t\t\t\t\tvar count = 0;\n\t\t\t\t\t\tfor ( node = parent.firstChild; node; node = node.nextSibling ) {\n\t\t\t\t\t\t\tif ( node.nodeType === 1 ) {\n\t\t\t\t\t\t\t\tnode.nodeIndex = ++count;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} \n\t\t\t\t\t\tparent.sizcache = doneName;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar diff = elem.nodeIndex - last;\n\t\t\t\t\tif ( first === 0 ) {\n\t\t\t\t\t\treturn diff === 0;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn ( diff % first === 0 && diff / first >= 0 );\n\t\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tID: function(elem, match){\n\t\t\treturn elem.nodeType === 1 && elem.getAttribute(\"id\") === match;\n\t\t},\n\t\tTAG: function(elem, match){\n\t\t\treturn (match === \"*\" && elem.nodeType === 1) || elem.nodeName.toLowerCase() === match;\n\t\t},\n\t\tCLASS: function(elem, match){\n\t\t\treturn (\" \" + (elem.className || elem.getAttribute(\"class\")) + \" \")\n\t\t\t\t.indexOf( match ) > -1;\n\t\t},\n\t\tATTR: function(elem, match){\n\t\t\tvar name = match[1],\n\t\t\t\tresult = Expr.attrHandle[ name ] ?\n\t\t\t\t\tExpr.attrHandle[ name ]( elem ) :\n\t\t\t\t\telem[ name ] != null ?\n\t\t\t\t\t\telem[ name ] :\n\t\t\t\t\t\telem.getAttribute( name ),\n\t\t\t\tvalue = result + \"\",\n\t\t\t\ttype = match[2],\n\t\t\t\tcheck = match[4];\n\n\t\t\treturn result == null ?\n\t\t\t\ttype === \"!=\" :\n\t\t\t\ttype === \"=\" ?\n\t\t\t\tvalue === check :\n\t\t\t\ttype === \"*=\" ?\n\t\t\t\tvalue.indexOf(check) >= 0 :\n\t\t\t\ttype === \"~=\" ?\n\t\t\t\t(\" \" + value + \" \").indexOf(check) >= 0 :\n\t\t\t\t!check ?\n\t\t\t\tvalue && result !== false :\n\t\t\t\ttype === \"!=\" ?\n\t\t\t\tvalue !== check :\n\t\t\t\ttype === \"^=\" ?\n\t\t\t\tvalue.indexOf(check) === 0 :\n\t\t\t\ttype === \"$=\" ?\n\t\t\t\tvalue.substr(value.length - check.length) === check :\n\t\t\t\ttype === \"|=\" ?\n\t\t\t\tvalue === check || value.substr(0, check.length + 1) === check + \"-\" :\n\t\t\t\tfalse;\n\t\t},\n\t\tPOS: function(elem, match, i, array){\n\t\t\tvar name = match[2], filter = Expr.setFilters[ name ];\n\n\t\t\tif ( filter ) {\n\t\t\t\treturn filter( elem, i, match, array );\n\t\t\t}\n\t\t}\n\t}\n};\n\nvar origPOS = Expr.match.POS,\n\tfescape = function(all, num){\n\t\treturn \"\\\\\" + (num - 0 + 1);\n\t};\n\nfor ( var type in Expr.match ) {\n\tExpr.match[ type ] = new RegExp( Expr.match[ type ].source + (/(?![^\\[]*\\])(?![^\\(]*\\))/.source) );\n\tExpr.leftMatch[ type ] = new RegExp( /(^(?:.|\\r|\\n)*?)/.source + Expr.match[ type ].source.replace(/\\\\(\\d+)/g, fescape) );\n}\n\nvar makeArray = function(array, results) {\n\tarray = Array.prototype.slice.call( array, 0 );\n\n\tif ( results ) {\n\t\tresults.push.apply( results, array );\n\t\treturn results;\n\t}\n\t\n\treturn array;\n};\n\n// Perform a simple check to determine if the browser is capable of\n// converting a NodeList to an array using builtin methods.\n// Also verifies that the returned array holds DOM nodes\n// (which is not the case in the Blackberry browser)\ntry {\n\tArray.prototype.slice.call( document.documentElement.childNodes, 0 )[0].nodeType;\n\n// Provide a fallback method if it does not work\n} catch(e){\n\tmakeArray = function(array, results) {\n\t\tvar ret = results || [], i = 0;\n\n\t\tif ( toString.call(array) === \"[object Array]\" ) {\n\t\t\tArray.prototype.push.apply( ret, array );\n\t\t} else {\n\t\t\tif ( typeof array.length === \"number\" ) {\n\t\t\t\tfor ( var l = array.length; i < l; i++ ) {\n\t\t\t\t\tret.push( array[i] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor ( ; array[i]; i++ ) {\n\t\t\t\t\tret.push( array[i] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\t};\n}\n\nvar sortOrder;\n\nif ( document.documentElement.compareDocumentPosition ) {\n\tsortOrder = function( a, b ) {\n\t\tif ( !a.compareDocumentPosition || !b.compareDocumentPosition ) {\n\t\t\tif ( a == b ) {\n\t\t\t\thasDuplicate = true;\n\t\t\t}\n\t\t\treturn a.compareDocumentPosition ? -1 : 1;\n\t\t}\n\n\t\tvar ret = a.compareDocumentPosition(b) & 4 ? -1 : a === b ? 0 : 1;\n\t\tif ( ret === 0 ) {\n\t\t\thasDuplicate = true;\n\t\t}\n\t\treturn ret;\n\t};\n} else if ( \"sourceIndex\" in document.documentElement ) {\n\tsortOrder = function( a, b ) {\n\t\tif ( !a.sourceIndex || !b.sourceIndex ) {\n\t\t\tif ( a == b ) {\n\t\t\t\thasDuplicate = true;\n\t\t\t}\n\t\t\treturn a.sourceIndex ? -1 : 1;\n\t\t}\n\n\t\tvar ret = a.sourceIndex - b.sourceIndex;\n\t\tif ( ret === 0 ) {\n\t\t\thasDuplicate = true;\n\t\t}\n\t\treturn ret;\n\t};\n} else if ( document.createRange ) {\n\tsortOrder = function( a, b ) {\n\t\tif ( !a.ownerDocument || !b.ownerDocument ) {\n\t\t\tif ( a == b ) {\n\t\t\t\thasDuplicate = true;\n\t\t\t}\n\t\t\treturn a.ownerDocument ? -1 : 1;\n\t\t}\n\n\t\tvar aRange = a.ownerDocument.createRange(), bRange = b.ownerDocument.createRange();\n\t\taRange.setStart(a, 0);\n\t\taRange.setEnd(a, 0);\n\t\tbRange.setStart(b, 0);\n\t\tbRange.setEnd(b, 0);\n\t\tvar ret = aRange.compareBoundaryPoints(Range.START_TO_END, bRange);\n\t\tif ( ret === 0 ) {\n\t\t\thasDuplicate = true;\n\t\t}\n\t\treturn ret;\n\t};\n}\n\n// Utility function for retreiving the text value of an array of DOM nodes\nSizzle.getText = function( elems ) {\n\tvar ret = \"\", elem;\n\n\tfor ( var i = 0; elems[i]; i++ ) {\n\t\telem = elems[i];\n\n\t\t// Get the text from text nodes and CDATA nodes\n\t\tif ( elem.nodeType === 3 || elem.nodeType === 4 ) {\n\t\t\tret += elem.nodeValue;\n\n\t\t// Traverse everything else, except comment nodes\n\t\t} else if ( elem.nodeType !== 8 ) {\n\t\t\tret += Sizzle.getText( elem.childNodes );\n\t\t}\n\t}\n\n\treturn ret;\n};\n\n// Check to see if the browser returns elements by name when\n// querying by getElementById (and provide a workaround)\n(function(){\n\t// We're going to inject a fake input element with a specified name\n\tvar form = document.createElement(\"div\"),\n\t\tid = \"script\" + (new Date()).getTime();\n\tform.innerHTML = \"<a name='\" + id + \"'/>\";\n\n\t// Inject it into the root element, check its status, and remove it quickly\n\tvar root = document.documentElement;\n\troot.insertBefore( form, root.firstChild );\n\n\t// The workaround has to do additional checks after a getElementById\n\t// Which slows things down for other browsers (hence the branching)\n\tif ( document.getElementById( id ) ) {\n\t\tExpr.find.ID = function(match, context, isXML){\n\t\t\tif ( typeof context.getElementById !== \"undefined\" && !isXML ) {\n\t\t\t\tvar m = context.getElementById(match[1]);\n\t\t\t\treturn m ? m.id === match[1] || typeof m.getAttributeNode !== \"undefined\" && m.getAttributeNode(\"id\").nodeValue === match[1] ? [m] : undefined : [];\n\t\t\t}\n\t\t};\n\n\t\tExpr.filter.ID = function(elem, match){\n\t\t\tvar node = typeof elem.getAttributeNode !== \"undefined\" && elem.getAttributeNode(\"id\");\n\t\t\treturn elem.nodeType === 1 && node && node.nodeValue === match;\n\t\t};\n\t}\n\n\troot.removeChild( form );\n\troot = form = null; // release memory in IE\n})();\n\n(function(){\n\t// Check to see if the browser returns only elements\n\t// when doing getElementsByTagName(\"*\")\n\n\t// Create a fake element\n\tvar div = document.createElement(\"div\");\n\tdiv.appendChild( document.createComment(\"\") );\n\n\t// Make sure no comments are found\n\tif ( div.getElementsByTagName(\"*\").length > 0 ) {\n\t\tExpr.find.TAG = function(match, context){\n\t\t\tvar results = context.getElementsByTagName(match[1]);\n\n\t\t\t// Filter out possible comments\n\t\t\tif ( match[1] === \"*\" ) {\n\t\t\t\tvar tmp = [];\n\n\t\t\t\tfor ( var i = 0; results[i]; i++ ) {\n\t\t\t\t\tif ( results[i].nodeType === 1 ) {\n\t\t\t\t\t\ttmp.push( results[i] );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tresults = tmp;\n\t\t\t}\n\n\t\t\treturn results;\n\t\t};\n\t}\n\n\t// Check to see if an attribute returns normalized href attributes\n\tdiv.innerHTML = \"<a href='#'></a>\";\n\tif ( div.firstChild && typeof div.firstChild.getAttribute !== \"undefined\" &&\n\t\t\tdiv.firstChild.getAttribute(\"href\") !== \"#\" ) {\n\t\tExpr.attrHandle.href = function(elem){\n\t\t\treturn elem.getAttribute(\"href\", 2);\n\t\t};\n\t}\n\n\tdiv = null; // release memory in IE\n})();\n\nif ( document.querySelectorAll ) {\n\t(function(){\n\t\tvar oldSizzle = Sizzle, div = document.createElement(\"div\");\n\t\tdiv.innerHTML = \"<p class='TEST'></p>\";\n\n\t\t// Safari can't handle uppercase or unicode characters when\n\t\t// in quirks mode.\n\t\tif ( div.querySelectorAll && div.querySelectorAll(\".TEST\").length === 0 ) {\n\t\t\treturn;\n\t\t}\n\t\n\t\tSizzle = function(query, context, extra, seed){\n\t\t\tcontext = context || document;\n\n\t\t\t// Only use querySelectorAll on non-XML documents\n\t\t\t// (ID selectors don't work in non-HTML documents)\n\t\t\tif ( !seed && context.nodeType === 9 && !Sizzle.isXML(context) ) {\n\t\t\t\ttry {\n\t\t\t\t\treturn makeArray( context.querySelectorAll(query), extra );\n\t\t\t\t} catch(e){}\n\t\t\t}\n\t\t\n\t\t\treturn oldSizzle(query, context, extra, seed);\n\t\t};\n\n\t\tfor ( var prop in oldSizzle ) {\n\t\t\tSizzle[ prop ] = oldSizzle[ prop ];\n\t\t}\n\n\t\tdiv = null; // release memory in IE\n\t})();\n}\n\n(function(){\n\tvar div = document.createElement(\"div\");\n\n\tdiv.innerHTML = \"<div class='test e'></div><div class='test'></div>\";\n\n\t// Opera can't find a second classname (in 9.6)\n\t// Also, make sure that getElementsByClassName actually exists\n\tif ( !div.getElementsByClassName || div.getElementsByClassName(\"e\").length === 0 ) {\n\t\treturn;\n\t}\n\n\t// Safari caches class attributes, doesn't catch changes (in 3.2)\n\tdiv.lastChild.className = \"e\";\n\n\tif ( div.getElementsByClassName(\"e\").length === 1 ) {\n\t\treturn;\n\t}\n\t\n\tExpr.order.splice(1, 0, \"CLASS\");\n\tExpr.find.CLASS = function(match, context, isXML) {\n\t\tif ( typeof context.getElementsByClassName !== \"undefined\" && !isXML ) {\n\t\t\treturn context.getElementsByClassName(match[1]);\n\t\t}\n\t};\n\n\tdiv = null; // release memory in IE\n})();\n\nfunction dirNodeCheck( dir, cur, doneName, checkSet, nodeCheck, isXML ) {\n\tfor ( var i = 0, l = checkSet.length; i < l; i++ ) {\n\t\tvar elem = checkSet[i];\n\t\tif ( elem ) {\n\t\t\telem = elem[dir];\n\t\t\tvar match = false;\n\n\t\t\twhile ( elem ) {\n\t\t\t\tif ( elem.sizcache === doneName ) {\n\t\t\t\t\tmatch = checkSet[elem.sizset];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif ( elem.nodeType === 1 && !isXML ){\n\t\t\t\t\telem.sizcache = doneName;\n\t\t\t\t\telem.sizset = i;\n\t\t\t\t}\n\n\t\t\t\tif ( elem.nodeName.toLowerCase() === cur ) {\n\t\t\t\t\tmatch = elem;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\telem = elem[dir];\n\t\t\t}\n\n\t\t\tcheckSet[i] = match;\n\t\t}\n\t}\n}\n\nfunction dirCheck( dir, cur, doneName, checkSet, nodeCheck, isXML ) {\n\tfor ( var i = 0, l = checkSet.length; i < l; i++ ) {\n\t\tvar elem = checkSet[i];\n\t\tif ( elem ) {\n\t\t\telem = elem[dir];\n\t\t\tvar match = false;\n\n\t\t\twhile ( elem ) {\n\t\t\t\tif ( elem.sizcache === doneName ) {\n\t\t\t\t\tmatch = checkSet[elem.sizset];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\tif ( !isXML ) {\n\t\t\t\t\t\telem.sizcache = doneName;\n\t\t\t\t\t\telem.sizset = i;\n\t\t\t\t\t}\n\t\t\t\t\tif ( typeof cur !== \"string\" ) {\n\t\t\t\t\t\tif ( elem === cur ) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( Sizzle.filter( cur, [elem] ).length > 0 ) {\n\t\t\t\t\t\tmatch = elem;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\telem = elem[dir];\n\t\t\t}\n\n\t\t\tcheckSet[i] = match;\n\t\t}\n\t}\n}\n\nSizzle.contains = document.compareDocumentPosition ? function(a, b){\n\treturn !!(a.compareDocumentPosition(b) & 16);\n} : function(a, b){\n\treturn a !== b && (a.contains ? a.contains(b) : true);\n};\n\nSizzle.isXML = function(elem){\n\t// documentElement is verified for cases where it doesn't yet exist\n\t// (such as loading iframes in IE - #4833) \n\tvar documentElement = (elem ? elem.ownerDocument || elem : 0).documentElement;\n\treturn documentElement ? documentElement.nodeName !== \"HTML\" : false;\n};\n\nvar posProcess = function(selector, context){\n\tvar tmpSet = [], later = \"\", match,\n\t\troot = context.nodeType ? [context] : context;\n\n\t// Position selectors must be done after the filter\n\t// And so must :not(positional) so we move all PSEUDOs to the end\n\twhile ( (match = Expr.match.PSEUDO.exec( selector )) ) {\n\t\tlater += match[0];\n\t\tselector = selector.replace( Expr.match.PSEUDO, \"\" );\n\t}\n\n\tselector = Expr.relative[selector] ? selector + \"*\" : selector;\n\n\tfor ( var i = 0, l = root.length; i < l; i++ ) {\n\t\tSizzle( selector, root[i], tmpSet );\n\t}\n\n\treturn Sizzle.filter( later, tmpSet );\n};\n\n// EXPOSE\n\nwindow.tinymce.dom.Sizzle = Sizzle;\n\n})();\n\n// #endif\n","Magento_Tinymce3/tiny_mce/classes/dom/RangeUtils.js":"/**\n * Range.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n\ttinymce.dom.RangeUtils = function(dom) {\n\t\tvar INVISIBLE_CHAR = '\\uFEFF';\n\n\t\t/**\n\t\t * Walks the specified range like object and executes the callback for each sibling collection it finds.\n\t\t *\n\t\t * @param {Object} rng Range like object.\n\t\t * @param {function} callback Callback function to execute for each sibling collection.\n\t\t */\n\t\tthis.walk = function(rng, callback) {\n\t\t\tvar startContainer = rng.startContainer,\n\t\t\t\tstartOffset = rng.startOffset,\n\t\t\t\tendContainer = rng.endContainer,\n\t\t\t\tendOffset = rng.endOffset,\n\t\t\t\tancestor, startPoint,\n\t\t\t\tendPoint, node, parent, siblings, nodes;\n\n\t\t\t// Handle table cell selection the table plugin enables\n\t\t\t// you to fake select table cells and perform formatting actions on them\n\t\t\tnodes = dom.select('td.mceSelected,th.mceSelected');\n\t\t\tif (nodes.length > 0) {\n\t\t\t\ttinymce.each(nodes, function(node) {\n\t\t\t\t\tcallback([node]);\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Excludes start/end text node if they are out side the range\n\t\t\t *\n\t\t\t * @private\n\t\t\t * @param {Array} nodes Nodes to exclude items from.\n\t\t\t * @return {Array} Array with nodes excluding the start/end container if needed.\n\t\t\t */\n\t\t\tfunction exclude(nodes) {\n\t\t\t\tvar node;\n\n\t\t\t\t// First node is excluded\n\t\t\t\tnode = nodes[0];\n\t\t\t\tif (node.nodeType === 3 && node === startContainer && startOffset >= node.nodeValue.length) {\n\t\t\t\t\tnodes.splice(0, 1);\n\t\t\t\t}\n\n\t\t\t\t// Last node is excluded\n\t\t\t\tnode = nodes[nodes.length - 1];\n\t\t\t\tif (endOffset === 0 && nodes.length > 0 && node === endContainer && node.nodeType === 3) {\n\t\t\t\t\tnodes.splice(nodes.length - 1, 1);\n\t\t\t\t}\n\n\t\t\t\treturn nodes;\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Collects siblings\n\t\t\t *\n\t\t\t * @private\n\t\t\t * @param {Node} node Node to collect siblings from.\n\t\t\t * @param {String} name Name of the sibling to check for.\n\t\t\t * @return {Array} Array of collected siblings.\n\t\t\t */\n\t\t\tfunction collectSiblings(node, name, end_node) {\n\t\t\t\tvar siblings = [];\n\n\t\t\t\tfor (; node && node != end_node; node = node[name])\n\t\t\t\t\tsiblings.push(node);\n\n\t\t\t\treturn siblings;\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Find an end point this is the node just before the common ancestor root.\n\t\t\t *\n\t\t\t * @private\n\t\t\t * @param {Node} node Node to start at.\n\t\t\t * @param {Node} root Root/ancestor element to stop just before.\n\t\t\t * @return {Node} Node just before the root element.\n\t\t\t */\n\t\t\tfunction findEndPoint(node, root) {\n\t\t\t\tdo {\n\t\t\t\t\tif (node.parentNode == root)\n\t\t\t\t\t\treturn node;\n\n\t\t\t\t\tnode = node.parentNode;\n\t\t\t\t} while(node);\n\t\t\t};\n\n\t\t\tfunction walkBoundary(start_node, end_node, next) {\n\t\t\t\tvar siblingName = next ? 'nextSibling' : 'previousSibling';\n\n\t\t\t\tfor (node = start_node, parent = node.parentNode; node && node != end_node; node = parent) {\n\t\t\t\t\tparent = node.parentNode;\n\t\t\t\t\tsiblings = collectSiblings(node == start_node ? node : node[siblingName], siblingName);\n\n\t\t\t\t\tif (siblings.length) {\n\t\t\t\t\t\tif (!next)\n\t\t\t\t\t\t\tsiblings.reverse();\n\n\t\t\t\t\t\tcallback(exclude(siblings));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// If index based start position then resolve it\n\t\t\tif (startContainer.nodeType == 1 && startContainer.hasChildNodes())\n\t\t\t\tstartContainer = startContainer.childNodes[startOffset];\n\n\t\t\t// If index based end position then resolve it\n\t\t\tif (endContainer.nodeType == 1 && endContainer.hasChildNodes())\n\t\t\t\tendContainer = endContainer.childNodes[Math.min(endOffset - 1, endContainer.childNodes.length - 1)];\n\n\t\t\t// Same container\n\t\t\tif (startContainer == endContainer)\n\t\t\t\treturn callback(exclude([startContainer]));\n\n\t\t\t// Find common ancestor and end points\n\t\t\tancestor = dom.findCommonAncestor(startContainer, endContainer);\n\t\t\t\t\n\t\t\t// Process left side\n\t\t\tfor (node = startContainer; node; node = node.parentNode) {\n\t\t\t\tif (node === endContainer)\n\t\t\t\t\treturn walkBoundary(startContainer, ancestor, true);\n\n\t\t\t\tif (node === ancestor)\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Process right side\n\t\t\tfor (node = endContainer; node; node = node.parentNode) {\n\t\t\t\tif (node === startContainer)\n\t\t\t\t\treturn walkBoundary(endContainer, ancestor);\n\n\t\t\t\tif (node === ancestor)\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Find start/end point\n\t\t\tstartPoint = findEndPoint(startContainer, ancestor) || startContainer;\n\t\t\tendPoint = findEndPoint(endContainer, ancestor) || endContainer;\n\n\t\t\t// Walk left leaf\n\t\t\twalkBoundary(startContainer, startPoint, true);\n\n\t\t\t// Walk the middle from start to end point\n\t\t\tsiblings = collectSiblings(\n\t\t\t\tstartPoint == startContainer ? startPoint : startPoint.nextSibling,\n\t\t\t\t'nextSibling',\n\t\t\t\tendPoint == endContainer ? endPoint.nextSibling : endPoint\n\t\t\t);\n\n\t\t\tif (siblings.length)\n\t\t\t\tcallback(exclude(siblings));\n\n\t\t\t// Walk right leaf\n\t\t\twalkBoundary(endContainer, endPoint);\n\t\t};\n\n\t\t/**\n\t\t * Splits the specified range at it's start/end points.\n\t\t *\n\t\t * @param {Range/RangeObject} rng Range to split.\n\t\t * @return {Object} Range position object.\n\t\t */\n\t\tthis.split = function(rng) {\n\t\t\tvar startContainer = rng.startContainer,\n\t\t\t\tstartOffset = rng.startOffset,\n\t\t\t\tendContainer = rng.endContainer,\n\t\t\t\tendOffset = rng.endOffset;\n\n\t\t\tfunction splitText(node, offset) {\n\t\t\t\treturn node.splitText(offset);\n\t\t\t};\n\n\t\t\t// Handle single text node\n\t\t\tif (startContainer == endContainer && startContainer.nodeType == 3) {\n\t\t\t\tif (startOffset > 0 && startOffset < startContainer.nodeValue.length) {\n\t\t\t\t\tendContainer = splitText(startContainer, startOffset);\n\t\t\t\t\tstartContainer = endContainer.previousSibling;\n\n\t\t\t\t\tif (endOffset > startOffset) {\n\t\t\t\t\t\tendOffset = endOffset - startOffset;\n\t\t\t\t\t\tstartContainer = endContainer = splitText(endContainer, endOffset).previousSibling;\n\t\t\t\t\t\tendOffset = endContainer.nodeValue.length;\n\t\t\t\t\t\tstartOffset = 0;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tendOffset = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Split startContainer text node if needed\n\t\t\t\tif (startContainer.nodeType == 3 && startOffset > 0 && startOffset < startContainer.nodeValue.length) {\n\t\t\t\t\tstartContainer = splitText(startContainer, startOffset);\n\t\t\t\t\tstartOffset = 0;\n\t\t\t\t}\n\n\t\t\t\t// Split endContainer text node if needed\n\t\t\t\tif (endContainer.nodeType == 3 && endOffset > 0 && endOffset < endContainer.nodeValue.length) {\n\t\t\t\t\tendContainer = splitText(endContainer, endOffset).previousSibling;\n\t\t\t\t\tendOffset = endContainer.nodeValue.length;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tstartContainer : startContainer,\n\t\t\t\tstartOffset : startOffset,\n\t\t\t\tendContainer : endContainer,\n\t\t\t\tendOffset : endOffset\n\t\t\t};\n\t\t};\n\n\t};\n\n\t/**\n\t * Compares two ranges and checks if they are equal.\n\t *\n\t * @static\n\t * @param {DOMRange} rng1 First range to compare.\n\t * @param {DOMRange} rng2 First range to compare.\n\t * @return {Boolean} true/false if the ranges are equal.\n\t */\n\ttinymce.dom.RangeUtils.compareRanges = function(rng1, rng2) {\n\t\tif (rng1 && rng2) {\n\t\t\t// Compare native IE ranges\n\t\t\tif (rng1.item || rng1.duplicate) {\n\t\t\t\t// Both are control ranges and the selected element matches\n\t\t\t\tif (rng1.item && rng2.item && rng1.item(0) === rng2.item(0))\n\t\t\t\t\treturn true;\n\n\t\t\t\t// Both are text ranges and the range matches\n\t\t\t\tif (rng1.isEqual && rng2.isEqual && rng2.isEqual(rng1))\n\t\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\t// Compare w3c ranges\n\t\t\t\treturn rng1.startContainer == rng2.startContainer && rng1.startOffset == rng2.startOffset;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n})(tinymce);\n","Magento_Tinymce3/tiny_mce/classes/xml/Parser.js":"/**\n * Parser.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function() {\n\t/**\n\t * XML Parser class. This class is only available for the dev version of TinyMCE.\n\t */\n\ttinymce.create('tinymce.xml.Parser', {\n\t\t/**\n\t\t * Constucts a new XML parser instance.\n\t\t *\n\t\t * @param {Object} Optional settings object.\n\t\t */\n\t\tParser : function(s) {\n\t\t\tthis.settings = tinymce.extend({\n\t\t\t\tasync : true\n\t\t\t}, s);\n\t\t},\n\n\t\t/**\n\t\t * Parses the specified document and executed the callback ones it's parsed.\n\t\t *\n\t\t * @param {String} u URL to XML file to parse.\n\t\t * @param {function} cb Optional callback to execute ones the XML file is loaded.\n\t\t * @param {Object} s Optional scope for the callback execution.\n\t\t */\n\t\tload : function(u, cb, s) {\n\t\t\tvar doc, t, w = window, c = 0;\n\n\t\t\ts = s || this;\n\n\t\t\t// Explorer, use XMLDOM since it can be used on local fs\n\t\t\tif (window.ActiveXObject) {\n\t\t\t\tdoc = new ActiveXObject(\"Microsoft.XMLDOM\");\n\t\t\t\tdoc.async = this.settings.async;\n\n\t\t\t\t// Wait for response\n\t\t\t\tif (doc.async) {\n\t\t\t\t\tfunction check() {\n\t\t\t\t\t\tif (doc.readyState == 4 || c++ > 10000)\n\t\t\t\t\t\t\treturn cb.call(s, doc);\n\n\t\t\t\t\t\tw.setTimeout(check, 10);\n\t\t\t\t\t};\n\n\t\t\t\t\tt = w.setTimeout(check, 10);\n\t\t\t\t}\n\n\t\t\t\tdoc.load(u);\n\n\t\t\t\tif (!doc.async)\n\t\t\t\t\tcb.call(s, doc);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// W3C using XMLHttpRequest\n\t\t\tif (window.XMLHttpRequest) {\n\t\t\t\ttry {\n\t\t\t\t\tdoc = new window.XMLHttpRequest();\n\t\t\t\t\tdoc.open('GET', u, this.settings.async);\n\t\t\t\t\tdoc.async = this.settings.async;\n\n\t\t\t\t\tdoc.onload = function() {\n\t\t\t\t\t\tcb.call(s, doc.responseXML);\n\t\t\t\t\t};\n\n\t\t\t\t\tdoc.send('');\n\t\t\t\t} catch (ex) {\n\t\t\t\t\tcb.call(s, null, ex);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Parses the specified XML string.\n\t\t *\n\t\t * @param {String} xml XML String to parse.\n\t\t * @return {Document} XML Document instance.\n\t\t */\n\t\tloadXML : function(xml) {\n\t\t\tvar doc;\n\n\t\t\t// W3C\n\t\t\tif (window.DOMParser)\n\t\t\t\treturn new DOMParser().parseFromString(xml, \"text/xml\");\n\n\t\t\t// Explorer\n\t\t\tif (window.ActiveXObject) {\n\t\t\t\tdoc = new ActiveXObject(\"Microsoft.XMLDOM\");\n\t\t\t\tdoc.async = \"false\";\n\t\t\t\tdoc.loadXML(xml);\n\n\t\t\t\treturn doc;\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Returns all string contents of a element concated together.\n\t\t *\n\t\t * @param {XMLNode} el XML element to retrieve text from.\n\t\t * @return {string} XML element text contents.\n\t\t */\n\t\tgetText : function(el) {\n\t\t\tvar o = '';\n\n\t\t\tif (!el)\n\t\t\t\treturn '';\n\n\t\t\tif (el.hasChildNodes()) {\n\t\t\t\tel = el.firstChild;\n\n\t\t\t\tdo {\n\t\t\t\t\tif (el.nodeType == 3 || el.nodeType == 4)\n\t\t\t\t\t\to += el.nodeValue;\n\t\t\t\t} while(el = el.nextSibling);\n\t\t\t}\n\n\t\t\treturn o;\n\t\t}\n\t});\n})();\n","Magento_Tinymce3/tiny_mce/classes/adapter/jquery/jquery.tinymce.js":"/**\n * jquery.tinymce.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function($) {\n\tvar undefined,\n\t\tlazyLoading,\n\t\tdelayedInits = [],\n\t\twin = window;\n\n\t$.fn.tinymce = function(settings) {\n\t\tvar self = this, url, ed, base, pos, lang, query = \"\", suffix = \"\";\n\n\t\t// No match then just ignore the call\n\t\tif (!self.length)\n\t\t\treturn self;\n\n\t\t// Get editor instance\n\t\tif (!settings)\n\t\t\treturn tinyMCE.get(self[0].id);\n\n\t\tself.css('visibility', 'hidden'); // Hide textarea to avoid flicker\n\n\t\tfunction init() {\n\t\t\tvar editors = [], initCount = 0;\n\n\t\t\t// Apply patches to the jQuery object, only once\n\t\t\tif (applyPatch) {\n\t\t\t\tapplyPatch();\n\t\t\t\tapplyPatch = null;\n\t\t\t}\n\n\t\t\t// Create an editor instance for each matched node\n\t\t\tself.each(function(i, node) {\n\t\t\t\tvar ed, id = node.id, oninit = settings.oninit;\n\n\t\t\t\t// Generate unique id for target element if needed\n\t\t\t\tif (!id)\n\t\t\t\t\tnode.id = id = tinymce.DOM.uniqueId();\n\n\t\t\t\t// Create editor instance and render it\n\t\t\t\ted = new tinymce.Editor(id, settings);\n\t\t\t\teditors.push(ed);\n\n\t\t\t\ted.onInit.add(function() {\n\t\t\t\t\tvar scope, func = oninit;\n\n\t\t\t\t\tself.css('visibility', '');\n\n\t\t\t\t\t// Run this if the oninit setting is defined\n\t\t\t\t\t// this logic will fire the oninit callback ones each\n\t\t\t\t\t// matched editor instance is initialized\n\t\t\t\t\tif (oninit) {\n\t\t\t\t\t\t// Fire the oninit event ones each editor instance is initialized\n\t\t\t\t\t\tif (++initCount == editors.length) {\n\t\t\t\t\t\t\tif (tinymce.is(func, \"string\")) {\n\t\t\t\t\t\t\t\tscope = (func.indexOf(\".\") === -1) ? null : tinymce.resolve(func.replace(/\\.\\w+$/, \"\"));\n\t\t\t\t\t\t\t\tfunc = tinymce.resolve(func);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Call the oninit function with the object\n\t\t\t\t\t\t\tfunc.apply(scope || tinymce, editors);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Render the editor instances in a separate loop since we\n\t\t\t// need to have the full editors array used in the onInit calls\n\t\t\t$.each(editors, function(i, ed) {\n\t\t\t\ted.render();\n\t\t\t});\n\t\t}\n\n\t\t// Load TinyMCE on demand, if we need to\n\t\tif (!win[\"tinymce\"] && !lazyLoading && (url = settings.script_url)) {\n\t\t\tlazyLoading = 1;\n\t\t\tbase = url.substring(0, url.lastIndexOf(\"/\"));\n\n\t\t\t// Check if it's a dev/src version they want to load then\n\t\t\t// make sure that all plugins, themes etc are loaded in source mode aswell\n\t\t\tif (/_(src|dev)\\.js/g.test(url))\n\t\t\t\tsuffix = \"_src\";\n\n\t\t\t// Parse out query part, this will be appended to all scripts, css etc to clear browser cache\n\t\t\tpos = url.lastIndexOf(\"?\");\n\t\t\tif (pos != -1)\n\t\t\t\tquery = url.substring(pos + 1);\n\n\t\t\t// Setup tinyMCEPreInit object this will later be used by the TinyMCE\n\t\t\t// core script to locate other resources like CSS files, dialogs etc\n\t\t\t// You can also predefined a tinyMCEPreInit object and then it will use that instead\n\t\t\twin.tinyMCEPreInit = win.tinyMCEPreInit || {\n\t\t\t\tbase : base,\n\t\t\t\tsuffix : suffix,\n\t\t\t\tquery : query\n\t\t\t};\n\n\t\t\t// url contains gzip then we assume it's a compressor\n\t\t\tif (url.indexOf('gzip') != -1) {\n\t\t\t\tlang = settings.language || \"en\";\n\t\t\t\turl = url + (/\\?/.test(url) ? '&' : '?') + \"js=true&core=true&suffix=\" + escape(suffix) + \"&themes=\" + escape(settings.theme) + \"&plugins=\" + escape(settings.plugins) + \"&languages=\" + lang;\n\n\t\t\t\t// Check if compressor script is already loaded otherwise setup a basic one\n\t\t\t\tif (!win[\"tinyMCE_GZ\"]) {\n\t\t\t\t\ttinyMCE_GZ = {\n\t\t\t\t\t\tstart : function() {\n\t\t\t\t\t\t\ttinymce.suffix = suffix;\n\n\t\t\t\t\t\t\tfunction load(url) {\n\t\t\t\t\t\t\t\ttinymce.ScriptLoader.markDone(tinyMCE.baseURI.toAbsolute(url));\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Add core languages\n\t\t\t\t\t\t\tload(\"langs/\" + lang + \".js\");\n\n\t\t\t\t\t\t\t// Add themes with languages\n\t\t\t\t\t\t\tload(\"themes/\" + settings.theme + \"/editor_template\" + suffix + \".js\");\n\t\t\t\t\t\t\tload(\"themes/\" + settings.theme + \"/langs/\" + lang + \".js\");\n\n\t\t\t\t\t\t\t// Add plugins with languages\n\t\t\t\t\t\t\t$.each(settings.plugins.split(\",\"), function(i, name) {\n\t\t\t\t\t\t\t\tif (name) {\n\t\t\t\t\t\t\t\t\tload(\"plugins/\" + name + \"/editor_plugin\" + suffix + \".js\");\n\t\t\t\t\t\t\t\t\tload(\"plugins/\" + name + \"/langs/\" + lang + \".js\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tend : function() {\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Load the script cached and execute the inits once it's done\n\t\t\t$.ajax({\n\t\t\t\ttype : \"GET\",\n\t\t\t\turl : url,\n\t\t\t\tdataType : \"script\",\n\t\t\t\tcache : true,\n\t\t\t\tsuccess : function() {\n\t\t\t\t\ttinymce.dom.Event.domLoaded = 1;\n\t\t\t\t\tlazyLoading = 2;\n\n\t\t\t\t\t// Execute callback after mainscript has been loaded and before the initialization occurs\n\t\t\t\t\tif (settings.script_loaded)\n\t\t\t\t\t\tsettings.script_loaded();\n\n\t\t\t\t\tinit();\n\n\t\t\t\t\t$.each(delayedInits, function(i, init) {\n\t\t\t\t\t\tinit();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\t// Delay the init call until tinymce is loaded\n\t\t\tif (lazyLoading === 1)\n\t\t\t\tdelayedInits.push(init);\n\t\t\telse\n\t\t\t\tinit();\n\t\t}\n\n\t\treturn self;\n\t};\n\n\t// Add :tinymce psuedo selector this will select elements that has been converted into editor instances\n\t// it's now possible to use things like $('*:tinymce') to get all TinyMCE bound elements.\n\t$.extend($.expr[\":\"], {\n\t\ttinymce : function(e) {\n\t\t\treturn e.id && !!tinyMCE.get(e.id);\n\t\t}\n\t});\n\n\t// This function patches internal jQuery functions so that if\n\t// you for example remove an div element containing an editor it's\n\t// automatically destroyed by the TinyMCE API\n\tfunction applyPatch() {\n\t\t// Removes any child editor instances by looking for editor wrapper elements\n\t\tfunction removeEditors(name) {\n\t\t\t// If the function is remove\n\t\t\tif (name === \"remove\") {\n\t\t\t\tthis.each(function(i, node) {\n\t\t\t\t\tvar ed = tinyMCEInstance(node);\n\n\t\t\t\t\tif (ed)\n\t\t\t\t\t\ted.remove();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.find(\"span.mceEditor,div.mceEditor\").each(function(i, node) {\n\t\t\t\tvar ed = tinyMCE.get(node.id.replace(/_parent$/, \"\"));\n\n\t\t\t\tif (ed)\n\t\t\t\t\ted.remove();\n\t\t\t});\n\t\t}\n\n\t\t// Loads or saves contents from/to textarea if the value\n\t\t// argument is defined it will set the TinyMCE internal contents\n\t\tfunction loadOrSave(value) {\n\t\t\tvar self = this, ed;\n\n\t\t\t// Handle set value\n\t\t\tif (value !== undefined) {\n\t\t\t\tremoveEditors.call(self);\n\n\t\t\t\t// Saves the contents before get/set value of textarea/div\n\t\t\t\tself.each(function(i, node) {\n\t\t\t\t\tvar ed;\n\n\t\t\t\t\tif (ed = tinyMCE.get(node.id))\n\t\t\t\t\t\ted.setContent(value);\n\t\t\t\t});\n\t\t\t} else if (self.length > 0) {\n\t\t\t\t// Handle get value\n\t\t\t\tif (ed = tinyMCE.get(self[0].id))\n\t\t\t\t\treturn ed.getContent();\n\t\t\t}\n\t\t}\n\n\t\t// Returns tinymce instance for the specified element or null if it wasn't found\n\t\tfunction tinyMCEInstance(element) {\n\t\t\tvar ed = null;\n\n\t\t\t(element) && (element.id) && (win[\"tinymce\"]) && (ed = tinyMCE.get(element.id));\n\n\t\t\treturn ed;\n\t\t}\n\n\t\t// Checks if the specified set contains tinymce instances\n\t\tfunction containsTinyMCE(matchedSet) {\n\t\t\treturn !!((matchedSet) && (matchedSet.length) && (win[\"tinymce\"]) && (matchedSet.is(\":tinymce\")));\n\t\t}\n\n\t\t// Patch various jQuery functions\n\t\tvar jQueryFn = {};\n\n\t\t// Patch some setter/getter functions these will\n\t\t// now be able to set/get the contents of editor instances for\n\t\t// example $('#editorid').html('Content'); will update the TinyMCE iframe instance\n\t\t$.each([\"text\", \"html\", \"val\"], function(i, name) {\n\t\t\tvar origFn = jQueryFn[name] = $.fn[name],\n\t\t\t\ttextProc = (name === \"text\");\n\n\t\t\t $.fn[name] = function(value) {\n\t\t\t\tvar self = this;\n\n\t\t\t\tif (!containsTinyMCE(self))\n\t\t\t\t\treturn origFn.apply(self, arguments);\n\n\t\t\t\tif (value !== undefined) {\n\t\t\t\t\tloadOrSave.call(self.filter(\":tinymce\"), value);\n\t\t\t\t\torigFn.apply(self.not(\":tinymce\"), arguments);\n\n\t\t\t\t\treturn self; // return original set for chaining\n\t\t\t\t} else {\n\t\t\t\t\tvar ret = \"\";\n\t\t\t\t\tvar args = arguments;\n\t\t\t\t\t\n\t\t\t\t\t(textProc ? self : self.eq(0)).each(function(i, node) {\n\t\t\t\t\t\tvar ed = tinyMCEInstance(node);\n\n\t\t\t\t\t\tret += ed ? (textProc ? ed.getContent().replace(/<(?:\"[^\"]*\"|'[^']*'|[^'\">])*>/g, \"\") : ed.getContent()) : origFn.apply($(node), args);\n\t\t\t\t\t});\n\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\t\t\t };\n\t\t});\n\n\t\t// Makes it possible to use $('#id').append(\"content\"); to append contents to the TinyMCE editor iframe\n\t\t$.each([\"append\", \"prepend\"], function(i, name) {\n\t\t\tvar origFn = jQueryFn[name] = $.fn[name],\n\t\t\t\tprepend = (name === \"prepend\");\n\n\t\t\t $.fn[name] = function(value) {\n\t\t\t\tvar self = this;\n\n\t\t\t\tif (!containsTinyMCE(self))\n\t\t\t\t\treturn origFn.apply(self, arguments);\n\n\t\t\t\tif (value !== undefined) {\n\t\t\t\t\tself.filter(\":tinymce\").each(function(i, node) {\n\t\t\t\t\t\tvar ed = tinyMCEInstance(node);\n\n\t\t\t\t\t\ted && ed.setContent(prepend ? value + ed.getContent() : ed.getContent() + value);\n\t\t\t\t\t});\n\n\t\t\t\t\torigFn.apply(self.not(\":tinymce\"), arguments);\n\n\t\t\t\t\treturn self; // return original set for chaining\n\t\t\t\t}\n\t\t\t };\n\t\t});\n\n\t\t// Makes sure that the editor instance gets properly destroyed when the parent element is removed\n\t\t$.each([\"remove\", \"replaceWith\", \"replaceAll\", \"empty\"], function(i, name) {\n\t\t\tvar origFn = jQueryFn[name] = $.fn[name];\n\n\t\t\t$.fn[name] = function() {\n\t\t\t\tremoveEditors.call(this, name);\n\n\t\t\t\treturn origFn.apply(this, arguments);\n\t\t\t};\n\t\t});\n\n\t\tjQueryFn.attr = $.fn.attr;\n\n\t\t// Makes sure that $('#tinymce_id').attr('value') gets the editors current HTML contents\n\t\t$.fn.attr = function(name, value, type) {\n\t\t\tvar self = this;\n\n\t\t\tif ((!name) || (name !== \"value\") || (!containsTinyMCE(self)))\n\t\t\t\treturn jQueryFn.attr.call(self, name, value, type);\n\n\t\t\tif (value !== undefined) {\n\t\t\t\tloadOrSave.call(self.filter(\":tinymce\"), value);\n\t\t\t\tjQueryFn.attr.call(self.not(\":tinymce\"), name, value, type);\n\n\t\t\t\treturn self; // return original set for chaining\n\t\t\t} else {\n\t\t\t\tvar node = self[0], ed = tinyMCEInstance(node);\n\n\t\t\t\treturn ed ? ed.getContent() : jQueryFn.attr.call($(node), name, value, type);\n\t\t\t}\n\t\t};\n\t}\n})(jQuery);","Magento_Tinymce3/tiny_mce/classes/adapter/jquery/adapter.js":"/**\n * adapter.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n// #ifdef jquery_adapter\n\n(function($, tinymce) {\n\tvar is = tinymce.is, attrRegExp = /^(href|src|style)$/i, undefined;\n\n\t// jQuery is undefined\n\tif (!$ && window.console) {\n\t\treturn console.log(\"Load jQuery first!\");\n\t}\n\n\t// Stick jQuery into the tinymce namespace\n\ttinymce.$ = $;\n\n\t// Setup adapter\n\ttinymce.adapter = {\n\t\tpatchEditor : function(editor) {\n\t\t\tvar fn = $.fn;\n\n\t\t\t// Adapt the css function to make sure that the data-mce-style\n\t\t\t// attribute gets updated with the new style information\n\t\t\tfunction css(name, value) {\n\t\t\t\tvar self = this;\n\n\t\t\t\t// Remove data-mce-style when set operation occurs\n\t\t\t\tif (value)\n\t\t\t\t\tself.removeAttr('data-mce-style');\n\n\t\t\t\treturn fn.css.apply(self, arguments);\n\t\t\t};\n\n\t\t\t// Apapt the attr function to make sure that it uses the data-mce- prefixed variants\n\t\t\tfunction attr(name, value) {\n\t\t\t\tvar self = this;\n\n\t\t\t\t// Update/retrieve data-mce- attribute variants\n\t\t\t\tif (attrRegExp.test(name)) {\n\t\t\t\t\tif (value !== undefined) {\n\t\t\t\t\t\t// Use TinyMCE behavior when setting the specifc attributes\n\t\t\t\t\t\tself.each(function(i, node) {\n\t\t\t\t\t\t\teditor.dom.setAttrib(node, name, value);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn self;\n\t\t\t\t\t} else\n\t\t\t\t\t\treturn self.attr('data-mce-' + name);\n\t\t\t\t}\n\n\t\t\t\t// Default behavior\n\t\t\t\treturn fn.attr.apply(self, arguments);\n\t\t\t};\n\n\t\t\tfunction htmlPatchFunc(func) {\n\t\t\t\t// Returns a modified function that processes\n\t\t\t\t// the HTML before executing the action this makes sure\n\t\t\t\t// that href/src etc gets moved into the data-mce- variants\n\t\t\t\treturn function(content) {\n\t\t\t\t\tif (content)\n\t\t\t\t\t\tcontent = editor.dom.processHTML(content);\n\n\t\t\t\t\treturn func.call(this, content);\n\t\t\t\t};\n\t\t\t};\n\n\t\t\t// Patch various jQuery functions to handle tinymce specific attribute and content behavior\n\t\t\t// we don't patch the jQuery.fn directly since it will most likely break compatibility\n\t\t\t// with other jQuery logic on the page. Only instances created by TinyMCE should be patched.\n\t\t\tfunction patch(jq) {\n\t\t\t\t// Patch some functions, only patch the object once\n\t\t\t\tif (jq.css !== css) {\n\t\t\t\t\t// Patch css/attr to use the data-mce- prefixed attribute variants\n\t\t\t\t\tjq.css = css;\n\t\t\t\t\tjq.attr = attr;\n\n\t\t\t\t\t// Patch HTML functions to use the DOMUtils.processHTML filter logic\n\t\t\t\t\tjq.html = htmlPatchFunc(fn.html);\n\t\t\t\t\tjq.append = htmlPatchFunc(fn.append);\n\t\t\t\t\tjq.prepend = htmlPatchFunc(fn.prepend);\n\t\t\t\t\tjq.after = htmlPatchFunc(fn.after);\n\t\t\t\t\tjq.before = htmlPatchFunc(fn.before);\n\t\t\t\t\tjq.replaceWith = htmlPatchFunc(fn.replaceWith);\n\t\t\t\t\tjq.tinymce = editor;\n\n\t\t\t\t\t// Each pushed jQuery instance needs to be patched\n\t\t\t\t\t// as well for example when traversing the DOM\n\t\t\t\t\tjq.pushStack = function() {\n\t\t\t\t\t\treturn patch(fn.pushStack.apply(this, arguments));\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn jq;\n\t\t\t};\n\n\t\t\t// Add a $ function on each editor instance this one is scoped for the editor document object\n\t\t\t// this way you can do chaining like this tinymce.get(0).$('p').append('text').css('color', 'red');\n\t\t\teditor.$ = function(selector, scope) {\n\t\t\t\tvar doc = editor.getDoc();\n\n\t\t\t\treturn patch($(selector || doc, doc || scope));\n\t\t\t};\n\t\t}\n\t};\n\n\t// Patch in core NS functions\n\ttinymce.extend = $.extend;\n\ttinymce.extend(tinymce, {\n\t\tmap : $.map,\n\t\tgrep : function(a, f) {return $.grep(a, f || function(){return 1;});},\n\t\tinArray : function(a, v) {return $.inArray(v, a || []);}\n\n\t\t/* Didn't iterate stylesheets\n\t\teach : function(o, cb, s) {\n\t\t\tif (!o)\n\t\t\t\treturn 0;\n\n\t\t\tvar r = 1;\n\n\t\t\t$.each(o, function(nr, el){\n\t\t\t\tif (cb.call(s, el, nr, o) === false) {\n\t\t\t\t\tr = 0;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn r;\n\t\t}*/\n\t});\n\n\t// Patch in functions in various clases\n\t// Add a \"#ifndefjquery\" statement around each core API function you add below\n\tvar patches = {\n\t\t'tinymce.dom.DOMUtils' : {\n\t\t\t/*\n\t\t\taddClass : function(e, c) {\n\t\t\t\tif (is(e, 'array') && is(e[0], 'string'))\n\t\t\t\t\te = e.join(',#');\n\t\t\t\treturn (e && $(is(e, 'string') ? '#' + e : e)\n\t\t\t\t\t.addClass(c)\n\t\t\t\t\t.attr('class')) || false;\n\t\t\t},\n\n\t\t\thasClass : function(n, c) {\n\t\t\t\treturn $(is(n, 'string') ? '#' + n : n).hasClass(c);\n\t\t\t},\n\n\t\t\tremoveClass : function(e, c) {\n\t\t\t\tif (!e)\n\t\t\t\t\treturn false;\n\n\t\t\t\tvar r = [];\n\n\t\t\t\t$(is(e, 'string') ? '#' + e : e)\n\t\t\t\t\t.removeClass(c)\n\t\t\t\t\t.each(function(){\n\t\t\t\t\t\tr.push(this.className);\n\t\t\t\t\t});\n\n\t\t\t\treturn r.length == 1 ? r[0] : r;\n\t\t\t},\n\t\t\t*/\n\n\t\t\tselect : function(pattern, scope) {\n\t\t\t\tvar t = this;\n\n\t\t\t\treturn $.find(pattern, t.get(scope) || t.get(t.settings.root_element) || t.doc, []);\n\t\t\t},\n\n\t\t\tis : function(n, patt) {\n\t\t\t\treturn $(this.get(n)).is(patt);\n\t\t\t}\n\n\t\t\t/*\n\t\t\tshow : function(e) {\n\t\t\t\tif (is(e, 'array') && is(e[0], 'string'))\n\t\t\t\t\te = e.join(',#');\n\n\t\t\t\t$(is(e, 'string') ? '#' + e : e).css('display', 'block');\n\t\t\t},\n\n\t\t\thide : function(e) {\n\t\t\t\tif (is(e, 'array') && is(e[0], 'string'))\n\t\t\t\t\te = e.join(',#');\n\n\t\t\t\t$(is(e, 'string') ? '#' + e : e).css('display', 'none');\n\t\t\t},\n\n\t\t\tisHidden : function(e) {\n\t\t\t\treturn $(is(e, 'string') ? '#' + e : e).is(':hidden');\n\t\t\t},\n\n\t\t\tinsertAfter : function(n, e) {\n\t\t\t\treturn $(is(e, 'string') ? '#' + e : e).after(n);\n\t\t\t},\n\n\t\t\treplace : function(o, n, k) {\n\t\t\t\tn = $(is(n, 'string') ? '#' + n : n);\n\n\t\t\t\tif (k)\n\t\t\t\t\tn.children().appendTo(o);\n\n\t\t\t\tn.replaceWith(o);\n\t\t\t},\n\n\t\t\tsetStyle : function(n, na, v) {\n\t\t\t\tif (is(n, 'array') && is(n[0], 'string'))\n\t\t\t\t\tn = n.join(',#');\n\n\t\t\t\t$(is(n, 'string') ? '#' + n : n).css(na, v);\n\t\t\t},\n\n\t\t\tgetStyle : function(n, na, c) {\n\t\t\t\treturn $(is(n, 'string') ? '#' + n : n).css(na);\n\t\t\t},\n\n\t\t\tsetStyles : function(e, o) {\n\t\t\t\tif (is(e, 'array') && is(e[0], 'string'))\n\t\t\t\t\te = e.join(',#');\n\t\t\t\t$(is(e, 'string') ? '#' + e : e).css(o);\n\t\t\t},\n\n\t\t\tsetAttrib : function(e, n, v) {\n\t\t\t\tvar t = this, s = t.settings;\n\n\t\t\t\tif (is(e, 'array') && is(e[0], 'string'))\n\t\t\t\t\te = e.join(',#');\n\n\t\t\t\te = $(is(e, 'string') ? '#' + e : e);\n\n\t\t\t\tswitch (n) {\n\t\t\t\t\tcase \"style\":\n\t\t\t\t\t\te.each(function(i, v){\n\t\t\t\t\t\t\tif (s.keep_values)\n\t\t\t\t\t\t\t\t$(v).attr('data-mce-style', v);\n\n\t\t\t\t\t\t\tv.style.cssText = v;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"class\":\n\t\t\t\t\t\te.each(function(){\n\t\t\t\t\t\t\tthis.className = v;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"src\":\n\t\t\t\t\tcase \"href\":\n\t\t\t\t\t\te.each(function(i, v){\n\t\t\t\t\t\t\tif (s.keep_values) {\n\t\t\t\t\t\t\t\tif (s.url_converter)\n\t\t\t\t\t\t\t\t\tv = s.url_converter.call(s.url_converter_scope || t, v, n, v);\n\n\t\t\t\t\t\t\t\tt.setAttrib(v, 'data-mce-' + n, v);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (v !== null && v.length !== 0)\n\t\t\t\t\te.attr(n, '' + v);\n\t\t\t\telse\n\t\t\t\t\te.removeAttr(n);\n\t\t\t},\n\n\t\t\tsetAttribs : function(e, o) {\n\t\t\t\tvar t = this;\n\n\t\t\t\t$.each(o, function(n, v){\n\t\t\t\t\tt.setAttrib(e,n,v);\n\t\t\t\t});\n\t\t\t}\n\t\t\t*/\n\t\t}\n\n/*\n\t\t'tinymce.dom.Event' : {\n\t\t\tadd : function (o, n, f, s) {\n\t\t\t\tvar lo, cb;\n\n\t\t\t\tcb = function(e) {\n\t\t\t\t\te.target = e.target || this;\n\t\t\t\t\tf.call(s || this, e);\n\t\t\t\t};\n\n\t\t\t\tif (is(o, 'array') && is(o[0], 'string'))\n\t\t\t\t\to = o.join(',#');\n\t\t\t\to = $(is(o, 'string') ? '#' + o : o);\n\t\t\t\tif (n == 'init') {\n\t\t\t\t\to.ready(cb, s);\n\t\t\t\t} else {\n\t\t\t\t\tif (s) {\n\t\t\t\t\t\to.bind(n, s, cb);\n\t\t\t\t\t} else {\n\t\t\t\t\t\to.bind(n, cb);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlo = this._jqLookup || (this._jqLookup = []);\n\t\t\t\tlo.push({func : f, cfunc : cb});\n\n\t\t\t\treturn cb;\n\t\t\t},\n\n\t\t\tremove : function(o, n, f) {\n\t\t\t\t// Find cfunc\n\t\t\t\t$(this._jqLookup).each(function() {\n\t\t\t\t\tif (this.func === f)\n\t\t\t\t\t\tf = this.cfunc;\n\t\t\t\t});\n\n\t\t\t\tif (is(o, 'array') && is(o[0], 'string'))\n\t\t\t\t\to = o.join(',#');\n\n\t\t\t\t$(is(o, 'string') ? '#' + o : o).unbind(n,f);\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n*/\n\t};\n\n\t// Patch functions after a class is created\n\ttinymce.onCreate = function(ty, c, p) {\n\t\ttinymce.extend(p, patches[c]);\n\t};\n})(window.jQuery, tinymce);\n\n// #endif\n","Magento_Tinymce3/tiny_mce/classes/adapter/prototype/adapter.js":"/**\n * adapter.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n// #ifdef prototype_adapter\n\n(function() {\n\tif (!window.Prototype)\n\t\treturn alert(\"Load prototype first!\");\n\n\t// Patch in core NS functions\n\ttinymce.extend(tinymce, {\n\t\ttrim : function(s) {return s ? s.strip() : '';},\n\t\tinArray : function(a, v) {return a && a.indexOf ? a.indexOf(v) : -1;}\n\t});\n\n\t// Patch in functions in various clases\n\t// Add a \"#ifndefjquery\" statement around each core API function you add below\n\tvar patches = {\n\t\t'tinymce.util.JSON' : {\n\t\t\t/*serialize : function(o) {\n\t\t\t\treturn o.toJSON();\n\t\t\t}*/\n\t\t},\n\t};\n\n\t// Patch functions after a class is created\n\ttinymce.onCreate = function(ty, c, p) {\n\t\ttinymce.extend(p, patches[c]);\n\t};\n})();\n\n// #endif\n","Magento_Tinymce3/tiny_mce/themes/advanced/editor_template.js":"(function(e){var d=e.DOM,b=e.dom.Event,h=e.extend,f=e.each,a=e.util.Cookie,g,c=e.explode;e.ThemeManager.requireLangPack(\"advanced\");e.create(\"tinymce.themes.AdvancedTheme\",{sizes:[8,10,12,14,18,24,36],controls:{bold:[\"bold_desc\",\"Bold\"],italic:[\"italic_desc\",\"Italic\"],underline:[\"underline_desc\",\"Underline\"],strikethrough:[\"striketrough_desc\",\"Strikethrough\"],justifyleft:[\"justifyleft_desc\",\"JustifyLeft\"],justifycenter:[\"justifycenter_desc\",\"JustifyCenter\"],justifyright:[\"justifyright_desc\",\"JustifyRight\"],justifyfull:[\"justifyfull_desc\",\"JustifyFull\"],bullist:[\"bullist_desc\",\"InsertUnorderedList\"],numlist:[\"numlist_desc\",\"InsertOrderedList\"],outdent:[\"outdent_desc\",\"Outdent\"],indent:[\"indent_desc\",\"Indent\"],cut:[\"cut_desc\",\"Cut\"],copy:[\"copy_desc\",\"Copy\"],paste:[\"paste_desc\",\"Paste\"],undo:[\"undo_desc\",\"Undo\"],redo:[\"redo_desc\",\"Redo\"],link:[\"link_desc\",\"mceLink\"],unlink:[\"unlink_desc\",\"unlink\"],image:[\"image_desc\",\"mceImage\"],cleanup:[\"cleanup_desc\",\"mceCleanup\"],help:[\"help_desc\",\"mceHelp\"],code:[\"code_desc\",\"mceCodeEditor\"],hr:[\"hr_desc\",\"InsertHorizontalRule\"],removeformat:[\"removeformat_desc\",\"RemoveFormat\"],sub:[\"sub_desc\",\"subscript\"],sup:[\"sup_desc\",\"superscript\"],forecolor:[\"forecolor_desc\",\"ForeColor\"],forecolorpicker:[\"forecolor_desc\",\"mceForeColor\"],backcolor:[\"backcolor_desc\",\"HiliteColor\"],backcolorpicker:[\"backcolor_desc\",\"mceBackColor\"],charmap:[\"charmap_desc\",\"mceCharMap\"],visualaid:[\"visualaid_desc\",\"mceToggleVisualAid\"],anchor:[\"anchor_desc\",\"mceInsertAnchor\"],newdocument:[\"newdocument_desc\",\"mceNewDocument\"],blockquote:[\"blockquote_desc\",\"mceBlockQuote\"]},stateControls:[\"bold\",\"italic\",\"underline\",\"strikethrough\",\"bullist\",\"numlist\",\"justifyleft\",\"justifycenter\",\"justifyright\",\"justifyfull\",\"sub\",\"sup\",\"blockquote\"],init:function(j,k){var l=this,m,i,n;l.editor=j;l.url=k;l.onResolveName=new e.util.Dispatcher(this);j.forcedHighContrastMode=j.settings.detect_highcontrast&&l._isHighContrast();j.settings.skin=j.forcedHighContrastMode?\"highcontrast\":j.settings.skin;l.settings=m=h({theme_advanced_path:true,theme_advanced_toolbar_location:\"bottom\",theme_advanced_buttons1:\"bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect\",theme_advanced_buttons2:\"bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code\",theme_advanced_buttons3:\"hr,removeformat,visualaid,|,sub,sup,|,charmap\",theme_advanced_blockformats:\"p,address,pre,h1,h2,h3,h4,h5,h6\",theme_advanced_toolbar_align:\"center\",theme_advanced_fonts:\"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats\",theme_advanced_more_colors:1,theme_advanced_row_height:23,theme_advanced_resize_horizontal:1,theme_advanced_resizing_use_cookie:1,theme_advanced_font_sizes:\"1,2,3,4,5,6,7\",theme_advanced_font_selector:\"span\",theme_advanced_show_current_color:0,readonly:j.settings.readonly},j.settings);if(!m.font_size_style_values){m.font_size_style_values=\"8pt,10pt,12pt,14pt,18pt,24pt,36pt\"}if(e.is(m.theme_advanced_font_sizes,\"string\")){m.font_size_style_values=e.explode(m.font_size_style_values);m.font_size_classes=e.explode(m.font_size_classes||\"\");n={};j.settings.theme_advanced_font_sizes=m.theme_advanced_font_sizes;f(j.getParam(\"theme_advanced_font_sizes\",\"\",\"hash\"),function(q,p){var o;if(p==q&&q>=1&&q<=7){p=q+\" (\"+l.sizes[q-1]+\"pt)\";o=m.font_size_classes[q-1];q=m.font_size_style_values[q-1]||(l.sizes[q-1]+\"pt\")}if(/^\\s*\\./.test(q)){o=q.replace(/\\./g,\"\")}n[p]=o?{\"class\":o}:{fontSize:q}});m.theme_advanced_font_sizes=n}if((i=m.theme_advanced_path_location)&&i!=\"none\"){m.theme_advanced_statusbar_location=m.theme_advanced_path_location}if(m.theme_advanced_statusbar_location==\"none\"){m.theme_advanced_statusbar_location=0}if(j.settings.content_css!==false){j.contentCSS.push(j.baseURI.toAbsolute(k+\"/skins/\"+j.settings.skin+\"/content.css\"))}j.onInit.add(function(){if(!j.settings.readonly){j.onNodeChange.add(l._nodeChanged,l);j.onKeyUp.add(l._updateUndoStatus,l);j.onMouseUp.add(l._updateUndoStatus,l);j.dom.bind(j.dom.getRoot(),\"dragend\",function(){l._updateUndoStatus(j)})}});j.onSetProgressState.add(function(q,o,r){var s,t=q.id,p;if(o){l.progressTimer=setTimeout(function(){s=q.getContainer();s=s.insertBefore(d.create(\"DIV\",{style:\"position:relative\"}),s.firstChild);p=d.get(q.id+\"_tbl\");d.add(s,\"div\",{id:t+\"_blocker\",\"class\":\"mceBlocker\",style:{width:p.clientWidth+2,height:p.clientHeight+2}});d.add(s,\"div\",{id:t+\"_progress\",\"class\":\"mceProgress\",style:{left:p.clientWidth/2,top:p.clientHeight/2}})},r||0)}else{d.remove(t+\"_blocker\");d.remove(t+\"_progress\");clearTimeout(l.progressTimer)}});d.loadCSS(m.editor_css?j.documentBaseURI.toAbsolute(m.editor_css):k+\"/skins/\"+j.settings.skin+\"/ui.css\");if(m.skin_variant){d.loadCSS(k+\"/skins/\"+j.settings.skin+\"/ui_\"+m.skin_variant+\".css\")}},_isHighContrast:function(){var i,j=d.add(d.getRoot(),\"div\",{style:\"background-color: rgb(171,239,86);\"});i=(d.getStyle(j,\"background-color\",true)+\"\").toLowerCase().replace(/ /g,\"\");d.remove(j);return i!=\"rgb(171,239,86)\"&&i!=\"#abef56\"},createControl:function(l,i){var j,k;if(k=i.createControl(l)){return k}switch(l){case\"styleselect\":return this._createStyleSelect();case\"formatselect\":return this._createBlockFormats();case\"fontselect\":return this._createFontSelect();case\"fontsizeselect\":return this._createFontSizeSelect();case\"forecolor\":return this._createForeColorMenu();case\"backcolor\":return this._createBackColorMenu()}if((j=this.controls[l])){return i.createButton(l,{title:\"advanced.\"+j[0],cmd:j[1],ui:j[2],value:j[3]})}},execCommand:function(k,j,l){var i=this[\"_\"+k];if(i){i.call(this,j,l);return true}return false},_importClasses:function(k){var i=this.editor,j=i.controlManager.get(\"styleselect\");if(j.getLength()==0){f(i.dom.getClasses(),function(n,l){var m=\"style_\"+l;i.formatter.register(m,{inline:\"span\",attributes:{\"class\":n[\"class\"]},selector:\"*\"});j.add(n[\"class\"],m)})}},_createStyleSelect:function(m){var k=this,i=k.editor,j=i.controlManager,l;l=j.createListBox(\"styleselect\",{title:\"advanced.style_select\",onselect:function(o){var p,n=[];f(l.items,function(q){n.push(q.value)});i.focus();i.undoManager.add();p=i.formatter.matchAll(n);if(!o||p[0]==o){if(p[0]){i.formatter.remove(p[0])}}else{i.formatter.apply(o)}i.undoManager.add();i.nodeChanged();return false}});i.onInit.add(function(){var o=0,n=i.getParam(\"style_formats\");if(n){f(n,function(p){var q,r=0;f(p,function(){r++});if(r>1){q=p.name=p.name||\"style_\"+(o++);i.formatter.register(q,p);l.add(p.title,q)}else{l.add(p.title)}})}else{f(i.getParam(\"theme_advanced_styles\",\"\",\"hash\"),function(r,q){var p;if(r){p=\"style_\"+(o++);i.formatter.register(p,{inline:\"span\",classes:r,selector:\"*\"});l.add(k.editor.translate(q),p)}})}});if(l.getLength()==0){l.onPostRender.add(function(o,p){if(!l.NativeListBox){b.add(p.id+\"_text\",\"focus\",k._importClasses,k);b.add(p.id+\"_text\",\"mousedown\",k._importClasses,k);b.add(p.id+\"_open\",\"focus\",k._importClasses,k);b.add(p.id+\"_open\",\"mousedown\",k._importClasses,k)}else{b.add(p.id,\"focus\",k._importClasses,k)}})}return l},_createFontSelect:function(){var k,j=this,i=j.editor;k=i.controlManager.createListBox(\"fontselect\",{title:\"advanced.fontdefault\",onselect:function(l){var m=k.items[k.selectedIndex];if(!l&&m){i.execCommand(\"FontName\",false,m.value);return}i.execCommand(\"FontName\",false,l);k.select(function(n){return l==n});if(m&&m.value==l){k.select(null)}return false}});if(k){f(i.getParam(\"theme_advanced_fonts\",j.settings.theme_advanced_fonts,\"hash\"),function(m,l){k.add(i.translate(l),m,{style:m.indexOf(\"dings\")==-1?\"font-family:\"+m:\"\"})})}return k},_createFontSizeSelect:function(){var m=this,k=m.editor,n,l=0,j=[];n=k.controlManager.createListBox(\"fontsizeselect\",{title:\"advanced.font_size\",onselect:function(i){var o=n.items[n.selectedIndex];if(!i&&o){o=o.value;if(o[\"class\"]){k.formatter.toggle(\"fontsize_class\",{value:o[\"class\"]});k.undoManager.add();k.nodeChanged()}else{k.execCommand(\"FontSize\",false,o.fontSize)}return}if(i[\"class\"]){k.focus();k.undoManager.add();k.formatter.toggle(\"fontsize_class\",{value:i[\"class\"]});k.undoManager.add();k.nodeChanged()}else{k.execCommand(\"FontSize\",false,i.fontSize)}n.select(function(p){return i==p});if(o&&(o.value.fontSize==i.fontSize||o.value[\"class\"]==i[\"class\"])){n.select(null)}return false}});if(n){f(m.settings.theme_advanced_font_sizes,function(o,i){var p=o.fontSize;if(p>=1&&p<=7){p=m.sizes[parseInt(p)-1]+\"pt\"}n.add(i,o,{style:\"font-size:\"+p,\"class\":\"mceFontSize\"+(l++)+(\" \"+(o[\"class\"]||\"\"))})})}return n},_createBlockFormats:function(){var k,i={p:\"advanced.paragraph\",address:\"advanced.address\",pre:\"advanced.pre\",h1:\"advanced.h1\",h2:\"advanced.h2\",h3:\"advanced.h3\",h4:\"advanced.h4\",h5:\"advanced.h5\",h6:\"advanced.h6\",div:\"advanced.div\",blockquote:\"advanced.blockquote\",code:\"advanced.code\",dt:\"advanced.dt\",dd:\"advanced.dd\",samp:\"advanced.samp\"},j=this;k=j.editor.controlManager.createListBox(\"formatselect\",{title:\"advanced.block\",onselect:function(l){j.editor.execCommand(\"FormatBlock\",false,l);return false}});if(k){f(j.editor.getParam(\"theme_advanced_blockformats\",j.settings.theme_advanced_blockformats,\"hash\"),function(m,l){k.add(j.editor.translate(l!=m?l:i[m]),m,{\"class\":\"mce_formatPreview mce_\"+m})})}return k},_createForeColorMenu:function(){var m,j=this,k=j.settings,l={},i;if(k.theme_advanced_more_colors){l.more_colors_func=function(){j._mceColorPicker(0,{color:m.value,func:function(n){m.setColor(n)}})}}if(i=k.theme_advanced_text_colors){l.colors=i}if(k.theme_advanced_default_foreground_color){l.default_color=k.theme_advanced_default_foreground_color}l.title=\"advanced.forecolor_desc\";l.cmd=\"ForeColor\";l.scope=this;m=j.editor.controlManager.createColorSplitButton(\"forecolor\",l);return m},_createBackColorMenu:function(){var m,j=this,k=j.settings,l={},i;if(k.theme_advanced_more_colors){l.more_colors_func=function(){j._mceColorPicker(0,{color:m.value,func:function(n){m.setColor(n)}})}}if(i=k.theme_advanced_background_colors){l.colors=i}if(k.theme_advanced_default_background_color){l.default_color=k.theme_advanced_default_background_color}l.title=\"advanced.backcolor_desc\";l.cmd=\"HiliteColor\";l.scope=this;m=j.editor.controlManager.createColorSplitButton(\"backcolor\",l);return m},renderUI:function(k){var m,l,q,v=this,r=v.editor,w=v.settings,u,j,i;if(r.settings){r.settings.aria_label=w.aria_label+r.getLang(\"advanced.help_shortcut\")}m=j=d.create(\"span\",{role:\"application\",\"aria-labelledby\":r.id+\"_voice\",id:r.id+\"_parent\",\"class\":\"mceEditor \"+r.settings.skin+\"Skin\"+(w.skin_variant?\" \"+r.settings.skin+\"Skin\"+v._ufirst(w.skin_variant):\"\")});d.add(m,\"span\",{\"class\":\"mceVoiceLabel\",style:\"display:none;\",id:r.id+\"_voice\"},w.aria_label);if(!d.boxModel){m=d.add(m,\"div\",{\"class\":\"mceOldBoxModel\"})}m=u=d.add(m,\"table\",{role:\"presentation\",id:r.id+\"_tbl\",\"class\":\"mceLayout\",cellSpacing:0,cellPadding:0});m=q=d.add(m,\"tbody\");switch((w.theme_advanced_layout_manager||\"\").toLowerCase()){case\"rowlayout\":l=v._rowLayout(w,q,k);break;case\"customlayout\":l=r.execCallback(\"theme_advanced_custom_layout\",w,q,k,j);break;default:l=v._simpleLayout(w,q,k,j)}m=k.targetNode;i=u.rows;d.addClass(i[0],\"mceFirst\");d.addClass(i[i.length-1],\"mceLast\");f(d.select(\"tr\",q),function(o){d.addClass(o.firstChild,\"mceFirst\");d.addClass(o.childNodes[o.childNodes.length-1],\"mceLast\")});if(d.get(w.theme_advanced_toolbar_container)){d.get(w.theme_advanced_toolbar_container).appendChild(j)}else{d.insertAfter(j,m)}b.add(r.id+\"_path_row\",\"click\",function(n){n=n.target;if(n.nodeName==\"A\"){v._sel(n.className.replace(/^.*mcePath_([0-9]+).*$/,\"$1\"));return b.cancel(n)}});if(!r.getParam(\"accessibility_focus\")){b.add(d.add(j,\"a\",{href:\"#\"},\"<!-- IE -->\"),\"focus\",function(){tinyMCE.get(r.id).focus()})}if(w.theme_advanced_toolbar_location==\"external\"){k.deltaHeight=0}v.deltaHeight=k.deltaHeight;k.targetNode=null;r.onKeyDown.add(function(p,n){var s=121,o=122;if(n.altKey){if(n.keyCode===s){if(e.isWebKit){window.focus()}v.toolbarGroup.focus();return b.cancel(n)}else{if(n.keyCode===o){d.get(p.id+\"_path_row\").focus();return b.cancel(n)}}}});r.addShortcut(\"alt+0\",\"\",\"mceShortcuts\",v);return{iframeContainer:l,editorContainer:r.id+\"_parent\",sizeContainer:u,deltaHeight:k.deltaHeight}},getInfo:function(){return{longname:\"Advanced theme\",author:\"Moxiecode Systems AB\",authorurl:\"http://tinymce.moxiecode.com\",version:e.majorVersion+\".\"+e.minorVersion}},resizeBy:function(i,j){var k=d.get(this.editor.id+\"_ifr\");this.resizeTo(k.clientWidth+i,k.clientHeight+j)},resizeTo:function(i,m,k){var j=this.editor,l=this.settings,n=d.get(j.id+\"_tbl\"),o=d.get(j.id+\"_ifr\");i=Math.max(l.theme_advanced_resizing_min_width||100,i);m=Math.max(l.theme_advanced_resizing_min_height||100,m);i=Math.min(l.theme_advanced_resizing_max_width||65535,i);m=Math.min(l.theme_advanced_resizing_max_height||65535,m);d.setStyle(n,\"height\",\"\");d.setStyle(o,\"height\",m);if(l.theme_advanced_resize_horizontal){d.setStyle(n,\"width\",\"\");d.setStyle(o,\"width\",i);if(i<n.clientWidth){i=n.clientWidth;d.setStyle(o,\"width\",n.clientWidth)}}if(k&&l.theme_advanced_resizing_use_cookie){a.setHash(\"TinyMCE_\"+j.id+\"_size\",{cw:i,ch:m})}},destroy:function(){var i=this.editor.id;b.clear(i+\"_resize\");b.clear(i+\"_path_row\");b.clear(i+\"_external_close\")},_simpleLayout:function(y,r,k,i){var x=this,u=x.editor,v=y.theme_advanced_toolbar_location,m=y.theme_advanced_statusbar_location,l,j,q,w;if(y.readonly){l=d.add(r,\"tr\");l=j=d.add(l,\"td\",{\"class\":\"mceIframeContainer\"});return j}if(v==\"top\"){x._addToolbars(r,k)}if(v==\"external\"){l=w=d.create(\"div\",{style:\"position:relative\"});l=d.add(l,\"div\",{id:u.id+\"_external\",\"class\":\"mceExternalToolbar\"});d.add(l,\"a\",{id:u.id+\"_external_close\",href:\"javascript:;\",\"class\":\"mceExternalClose\"});l=d.add(l,\"table\",{id:u.id+\"_tblext\",cellSpacing:0,cellPadding:0});q=d.add(l,\"tbody\");if(i.firstChild.className==\"mceOldBoxModel\"){i.firstChild.appendChild(w)}else{i.insertBefore(w,i.firstChild)}x._addToolbars(q,k);u.onMouseUp.add(function(){var o=d.get(u.id+\"_external\");d.show(o);d.hide(g);var n=b.add(u.id+\"_external_close\",\"click\",function(){d.hide(u.id+\"_external\");b.remove(u.id+\"_external_close\",\"click\",n)});d.show(o);d.setStyle(o,\"top\",0-d.getRect(u.id+\"_tblext\").h-1);d.hide(o);d.show(o);o.style.filter=\"\";g=u.id+\"_external\";o=null})}if(m==\"top\"){x._addStatusBar(r,k)}if(!y.theme_advanced_toolbar_container){l=d.add(r,\"tr\");l=j=d.add(l,\"td\",{\"class\":\"mceIframeContainer\"})}if(v==\"bottom\"){x._addToolbars(r,k)}if(m==\"bottom\"){x._addStatusBar(r,k)}return j},_rowLayout:function(w,m,k){var v=this,p=v.editor,u,x,i=p.controlManager,l,j,r,q;u=w.theme_advanced_containers_default_class||\"\";x=w.theme_advanced_containers_default_align||\"center\";f(c(w.theme_advanced_containers||\"\"),function(s,o){var n=w[\"theme_advanced_container_\"+s]||\"\";switch(s.toLowerCase()){case\"mceeditor\":l=d.add(m,\"tr\");l=j=d.add(l,\"td\",{\"class\":\"mceIframeContainer\"});break;case\"mceelementpath\":v._addStatusBar(m,k);break;default:q=(w[\"theme_advanced_container_\"+s+\"_align\"]||x).toLowerCase();q=\"mce\"+v._ufirst(q);l=d.add(d.add(m,\"tr\"),\"td\",{\"class\":\"mceToolbar \"+(w[\"theme_advanced_container_\"+s+\"_class\"]||u)+\" \"+q||x});r=i.createToolbar(\"toolbar\"+o);v._addControls(n,r);d.setHTML(l,r.renderHTML());k.deltaHeight-=w.theme_advanced_row_height}});return j},_addControls:function(j,i){var k=this,l=k.settings,m,n=k.editor.controlManager;if(l.theme_advanced_disable&&!k._disabled){m={};f(c(l.theme_advanced_disable),function(o){m[o]=1});k._disabled=m}else{m=k._disabled}f(c(j),function(p){var o;if(m&&m[p]){return}if(p==\"tablecontrols\"){f([\"table\",\"|\",\"row_props\",\"cell_props\",\"|\",\"row_before\",\"row_after\",\"delete_row\",\"|\",\"col_before\",\"col_after\",\"delete_col\",\"|\",\"split_cells\",\"merge_cells\"],function(q){q=k.createControl(q,n);if(q){i.add(q)}});return}o=k.createControl(p,n);if(o){i.add(o)}})},_addToolbars:function(x,k){var A=this,p,m,r=A.editor,B=A.settings,z,j=r.controlManager,u,l,q=[],y,w;w=j.createToolbarGroup(\"toolbargroup\",{name:r.getLang(\"advanced.toolbar\"),tab_focus_toolbar:r.getParam(\"theme_advanced_tab_focus_toolbar\")});A.toolbarGroup=w;y=B.theme_advanced_toolbar_align.toLowerCase();y=\"mce\"+A._ufirst(y);l=d.add(d.add(x,\"tr\",{role:\"presentation\"}),\"td\",{\"class\":\"mceToolbar \"+y,role:\"presentation\"});for(p=1;(z=B[\"theme_advanced_buttons\"+p]);p++){m=j.createToolbar(\"toolbar\"+p,{\"class\":\"mceToolbarRow\"+p});if(B[\"theme_advanced_buttons\"+p+\"_add\"]){z+=\",\"+B[\"theme_advanced_buttons\"+p+\"_add\"]}if(B[\"theme_advanced_buttons\"+p+\"_add_before\"]){z=B[\"theme_advanced_buttons\"+p+\"_add_before\"]+\",\"+z}A._addControls(z,m);w.add(m);k.deltaHeight-=B.theme_advanced_row_height}q.push(w.renderHTML());q.push(d.createHTML(\"a\",{href:\"#\",accesskey:\"z\",title:r.getLang(\"advanced.toolbar_focus\"),onfocus:\"tinyMCE.getInstanceById('\"+r.id+\"').focus();\"},\"<!-- IE -->\"));d.setHTML(l,q.join(\"\"))},_addStatusBar:function(m,j){var k,v=this,p=v.editor,w=v.settings,i,q,u,l;k=d.add(m,\"tr\");k=l=d.add(k,\"td\",{\"class\":\"mceStatusbar\"});k=d.add(k,\"div\",{id:p.id+\"_path_row\",role:\"group\",\"aria-labelledby\":p.id+\"_path_voice\"});if(w.theme_advanced_path){d.add(k,\"span\",{id:p.id+\"_path_voice\"},p.translate(\"advanced.path\"));d.add(k,\"span\",{},\": \")}else{d.add(k,\"span\",{},\"&#160;\")}if(w.theme_advanced_resizing){d.add(l,\"a\",{id:p.id+\"_resize\",href:\"javascript:;\",onclick:\"return false;\",\"class\":\"mceResize\",tabIndex:\"-1\"});if(w.theme_advanced_resizing_use_cookie){p.onPostRender.add(function(){var n=a.getHash(\"TinyMCE_\"+p.id+\"_size\"),r=d.get(p.id+\"_tbl\");if(!n){return}v.resizeTo(n.cw,n.ch)})}p.onPostRender.add(function(){b.add(p.id+\"_resize\",\"click\",function(n){n.preventDefault()});b.add(p.id+\"_resize\",\"mousedown\",function(D){var t,r,s,o,C,z,A,F,n,E,x;function y(G){G.preventDefault();n=A+(G.screenX-C);E=F+(G.screenY-z);v.resizeTo(n,E)}function B(G){b.remove(d.doc,\"mousemove\",t);b.remove(p.getDoc(),\"mousemove\",r);b.remove(d.doc,\"mouseup\",s);b.remove(p.getDoc(),\"mouseup\",o);n=A+(G.screenX-C);E=F+(G.screenY-z);v.resizeTo(n,E,true)}D.preventDefault();C=D.screenX;z=D.screenY;x=d.get(v.editor.id+\"_ifr\");A=n=x.clientWidth;F=E=x.clientHeight;t=b.add(d.doc,\"mousemove\",y);r=b.add(p.getDoc(),\"mousemove\",y);s=b.add(d.doc,\"mouseup\",B);o=b.add(p.getDoc(),\"mouseup\",B)})})}j.deltaHeight-=21;k=m=null},_updateUndoStatus:function(j){var i=j.controlManager,k=j.undoManager;i.setDisabled(\"undo\",!k.hasUndo()&&!k.typing);i.setDisabled(\"redo\",!k.hasRedo())},_nodeChanged:function(m,r,D,q,E){var y=this,C,F=0,x,G,z=y.settings,w,k,u,B,l,j,i;e.each(y.stateControls,function(n){r.setActive(n,m.queryCommandState(y.controls[n][1]))});function o(p){var s,n=E.parents,t=p;if(typeof(p)==\"string\"){t=function(v){return v.nodeName==p}}for(s=0;s<n.length;s++){if(t(n[s])){return n[s]}}}r.setActive(\"visualaid\",m.hasVisual);y._updateUndoStatus(m);r.setDisabled(\"outdent\",!m.queryCommandState(\"Outdent\"));C=o(\"A\");if(G=r.get(\"link\")){if(!C||!C.name){G.setDisabled(!C&&q);G.setActive(!!C)}}if(G=r.get(\"unlink\")){G.setDisabled(!C&&q);G.setActive(!!C&&!C.name)}if(G=r.get(\"anchor\")){G.setActive(!q&&!!C&&C.name)}C=o(\"IMG\");if(G=r.get(\"image\")){G.setActive(!q&&!!C&&D.className.indexOf(\"mceItem\")==-1)}if(G=r.get(\"styleselect\")){y._importClasses();j=[];f(G.items,function(n){j.push(n.value)});i=m.formatter.matchAll(j);G.select(i[0])}if(G=r.get(\"formatselect\")){C=o(d.isBlock);if(C){G.select(C.nodeName.toLowerCase())}}o(function(p){if(p.nodeName===\"SPAN\"){if(!w&&p.className){w=p.className}}if(m.dom.is(p,z.theme_advanced_font_selector)){if(!k&&p.style.fontSize){k=p.style.fontSize}if(!u&&p.style.fontFamily){u=p.style.fontFamily.replace(/[\\\"\\']+/g,\"\").replace(/^([^,]+).*/,\"$1\").toLowerCase()}if(!B&&p.style.color){B=p.style.color}if(!l&&p.style.backgroundColor){l=p.style.backgroundColor}}return false});if(G=r.get(\"fontselect\")){G.select(function(n){return n.replace(/^([^,]+).*/,\"$1\").toLowerCase()==u})}if(G=r.get(\"fontsizeselect\")){if(z.theme_advanced_runtime_fontsize&&!k&&!w){k=m.dom.getStyle(D,\"fontSize\",true)}G.select(function(n){if(n.fontSize&&n.fontSize===k){return true}if(n[\"class\"]&&n[\"class\"]===w){return true}})}if(z.theme_advanced_show_current_color){function A(p,n){if(G=r.get(p)){if(!n){n=G.settings.default_color}if(n!==G.value){G.displayColor(n)}}}A(\"forecolor\",B);A(\"backcolor\",l)}if(z.theme_advanced_show_current_color){function A(p,n){if(G=r.get(p)){if(!n){n=G.settings.default_color}if(n!==G.value){G.displayColor(n)}}}A(\"forecolor\",B);A(\"backcolor\",l)}if(z.theme_advanced_path&&z.theme_advanced_statusbar_location){C=d.get(m.id+\"_path\")||d.add(m.id+\"_path_row\",\"span\",{id:m.id+\"_path\"});if(y.statusKeyboardNavigation){y.statusKeyboardNavigation.destroy();y.statusKeyboardNavigation=null}d.setHTML(C,\"\");o(function(H){var p=H.nodeName.toLowerCase(),s,v,t=\"\";if(H.nodeType!=1||p===\"br\"||H.getAttribute(\"data-mce-bogus\")||d.hasClass(H,\"mceItemHidden\")||d.hasClass(H,\"mceItemRemoved\")){return}if(e.isIE&&H.scopeName!==\"HTML\"){p=H.scopeName+\":\"+p}p=p.replace(/mce\\:/g,\"\");switch(p){case\"b\":p=\"strong\";break;case\"i\":p=\"em\";break;case\"img\":if(x=d.getAttrib(H,\"src\")){t+=\"src: \"+x+\" \"}break;case\"a\":if(x=d.getAttrib(H,\"name\")){t+=\"name: \"+x+\" \";p+=\"#\"+x}if(x=d.getAttrib(H,\"href\")){t+=\"href: \"+x+\" \"}break;case\"font\":if(x=d.getAttrib(H,\"face\")){t+=\"font: \"+x+\" \"}if(x=d.getAttrib(H,\"size\")){t+=\"size: \"+x+\" \"}if(x=d.getAttrib(H,\"color\")){t+=\"color: \"+x+\" \"}break;case\"span\":if(x=d.getAttrib(H,\"style\")){t+=\"style: \"+x+\" \"}break}if(x=d.getAttrib(H,\"id\")){t+=\"id: \"+x+\" \"}if(x=H.className){x=x.replace(/\\b\\s*(webkit|mce|Apple-)\\w+\\s*\\b/g,\"\");if(x){t+=\"class: \"+x+\" \";if(d.isBlock(H)||p==\"img\"||p==\"span\"){p+=\".\"+x}}}p=p.replace(/(html:)/g,\"\");p={name:p,node:H,title:t};y.onResolveName.dispatch(y,p);t=p.title;p=p.name;v=d.create(\"a\",{href:\"javascript:;\",role:\"button\",onmousedown:\"return false;\",title:t,\"class\":\"mcePath_\"+(F++)},p);if(C.hasChildNodes()){C.insertBefore(d.create(\"span\",{\"aria-hidden\":\"true\"},\"\\u00a0\\u00bb \"),C.firstChild);C.insertBefore(v,C.firstChild)}else{C.appendChild(v)}},m.getBody());if(d.select(\"a\",C).length>0){y.statusKeyboardNavigation=new e.ui.KeyboardNavigation({root:m.id+\"_path_row\",items:d.select(\"a\",C),excludeFromTabOrder:true,onCancel:function(){m.focus()}},d)}}},_sel:function(i){this.editor.execCommand(\"mceSelectNodeDepth\",false,i)},_mceInsertAnchor:function(k,j){var i=this.editor;i.windowManager.open({url:this.url+\"/anchor.htm\",width:320+parseInt(i.getLang(\"advanced.anchor_delta_width\",0)),height:90+parseInt(i.getLang(\"advanced.anchor_delta_height\",0)),inline:true},{theme_url:this.url})},_mceCharMap:function(){var i=this.editor;i.windowManager.open({url:this.url+\"/charmap.htm\",width:550+parseInt(i.getLang(\"advanced.charmap_delta_width\",0)),height:260+parseInt(i.getLang(\"advanced.charmap_delta_height\",0)),inline:true},{theme_url:this.url})},_mceHelp:function(){var i=this.editor;i.windowManager.open({url:this.url+\"/about.htm\",width:480,height:380,inline:true},{theme_url:this.url})},_mceShortcuts:function(){var i=this.editor;i.windowManager.open({url:this.url+\"/shortcuts.htm\",width:480,height:380,inline:true},{theme_url:this.url})},_mceColorPicker:function(k,j){var i=this.editor;j=j||{};i.windowManager.open({url:this.url+\"/color_picker.htm\",width:375+parseInt(i.getLang(\"advanced.colorpicker_delta_width\",0)),height:250+parseInt(i.getLang(\"advanced.colorpicker_delta_height\",0)),close_previous:false,inline:true},{input_color:j.color,func:j.func,theme_url:this.url})},_mceCodeEditor:function(j,k){var i=this.editor;i.windowManager.open({url:this.url+\"/source_editor.htm\",width:parseInt(i.getParam(\"theme_advanced_source_editor_width\",720)),height:parseInt(i.getParam(\"theme_advanced_source_editor_height\",580)),inline:true,resizable:true,maximizable:true},{theme_url:this.url})},_mceImage:function(j,k){var i=this.editor;if(i.dom.getAttrib(i.selection.getNode(),\"class\").indexOf(\"mceItem\")!=-1){return}i.windowManager.open({url:this.url+\"/image.htm\",width:355+parseInt(i.getLang(\"advanced.image_delta_width\",0)),height:275+parseInt(i.getLang(\"advanced.image_delta_height\",0)),inline:true},{theme_url:this.url})},_mceLink:function(j,k){var i=this.editor;i.windowManager.open({url:this.url+\"/link.htm\",width:310+parseInt(i.getLang(\"advanced.link_delta_width\",0)),height:200+parseInt(i.getLang(\"advanced.link_delta_height\",0)),inline:true},{theme_url:this.url})},_mceNewDocument:function(){var i=this.editor;i.windowManager.confirm(\"advanced.newdocument\",function(j){if(j){i.execCommand(\"mceSetContent\",false,\"\")}})},_mceForeColor:function(){var i=this;this._mceColorPicker(0,{color:i.fgColor,func:function(j){i.fgColor=j;i.editor.execCommand(\"ForeColor\",false,j)}})},_mceBackColor:function(){var i=this;this._mceColorPicker(0,{color:i.bgColor,func:function(j){i.bgColor=j;i.editor.execCommand(\"HiliteColor\",false,j)}})},_ufirst:function(i){return i.substring(0,1).toUpperCase()+i.substring(1)}});e.ThemeManager.add(\"advanced\",e.themes.AdvancedTheme)}(tinymce));","Magento_Tinymce3/tiny_mce/themes/advanced/editor_template_src.js":"/**\n * editor_template_src.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n\tvar DOM = tinymce.DOM, Event = tinymce.dom.Event, extend = tinymce.extend, each = tinymce.each, Cookie = tinymce.util.Cookie, lastExtID, explode = tinymce.explode;\n\n\t// Tell it to load theme specific language pack(s)\n\ttinymce.ThemeManager.requireLangPack('advanced');\n\n\ttinymce.create('tinymce.themes.AdvancedTheme', {\n\t\tsizes : [8, 10, 12, 14, 18, 24, 36],\n\n\t\t// Control name lookup, format: title, command\n\t\tcontrols : {\n\t\t\tbold : ['bold_desc', 'Bold'],\n\t\t\titalic : ['italic_desc', 'Italic'],\n\t\t\tunderline : ['underline_desc', 'Underline'],\n\t\t\tstrikethrough : ['striketrough_desc', 'Strikethrough'],\n\t\t\tjustifyleft : ['justifyleft_desc', 'JustifyLeft'],\n\t\t\tjustifycenter : ['justifycenter_desc', 'JustifyCenter'],\n\t\t\tjustifyright : ['justifyright_desc', 'JustifyRight'],\n\t\t\tjustifyfull : ['justifyfull_desc', 'JustifyFull'],\n\t\t\tbullist : ['bullist_desc', 'InsertUnorderedList'],\n\t\t\tnumlist : ['numlist_desc', 'InsertOrderedList'],\n\t\t\toutdent : ['outdent_desc', 'Outdent'],\n\t\t\tindent : ['indent_desc', 'Indent'],\n\t\t\tcut : ['cut_desc', 'Cut'],\n\t\t\tcopy : ['copy_desc', 'Copy'],\n\t\t\tpaste : ['paste_desc', 'Paste'],\n\t\t\tundo : ['undo_desc', 'Undo'],\n\t\t\tredo : ['redo_desc', 'Redo'],\n\t\t\tlink : ['link_desc', 'mceLink'],\n\t\t\tunlink : ['unlink_desc', 'unlink'],\n\t\t\timage : ['image_desc', 'mceImage'],\n\t\t\tcleanup : ['cleanup_desc', 'mceCleanup'],\n\t\t\thelp : ['help_desc', 'mceHelp'],\n\t\t\tcode : ['code_desc', 'mceCodeEditor'],\n\t\t\thr : ['hr_desc', 'InsertHorizontalRule'],\n\t\t\tremoveformat : ['removeformat_desc', 'RemoveFormat'],\n\t\t\tsub : ['sub_desc', 'subscript'],\n\t\t\tsup : ['sup_desc', 'superscript'],\n\t\t\tforecolor : ['forecolor_desc', 'ForeColor'],\n\t\t\tforecolorpicker : ['forecolor_desc', 'mceForeColor'],\n\t\t\tbackcolor : ['backcolor_desc', 'HiliteColor'],\n\t\t\tbackcolorpicker : ['backcolor_desc', 'mceBackColor'],\n\t\t\tcharmap : ['charmap_desc', 'mceCharMap'],\n\t\t\tvisualaid : ['visualaid_desc', 'mceToggleVisualAid'],\n\t\t\tanchor : ['anchor_desc', 'mceInsertAnchor'],\n\t\t\tnewdocument : ['newdocument_desc', 'mceNewDocument'],\n\t\t\tblockquote : ['blockquote_desc', 'mceBlockQuote']\n\t\t},\n\n\t\tstateControls : ['bold', 'italic', 'underline', 'strikethrough', 'bullist', 'numlist', 'justifyleft', 'justifycenter', 'justifyright', 'justifyfull', 'sub', 'sup', 'blockquote'],\n\n\t\tinit : function(ed, url) {\n\t\t\tvar t = this, s, v, o;\n\t\n\t\t\tt.editor = ed;\n\t\t\tt.url = url;\n\t\t\tt.onResolveName = new tinymce.util.Dispatcher(this);\n\n\t\t\ted.forcedHighContrastMode = ed.settings.detect_highcontrast && t._isHighContrast();\n\t\t\ted.settings.skin = ed.forcedHighContrastMode ? 'highcontrast' : ed.settings.skin;\n\n\t\t\t// Default settings\n\t\t\tt.settings = s = extend({\n\t\t\t\ttheme_advanced_path : true,\n\t\t\t\ttheme_advanced_toolbar_location : 'bottom',\n\t\t\t\ttheme_advanced_buttons1 : \"bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect\",\n\t\t\t\ttheme_advanced_buttons2 : \"bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code\",\n\t\t\t\ttheme_advanced_buttons3 : \"hr,removeformat,visualaid,|,sub,sup,|,charmap\",\n\t\t\t\ttheme_advanced_blockformats : \"p,address,pre,h1,h2,h3,h4,h5,h6\",\n\t\t\t\ttheme_advanced_toolbar_align : \"center\",\n\t\t\t\ttheme_advanced_fonts : \"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats\",\n\t\t\t\ttheme_advanced_more_colors : 1,\n\t\t\t\ttheme_advanced_row_height : 23,\n\t\t\t\ttheme_advanced_resize_horizontal : 1,\n\t\t\t\ttheme_advanced_resizing_use_cookie : 1,\n\t\t\t\ttheme_advanced_font_sizes : \"1,2,3,4,5,6,7\",\n\t\t\t\ttheme_advanced_font_selector : \"span\",\n\t\t\t\ttheme_advanced_show_current_color: 0,\n\t\t\t\treadonly : ed.settings.readonly\n\t\t\t}, ed.settings);\n\n\t\t\t// Setup default font_size_style_values\n\t\t\tif (!s.font_size_style_values)\n\t\t\t\ts.font_size_style_values = \"8pt,10pt,12pt,14pt,18pt,24pt,36pt\";\n\n\t\t\tif (tinymce.is(s.theme_advanced_font_sizes, 'string')) {\n\t\t\t\ts.font_size_style_values = tinymce.explode(s.font_size_style_values);\n\t\t\t\ts.font_size_classes = tinymce.explode(s.font_size_classes || '');\n\n\t\t\t\t// Parse string value\n\t\t\t\to = {};\n\t\t\t\ted.settings.theme_advanced_font_sizes = s.theme_advanced_font_sizes;\n\t\t\t\teach(ed.getParam('theme_advanced_font_sizes', '', 'hash'), function(v, k) {\n\t\t\t\t\tvar cl;\n\n\t\t\t\t\tif (k == v && v >= 1 && v <= 7) {\n\t\t\t\t\t\tk = v + ' (' + t.sizes[v - 1] + 'pt)';\n\t\t\t\t\t\tcl = s.font_size_classes[v - 1];\n\t\t\t\t\t\tv = s.font_size_style_values[v - 1] || (t.sizes[v - 1] + 'pt');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (/^\\s*\\./.test(v))\n\t\t\t\t\t\tcl = v.replace(/\\./g, '');\n\n\t\t\t\t\to[k] = cl ? {'class' : cl} : {fontSize : v};\n\t\t\t\t});\n\n\t\t\t\ts.theme_advanced_font_sizes = o;\n\t\t\t}\n\n\t\t\tif ((v = s.theme_advanced_path_location) && v != 'none')\n\t\t\t\ts.theme_advanced_statusbar_location = s.theme_advanced_path_location;\n\n\t\t\tif (s.theme_advanced_statusbar_location == 'none')\n\t\t\t\ts.theme_advanced_statusbar_location = 0;\n\n\t\t\tif (ed.settings.content_css !== false)\n\t\t\t\ted.contentCSS.push(ed.baseURI.toAbsolute(url + \"/skins/\" + ed.settings.skin + \"/content.css\"));\n\n\t\t\t// Init editor\n\t\t\ted.onInit.add(function() {\n\t\t\t\tif (!ed.settings.readonly) {\n\t\t\t\t\ted.onNodeChange.add(t._nodeChanged, t);\n\t\t\t\t\ted.onKeyUp.add(t._updateUndoStatus, t);\n\t\t\t\t\ted.onMouseUp.add(t._updateUndoStatus, t);\n\t\t\t\t\ted.dom.bind(ed.dom.getRoot(), 'dragend', function() {\n\t\t\t\t\t\tt._updateUndoStatus(ed);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\ted.onSetProgressState.add(function(ed, b, ti) {\n\t\t\t\tvar co, id = ed.id, tb;\n\n\t\t\t\tif (b) {\n\t\t\t\t\tt.progressTimer = setTimeout(function() {\n\t\t\t\t\t\tco = ed.getContainer();\n\t\t\t\t\t\tco = co.insertBefore(DOM.create('DIV', {style : 'position:relative'}), co.firstChild);\n\t\t\t\t\t\ttb = DOM.get(ed.id + '_tbl');\n\n\t\t\t\t\t\tDOM.add(co, 'div', {id : id + '_blocker', 'class' : 'mceBlocker', style : {width : tb.clientWidth + 2, height : tb.clientHeight + 2}});\n\t\t\t\t\t\tDOM.add(co, 'div', {id : id + '_progress', 'class' : 'mceProgress', style : {left : tb.clientWidth / 2, top : tb.clientHeight / 2}});\n\t\t\t\t\t}, ti || 0);\n\t\t\t\t} else {\n\t\t\t\t\tDOM.remove(id + '_blocker');\n\t\t\t\t\tDOM.remove(id + '_progress');\n\t\t\t\t\tclearTimeout(t.progressTimer);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tDOM.loadCSS(s.editor_css ? ed.documentBaseURI.toAbsolute(s.editor_css) : url + \"/skins/\" + ed.settings.skin + \"/ui.css\");\n\n\t\t\tif (s.skin_variant)\n\t\t\t\tDOM.loadCSS(url + \"/skins/\" + ed.settings.skin + \"/ui_\" + s.skin_variant + \".css\");\n\t\t},\n\n\t\t_isHighContrast : function() {\n\t\t\tvar actualColor, div = DOM.add(DOM.getRoot(), 'div', {'style': 'background-color: rgb(171,239,86);'});\n\n\t\t\tactualColor = (DOM.getStyle(div, 'background-color', true) + '').toLowerCase().replace(/ /g, '');\n\t\t\tDOM.remove(div);\n\n\t\t\treturn actualColor != 'rgb(171,239,86)' && actualColor != '#abef56';\n\t\t},\n\n\t\tcreateControl : function(n, cf) {\n\t\t\tvar cd, c;\n\n\t\t\tif (c = cf.createControl(n))\n\t\t\t\treturn c;\n\n\t\t\tswitch (n) {\n\t\t\t\tcase \"styleselect\":\n\t\t\t\t\treturn this._createStyleSelect();\n\n\t\t\t\tcase \"formatselect\":\n\t\t\t\t\treturn this._createBlockFormats();\n\n\t\t\t\tcase \"fontselect\":\n\t\t\t\t\treturn this._createFontSelect();\n\n\t\t\t\tcase \"fontsizeselect\":\n\t\t\t\t\treturn this._createFontSizeSelect();\n\n\t\t\t\tcase \"forecolor\":\n\t\t\t\t\treturn this._createForeColorMenu();\n\n\t\t\t\tcase \"backcolor\":\n\t\t\t\t\treturn this._createBackColorMenu();\n\t\t\t}\n\n\t\t\tif ((cd = this.controls[n]))\n\t\t\t\treturn cf.createButton(n, {title : \"advanced.\" + cd[0], cmd : cd[1], ui : cd[2], value : cd[3]});\n\t\t},\n\n\t\texecCommand : function(cmd, ui, val) {\n\t\t\tvar f = this['_' + cmd];\n\n\t\t\tif (f) {\n\t\t\t\tf.call(this, ui, val);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\n\t\t_importClasses : function(e) {\n\t\t\tvar ed = this.editor, ctrl = ed.controlManager.get('styleselect');\n\n\t\t\tif (ctrl.getLength() == 0) {\n\t\t\t\teach(ed.dom.getClasses(), function(o, idx) {\n\t\t\t\t\tvar name = 'style_' + idx;\n\n\t\t\t\t\ted.formatter.register(name, {\n\t\t\t\t\t\tinline : 'span',\n\t\t\t\t\t\tattributes : {'class' : o['class']},\n\t\t\t\t\t\tselector : '*'\n\t\t\t\t\t});\n\n\t\t\t\t\tctrl.add(o['class'], name);\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t_createStyleSelect : function(n) {\n\t\t\tvar t = this, ed = t.editor, ctrlMan = ed.controlManager, ctrl;\n\n\t\t\t// Setup style select box\n\t\t\tctrl = ctrlMan.createListBox('styleselect', {\n\t\t\t\ttitle : 'advanced.style_select',\n\t\t\t\tonselect : function(name) {\n\t\t\t\t\tvar matches, formatNames = [];\n\n\t\t\t\t\teach(ctrl.items, function(item) {\n\t\t\t\t\t\tformatNames.push(item.value);\n\t\t\t\t\t});\n\n\t\t\t\t\ted.focus();\n\t\t\t\t\ted.undoManager.add();\n\n\t\t\t\t\t// Toggle off the current format\n\t\t\t\t\tmatches = ed.formatter.matchAll(formatNames);\n\t\t\t\t\tif (!name || matches[0] == name) {\n\t\t\t\t\t\tif (matches[0]) \n\t\t\t\t\t\t\ted.formatter.remove(matches[0]);\n\t\t\t\t\t} else\n\t\t\t\t\t\ted.formatter.apply(name);\n\n\t\t\t\t\ted.undoManager.add();\n\t\t\t\t\ted.nodeChanged();\n\n\t\t\t\t\treturn false; // No auto select\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Handle specified format\n\t\t\ted.onInit.add(function() {\n\t\t\t\tvar counter = 0, formats = ed.getParam('style_formats');\n\n\t\t\t\tif (formats) {\n\t\t\t\t\teach(formats, function(fmt) {\n\t\t\t\t\t\tvar name, keys = 0;\n\n\t\t\t\t\t\teach(fmt, function() {keys++;});\n\n\t\t\t\t\t\tif (keys > 1) {\n\t\t\t\t\t\t\tname = fmt.name = fmt.name || 'style_' + (counter++);\n\t\t\t\t\t\t\ted.formatter.register(name, fmt);\n\t\t\t\t\t\t\tctrl.add(fmt.title, name);\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\tctrl.add(fmt.title);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\teach(ed.getParam('theme_advanced_styles', '', 'hash'), function(val, key) {\n\t\t\t\t\t\tvar name;\n\n\t\t\t\t\t\tif (val) {\n\t\t\t\t\t\t\tname = 'style_' + (counter++);\n\n\t\t\t\t\t\t\ted.formatter.register(name, {\n\t\t\t\t\t\t\t\tinline : 'span',\n\t\t\t\t\t\t\t\tclasses : val,\n\t\t\t\t\t\t\t\tselector : '*'\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tctrl.add(t.editor.translate(key), name);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Auto import classes if the ctrl box is empty\n\t\t\tif (ctrl.getLength() == 0) {\n\t\t\t\tctrl.onPostRender.add(function(ed, n) {\n\t\t\t\t\tif (!ctrl.NativeListBox) {\n\t\t\t\t\t\tEvent.add(n.id + '_text', 'focus', t._importClasses, t);\n\t\t\t\t\t\tEvent.add(n.id + '_text', 'mousedown', t._importClasses, t);\n\t\t\t\t\t\tEvent.add(n.id + '_open', 'focus', t._importClasses, t);\n\t\t\t\t\t\tEvent.add(n.id + '_open', 'mousedown', t._importClasses, t);\n\t\t\t\t\t} else\n\t\t\t\t\t\tEvent.add(n.id, 'focus', t._importClasses, t);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn ctrl;\n\t\t},\n\n\t\t_createFontSelect : function() {\n\t\t\tvar c, t = this, ed = t.editor;\n\n\t\t\tc = ed.controlManager.createListBox('fontselect', {\n\t\t\t\ttitle : 'advanced.fontdefault',\n\t\t\t\tonselect : function(v) {\n\t\t\t\t\tvar cur = c.items[c.selectedIndex];\n\n\t\t\t\t\tif (!v && cur) {\n\t\t\t\t\t\ted.execCommand('FontName', false, cur.value);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\ted.execCommand('FontName', false, v);\n\n\t\t\t\t\t// Fake selection, execCommand will fire a nodeChange and update the selection\n\t\t\t\t\tc.select(function(sv) {\n\t\t\t\t\t\treturn v == sv;\n\t\t\t\t\t});\n\n\t\t\t\t\tif (cur && cur.value == v) {\n\t\t\t\t\t\tc.select(null);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false; // No auto select\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (c) {\n\t\t\t\teach(ed.getParam('theme_advanced_fonts', t.settings.theme_advanced_fonts, 'hash'), function(v, k) {\n\t\t\t\t\tc.add(ed.translate(k), v, {style : v.indexOf('dings') == -1 ? 'font-family:' + v : ''});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn c;\n\t\t},\n\n\t\t_createFontSizeSelect : function() {\n\t\t\tvar t = this, ed = t.editor, c, i = 0, cl = [];\n\n\t\t\tc = ed.controlManager.createListBox('fontsizeselect', {title : 'advanced.font_size', onselect : function(v) {\n\t\t\t\tvar cur = c.items[c.selectedIndex];\n\n\t\t\t\tif (!v && cur) {\n\t\t\t\t\tcur = cur.value;\n\n\t\t\t\t\tif (cur['class']) {\n\t\t\t\t\t\ted.formatter.toggle('fontsize_class', {value : cur['class']});\n\t\t\t\t\t\ted.undoManager.add();\n\t\t\t\t\t\ted.nodeChanged();\n\t\t\t\t\t} else {\n\t\t\t\t\t\ted.execCommand('FontSize', false, cur.fontSize);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (v['class']) {\n\t\t\t\t\ted.focus();\n\t\t\t\t\ted.undoManager.add();\n\t\t\t\t\ted.formatter.toggle('fontsize_class', {value : v['class']});\n\t\t\t\t\ted.undoManager.add();\n\t\t\t\t\ted.nodeChanged();\n\t\t\t\t} else\n\t\t\t\t\ted.execCommand('FontSize', false, v.fontSize);\n\n\t\t\t\t// Fake selection, execCommand will fire a nodeChange and update the selection\n\t\t\t\tc.select(function(sv) {\n\t\t\t\t\treturn v == sv;\n\t\t\t\t});\n\n\t\t\t\tif (cur && (cur.value.fontSize == v.fontSize || cur.value['class'] == v['class'])) {\n\t\t\t\t\tc.select(null);\n\t\t\t\t}\n\n\t\t\t\treturn false; // No auto select\n\t\t\t}});\n\n\t\t\tif (c) {\n\t\t\t\teach(t.settings.theme_advanced_font_sizes, function(v, k) {\n\t\t\t\t\tvar fz = v.fontSize;\n\n\t\t\t\t\tif (fz >= 1 && fz <= 7)\n\t\t\t\t\t\tfz = t.sizes[parseInt(fz) - 1] + 'pt';\n\n\t\t\t\t\tc.add(k, v, {'style' : 'font-size:' + fz, 'class' : 'mceFontSize' + (i++) + (' ' + (v['class'] || ''))});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn c;\n\t\t},\n\n\t\t_createBlockFormats : function() {\n\t\t\tvar c, fmts = {\n\t\t\t\tp : 'advanced.paragraph',\n\t\t\t\taddress : 'advanced.address',\n\t\t\t\tpre : 'advanced.pre',\n\t\t\t\th1 : 'advanced.h1',\n\t\t\t\th2 : 'advanced.h2',\n\t\t\t\th3 : 'advanced.h3',\n\t\t\t\th4 : 'advanced.h4',\n\t\t\t\th5 : 'advanced.h5',\n\t\t\t\th6 : 'advanced.h6',\n\t\t\t\tdiv : 'advanced.div',\n\t\t\t\tblockquote : 'advanced.blockquote',\n\t\t\t\tcode : 'advanced.code',\n\t\t\t\tdt : 'advanced.dt',\n\t\t\t\tdd : 'advanced.dd',\n\t\t\t\tsamp : 'advanced.samp'\n\t\t\t}, t = this;\n\n\t\t\tc = t.editor.controlManager.createListBox('formatselect', {title : 'advanced.block', onselect : function(v) {\n\t\t\t\tt.editor.execCommand('FormatBlock', false, v);\n\t\t\t\treturn false;\n\t\t\t}});\n\n\t\t\tif (c) {\n\t\t\t\teach(t.editor.getParam('theme_advanced_blockformats', t.settings.theme_advanced_blockformats, 'hash'), function(v, k) {\n\t\t\t\t\tc.add(t.editor.translate(k != v ? k : fmts[v]), v, {'class' : 'mce_formatPreview mce_' + v});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn c;\n\t\t},\n\n\t\t_createForeColorMenu : function() {\n\t\t\tvar c, t = this, s = t.settings, o = {}, v;\n\n\t\t\tif (s.theme_advanced_more_colors) {\n\t\t\t\to.more_colors_func = function() {\n\t\t\t\t\tt._mceColorPicker(0, {\n\t\t\t\t\t\tcolor : c.value,\n\t\t\t\t\t\tfunc : function(co) {\n\t\t\t\t\t\t\tc.setColor(co);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (v = s.theme_advanced_text_colors)\n\t\t\t\to.colors = v;\n\n\t\t\tif (s.theme_advanced_default_foreground_color)\n\t\t\t\to.default_color = s.theme_advanced_default_foreground_color;\n\n\t\t\to.title = 'advanced.forecolor_desc';\n\t\t\to.cmd = 'ForeColor';\n\t\t\to.scope = this;\n\n\t\t\tc = t.editor.controlManager.createColorSplitButton('forecolor', o);\n\n\t\t\treturn c;\n\t\t},\n\n\t\t_createBackColorMenu : function() {\n\t\t\tvar c, t = this, s = t.settings, o = {}, v;\n\n\t\t\tif (s.theme_advanced_more_colors) {\n\t\t\t\to.more_colors_func = function() {\n\t\t\t\t\tt._mceColorPicker(0, {\n\t\t\t\t\t\tcolor : c.value,\n\t\t\t\t\t\tfunc : function(co) {\n\t\t\t\t\t\t\tc.setColor(co);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (v = s.theme_advanced_background_colors)\n\t\t\t\to.colors = v;\n\n\t\t\tif (s.theme_advanced_default_background_color)\n\t\t\t\to.default_color = s.theme_advanced_default_background_color;\n\n\t\t\to.title = 'advanced.backcolor_desc';\n\t\t\to.cmd = 'HiliteColor';\n\t\t\to.scope = this;\n\n\t\t\tc = t.editor.controlManager.createColorSplitButton('backcolor', o);\n\n\t\t\treturn c;\n\t\t},\n\n\t\trenderUI : function(o) {\n\t\t\tvar n, ic, tb, t = this, ed = t.editor, s = t.settings, sc, p, nl;\n\n\t\t\tif (ed.settings) {\n\t\t\t\ted.settings.aria_label = s.aria_label + ed.getLang('advanced.help_shortcut');\n\t\t\t}\n\n\t\t\t// TODO: ACC Should have an aria-describedby attribute which is user-configurable to describe what this field is actually for.\n\t\t\t// Maybe actually inherit it from the original textara?\n\t\t\tn = p = DOM.create('span', {role : 'application', 'aria-labelledby' : ed.id + '_voice', id : ed.id + '_parent', 'class' : 'mceEditor ' + ed.settings.skin + 'Skin' + (s.skin_variant ? ' ' + ed.settings.skin + 'Skin' + t._ufirst(s.skin_variant) : '')});\n\t\t\tDOM.add(n, 'span', {'class': 'mceVoiceLabel', 'style': 'display:none;', id: ed.id + '_voice'}, s.aria_label);\n\n\t\t\tif (!DOM.boxModel)\n\t\t\t\tn = DOM.add(n, 'div', {'class' : 'mceOldBoxModel'});\n\n\t\t\tn = sc = DOM.add(n, 'table', {role : \"presentation\", id : ed.id + '_tbl', 'class' : 'mceLayout', cellSpacing : 0, cellPadding : 0});\n\t\t\tn = tb = DOM.add(n, 'tbody');\n\n\t\t\tswitch ((s.theme_advanced_layout_manager || '').toLowerCase()) {\n\t\t\t\tcase \"rowlayout\":\n\t\t\t\t\tic = t._rowLayout(s, tb, o);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"customlayout\":\n\t\t\t\t\tic = ed.execCallback(\"theme_advanced_custom_layout\", s, tb, o, p);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tic = t._simpleLayout(s, tb, o, p);\n\t\t\t}\n\n\t\t\tn = o.targetNode;\n\n\t\t\t// Add classes to first and last TRs\n\t\t\tnl = sc.rows;\n\t\t\tDOM.addClass(nl[0], 'mceFirst');\n\t\t\tDOM.addClass(nl[nl.length - 1], 'mceLast');\n\n\t\t\t// Add classes to first and last TDs\n\t\t\teach(DOM.select('tr', tb), function(n) {\n\t\t\t\tDOM.addClass(n.firstChild, 'mceFirst');\n\t\t\t\tDOM.addClass(n.childNodes[n.childNodes.length - 1], 'mceLast');\n\t\t\t});\n\n\t\t\tif (DOM.get(s.theme_advanced_toolbar_container))\n\t\t\t\tDOM.get(s.theme_advanced_toolbar_container).appendChild(p);\n\t\t\telse\n\t\t\t\tDOM.insertAfter(p, n);\n\n\t\t\tEvent.add(ed.id + '_path_row', 'click', function(e) {\n\t\t\t\te = e.target;\n\n\t\t\t\tif (e.nodeName == 'A') {\n\t\t\t\t\tt._sel(e.className.replace(/^.*mcePath_([0-9]+).*$/, '$1'));\n\n\t\t\t\t\treturn Event.cancel(e);\n\t\t\t\t}\n\t\t\t});\n/*\n\t\t\tif (DOM.get(ed.id + '_path_row')) {\n\t\t\t\tEvent.add(ed.id + '_tbl', 'mouseover', function(e) {\n\t\t\t\t\tvar re;\n\t\n\t\t\t\t\te = e.target;\n\n\t\t\t\t\tif (e.nodeName == 'SPAN' && DOM.hasClass(e.parentNode, 'mceButton')) {\n\t\t\t\t\t\tre = DOM.get(ed.id + '_path_row');\n\t\t\t\t\t\tt.lastPath = re.innerHTML;\n\t\t\t\t\t\tDOM.setHTML(re, e.parentNode.title);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tEvent.add(ed.id + '_tbl', 'mouseout', function(e) {\n\t\t\t\t\tif (t.lastPath) {\n\t\t\t\t\t\tDOM.setHTML(ed.id + '_path_row', t.lastPath);\n\t\t\t\t\t\tt.lastPath = 0;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n*/\n\n\t\t\tif (!ed.getParam('accessibility_focus'))\n\t\t\t\tEvent.add(DOM.add(p, 'a', {href : '#'}, '<!-- IE -->'), 'focus', function() {tinyMCE.get(ed.id).focus();});\n\n\t\t\tif (s.theme_advanced_toolbar_location == 'external')\n\t\t\t\to.deltaHeight = 0;\n\n\t\t\tt.deltaHeight = o.deltaHeight;\n\t\t\to.targetNode = null;\n\n\t\t\ted.onKeyDown.add(function(ed, evt) {\n\t\t\t\tvar DOM_VK_F10 = 121, DOM_VK_F11 = 122;\n\n\t\t\t\tif (evt.altKey) {\n\t\t \t\t\tif (evt.keyCode === DOM_VK_F10) {\n\t\t\t\t\t\t// Make sure focus is given to toolbar in Safari.\n\t\t\t\t\t\t// We can't do this in IE as it prevents giving focus to toolbar when editor is in a frame\n\t\t\t\t\t\tif (tinymce.isWebKit) {\n\t\t\t\t\t\t\twindow.focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tt.toolbarGroup.focus();\n\t\t\t\t\t\treturn Event.cancel(evt);\n\t\t\t\t\t} else if (evt.keyCode === DOM_VK_F11) {\n\t\t\t\t\t\tDOM.get(ed.id + '_path_row').focus();\n\t\t\t\t\t\treturn Event.cancel(evt);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// alt+0 is the UK recommended shortcut for accessing the list of access controls.\n\t\t\ted.addShortcut('alt+0', '', 'mceShortcuts', t);\n\n\t\t\treturn {\n\t\t\t\tiframeContainer : ic,\n\t\t\t\teditorContainer : ed.id + '_parent',\n\t\t\t\tsizeContainer : sc,\n\t\t\t\tdeltaHeight : o.deltaHeight\n\t\t\t};\n\t\t},\n\n\t\tgetInfo : function() {\n\t\t\treturn {\n\t\t\t\tlongname : 'Advanced theme',\n\t\t\t\tauthor : 'Moxiecode Systems AB',\n\t\t\t\tauthorurl : 'http://tinymce.moxiecode.com',\n\t\t\t\tversion : tinymce.majorVersion + \".\" + tinymce.minorVersion\n\t\t\t}\n\t\t},\n\n\t\tresizeBy : function(dw, dh) {\n\t\t\tvar e = DOM.get(this.editor.id + '_ifr');\n\n\t\t\tthis.resizeTo(e.clientWidth + dw, e.clientHeight + dh);\n\t\t},\n\n\t\tresizeTo : function(w, h, store) {\n\t\t\tvar ed = this.editor, s = this.settings, e = DOM.get(ed.id + '_tbl'), ifr = DOM.get(ed.id + '_ifr');\n\n\t\t\t// Boundery fix box\n\t\t\tw = Math.max(s.theme_advanced_resizing_min_width || 100, w);\n\t\t\th = Math.max(s.theme_advanced_resizing_min_height || 100, h);\n\t\t\tw = Math.min(s.theme_advanced_resizing_max_width || 0xFFFF, w);\n\t\t\th = Math.min(s.theme_advanced_resizing_max_height || 0xFFFF, h);\n\n\t\t\t// Resize iframe and container\n\t\t\tDOM.setStyle(e, 'height', '');\n\t\t\tDOM.setStyle(ifr, 'height', h);\n\n\t\t\tif (s.theme_advanced_resize_horizontal) {\n\t\t\t\tDOM.setStyle(e, 'width', '');\n\t\t\t\tDOM.setStyle(ifr, 'width', w);\n\n\t\t\t\t// Make sure that the size is never smaller than the over all ui\n\t\t\t\tif (w < e.clientWidth) {\n\t\t\t\t\tw = e.clientWidth;\n\t\t\t\t\tDOM.setStyle(ifr, 'width', e.clientWidth);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Store away the size\n\t\t\tif (store && s.theme_advanced_resizing_use_cookie) {\n\t\t\t\tCookie.setHash(\"TinyMCE_\" + ed.id + \"_size\", {\n\t\t\t\t\tcw : w,\n\t\t\t\t\tch : h\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tdestroy : function() {\n\t\t\tvar id = this.editor.id;\n\n\t\t\tEvent.clear(id + '_resize');\n\t\t\tEvent.clear(id + '_path_row');\n\t\t\tEvent.clear(id + '_external_close');\n\t\t},\n\n\t\t// Internal functions\n\n\t\t_simpleLayout : function(s, tb, o, p) {\n\t\t\tvar t = this, ed = t.editor, lo = s.theme_advanced_toolbar_location, sl = s.theme_advanced_statusbar_location, n, ic, etb, c;\n\n\t\t\tif (s.readonly) {\n\t\t\t\tn = DOM.add(tb, 'tr');\n\t\t\t\tn = ic = DOM.add(n, 'td', {'class' : 'mceIframeContainer'});\n\t\t\t\treturn ic;\n\t\t\t}\n\n\t\t\t// Create toolbar container at top\n\t\t\tif (lo == 'top')\n\t\t\t\tt._addToolbars(tb, o);\n\n\t\t\t// Create external toolbar\n\t\t\tif (lo == 'external') {\n\t\t\t\tn = c = DOM.create('div', {style : 'position:relative'});\n\t\t\t\tn = DOM.add(n, 'div', {id : ed.id + '_external', 'class' : 'mceExternalToolbar'});\n\t\t\t\tDOM.add(n, 'a', {id : ed.id + '_external_close', href : 'javascript:;', 'class' : 'mceExternalClose'});\n\t\t\t\tn = DOM.add(n, 'table', {id : ed.id + '_tblext', cellSpacing : 0, cellPadding : 0});\n\t\t\t\tetb = DOM.add(n, 'tbody');\n\n\t\t\t\tif (p.firstChild.className == 'mceOldBoxModel')\n\t\t\t\t\tp.firstChild.appendChild(c);\n\t\t\t\telse\n\t\t\t\t\tp.insertBefore(c, p.firstChild);\n\n\t\t\t\tt._addToolbars(etb, o);\n\n\t\t\t\ted.onMouseUp.add(function() {\n\t\t\t\t\tvar e = DOM.get(ed.id + '_external');\n\t\t\t\t\tDOM.show(e);\n\n\t\t\t\t\tDOM.hide(lastExtID);\n\n\t\t\t\t\tvar f = Event.add(ed.id + '_external_close', 'click', function() {\n\t\t\t\t\t\tDOM.hide(ed.id + '_external');\n\t\t\t\t\t\tEvent.remove(ed.id + '_external_close', 'click', f);\n\t\t\t\t\t});\n\n\t\t\t\t\tDOM.show(e);\n\t\t\t\t\tDOM.setStyle(e, 'top', 0 - DOM.getRect(ed.id + '_tblext').h - 1);\n\n\t\t\t\t\t// Fixes IE rendering bug\n\t\t\t\t\tDOM.hide(e);\n\t\t\t\t\tDOM.show(e);\n\t\t\t\t\te.style.filter = '';\n\n\t\t\t\t\tlastExtID = ed.id + '_external';\n\n\t\t\t\t\te = null;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (sl == 'top')\n\t\t\t\tt._addStatusBar(tb, o);\n\n\t\t\t// Create iframe container\n\t\t\tif (!s.theme_advanced_toolbar_container) {\n\t\t\t\tn = DOM.add(tb, 'tr');\n\t\t\t\tn = ic = DOM.add(n, 'td', {'class' : 'mceIframeContainer'});\n\t\t\t}\n\n\t\t\t// Create toolbar container at bottom\n\t\t\tif (lo == 'bottom')\n\t\t\t\tt._addToolbars(tb, o);\n\n\t\t\tif (sl == 'bottom')\n\t\t\t\tt._addStatusBar(tb, o);\n\n\t\t\treturn ic;\n\t\t},\n\n\t\t_rowLayout : function(s, tb, o) {\n\t\t\tvar t = this, ed = t.editor, dc, da, cf = ed.controlManager, n, ic, to, a;\n\n\t\t\tdc = s.theme_advanced_containers_default_class || '';\n\t\t\tda = s.theme_advanced_containers_default_align || 'center';\n\n\t\t\teach(explode(s.theme_advanced_containers || ''), function(c, i) {\n\t\t\t\tvar v = s['theme_advanced_container_' + c] || '';\n\n\t\t\t\tswitch (c.toLowerCase()) {\n\t\t\t\t\tcase 'mceeditor':\n\t\t\t\t\t\tn = DOM.add(tb, 'tr');\n\t\t\t\t\t\tn = ic = DOM.add(n, 'td', {'class' : 'mceIframeContainer'});\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'mceelementpath':\n\t\t\t\t\t\tt._addStatusBar(tb, o);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\ta = (s['theme_advanced_container_' + c + '_align'] || da).toLowerCase();\n\t\t\t\t\t\ta = 'mce' + t._ufirst(a);\n\n\t\t\t\t\t\tn = DOM.add(DOM.add(tb, 'tr'), 'td', {\n\t\t\t\t\t\t\t'class' : 'mceToolbar ' + (s['theme_advanced_container_' + c + '_class'] || dc) + ' ' + a || da\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tto = cf.createToolbar(\"toolbar\" + i);\n\t\t\t\t\t\tt._addControls(v, to);\n\t\t\t\t\t\tDOM.setHTML(n, to.renderHTML());\n\t\t\t\t\t\to.deltaHeight -= s.theme_advanced_row_height;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn ic;\n\t\t},\n\n\t\t_addControls : function(v, tb) {\n\t\t\tvar t = this, s = t.settings, di, cf = t.editor.controlManager;\n\n\t\t\tif (s.theme_advanced_disable && !t._disabled) {\n\t\t\t\tdi = {};\n\n\t\t\t\teach(explode(s.theme_advanced_disable), function(v) {\n\t\t\t\t\tdi[v] = 1;\n\t\t\t\t});\n\n\t\t\t\tt._disabled = di;\n\t\t\t} else\n\t\t\t\tdi = t._disabled;\n\n\t\t\teach(explode(v), function(n) {\n\t\t\t\tvar c;\n\n\t\t\t\tif (di && di[n])\n\t\t\t\t\treturn;\n\n\t\t\t\t// Compatiblity with 2.x\n\t\t\t\tif (n == 'tablecontrols') {\n\t\t\t\t\teach([\"table\",\"|\",\"row_props\",\"cell_props\",\"|\",\"row_before\",\"row_after\",\"delete_row\",\"|\",\"col_before\",\"col_after\",\"delete_col\",\"|\",\"split_cells\",\"merge_cells\"], function(n) {\n\t\t\t\t\t\tn = t.createControl(n, cf);\n\n\t\t\t\t\t\tif (n)\n\t\t\t\t\t\t\ttb.add(n);\n\t\t\t\t\t});\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tc = t.createControl(n, cf);\n\n\t\t\t\tif (c)\n\t\t\t\t\ttb.add(c);\n\t\t\t});\n\t\t},\n\n\t\t_addToolbars : function(c, o) {\n\t\t\tvar t = this, i, tb, ed = t.editor, s = t.settings, v, cf = ed.controlManager, di, n, h = [], a, toolbarGroup;\n\n\t\t\ttoolbarGroup = cf.createToolbarGroup('toolbargroup', {\n\t\t\t\t'name': ed.getLang('advanced.toolbar'),\n\t\t\t\t'tab_focus_toolbar':ed.getParam('theme_advanced_tab_focus_toolbar')\n\t\t\t});\n\n\t\t\tt.toolbarGroup = toolbarGroup;\n\n\t\t\ta = s.theme_advanced_toolbar_align.toLowerCase();\n\t\t\ta = 'mce' + t._ufirst(a);\n\n\t\t\tn = DOM.add(DOM.add(c, 'tr', {role: 'presentation'}), 'td', {'class' : 'mceToolbar ' + a, \"role\":\"presentation\"});\n\n\t\t\t// Create toolbar and add the controls\n\t\t\tfor (i=1; (v = s['theme_advanced_buttons' + i]); i++) {\n\t\t\t\ttb = cf.createToolbar(\"toolbar\" + i, {'class' : 'mceToolbarRow' + i});\n\n\t\t\t\tif (s['theme_advanced_buttons' + i + '_add'])\n\t\t\t\t\tv += ',' + s['theme_advanced_buttons' + i + '_add'];\n\n\t\t\t\tif (s['theme_advanced_buttons' + i + '_add_before'])\n\t\t\t\t\tv = s['theme_advanced_buttons' + i + '_add_before'] + ',' + v;\n\n\t\t\t\tt._addControls(v, tb);\n\t\t\t\ttoolbarGroup.add(tb);\n\n\t\t\t\to.deltaHeight -= s.theme_advanced_row_height;\n\t\t\t}\n\t\t\th.push(toolbarGroup.renderHTML());\n\t\t\th.push(DOM.createHTML('a', {href : '#', accesskey : 'z', title : ed.getLang(\"advanced.toolbar_focus\"), onfocus : 'tinyMCE.getInstanceById(\\'' + ed.id + '\\').focus();'}, '<!-- IE -->'));\n\t\t\tDOM.setHTML(n, h.join(''));\n\t\t},\n\n\t\t_addStatusBar : function(tb, o) {\n\t\t\tvar n, t = this, ed = t.editor, s = t.settings, r, mf, me, td;\n\n\t\t\tn = DOM.add(tb, 'tr');\n\t\t\tn = td = DOM.add(n, 'td', {'class' : 'mceStatusbar'}); \n\t\t\tn = DOM.add(n, 'div', {id : ed.id + '_path_row', 'role': 'group', 'aria-labelledby': ed.id + '_path_voice'});\n\t\t\tif (s.theme_advanced_path) {\n\t\t\t\tDOM.add(n, 'span', {id: ed.id + '_path_voice'}, ed.translate('advanced.path'));\n\t\t\t\tDOM.add(n, 'span', {}, ': ');\n\t\t\t} else {\n\t\t\t\tDOM.add(n, 'span', {}, '&#160;');\n\t\t\t}\n\t\t\t\n\n\t\t\tif (s.theme_advanced_resizing) {\n\t\t\t\tDOM.add(td, 'a', {id : ed.id + '_resize', href : 'javascript:;', onclick : \"return false;\", 'class' : 'mceResize', tabIndex:\"-1\"});\n\n\t\t\t\tif (s.theme_advanced_resizing_use_cookie) {\n\t\t\t\t\ted.onPostRender.add(function() {\n\t\t\t\t\t\tvar o = Cookie.getHash(\"TinyMCE_\" + ed.id + \"_size\"), c = DOM.get(ed.id + '_tbl');\n\n\t\t\t\t\t\tif (!o)\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\tt.resizeTo(o.cw, o.ch);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\ted.onPostRender.add(function() {\n\t\t\t\t\tEvent.add(ed.id + '_resize', 'click', function(e) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t});\n\n\t\t\t\t\tEvent.add(ed.id + '_resize', 'mousedown', function(e) {\n\t\t\t\t\t\tvar mouseMoveHandler1, mouseMoveHandler2,\n\t\t\t\t\t\t\tmouseUpHandler1, mouseUpHandler2,\n\t\t\t\t\t\t\tstartX, startY, startWidth, startHeight, width, height, ifrElm;\n\n\t\t\t\t\t\tfunction resizeOnMove(e) {\n\t\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\t\twidth = startWidth + (e.screenX - startX);\n\t\t\t\t\t\t\theight = startHeight + (e.screenY - startY);\n\n\t\t\t\t\t\t\tt.resizeTo(width, height);\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tfunction endResize(e) {\n\t\t\t\t\t\t\t// Stop listening\n\t\t\t\t\t\t\tEvent.remove(DOM.doc, 'mousemove', mouseMoveHandler1);\n\t\t\t\t\t\t\tEvent.remove(ed.getDoc(), 'mousemove', mouseMoveHandler2);\n\t\t\t\t\t\t\tEvent.remove(DOM.doc, 'mouseup', mouseUpHandler1);\n\t\t\t\t\t\t\tEvent.remove(ed.getDoc(), 'mouseup', mouseUpHandler2);\n\n\t\t\t\t\t\t\twidth = startWidth + (e.screenX - startX);\n\t\t\t\t\t\t\theight = startHeight + (e.screenY - startY);\n\t\t\t\t\t\t\tt.resizeTo(width, height, true);\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\t// Get the current rect size\n\t\t\t\t\t\tstartX = e.screenX;\n\t\t\t\t\t\tstartY = e.screenY;\n\t\t\t\t\t\tifrElm = DOM.get(t.editor.id + '_ifr');\n\t\t\t\t\t\tstartWidth = width = ifrElm.clientWidth;\n\t\t\t\t\t\tstartHeight = height = ifrElm.clientHeight;\n\n\t\t\t\t\t\t// Register envent handlers\n\t\t\t\t\t\tmouseMoveHandler1 = Event.add(DOM.doc, 'mousemove', resizeOnMove);\n\t\t\t\t\t\tmouseMoveHandler2 = Event.add(ed.getDoc(), 'mousemove', resizeOnMove);\n\t\t\t\t\t\tmouseUpHandler1 = Event.add(DOM.doc, 'mouseup', endResize);\n\t\t\t\t\t\tmouseUpHandler2 = Event.add(ed.getDoc(), 'mouseup', endResize);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\to.deltaHeight -= 21;\n\t\t\tn = tb = null;\n\t\t},\n\n\t\t_updateUndoStatus : function(ed) {\n\t\t\tvar cm = ed.controlManager, um = ed.undoManager;\n\n\t\t\tcm.setDisabled('undo', !um.hasUndo() && !um.typing);\n\t\t\tcm.setDisabled('redo', !um.hasRedo());\n\t\t},\n\n\t\t_nodeChanged : function(ed, cm, n, co, ob) {\n\t\t\tvar t = this, p, de = 0, v, c, s = t.settings, cl, fz, fn, fc, bc, formatNames, matches;\n\n\t\t\ttinymce.each(t.stateControls, function(c) {\n\t\t\t\tcm.setActive(c, ed.queryCommandState(t.controls[c][1]));\n\t\t\t});\n\n\t\t\tfunction getParent(name) {\n\t\t\t\tvar i, parents = ob.parents, func = name;\n\n\t\t\t\tif (typeof(name) == 'string') {\n\t\t\t\t\tfunc = function(node) {\n\t\t\t\t\t\treturn node.nodeName == name;\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tfor (i = 0; i < parents.length; i++) {\n\t\t\t\t\tif (func(parents[i]))\n\t\t\t\t\t\treturn parents[i];\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tcm.setActive('visualaid', ed.hasVisual);\n\t\t\tt._updateUndoStatus(ed);\n\t\t\tcm.setDisabled('outdent', !ed.queryCommandState('Outdent'));\n\n\t\t\tp = getParent('A');\n\t\t\tif (c = cm.get('link')) {\n\t\t\t\tif (!p || !p.name) {\n\t\t\t\t\tc.setDisabled(!p && co);\n\t\t\t\t\tc.setActive(!!p);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (c = cm.get('unlink')) {\n\t\t\t\tc.setDisabled(!p && co);\n\t\t\t\tc.setActive(!!p && !p.name);\n\t\t\t}\n\n\t\t\tif (c = cm.get('anchor')) {\n\t\t\t\tc.setActive(!co && !!p && p.name);\n\t\t\t}\n\n\t\t\tp = getParent('IMG');\n\t\t\tif (c = cm.get('image'))\n\t\t\t\tc.setActive(!co && !!p && n.className.indexOf('mceItem') == -1);\n\n\t\t\tif (c = cm.get('styleselect')) {\n\t\t\t\tt._importClasses();\n\n\t\t\t\tformatNames = [];\n\t\t\t\teach(c.items, function(item) {\n\t\t\t\t\tformatNames.push(item.value);\n\t\t\t\t});\n\n\t\t\t\tmatches = ed.formatter.matchAll(formatNames);\n\t\t\t\tc.select(matches[0]);\n\t\t\t}\n\n\t\t\tif (c = cm.get('formatselect')) {\n\t\t\t\tp = getParent(DOM.isBlock);\n\n\t\t\t\tif (p)\n\t\t\t\t\tc.select(p.nodeName.toLowerCase());\n\t\t\t}\n\n\t\t\t// Find out current fontSize, fontFamily and fontClass\n\t\t\tgetParent(function(n) {\n\t\t\t\tif (n.nodeName === 'SPAN') {\n\t\t\t\t\tif (!cl && n.className)\n\t\t\t\t\t\tcl = n.className;\n\t\t\t\t}\n\n\t\t\t\tif (ed.dom.is(n, s.theme_advanced_font_selector)) {\n\t\t\t\t\tif (!fz && n.style.fontSize)\n\t\t\t\t\t\tfz = n.style.fontSize;\n\n\t\t\t\t\tif (!fn && n.style.fontFamily)\n\t\t\t\t\t\tfn = n.style.fontFamily.replace(/[\\\"\\']+/g, '').replace(/^([^,]+).*/, '$1').toLowerCase();\n\t\t\t\t\t\n\t\t\t\t\tif (!fc && n.style.color)\n\t\t\t\t\t\tfc = n.style.color;\n\n\t\t\t\t\tif (!bc && n.style.backgroundColor)\n\t\t\t\t\t\tbc = n.style.backgroundColor;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t});\n\n\t\t\tif (c = cm.get('fontselect')) {\n\t\t\t\tc.select(function(v) {\n\t\t\t\t\treturn v.replace(/^([^,]+).*/, '$1').toLowerCase() == fn;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Select font size\n\t\t\tif (c = cm.get('fontsizeselect')) {\n\t\t\t\t// Use computed style\n\t\t\t\tif (s.theme_advanced_runtime_fontsize && !fz && !cl)\n\t\t\t\t\tfz = ed.dom.getStyle(n, 'fontSize', true);\n\n\t\t\t\tc.select(function(v) {\n\t\t\t\t\tif (v.fontSize && v.fontSize === fz)\n\t\t\t\t\t\treturn true;\n\n\t\t\t\t\tif (v['class'] && v['class'] === cl)\n\t\t\t\t\t\treturn true;\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tif (s.theme_advanced_show_current_color) {\n\t\t\t\tfunction updateColor(controlId, color) {\n\t\t\t\t\tif (c = cm.get(controlId)) {\n\t\t\t\t\t\tif (!color)\n\t\t\t\t\t\t\tcolor = c.settings.default_color;\n\t\t\t\t\t\tif (color !== c.value) {\n\t\t\t\t\t\t\tc.displayColor(color);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tupdateColor('forecolor', fc);\n\t\t\t\tupdateColor('backcolor', bc);\n\t\t\t}\n\n\t\t\tif (s.theme_advanced_show_current_color) {\n\t\t\t\tfunction updateColor(controlId, color) {\n\t\t\t\t\tif (c = cm.get(controlId)) {\n\t\t\t\t\t\tif (!color)\n\t\t\t\t\t\t\tcolor = c.settings.default_color;\n\t\t\t\t\t\tif (color !== c.value) {\n\t\t\t\t\t\t\tc.displayColor(color);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tupdateColor('forecolor', fc);\n\t\t\t\tupdateColor('backcolor', bc);\n\t\t\t}\n\n\t\t\tif (s.theme_advanced_path && s.theme_advanced_statusbar_location) {\n\t\t\t\tp = DOM.get(ed.id + '_path') || DOM.add(ed.id + '_path_row', 'span', {id : ed.id + '_path'});\n\n\t\t\t\tif (t.statusKeyboardNavigation) {\n\t\t\t\t\tt.statusKeyboardNavigation.destroy();\n\t\t\t\t\tt.statusKeyboardNavigation = null;\n\t\t\t\t}\n\n\t\t\t\tDOM.setHTML(p, '');\n\n\t\t\t\tgetParent(function(n) {\n\t\t\t\t\tvar na = n.nodeName.toLowerCase(), u, pi, ti = '';\n\n\t\t\t\t\t// Ignore non element and bogus/hidden elements\n\t\t\t\t\tif (n.nodeType != 1 || na === 'br' || n.getAttribute('data-mce-bogus') || DOM.hasClass(n, 'mceItemHidden') || DOM.hasClass(n, 'mceItemRemoved'))\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t// Handle prefix\n\t\t\t\t\tif (tinymce.isIE && n.scopeName !== 'HTML')\n\t\t\t\t\t\tna = n.scopeName + ':' + na;\n\n\t\t\t\t\t// Remove internal prefix\n\t\t\t\t\tna = na.replace(/mce\\:/g, '');\n\n\t\t\t\t\t// Handle node name\n\t\t\t\t\tswitch (na) {\n\t\t\t\t\t\tcase 'b':\n\t\t\t\t\t\t\tna = 'strong';\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'i':\n\t\t\t\t\t\t\tna = 'em';\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'img':\n\t\t\t\t\t\t\tif (v = DOM.getAttrib(n, 'src'))\n\t\t\t\t\t\t\t\tti += 'src: ' + v + ' ';\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'a':\n\t\t\t\t\t\t\tif (v = DOM.getAttrib(n, 'name')) {\n\t\t\t\t\t\t\t\tti += 'name: ' + v + ' ';\n\t\t\t\t\t\t\t\tna += '#' + v;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (v = DOM.getAttrib(n, 'href'))\n\t\t\t\t\t\t\t\tti += 'href: ' + v + ' ';\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'font':\n\t\t\t\t\t\t\tif (v = DOM.getAttrib(n, 'face'))\n\t\t\t\t\t\t\t\tti += 'font: ' + v + ' ';\n\n\t\t\t\t\t\t\tif (v = DOM.getAttrib(n, 'size'))\n\t\t\t\t\t\t\t\tti += 'size: ' + v + ' ';\n\n\t\t\t\t\t\t\tif (v = DOM.getAttrib(n, 'color'))\n\t\t\t\t\t\t\t\tti += 'color: ' + v + ' ';\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'span':\n\t\t\t\t\t\t\tif (v = DOM.getAttrib(n, 'style'))\n\t\t\t\t\t\t\t\tti += 'style: ' + v + ' ';\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (v = DOM.getAttrib(n, 'id'))\n\t\t\t\t\t\tti += 'id: ' + v + ' ';\n\n\t\t\t\t\tif (v = n.className) {\n\t\t\t\t\t\tv = v.replace(/\\b\\s*(webkit|mce|Apple-)\\w+\\s*\\b/g, '')\n\n\t\t\t\t\t\tif (v) {\n\t\t\t\t\t\t\tti += 'class: ' + v + ' ';\n\n\t\t\t\t\t\t\tif (DOM.isBlock(n) || na == 'img' || na == 'span')\n\t\t\t\t\t\t\t\tna += '.' + v;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tna = na.replace(/(html:)/g, '');\n\t\t\t\t\tna = {name : na, node : n, title : ti};\n\t\t\t\t\tt.onResolveName.dispatch(t, na);\n\t\t\t\t\tti = na.title;\n\t\t\t\t\tna = na.name;\n\n\t\t\t\t\t//u = \"javascript:tinymce.EditorManager.get('\" + ed.id + \"').theme._sel('\" + (de++) + \"');\";\n\t\t\t\t\tpi = DOM.create('a', {'href' : \"javascript:;\", role: 'button', onmousedown : \"return false;\", title : ti, 'class' : 'mcePath_' + (de++)}, na);\n\n\t\t\t\t\tif (p.hasChildNodes()) {\n\t\t\t\t\t\tp.insertBefore(DOM.create('span', {'aria-hidden': 'true'}, '\\u00a0\\u00bb '), p.firstChild);\n\t\t\t\t\t\tp.insertBefore(pi, p.firstChild);\n\t\t\t\t\t} else\n\t\t\t\t\t\tp.appendChild(pi);\n\t\t\t\t}, ed.getBody());\n\n\t\t\t\tif (DOM.select('a', p).length > 0) {\n\t\t\t\t\tt.statusKeyboardNavigation = new tinymce.ui.KeyboardNavigation({\n\t\t\t\t\t\troot: ed.id + \"_path_row\",\n\t\t\t\t\t\titems: DOM.select('a', p),\n\t\t\t\t\t\texcludeFromTabOrder: true,\n\t\t\t\t\t\tonCancel: function() {\n\t\t\t\t\t\t\ted.focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, DOM);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t// Commands gets called by execCommand\n\n\t\t_sel : function(v) {\n\t\t\tthis.editor.execCommand('mceSelectNodeDepth', false, v);\n\t\t},\n\n\t\t_mceInsertAnchor : function(ui, v) {\n\t\t\tvar ed = this.editor;\n\n\t\t\ted.windowManager.open({\n\t\t\t\turl : this.url + '/anchor.htm',\n\t\t\t\twidth : 320 + parseInt(ed.getLang('advanced.anchor_delta_width', 0)),\n\t\t\t\theight : 90 + parseInt(ed.getLang('advanced.anchor_delta_height', 0)),\n\t\t\t\tinline : true\n\t\t\t}, {\n\t\t\t\ttheme_url : this.url\n\t\t\t});\n\t\t},\n\n\t\t_mceCharMap : function() {\n\t\t\tvar ed = this.editor;\n\n\t\t\ted.windowManager.open({\n\t\t\t\turl : this.url + '/charmap.htm',\n\t\t\t\twidth : 550 + parseInt(ed.getLang('advanced.charmap_delta_width', 0)),\n\t\t\t\theight : 260 + parseInt(ed.getLang('advanced.charmap_delta_height', 0)),\n\t\t\t\tinline : true\n\t\t\t}, {\n\t\t\t\ttheme_url : this.url\n\t\t\t});\n\t\t},\n\n\t\t_mceHelp : function() {\n\t\t\tvar ed = this.editor;\n\n\t\t\ted.windowManager.open({\n\t\t\t\turl : this.url + '/about.htm',\n\t\t\t\twidth : 480,\n\t\t\t\theight : 380,\n\t\t\t\tinline : true\n\t\t\t}, {\n\t\t\t\ttheme_url : this.url\n\t\t\t});\n\t\t},\n\n\t\t_mceShortcuts : function() {\n\t\t\tvar ed = this.editor;\n\t\t\ted.windowManager.open({\n\t\t\t\turl: this.url + '/shortcuts.htm',\n\t\t\t\twidth: 480,\n\t\t\t\theight: 380,\n\t\t\t\tinline: true\n\t\t\t}, {\n\t\t\t\ttheme_url: this.url\n\t\t\t});\n\t\t},\n\n\t\t_mceColorPicker : function(u, v) {\n\t\t\tvar ed = this.editor;\n\n\t\t\tv = v || {};\n\n\t\t\ted.windowManager.open({\n\t\t\t\turl : this.url + '/color_picker.htm',\n\t\t\t\twidth : 375 + parseInt(ed.getLang('advanced.colorpicker_delta_width', 0)),\n\t\t\t\theight : 250 + parseInt(ed.getLang('advanced.colorpicker_delta_height', 0)),\n\t\t\t\tclose_previous : false,\n\t\t\t\tinline : true\n\t\t\t}, {\n\t\t\t\tinput_color : v.color,\n\t\t\t\tfunc : v.func,\n\t\t\t\ttheme_url : this.url\n\t\t\t});\n\t\t},\n\n\t\t_mceCodeEditor : function(ui, val) {\n\t\t\tvar ed = this.editor;\n\n\t\t\ted.windowManager.open({\n\t\t\t\turl : this.url + '/source_editor.htm',\n\t\t\t\twidth : parseInt(ed.getParam(\"theme_advanced_source_editor_width\", 720)),\n\t\t\t\theight : parseInt(ed.getParam(\"theme_advanced_source_editor_height\", 580)),\n\t\t\t\tinline : true,\n\t\t\t\tresizable : true,\n\t\t\t\tmaximizable : true\n\t\t\t}, {\n\t\t\t\ttheme_url : this.url\n\t\t\t});\n\t\t},\n\n\t\t_mceImage : function(ui, val) {\n\t\t\tvar ed = this.editor;\n\n\t\t\t// Internal image object like a flash placeholder\n\t\t\tif (ed.dom.getAttrib(ed.selection.getNode(), 'class').indexOf('mceItem') != -1)\n\t\t\t\treturn;\n\n\t\t\ted.windowManager.open({\n\t\t\t\turl : this.url + '/image.htm',\n\t\t\t\twidth : 355 + parseInt(ed.getLang('advanced.image_delta_width', 0)),\n\t\t\t\theight : 275 + parseInt(ed.getLang('advanced.image_delta_height', 0)),\n\t\t\t\tinline : true\n\t\t\t}, {\n\t\t\t\ttheme_url : this.url\n\t\t\t});\n\t\t},\n\n\t\t_mceLink : function(ui, val) {\n\t\t\tvar ed = this.editor;\n\n\t\t\ted.windowManager.open({\n\t\t\t\turl : this.url + '/link.htm',\n\t\t\t\twidth : 310 + parseInt(ed.getLang('advanced.link_delta_width', 0)),\n\t\t\t\theight : 200 + parseInt(ed.getLang('advanced.link_delta_height', 0)),\n\t\t\t\tinline : true\n\t\t\t}, {\n\t\t\t\ttheme_url : this.url\n\t\t\t});\n\t\t},\n\n\t\t_mceNewDocument : function() {\n\t\t\tvar ed = this.editor;\n\n\t\t\ted.windowManager.confirm('advanced.newdocument', function(s) {\n\t\t\t\tif (s)\n\t\t\t\t\ted.execCommand('mceSetContent', false, '');\n\t\t\t});\n\t\t},\n\n\t\t_mceForeColor : function() {\n\t\t\tvar t = this;\n\n\t\t\tthis._mceColorPicker(0, {\n\t\t\t\tcolor: t.fgColor,\n\t\t\t\tfunc : function(co) {\n\t\t\t\t\tt.fgColor = co;\n\t\t\t\t\tt.editor.execCommand('ForeColor', false, co);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t_mceBackColor : function() {\n\t\t\tvar t = this;\n\n\t\t\tthis._mceColorPicker(0, {\n\t\t\t\tcolor: t.bgColor,\n\t\t\t\tfunc : function(co) {\n\t\t\t\t\tt.bgColor = co;\n\t\t\t\t\tt.editor.execCommand('HiliteColor', false, co);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t_ufirst : function(s) {\n\t\t\treturn s.substring(0, 1).toUpperCase() + s.substring(1);\n\t\t}\n\t});\n\n\ttinymce.ThemeManager.add('advanced', tinymce.themes.AdvancedTheme);\n}(tinymce));\n","Magento_Tinymce3/tiny_mce/themes/advanced/js/charmap.js":"/**\n * charmap.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\ntinyMCEPopup.requireLangPack();\n\nvar charmap = [\n\t['&nbsp;',    '&#160;',  true, 'no-break space'],\n\t['&amp;',     '&#38;',   true, 'ampersand'],\n\t['&quot;',    '&#34;',   true, 'quotation mark'],\n// finance\n\t['&cent;',    '&#162;',  true, 'cent sign'],\n\t['&euro;',    '&#8364;', true, 'euro sign'],\n\t['&pound;',   '&#163;',  true, 'pound sign'],\n\t['&yen;',     '&#165;',  true, 'yen sign'],\n// signs\n\t['&copy;',    '&#169;',  true, 'copyright sign'],\n\t['&reg;',     '&#174;',  true, 'registered sign'],\n\t['&trade;',   '&#8482;', true, 'trade mark sign'],\n\t['&permil;',  '&#8240;', true, 'per mille sign'],\n\t['&micro;',   '&#181;',  true, 'micro sign'],\n\t['&middot;',  '&#183;',  true, 'middle dot'],\n\t['&bull;',    '&#8226;', true, 'bullet'],\n\t['&hellip;',  '&#8230;', true, 'three dot leader'],\n\t['&prime;',   '&#8242;', true, 'minutes / feet'],\n\t['&Prime;',   '&#8243;', true, 'seconds / inches'],\n\t['&sect;',    '&#167;',  true, 'section sign'],\n\t['&para;',    '&#182;',  true, 'paragraph sign'],\n\t['&szlig;',   '&#223;',  true, 'sharp s / ess-zed'],\n// quotations\n\t['&lsaquo;',  '&#8249;', true, 'single left-pointing angle quotation mark'],\n\t['&rsaquo;',  '&#8250;', true, 'single right-pointing angle quotation mark'],\n\t['&laquo;',   '&#171;',  true, 'left pointing guillemet'],\n\t['&raquo;',   '&#187;',  true, 'right pointing guillemet'],\n\t['&lsquo;',   '&#8216;', true, 'left single quotation mark'],\n\t['&rsquo;',   '&#8217;', true, 'right single quotation mark'],\n\t['&ldquo;',   '&#8220;', true, 'left double quotation mark'],\n\t['&rdquo;',   '&#8221;', true, 'right double quotation mark'],\n\t['&sbquo;',   '&#8218;', true, 'single low-9 quotation mark'],\n\t['&bdquo;',   '&#8222;', true, 'double low-9 quotation mark'],\n\t['&lt;',      '&#60;',   true, 'less-than sign'],\n\t['&gt;',      '&#62;',   true, 'greater-than sign'],\n\t['&le;',      '&#8804;', true, 'less-than or equal to'],\n\t['&ge;',      '&#8805;', true, 'greater-than or equal to'],\n\t['&ndash;',   '&#8211;', true, 'en dash'],\n\t['&mdash;',   '&#8212;', true, 'em dash'],\n\t['&macr;',    '&#175;',  true, 'macron'],\n\t['&oline;',   '&#8254;', true, 'overline'],\n\t['&curren;',  '&#164;',  true, 'currency sign'],\n\t['&brvbar;',  '&#166;',  true, 'broken bar'],\n\t['&uml;',     '&#168;',  true, 'diaeresis'],\n\t['&iexcl;',   '&#161;',  true, 'inverted exclamation mark'],\n\t['&iquest;',  '&#191;',  true, 'turned question mark'],\n\t['&circ;',    '&#710;',  true, 'circumflex accent'],\n\t['&tilde;',   '&#732;',  true, 'small tilde'],\n\t['&deg;',     '&#176;',  true, 'degree sign'],\n\t['&minus;',   '&#8722;', true, 'minus sign'],\n\t['&plusmn;',  '&#177;',  true, 'plus-minus sign'],\n\t['&divide;',  '&#247;',  true, 'division sign'],\n\t['&frasl;',   '&#8260;', true, 'fraction slash'],\n\t['&times;',   '&#215;',  true, 'multiplication sign'],\n\t['&sup1;',    '&#185;',  true, 'superscript one'],\n\t['&sup2;',    '&#178;',  true, 'superscript two'],\n\t['&sup3;',    '&#179;',  true, 'superscript three'],\n\t['&frac14;',  '&#188;',  true, 'fraction one quarter'],\n\t['&frac12;',  '&#189;',  true, 'fraction one half'],\n\t['&frac34;',  '&#190;',  true, 'fraction three quarters'],\n// math / logical\n\t['&fnof;',    '&#402;',  true, 'function / florin'],\n\t['&int;',     '&#8747;', true, 'integral'],\n\t['&sum;',     '&#8721;', true, 'n-ary sumation'],\n\t['&infin;',   '&#8734;', true, 'infinity'],\n\t['&radic;',   '&#8730;', true, 'square root'],\n\t['&sim;',     '&#8764;', false,'similar to'],\n\t['&cong;',    '&#8773;', false,'approximately equal to'],\n\t['&asymp;',   '&#8776;', true, 'almost equal to'],\n\t['&ne;',      '&#8800;', true, 'not equal to'],\n\t['&equiv;',   '&#8801;', true, 'identical to'],\n\t['&isin;',    '&#8712;', false,'element of'],\n\t['&notin;',   '&#8713;', false,'not an element of'],\n\t['&ni;',      '&#8715;', false,'contains as member'],\n\t['&prod;',    '&#8719;', true, 'n-ary product'],\n\t['&and;',     '&#8743;', false,'logical and'],\n\t['&or;',      '&#8744;', false,'logical or'],\n\t['&not;',     '&#172;',  true, 'not sign'],\n\t['&cap;',     '&#8745;', true, 'intersection'],\n\t['&cup;',     '&#8746;', false,'union'],\n\t['&part;',    '&#8706;', true, 'partial differential'],\n\t['&forall;',  '&#8704;', false,'for all'],\n\t['&exist;',   '&#8707;', false,'there exists'],\n\t['&empty;',   '&#8709;', false,'diameter'],\n\t['&nabla;',   '&#8711;', false,'backward difference'],\n\t['&lowast;',  '&#8727;', false,'asterisk operator'],\n\t['&prop;',    '&#8733;', false,'proportional to'],\n\t['&ang;',     '&#8736;', false,'angle'],\n// undefined\n\t['&acute;',   '&#180;',  true, 'acute accent'],\n\t['&cedil;',   '&#184;',  true, 'cedilla'],\n\t['&ordf;',    '&#170;',  true, 'feminine ordinal indicator'],\n\t['&ordm;',    '&#186;',  true, 'masculine ordinal indicator'],\n\t['&dagger;',  '&#8224;', true, 'dagger'],\n\t['&Dagger;',  '&#8225;', true, 'double dagger'],\n// alphabetical special chars\n\t['&Agrave;',  '&#192;',  true, 'A - grave'],\n\t['&Aacute;',  '&#193;',  true, 'A - acute'],\n\t['&Acirc;',   '&#194;',  true, 'A - circumflex'],\n\t['&Atilde;',  '&#195;',  true, 'A - tilde'],\n\t['&Auml;',    '&#196;',  true, 'A - diaeresis'],\n\t['&Aring;',   '&#197;',  true, 'A - ring above'],\n\t['&AElig;',   '&#198;',  true, 'ligature AE'],\n\t['&Ccedil;',  '&#199;',  true, 'C - cedilla'],\n\t['&Egrave;',  '&#200;',  true, 'E - grave'],\n\t['&Eacute;',  '&#201;',  true, 'E - acute'],\n\t['&Ecirc;',   '&#202;',  true, 'E - circumflex'],\n\t['&Euml;',    '&#203;',  true, 'E - diaeresis'],\n\t['&Igrave;',  '&#204;',  true, 'I - grave'],\n\t['&Iacute;',  '&#205;',  true, 'I - acute'],\n\t['&Icirc;',   '&#206;',  true, 'I - circumflex'],\n\t['&Iuml;',    '&#207;',  true, 'I - diaeresis'],\n\t['&ETH;',     '&#208;',  true, 'ETH'],\n\t['&Ntilde;',  '&#209;',  true, 'N - tilde'],\n\t['&Ograve;',  '&#210;',  true, 'O - grave'],\n\t['&Oacute;',  '&#211;',  true, 'O - acute'],\n\t['&Ocirc;',   '&#212;',  true, 'O - circumflex'],\n\t['&Otilde;',  '&#213;',  true, 'O - tilde'],\n\t['&Ouml;',    '&#214;',  true, 'O - diaeresis'],\n\t['&Oslash;',  '&#216;',  true, 'O - slash'],\n\t['&OElig;',   '&#338;',  true, 'ligature OE'],\n\t['&Scaron;',  '&#352;',  true, 'S - caron'],\n\t['&Ugrave;',  '&#217;',  true, 'U - grave'],\n\t['&Uacute;',  '&#218;',  true, 'U - acute'],\n\t['&Ucirc;',   '&#219;',  true, 'U - circumflex'],\n\t['&Uuml;',    '&#220;',  true, 'U - diaeresis'],\n\t['&Yacute;',  '&#221;',  true, 'Y - acute'],\n\t['&Yuml;',    '&#376;',  true, 'Y - diaeresis'],\n\t['&THORN;',   '&#222;',  true, 'THORN'],\n\t['&agrave;',  '&#224;',  true, 'a - grave'],\n\t['&aacute;',  '&#225;',  true, 'a - acute'],\n\t['&acirc;',   '&#226;',  true, 'a - circumflex'],\n\t['&atilde;',  '&#227;',  true, 'a - tilde'],\n\t['&auml;',    '&#228;',  true, 'a - diaeresis'],\n\t['&aring;',   '&#229;',  true, 'a - ring above'],\n\t['&aelig;',   '&#230;',  true, 'ligature ae'],\n\t['&ccedil;',  '&#231;',  true, 'c - cedilla'],\n\t['&egrave;',  '&#232;',  true, 'e - grave'],\n\t['&eacute;',  '&#233;',  true, 'e - acute'],\n\t['&ecirc;',   '&#234;',  true, 'e - circumflex'],\n\t['&euml;',    '&#235;',  true, 'e - diaeresis'],\n\t['&igrave;',  '&#236;',  true, 'i - grave'],\n\t['&iacute;',  '&#237;',  true, 'i - acute'],\n\t['&icirc;',   '&#238;',  true, 'i - circumflex'],\n\t['&iuml;',    '&#239;',  true, 'i - diaeresis'],\n\t['&eth;',     '&#240;',  true, 'eth'],\n\t['&ntilde;',  '&#241;',  true, 'n - tilde'],\n\t['&ograve;',  '&#242;',  true, 'o - grave'],\n\t['&oacute;',  '&#243;',  true, 'o - acute'],\n\t['&ocirc;',   '&#244;',  true, 'o - circumflex'],\n\t['&otilde;',  '&#245;',  true, 'o - tilde'],\n\t['&ouml;',    '&#246;',  true, 'o - diaeresis'],\n\t['&oslash;',  '&#248;',  true, 'o slash'],\n\t['&oelig;',   '&#339;',  true, 'ligature oe'],\n\t['&scaron;',  '&#353;',  true, 's - caron'],\n\t['&ugrave;',  '&#249;',  true, 'u - grave'],\n\t['&uacute;',  '&#250;',  true, 'u - acute'],\n\t['&ucirc;',   '&#251;',  true, 'u - circumflex'],\n\t['&uuml;',    '&#252;',  true, 'u - diaeresis'],\n\t['&yacute;',  '&#253;',  true, 'y - acute'],\n\t['&thorn;',   '&#254;',  true, 'thorn'],\n\t['&yuml;',    '&#255;',  true, 'y - diaeresis'],\n\t['&Alpha;',   '&#913;',  true, 'Alpha'],\n\t['&Beta;',    '&#914;',  true, 'Beta'],\n\t['&Gamma;',   '&#915;',  true, 'Gamma'],\n\t['&Delta;',   '&#916;',  true, 'Delta'],\n\t['&Epsilon;', '&#917;',  true, 'Epsilon'],\n\t['&Zeta;',    '&#918;',  true, 'Zeta'],\n\t['&Eta;',     '&#919;',  true, 'Eta'],\n\t['&Theta;',   '&#920;',  true, 'Theta'],\n\t['&Iota;',    '&#921;',  true, 'Iota'],\n\t['&Kappa;',   '&#922;',  true, 'Kappa'],\n\t['&Lambda;',  '&#923;',  true, 'Lambda'],\n\t['&Mu;',      '&#924;',  true, 'Mu'],\n\t['&Nu;',      '&#925;',  true, 'Nu'],\n\t['&Xi;',      '&#926;',  true, 'Xi'],\n\t['&Omicron;', '&#927;',  true, 'Omicron'],\n\t['&Pi;',      '&#928;',  true, 'Pi'],\n\t['&Rho;',     '&#929;',  true, 'Rho'],\n\t['&Sigma;',   '&#931;',  true, 'Sigma'],\n\t['&Tau;',     '&#932;',  true, 'Tau'],\n\t['&Upsilon;', '&#933;',  true, 'Upsilon'],\n\t['&Phi;',     '&#934;',  true, 'Phi'],\n\t['&Chi;',     '&#935;',  true, 'Chi'],\n\t['&Psi;',     '&#936;',  true, 'Psi'],\n\t['&Omega;',   '&#937;',  true, 'Omega'],\n\t['&alpha;',   '&#945;',  true, 'alpha'],\n\t['&beta;',    '&#946;',  true, 'beta'],\n\t['&gamma;',   '&#947;',  true, 'gamma'],\n\t['&delta;',   '&#948;',  true, 'delta'],\n\t['&epsilon;', '&#949;',  true, 'epsilon'],\n\t['&zeta;',    '&#950;',  true, 'zeta'],\n\t['&eta;',     '&#951;',  true, 'eta'],\n\t['&theta;',   '&#952;',  true, 'theta'],\n\t['&iota;',    '&#953;',  true, 'iota'],\n\t['&kappa;',   '&#954;',  true, 'kappa'],\n\t['&lambda;',  '&#955;',  true, 'lambda'],\n\t['&mu;',      '&#956;',  true, 'mu'],\n\t['&nu;',      '&#957;',  true, 'nu'],\n\t['&xi;',      '&#958;',  true, 'xi'],\n\t['&omicron;', '&#959;',  true, 'omicron'],\n\t['&pi;',      '&#960;',  true, 'pi'],\n\t['&rho;',     '&#961;',  true, 'rho'],\n\t['&sigmaf;',  '&#962;',  true, 'final sigma'],\n\t['&sigma;',   '&#963;',  true, 'sigma'],\n\t['&tau;',     '&#964;',  true, 'tau'],\n\t['&upsilon;', '&#965;',  true, 'upsilon'],\n\t['&phi;',     '&#966;',  true, 'phi'],\n\t['&chi;',     '&#967;',  true, 'chi'],\n\t['&psi;',     '&#968;',  true, 'psi'],\n\t['&omega;',   '&#969;',  true, 'omega'],\n// symbols\n\t['&alefsym;', '&#8501;', false,'alef symbol'],\n\t['&piv;',     '&#982;',  false,'pi symbol'],\n\t['&real;',    '&#8476;', false,'real part symbol'],\n\t['&thetasym;','&#977;',  false,'theta symbol'],\n\t['&upsih;',   '&#978;',  false,'upsilon - hook symbol'],\n\t['&weierp;',  '&#8472;', false,'Weierstrass p'],\n\t['&image;',   '&#8465;', false,'imaginary part'],\n// arrows\n\t['&larr;',    '&#8592;', true, 'leftwards arrow'],\n\t['&uarr;',    '&#8593;', true, 'upwards arrow'],\n\t['&rarr;',    '&#8594;', true, 'rightwards arrow'],\n\t['&darr;',    '&#8595;', true, 'downwards arrow'],\n\t['&harr;',    '&#8596;', true, 'left right arrow'],\n\t['&crarr;',   '&#8629;', false,'carriage return'],\n\t['&lArr;',    '&#8656;', false,'leftwards double arrow'],\n\t['&uArr;',    '&#8657;', false,'upwards double arrow'],\n\t['&rArr;',    '&#8658;', false,'rightwards double arrow'],\n\t['&dArr;',    '&#8659;', false,'downwards double arrow'],\n\t['&hArr;',    '&#8660;', false,'left right double arrow'],\n\t['&there4;',  '&#8756;', false,'therefore'],\n\t['&sub;',     '&#8834;', false,'subset of'],\n\t['&sup;',     '&#8835;', false,'superset of'],\n\t['&nsub;',    '&#8836;', false,'not a subset of'],\n\t['&sube;',    '&#8838;', false,'subset of or equal to'],\n\t['&supe;',    '&#8839;', false,'superset of or equal to'],\n\t['&oplus;',   '&#8853;', false,'circled plus'],\n\t['&otimes;',  '&#8855;', false,'circled times'],\n\t['&perp;',    '&#8869;', false,'perpendicular'],\n\t['&sdot;',    '&#8901;', false,'dot operator'],\n\t['&lceil;',   '&#8968;', false,'left ceiling'],\n\t['&rceil;',   '&#8969;', false,'right ceiling'],\n\t['&lfloor;',  '&#8970;', false,'left floor'],\n\t['&rfloor;',  '&#8971;', false,'right floor'],\n\t['&lang;',    '&#9001;', false,'left-pointing angle bracket'],\n\t['&rang;',    '&#9002;', false,'right-pointing angle bracket'],\n\t['&loz;',     '&#9674;', true, 'lozenge'],\n\t['&spades;',  '&#9824;', true, 'black spade suit'],\n\t['&clubs;',   '&#9827;', true, 'black club suit'],\n\t['&hearts;',  '&#9829;', true, 'black heart suit'],\n\t['&diams;',   '&#9830;', true, 'black diamond suit'],\n\t['&ensp;',    '&#8194;', false,'en space'],\n\t['&emsp;',    '&#8195;', false,'em space'],\n\t['&thinsp;',  '&#8201;', false,'thin space'],\n\t['&zwnj;',    '&#8204;', false,'zero width non-joiner'],\n\t['&zwj;',     '&#8205;', false,'zero width joiner'],\n\t['&lrm;',     '&#8206;', false,'left-to-right mark'],\n\t['&rlm;',     '&#8207;', false,'right-to-left mark'],\n\t['&shy;',     '&#173;',  false,'soft hyphen']\n];\n\ntinyMCEPopup.onInit.add(function() {\n\ttinyMCEPopup.dom.setHTML('charmapView', renderCharMapHTML());\n\taddKeyboardNavigation();\n});\n\nfunction addKeyboardNavigation(){\n\tvar tableElm, cells, settings;\n\n\tcells = tinyMCEPopup.dom.select(\"a.charmaplink\", \"charmapgroup\");\n\n\tsettings ={\n\t\troot: \"charmapgroup\",\n\t\titems: cells\n\t};\n\tcells[0].tabindex=0;\n\ttinyMCEPopup.dom.addClass(cells[0], \"mceFocus\");\n\tif (tinymce.isGecko) {\n\t\tcells[0].focus();\t\t\n\t} else {\n\t\tsetTimeout(function(){\n\t\t\tcells[0].focus();\n\t\t}, 100);\n\t}\n\ttinyMCEPopup.editor.windowManager.createInstance('tinymce.ui.KeyboardNavigation', settings, tinyMCEPopup.dom);\n}\n\nfunction renderCharMapHTML() {\n\tvar charsPerRow = 20, tdWidth=20, tdHeight=20, i;\n\tvar html = '<div id=\"charmapgroup\" aria-labelledby=\"charmap_label\" tabindex=\"0\" role=\"listbox\">'+\n\t'<table role=\"presentation\" border=\"0\" cellspacing=\"1\" cellpadding=\"0\" width=\"' + (tdWidth*charsPerRow) + \n\t'\"><tr height=\"' + tdHeight + '\">';\n\tvar cols=-1;\n\n\tfor (i=0; i<charmap.length; i++) {\n\t\tvar previewCharFn;\n\n\t\tif (charmap[i][2]==true) {\n\t\t\tcols++;\n\t\t\tpreviewCharFn = 'previewChar(\\'' + charmap[i][1].substring(1,charmap[i][1].length) + '\\',\\'' + charmap[i][0].substring(1,charmap[i][0].length) + '\\',\\'' + charmap[i][3] + '\\');';\n\t\t\thtml += ''\n\t\t\t\t+ '<td class=\"charmap\">'\n\t\t\t\t+ '<a class=\"charmaplink\" role=\"button\" onmouseover=\"'+previewCharFn+'\" onfocus=\"'+previewCharFn+'\" href=\"javascript:void(0)\" onclick=\"insertChar(\\'' + charmap[i][1].substring(2,charmap[i][1].length-1) + '\\');\" onclick=\"return false;\" onmousedown=\"return false;\" title=\"' + charmap[i][3] + ' '+ tinyMCEPopup.editor.translate(\"advanced_dlg.charmap_usage\")+'\">'\n\t\t\t\t+ charmap[i][1]\n\t\t\t\t+ '</a></td>';\n\t\t\tif ((cols+1) % charsPerRow == 0)\n\t\t\t\thtml += '</tr><tr height=\"' + tdHeight + '\">';\n\t\t}\n\t }\n\n\tif (cols % charsPerRow > 0) {\n\t\tvar padd = charsPerRow - (cols % charsPerRow);\n\t\tfor (var i=0; i<padd-1; i++)\n\t\t\thtml += '<td width=\"' + tdWidth + '\" height=\"' + tdHeight + '\" class=\"charmap\">&nbsp;</td>';\n\t}\n\n\thtml += '</tr></table></div>';\n\thtml = html.replace(/<tr height=\"20\"><\\/tr>/g, '');\n\n\treturn html;\n}\n\nfunction insertChar(chr) {\n\ttinyMCEPopup.execCommand('mceInsertContent', false, '&#' + chr + ';');\n\n\t// Refocus in window\n\tif (tinyMCEPopup.isWindow)\n\t\twindow.focus();\n\n\ttinyMCEPopup.editor.focus();\n\ttinyMCEPopup.close();\n}\n\nfunction previewChar(codeA, codeB, codeN) {\n\tvar elmA = document.getElementById('codeA');\n\tvar elmB = document.getElementById('codeB');\n\tvar elmV = document.getElementById('codeV');\n\tvar elmN = document.getElementById('codeN');\n\n\tif (codeA=='#160;') {\n\t\telmV.innerHTML = '__';\n\t} else {\n\t\telmV.innerHTML = '&' + codeA;\n\t}\n\n\telmB.innerHTML = '&amp;' + codeA;\n\telmA.innerHTML = '&amp;' + codeB;\n\telmN.innerHTML = codeN;\n}\n","Magento_Tinymce3/tiny_mce/themes/advanced/js/color_picker.js":"tinyMCEPopup.requireLangPack();\n\nvar detail = 50, strhex = \"0123456789abcdef\", i, isMouseDown = false, isMouseOver = false;\n\nvar colors = [\n\t\"#000000\",\"#000033\",\"#000066\",\"#000099\",\"#0000cc\",\"#0000ff\",\"#330000\",\"#330033\",\n\t\"#330066\",\"#330099\",\"#3300cc\",\"#3300ff\",\"#660000\",\"#660033\",\"#660066\",\"#660099\",\n\t\"#6600cc\",\"#6600ff\",\"#990000\",\"#990033\",\"#990066\",\"#990099\",\"#9900cc\",\"#9900ff\",\n\t\"#cc0000\",\"#cc0033\",\"#cc0066\",\"#cc0099\",\"#cc00cc\",\"#cc00ff\",\"#ff0000\",\"#ff0033\",\n\t\"#ff0066\",\"#ff0099\",\"#ff00cc\",\"#ff00ff\",\"#003300\",\"#003333\",\"#003366\",\"#003399\",\n\t\"#0033cc\",\"#0033ff\",\"#333300\",\"#333333\",\"#333366\",\"#333399\",\"#3333cc\",\"#3333ff\",\n\t\"#663300\",\"#663333\",\"#663366\",\"#663399\",\"#6633cc\",\"#6633ff\",\"#993300\",\"#993333\",\n\t\"#993366\",\"#993399\",\"#9933cc\",\"#9933ff\",\"#cc3300\",\"#cc3333\",\"#cc3366\",\"#cc3399\",\n\t\"#cc33cc\",\"#cc33ff\",\"#ff3300\",\"#ff3333\",\"#ff3366\",\"#ff3399\",\"#ff33cc\",\"#ff33ff\",\n\t\"#006600\",\"#006633\",\"#006666\",\"#006699\",\"#0066cc\",\"#0066ff\",\"#336600\",\"#336633\",\n\t\"#336666\",\"#336699\",\"#3366cc\",\"#3366ff\",\"#666600\",\"#666633\",\"#666666\",\"#666699\",\n\t\"#6666cc\",\"#6666ff\",\"#996600\",\"#996633\",\"#996666\",\"#996699\",\"#9966cc\",\"#9966ff\",\n\t\"#cc6600\",\"#cc6633\",\"#cc6666\",\"#cc6699\",\"#cc66cc\",\"#cc66ff\",\"#ff6600\",\"#ff6633\",\n\t\"#ff6666\",\"#ff6699\",\"#ff66cc\",\"#ff66ff\",\"#009900\",\"#009933\",\"#009966\",\"#009999\",\n\t\"#0099cc\",\"#0099ff\",\"#339900\",\"#339933\",\"#339966\",\"#339999\",\"#3399cc\",\"#3399ff\",\n\t\"#669900\",\"#669933\",\"#669966\",\"#669999\",\"#6699cc\",\"#6699ff\",\"#999900\",\"#999933\",\n\t\"#999966\",\"#999999\",\"#9999cc\",\"#9999ff\",\"#cc9900\",\"#cc9933\",\"#cc9966\",\"#cc9999\",\n\t\"#cc99cc\",\"#cc99ff\",\"#ff9900\",\"#ff9933\",\"#ff9966\",\"#ff9999\",\"#ff99cc\",\"#ff99ff\",\n\t\"#00cc00\",\"#00cc33\",\"#00cc66\",\"#00cc99\",\"#00cccc\",\"#00ccff\",\"#33cc00\",\"#33cc33\",\n\t\"#33cc66\",\"#33cc99\",\"#33cccc\",\"#33ccff\",\"#66cc00\",\"#66cc33\",\"#66cc66\",\"#66cc99\",\n\t\"#66cccc\",\"#66ccff\",\"#99cc00\",\"#99cc33\",\"#99cc66\",\"#99cc99\",\"#99cccc\",\"#99ccff\",\n\t\"#cccc00\",\"#cccc33\",\"#cccc66\",\"#cccc99\",\"#cccccc\",\"#ccccff\",\"#ffcc00\",\"#ffcc33\",\n\t\"#ffcc66\",\"#ffcc99\",\"#ffcccc\",\"#ffccff\",\"#00ff00\",\"#00ff33\",\"#00ff66\",\"#00ff99\",\n\t\"#00ffcc\",\"#00ffff\",\"#33ff00\",\"#33ff33\",\"#33ff66\",\"#33ff99\",\"#33ffcc\",\"#33ffff\",\n\t\"#66ff00\",\"#66ff33\",\"#66ff66\",\"#66ff99\",\"#66ffcc\",\"#66ffff\",\"#99ff00\",\"#99ff33\",\n\t\"#99ff66\",\"#99ff99\",\"#99ffcc\",\"#99ffff\",\"#ccff00\",\"#ccff33\",\"#ccff66\",\"#ccff99\",\n\t\"#ccffcc\",\"#ccffff\",\"#ffff00\",\"#ffff33\",\"#ffff66\",\"#ffff99\",\"#ffffcc\",\"#ffffff\"\n];\n\nvar named = {\n\t'#F0F8FF':'Alice Blue','#FAEBD7':'Antique White','#00FFFF':'Aqua','#7FFFD4':'Aquamarine','#F0FFFF':'Azure','#F5F5DC':'Beige',\n\t'#FFE4C4':'Bisque','#000000':'Black','#FFEBCD':'Blanched Almond','#0000FF':'Blue','#8A2BE2':'Blue Violet','#A52A2A':'Brown',\n\t'#DEB887':'Burly Wood','#5F9EA0':'Cadet Blue','#7FFF00':'Chartreuse','#D2691E':'Chocolate','#FF7F50':'Coral','#6495ED':'Cornflower Blue',\n\t'#FFF8DC':'Cornsilk','#DC143C':'Crimson','#00FFFF':'Cyan','#00008B':'Dark Blue','#008B8B':'Dark Cyan','#B8860B':'Dark Golden Rod',\n\t'#A9A9A9':'Dark Gray','#A9A9A9':'Dark Grey','#006400':'Dark Green','#BDB76B':'Dark Khaki','#8B008B':'Dark Magenta','#556B2F':'Dark Olive Green',\n\t'#FF8C00':'Darkorange','#9932CC':'Dark Orchid','#8B0000':'Dark Red','#E9967A':'Dark Salmon','#8FBC8F':'Dark Sea Green','#483D8B':'Dark Slate Blue',\n\t'#2F4F4F':'Dark Slate Gray','#2F4F4F':'Dark Slate Grey','#00CED1':'Dark Turquoise','#9400D3':'Dark Violet','#FF1493':'Deep Pink','#00BFFF':'Deep Sky Blue',\n\t'#696969':'Dim Gray','#696969':'Dim Grey','#1E90FF':'Dodger Blue','#B22222':'Fire Brick','#FFFAF0':'Floral White','#228B22':'Forest Green',\n\t'#FF00FF':'Fuchsia','#DCDCDC':'Gainsboro','#F8F8FF':'Ghost White','#FFD700':'Gold','#DAA520':'Golden Rod','#808080':'Gray','#808080':'Grey',\n\t'#008000':'Green','#ADFF2F':'Green Yellow','#F0FFF0':'Honey Dew','#FF69B4':'Hot Pink','#CD5C5C':'Indian Red','#4B0082':'Indigo','#FFFFF0':'Ivory',\n\t'#F0E68C':'Khaki','#E6E6FA':'Lavender','#FFF0F5':'Lavender Blush','#7CFC00':'Lawn Green','#FFFACD':'Lemon Chiffon','#ADD8E6':'Light Blue',\n\t'#F08080':'Light Coral','#E0FFFF':'Light Cyan','#FAFAD2':'Light Golden Rod Yellow','#D3D3D3':'Light Gray','#D3D3D3':'Light Grey','#90EE90':'Light Green',\n\t'#FFB6C1':'Light Pink','#FFA07A':'Light Salmon','#20B2AA':'Light Sea Green','#87CEFA':'Light Sky Blue','#778899':'Light Slate Gray','#778899':'Light Slate Grey',\n\t'#B0C4DE':'Light Steel Blue','#FFFFE0':'Light Yellow','#00FF00':'Lime','#32CD32':'Lime Green','#FAF0E6':'Linen','#FF00FF':'Magenta','#800000':'Maroon',\n\t'#66CDAA':'Medium Aqua Marine','#0000CD':'Medium Blue','#BA55D3':'Medium Orchid','#9370D8':'Medium Purple','#3CB371':'Medium Sea Green','#7B68EE':'Medium Slate Blue',\n\t'#00FA9A':'Medium Spring Green','#48D1CC':'Medium Turquoise','#C71585':'Medium Violet Red','#191970':'Midnight Blue','#F5FFFA':'Mint Cream','#FFE4E1':'Misty Rose','#FFE4B5':'Moccasin',\n\t'#FFDEAD':'Navajo White','#000080':'Navy','#FDF5E6':'Old Lace','#808000':'Olive','#6B8E23':'Olive Drab','#FFA500':'Orange','#FF4500':'Orange Red','#DA70D6':'Orchid',\n\t'#EEE8AA':'Pale Golden Rod','#98FB98':'Pale Green','#AFEEEE':'Pale Turquoise','#D87093':'Pale Violet Red','#FFEFD5':'Papaya Whip','#FFDAB9':'Peach Puff',\n\t'#CD853F':'Peru','#FFC0CB':'Pink','#DDA0DD':'Plum','#B0E0E6':'Powder Blue','#800080':'Purple','#FF0000':'Red','#BC8F8F':'Rosy Brown','#4169E1':'Royal Blue',\n\t'#8B4513':'Saddle Brown','#FA8072':'Salmon','#F4A460':'Sandy Brown','#2E8B57':'Sea Green','#FFF5EE':'Sea Shell','#A0522D':'Sienna','#C0C0C0':'Silver',\n\t'#87CEEB':'Sky Blue','#6A5ACD':'Slate Blue','#708090':'Slate Gray','#708090':'Slate Grey','#FFFAFA':'Snow','#00FF7F':'Spring Green',\n\t'#4682B4':'Steel Blue','#D2B48C':'Tan','#008080':'Teal','#D8BFD8':'Thistle','#FF6347':'Tomato','#40E0D0':'Turquoise','#EE82EE':'Violet',\n\t'#F5DEB3':'Wheat','#FFFFFF':'White','#F5F5F5':'White Smoke','#FFFF00':'Yellow','#9ACD32':'Yellow Green'\n};\n\nvar namedLookup = {};\n\nfunction init() {\n\tvar inputColor = convertRGBToHex(tinyMCEPopup.getWindowArg('input_color')), key, value;\n\n\ttinyMCEPopup.resizeToInnerSize();\n\n\tgeneratePicker();\n\tgenerateWebColors();\n\tgenerateNamedColors();\n\n\tif (inputColor) {\n\t\tchangeFinalColor(inputColor);\n\n\t\tcol = convertHexToRGB(inputColor);\n\n\t\tif (col)\n\t\t\tupdateLight(col.r, col.g, col.b);\n\t}\n\t\n\tfor (key in named) {\n\t\tvalue = named[key];\n\t\tnamedLookup[value.replace(/\\s+/, '').toLowerCase()] = key.replace(/#/, '').toLowerCase();\n\t}\n}\n\nfunction toHexColor(color) {\n\tvar matches, red, green, blue, toInt = parseInt;\n\n\tfunction hex(value) {\n\t\tvalue = parseInt(value).toString(16);\n\n\t\treturn value.length > 1 ? value : '0' + value; // Padd with leading zero\n\t};\n\n\tcolor = color.replace(/[\\s#]+/g, '').toLowerCase();\n\tcolor = namedLookup[color] || color;\n\tmatches = /^rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)|([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})|([a-f0-9])([a-f0-9])([a-f0-9])$/.exec(color);\n\n\tif (matches) {\n\t\tif (matches[1]) {\n\t\t\tred = toInt(matches[1]);\n\t\t\tgreen = toInt(matches[2]);\n\t\t\tblue = toInt(matches[3]);\n\t\t} else if (matches[4]) {\n\t\t\tred = toInt(matches[4], 16);\n\t\t\tgreen = toInt(matches[5], 16);\n\t\t\tblue = toInt(matches[6], 16);\n\t\t} else if (matches[7]) {\n\t\t\tred = toInt(matches[7] + matches[7], 16);\n\t\t\tgreen = toInt(matches[8] + matches[8], 16);\n\t\t\tblue = toInt(matches[9] + matches[9], 16);\n\t\t}\n\n\t\treturn '#' + hex(red) + hex(green) + hex(blue);\n\t}\n\n\treturn '';\n}\n\nfunction insertAction() {\n\tvar color = document.getElementById(\"color\").value, f = tinyMCEPopup.getWindowArg('func');\n\n\ttinyMCEPopup.restoreSelection();\n\n\tif (f)\n\t\tf(toHexColor(color));\n\n\ttinyMCEPopup.close();\n}\n\nfunction showColor(color, name) {\n\tif (name)\n\t\tdocument.getElementById(\"colorname\").innerHTML = name;\n\n\tdocument.getElementById(\"preview\").style.backgroundColor = color;\n\tdocument.getElementById(\"color\").value = color.toUpperCase();\n}\n\nfunction convertRGBToHex(col) {\n\tvar re = new RegExp(\"rgb\\\\s*\\\\(\\\\s*([0-9]+).*,\\\\s*([0-9]+).*,\\\\s*([0-9]+).*\\\\)\", \"gi\");\n\n\tif (!col)\n\t\treturn col;\n\n\tvar rgb = col.replace(re, \"$1,$2,$3\").split(',');\n\tif (rgb.length == 3) {\n\t\tr = parseInt(rgb[0]).toString(16);\n\t\tg = parseInt(rgb[1]).toString(16);\n\t\tb = parseInt(rgb[2]).toString(16);\n\n\t\tr = r.length == 1 ? '0' + r : r;\n\t\tg = g.length == 1 ? '0' + g : g;\n\t\tb = b.length == 1 ? '0' + b : b;\n\n\t\treturn \"#\" + r + g + b;\n\t}\n\n\treturn col;\n}\n\nfunction convertHexToRGB(col) {\n\tif (col.indexOf('#') != -1) {\n\t\tcol = col.replace(new RegExp('[^0-9A-F]', 'gi'), '');\n\n\t\tr = parseInt(col.substring(0, 2), 16);\n\t\tg = parseInt(col.substring(2, 4), 16);\n\t\tb = parseInt(col.substring(4, 6), 16);\n\n\t\treturn {r : r, g : g, b : b};\n\t}\n\n\treturn null;\n}\n\nfunction generatePicker() {\n\tvar el = document.getElementById('light'), h = '', i;\n\n\tfor (i = 0; i < detail; i++){\n\t\th += '<div id=\"gs'+i+'\" style=\"background-color:#000000; width:15px; height:3px; border-style:none; border-width:0px;\"'\n\t\t+ ' onclick=\"changeFinalColor(this.style.backgroundColor)\"'\n\t\t+ ' onmousedown=\"isMouseDown = true; return false;\"'\n\t\t+ ' onmouseup=\"isMouseDown = false;\"'\n\t\t+ ' onmousemove=\"if (isMouseDown && isMouseOver) changeFinalColor(this.style.backgroundColor); return false;\"'\n\t\t+ ' onmouseover=\"isMouseOver = true;\"'\n\t\t+ ' onmouseout=\"isMouseOver = false;\"'\n\t\t+ '></div>';\n\t}\n\n\tel.innerHTML = h;\n}\n\nfunction generateWebColors() {\n\tvar el = document.getElementById('webcolors'), h = '', i;\n\n\tif (el.className == 'generated')\n\t\treturn;\n\n\t// TODO: VoiceOver doesn't seem to support legend as a label referenced by labelledby.\n\th += '<div role=\"listbox\" aria-labelledby=\"webcolors_title\" tabindex=\"0\"><table role=\"presentation\" border=\"0\" cellspacing=\"1\" cellpadding=\"0\">'\n\t\t+ '<tr>';\n\n\tfor (i=0; i<colors.length; i++) {\n\t\th += '<td bgcolor=\"' + colors[i] + '\" width=\"10\" height=\"10\">'\n\t\t\t+ '<a href=\"javascript:insertAction();\" role=\"option\" tabindex=\"-1\" aria-labelledby=\"web_colors_' + i + '\" onfocus=\"showColor(\\'' + colors[i] + '\\');\" onmouseover=\"showColor(\\'' + colors[i] + '\\');\" style=\"display:block;width:10px;height:10px;overflow:hidden;\">';\n\t\tif (tinyMCEPopup.editor.forcedHighContrastMode) {\n\t\t\th += '<canvas class=\"mceColorSwatch\" height=\"10\" width=\"10\" data-color=\"' + colors[i] + '\"></canvas>';\n\t\t}\n\t\th += '<span class=\"mceVoiceLabel\" style=\"display:none;\" id=\"web_colors_' + i + '\">' + colors[i].toUpperCase() + '</span>';\n\t\th += '</a></td>';\n\t\tif ((i+1) % 18 == 0)\n\t\t\th += '</tr><tr>';\n\t}\n\n\th += '</table></div>';\n\n\tel.innerHTML = h;\n\tel.className = 'generated';\n\n\tpaintCanvas(el);\n\tenableKeyboardNavigation(el.firstChild);\n}\n\nfunction paintCanvas(el) {\n\ttinyMCEPopup.getWin().tinymce.each(tinyMCEPopup.dom.select('canvas.mceColorSwatch', el), function(canvas) {\n\t\tvar context;\n\t\tif (canvas.getContext && (context = canvas.getContext(\"2d\"))) {\n\t\t\tcontext.fillStyle = canvas.getAttribute('data-color');\n\t\t\tcontext.fillRect(0, 0, 10, 10);\n\t\t}\n\t});\n}\nfunction generateNamedColors() {\n\tvar el = document.getElementById('namedcolors'), h = '', n, v, i = 0;\n\n\tif (el.className == 'generated')\n\t\treturn;\n\n\tfor (n in named) {\n\t\tv = named[n];\n\t\th += '<a href=\"javascript:insertAction();\" role=\"option\" tabindex=\"-1\" aria-labelledby=\"named_colors_' + i + '\" onfocus=\"showColor(\\'' + n + '\\',\\'' + v + '\\');\" onmouseover=\"showColor(\\'' + n + '\\',\\'' + v + '\\');\" style=\"background-color: ' + n + '\">';\n\t\tif (tinyMCEPopup.editor.forcedHighContrastMode) {\n\t\t\th += '<canvas class=\"mceColorSwatch\" height=\"10\" width=\"10\" data-color=\"' + colors[i] + '\"></canvas>';\n\t\t}\n\t\th += '<span class=\"mceVoiceLabel\" style=\"display:none;\" id=\"named_colors_' + i + '\">' + v + '</span>';\n\t\th += '</a>';\n\t\ti++;\n\t}\n\n\tel.innerHTML = h;\n\tel.className = 'generated';\n\n\tpaintCanvas(el);\n\tenableKeyboardNavigation(el);\n}\n\nfunction enableKeyboardNavigation(el) {\n\ttinyMCEPopup.editor.windowManager.createInstance('tinymce.ui.KeyboardNavigation', {\n\t\troot: el,\n\t\titems: tinyMCEPopup.dom.select('a', el)\n\t}, tinyMCEPopup.dom);\n}\n\nfunction dechex(n) {\n\treturn strhex.charAt(Math.floor(n / 16)) + strhex.charAt(n % 16);\n}\n\nfunction computeColor(e) {\n\tvar x, y, partWidth, partDetail, imHeight, r, g, b, coef, i, finalCoef, finalR, finalG, finalB, pos = tinyMCEPopup.dom.getPos(e.target);\n\n\tx = e.offsetX ? e.offsetX : (e.target ? e.clientX - pos.x : 0);\n\ty = e.offsetY ? e.offsetY : (e.target ? e.clientY - pos.y : 0);\n\n\tpartWidth = document.getElementById('colors').width / 6;\n\tpartDetail = detail / 2;\n\timHeight = document.getElementById('colors').height;\n\n\tr = (x >= 0)*(x < partWidth)*255 + (x >= partWidth)*(x < 2*partWidth)*(2*255 - x * 255 / partWidth) + (x >= 4*partWidth)*(x < 5*partWidth)*(-4*255 + x * 255 / partWidth) + (x >= 5*partWidth)*(x < 6*partWidth)*255;\n\tg = (x >= 0)*(x < partWidth)*(x * 255 / partWidth) + (x >= partWidth)*(x < 3*partWidth)*255\t+ (x >= 3*partWidth)*(x < 4*partWidth)*(4*255 - x * 255 / partWidth);\n\tb = (x >= 2*partWidth)*(x < 3*partWidth)*(-2*255 + x * 255 / partWidth) + (x >= 3*partWidth)*(x < 5*partWidth)*255 + (x >= 5*partWidth)*(x < 6*partWidth)*(6*255 - x * 255 / partWidth);\n\n\tcoef = (imHeight - y) / imHeight;\n\tr = 128 + (r - 128) * coef;\n\tg = 128 + (g - 128) * coef;\n\tb = 128 + (b - 128) * coef;\n\n\tchangeFinalColor('#' + dechex(r) + dechex(g) + dechex(b));\n\tupdateLight(r, g, b);\n}\n\nfunction updateLight(r, g, b) {\n\tvar i, partDetail = detail / 2, finalCoef, finalR, finalG, finalB, color;\n\n\tfor (i=0; i<detail; i++) {\n\t\tif ((i>=0) && (i<partDetail)) {\n\t\t\tfinalCoef = i / partDetail;\n\t\t\tfinalR = dechex(255 - (255 - r) * finalCoef);\n\t\t\tfinalG = dechex(255 - (255 - g) * finalCoef);\n\t\t\tfinalB = dechex(255 - (255 - b) * finalCoef);\n\t\t} else {\n\t\t\tfinalCoef = 2 - i / partDetail;\n\t\t\tfinalR = dechex(r * finalCoef);\n\t\t\tfinalG = dechex(g * finalCoef);\n\t\t\tfinalB = dechex(b * finalCoef);\n\t\t}\n\n\t\tcolor = finalR + finalG + finalB;\n\n\t\tsetCol('gs' + i, '#'+color);\n\t}\n}\n\nfunction changeFinalColor(color) {\n\tif (color.indexOf('#') == -1)\n\t\tcolor = convertRGBToHex(color);\n\n\tsetCol('preview', color);\n\tdocument.getElementById('color').value = color;\n}\n\nfunction setCol(e, c) {\n\ttry {\n\t\tdocument.getElementById(e).style.backgroundColor = c;\n\t} catch (ex) {\n\t\t// Ignore IE warning\n\t}\n}\n\ntinyMCEPopup.onInit.add(init);\n","Magento_Tinymce3/tiny_mce/themes/advanced/js/anchor.js":"tinyMCEPopup.requireLangPack();\n\nvar AnchorDialog = {\n\tinit : function(ed) {\n\t\tvar action, elm, f = document.forms[0];\n\n\t\tthis.editor = ed;\n\t\telm = ed.dom.getParent(ed.selection.getNode(), 'A');\n\t\tv = ed.dom.getAttrib(elm, 'name');\n\n\t\tif (v) {\n\t\t\tthis.action = 'update';\n\t\t\tf.anchorName.value = v;\n\t\t}\n\n\t\tf.insert.value = ed.getLang(elm ? 'update' : 'insert');\n\t},\n\n\tupdate : function() {\n\t\tvar ed = this.editor, elm, name = document.forms[0].anchorName.value;\n\n\t\tif (!name || !/^[a-z][a-z0-9\\-\\_:\\.]*$/i.test(name)) {\n\t\t\ttinyMCEPopup.alert('advanced_dlg.anchor_invalid');\n\t\t\treturn;\n\t\t}\n\n\t\ttinyMCEPopup.restoreSelection();\n\n\t\tif (this.action != 'update')\n\t\t\ted.selection.collapse(1);\n\n\t\telm = ed.dom.getParent(ed.selection.getNode(), 'A');\n\t\tif (elm) {\n\t\t\telm.setAttribute('name', name);\n\t\t\telm.name = name;\n\t\t} else\n\t\t\ted.execCommand('mceInsertContent', 0, ed.dom.createHTML('a', {name : name, 'class' : 'mceItemAnchor'}, ''));\n\n\t\ttinyMCEPopup.close();\n\t}\n};\n\ntinyMCEPopup.onInit.add(AnchorDialog.init, AnchorDialog);\n","Magento_Tinymce3/tiny_mce/themes/advanced/js/link.js":"tinyMCEPopup.requireLangPack();\n\nvar LinkDialog = {\n\tpreInit : function() {\n\t\tvar url;\n\n\t\tif (url = tinyMCEPopup.getParam(\"external_link_list_url\"))\n\t\t\tdocument.write('<script language=\"javascript\" type=\"text/javascript\" src=\"' + tinyMCEPopup.editor.documentBaseURI.toAbsolute(url) + '\"></script>');\n\t},\n\n\tinit : function() {\n\t\tvar f = document.forms[0], ed = tinyMCEPopup.editor;\n\n\t\t// Setup browse button\n\t\tdocument.getElementById('hrefbrowsercontainer').innerHTML = getBrowserHTML('hrefbrowser', 'href', 'file', 'theme_advanced_link');\n\t\tif (isVisible('hrefbrowser'))\n\t\t\tdocument.getElementById('href').style.width = '180px';\n\n\t\tthis.fillClassList('class_list');\n\t\tthis.fillFileList('link_list', 'tinyMCELinkList');\n\t\tthis.fillTargetList('target_list');\n\n\t\tif (e = ed.dom.getParent(ed.selection.getNode(), 'A')) {\n\t\t\tf.href.value = ed.dom.getAttrib(e, 'href');\n\t\t\tf.linktitle.value = ed.dom.getAttrib(e, 'title');\n\t\t\tf.insert.value = ed.getLang('update');\n\t\t\tselectByValue(f, 'link_list', f.href.value);\n\t\t\tselectByValue(f, 'target_list', ed.dom.getAttrib(e, 'target'));\n\t\t\tselectByValue(f, 'class_list', ed.dom.getAttrib(e, 'class'));\n\t\t}\n\t},\n\n\tupdate : function() {\n\t\tvar f = document.forms[0], ed = tinyMCEPopup.editor, e, b, href = f.href.value.replace(/ /g, '%20');\n\n\t\ttinyMCEPopup.restoreSelection();\n\t\te = ed.dom.getParent(ed.selection.getNode(), 'A');\n\n\t\t// Remove element if there is no href\n\t\tif (!f.href.value) {\n\t\t\tif (e) {\n\t\t\t\tb = ed.selection.getBookmark();\n\t\t\t\ted.dom.remove(e, 1);\n\t\t\t\ted.selection.moveToBookmark(b);\n\t\t\t\ttinyMCEPopup.execCommand(\"mceEndUndoLevel\");\n\t\t\t\ttinyMCEPopup.close();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Create new anchor elements\n\t\tif (e == null) {\n\t\t\ted.getDoc().execCommand(\"unlink\", false, null);\n\t\t\ttinyMCEPopup.execCommand(\"mceInsertLink\", false, \"#mce_temp_url#\", {skip_undo : 1});\n\n\t\t\ttinymce.each(ed.dom.select(\"a\"), function(n) {\n\t\t\t\tif (ed.dom.getAttrib(n, 'href') == '#mce_temp_url#') {\n\t\t\t\t\te = n;\n\n\t\t\t\t\ted.dom.setAttribs(e, {\n\t\t\t\t\t\thref : href,\n\t\t\t\t\t\ttitle : f.linktitle.value,\n\t\t\t\t\t\ttarget : f.target_list ? getSelectValue(f, \"target_list\") : null,\n\t\t\t\t\t\t'class' : f.class_list ? getSelectValue(f, \"class_list\") : null\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\ted.dom.setAttribs(e, {\n\t\t\t\thref : href,\n\t\t\t\ttitle : f.linktitle.value,\n\t\t\t\ttarget : f.target_list ? getSelectValue(f, \"target_list\") : null,\n\t\t\t\t'class' : f.class_list ? getSelectValue(f, \"class_list\") : null\n\t\t\t});\n\t\t}\n\n\t\t// Don't move caret if selection was image\n\t\tif (e.childNodes.length != 1 || e.firstChild.nodeName != 'IMG') {\n\t\t\ted.focus();\n\t\t\ted.selection.select(e);\n\t\t\ted.selection.collapse(0);\n\t\t\ttinyMCEPopup.storeSelection();\n\t\t}\n\n\t\ttinyMCEPopup.execCommand(\"mceEndUndoLevel\");\n\t\ttinyMCEPopup.close();\n\t},\n\n\tcheckPrefix : function(n) {\n\t\tif (n.value && Validator.isEmail(n) && !/^\\s*mailto:/i.test(n.value) && confirm(tinyMCEPopup.getLang('advanced_dlg.link_is_email')))\n\t\t\tn.value = 'mailto:' + n.value;\n\n\t\tif (/^\\s*www\\./i.test(n.value) && confirm(tinyMCEPopup.getLang('advanced_dlg.link_is_external')))\n\t\t\tn.value = 'http://' + n.value;\n\t},\n\n\tfillFileList : function(id, l) {\n\t\tvar dom = tinyMCEPopup.dom, lst = dom.get(id), v, cl;\n\n\t\tl = window[l];\n\n\t\tif (l && l.length > 0) {\n\t\t\tlst.options[lst.options.length] = new Option('', '');\n\n\t\t\ttinymce.each(l, function(o) {\n\t\t\t\tlst.options[lst.options.length] = new Option(o[0], o[1]);\n\t\t\t});\n\t\t} else\n\t\t\tdom.remove(dom.getParent(id, 'tr'));\n\t},\n\n\tfillClassList : function(id) {\n\t\tvar dom = tinyMCEPopup.dom, lst = dom.get(id), v, cl;\n\n\t\tif (v = tinyMCEPopup.getParam('theme_advanced_styles')) {\n\t\t\tcl = [];\n\n\t\t\ttinymce.each(v.split(';'), function(v) {\n\t\t\t\tvar p = v.split('=');\n\n\t\t\t\tcl.push({'title' : p[0], 'class' : p[1]});\n\t\t\t});\n\t\t} else\n\t\t\tcl = tinyMCEPopup.editor.dom.getClasses();\n\n\t\tif (cl.length > 0) {\n\t\t\tlst.options[lst.options.length] = new Option(tinyMCEPopup.getLang('not_set'), '');\n\n\t\t\ttinymce.each(cl, function(o) {\n\t\t\t\tlst.options[lst.options.length] = new Option(o.title || o['class'], o['class']);\n\t\t\t});\n\t\t} else\n\t\t\tdom.remove(dom.getParent(id, 'tr'));\n\t},\n\n\tfillTargetList : function(id) {\n\t\tvar dom = tinyMCEPopup.dom, lst = dom.get(id), v;\n\n\t\tlst.options[lst.options.length] = new Option(tinyMCEPopup.getLang('not_set'), '');\n\t\tlst.options[lst.options.length] = new Option(tinyMCEPopup.getLang('advanced_dlg.link_target_same'), '_self');\n\t\tlst.options[lst.options.length] = new Option(tinyMCEPopup.getLang('advanced_dlg.link_target_blank'), '_blank');\n\n\t\tif (v = tinyMCEPopup.getParam('theme_advanced_link_targets')) {\n\t\t\ttinymce.each(v.split(','), function(v) {\n\t\t\t\tv = v.split('=');\n\t\t\t\tlst.options[lst.options.length] = new Option(v[0], v[1]);\n\t\t\t});\n\t\t}\n\t}\n};\n\nLinkDialog.preInit();\ntinyMCEPopup.onInit.add(LinkDialog.init, LinkDialog);\n","Magento_Tinymce3/tiny_mce/themes/advanced/js/source_editor.js":"tinyMCEPopup.requireLangPack();\ntinyMCEPopup.onInit.add(onLoadInit);\n\nfunction saveContent() {\n\ttinyMCEPopup.editor.setContent(document.getElementById('htmlSource').value, {source_view : true});\n\ttinyMCEPopup.close();\n}\n\nfunction onLoadInit() {\n\ttinyMCEPopup.resizeToInnerSize();\n\n\t// Remove Gecko spellchecking\n\tif (tinymce.isGecko) {\n\t\tdocument.body.spellcheck = tinyMCEPopup.editor.getParam(\"gecko_spellcheck\", false);\n\t}\n\n\tdocument.getElementById('htmlSource').value = tinyMCEPopup.editor.getContent({source_view : true});\n\n\tif (tinyMCEPopup.editor.getParam(\"theme_advanced_source_editor_wrap\", true)) {\n\t\tsetWrap('soft');\n\t\tdocument.getElementById('wraped').checked = true;\n\t}\n\n\tresizeInputs();\n}\n\nfunction setWrap(val) {\n\tvar v, n, s = document.getElementById('htmlSource');\n\n\ts.wrap = val;\n\n\tif (!tinymce.isIE) {\n\t\tv = s.value;\n\t\tn = s.cloneNode(false);\n\t\tn.setAttribute(\"wrap\", val);\n\t\ts.parentNode.replaceChild(n, s);\n\t\tn.value = v;\n\t}\n}\n\nfunction toggleWordWrap(elm) {\n\tif (elm.checked)\n\t\tsetWrap('soft');\n\telse\n\t\tsetWrap('off');\n}\n\nfunction resizeInputs() {\n\tvar vp = tinyMCEPopup.dom.getViewPort(window), el;\n\n\tel = document.getElementById('htmlSource');\n\n\tif (el) {\n\t\tel.style.width = (vp.w - 20) + 'px';\n\t\tel.style.height = (vp.h - 65) + 'px';\n\t}\n}\n","Magento_Tinymce3/tiny_mce/themes/advanced/js/image.js":"var ImageDialog = {\n\tpreInit : function() {\n\t\tvar url;\n\n\t\ttinyMCEPopup.requireLangPack();\n\n\t\tif (url = tinyMCEPopup.getParam(\"external_image_list_url\"))\n\t\t\tdocument.write('<script language=\"javascript\" type=\"text/javascript\" src=\"' + tinyMCEPopup.editor.documentBaseURI.toAbsolute(url) + '\"></script>');\n\t},\n\n\tinit : function() {\n\t\tvar f = document.forms[0], ed = tinyMCEPopup.editor;\n\n\t\t// Setup browse button\n\t\tdocument.getElementById('srcbrowsercontainer').innerHTML = getBrowserHTML('srcbrowser','src','image','theme_advanced_image');\n\t\tif (isVisible('srcbrowser'))\n\t\t\tdocument.getElementById('src').style.width = '180px';\n\n\t\te = ed.selection.getNode();\n\n\t\tthis.fillFileList('image_list', tinyMCEPopup.getParam('external_image_list', 'tinyMCEImageList'));\n\n\t\tif (e.nodeName == 'IMG') {\n\t\t\tf.src.value = ed.dom.getAttrib(e, 'src');\n\t\t\tf.alt.value = ed.dom.getAttrib(e, 'alt');\n\t\t\tf.border.value = this.getAttrib(e, 'border');\n\t\t\tf.vspace.value = this.getAttrib(e, 'vspace');\n\t\t\tf.hspace.value = this.getAttrib(e, 'hspace');\n\t\t\tf.width.value = ed.dom.getAttrib(e, 'width');\n\t\t\tf.height.value = ed.dom.getAttrib(e, 'height');\n\t\t\tf.insert.value = ed.getLang('update');\n\t\t\tthis.styleVal = ed.dom.getAttrib(e, 'style');\n\t\t\tselectByValue(f, 'image_list', f.src.value);\n\t\t\tselectByValue(f, 'align', this.getAttrib(e, 'align'));\n\t\t\tthis.updateStyle();\n\t\t}\n\t},\n\n\tfillFileList : function(id, l) {\n\t\tvar dom = tinyMCEPopup.dom, lst = dom.get(id), v, cl;\n\n\t\tl = typeof(l) === 'function' ? l() : window[l];\n\n\t\tif (l && l.length > 0) {\n\t\t\tlst.options[lst.options.length] = new Option('', '');\n\n\t\t\ttinymce.each(l, function(o) {\n\t\t\t\tlst.options[lst.options.length] = new Option(o[0], o[1]);\n\t\t\t});\n\t\t} else\n\t\t\tdom.remove(dom.getParent(id, 'tr'));\n\t},\n\n\tupdate : function() {\n\t\tvar f = document.forms[0], nl = f.elements, ed = tinyMCEPopup.editor, args = {}, el;\n\n\t\ttinyMCEPopup.restoreSelection();\n\n\t\tif (f.src.value === '') {\n\t\t\tif (ed.selection.getNode().nodeName == 'IMG') {\n\t\t\t\ted.dom.remove(ed.selection.getNode());\n\t\t\t\ted.execCommand('mceRepaint');\n\t\t\t}\n\n\t\t\ttinyMCEPopup.close();\n\t\t\treturn;\n\t\t}\n\n\t\tif (!ed.settings.inline_styles) {\n\t\t\targs = tinymce.extend(args, {\n\t\t\t\tvspace : nl.vspace.value,\n\t\t\t\thspace : nl.hspace.value,\n\t\t\t\tborder : nl.border.value,\n\t\t\t\talign : getSelectValue(f, 'align')\n\t\t\t});\n\t\t} else\n\t\t\targs.style = this.styleVal;\n\n\t\ttinymce.extend(args, {\n\t\t\tsrc : f.src.value.replace(/ /g, '%20'),\n\t\t\talt : f.alt.value,\n\t\t\twidth : f.width.value,\n\t\t\theight : f.height.value\n\t\t});\n\n\t\tel = ed.selection.getNode();\n\n\t\tif (el && el.nodeName == 'IMG') {\n\t\t\ted.dom.setAttribs(el, args);\n\t\t\ttinyMCEPopup.editor.execCommand('mceRepaint');\n\t\t\ttinyMCEPopup.editor.focus();\n\t\t} else {\n\t\t\ttinymce.each(args, function(value, name) {\n\t\t\t\tif (value === \"\") {\n\t\t\t\t\tdelete args[name];\n\t\t\t\t}\n\t\t\t});\n\n\t\t\ted.execCommand('mceInsertContent', false, tinyMCEPopup.editor.dom.createHTML('img', args), {skip_undo : 1});\n\t\t\ted.undoManager.add();\n\t\t}\n\n\t\ttinyMCEPopup.close();\n\t},\n\n\tupdateStyle : function() {\n\t\tvar dom = tinyMCEPopup.dom, st, v, f = document.forms[0];\n\n\t\tif (tinyMCEPopup.editor.settings.inline_styles) {\n\t\t\tst = tinyMCEPopup.dom.parseStyle(this.styleVal);\n\n\t\t\t// Handle align\n\t\t\tv = getSelectValue(f, 'align');\n\t\t\tif (v) {\n\t\t\t\tif (v == 'left' || v == 'right') {\n\t\t\t\t\tst['float'] = v;\n\t\t\t\t\tdelete st['vertical-align'];\n\t\t\t\t} else {\n\t\t\t\t\tst['vertical-align'] = v;\n\t\t\t\t\tdelete st['float'];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdelete st['float'];\n\t\t\t\tdelete st['vertical-align'];\n\t\t\t}\n\n\t\t\t// Handle border\n\t\t\tv = f.border.value;\n\t\t\tif (v || v == '0') {\n\t\t\t\tif (v == '0')\n\t\t\t\t\tst['border'] = '0';\n\t\t\t\telse\n\t\t\t\t\tst['border'] = v + 'px solid black';\n\t\t\t} else\n\t\t\t\tdelete st['border'];\n\n\t\t\t// Handle hspace\n\t\t\tv = f.hspace.value;\n\t\t\tif (v) {\n\t\t\t\tdelete st['margin'];\n\t\t\t\tst['margin-left'] = v + 'px';\n\t\t\t\tst['margin-right'] = v + 'px';\n\t\t\t} else {\n\t\t\t\tdelete st['margin-left'];\n\t\t\t\tdelete st['margin-right'];\n\t\t\t}\n\n\t\t\t// Handle vspace\n\t\t\tv = f.vspace.value;\n\t\t\tif (v) {\n\t\t\t\tdelete st['margin'];\n\t\t\t\tst['margin-top'] = v + 'px';\n\t\t\t\tst['margin-bottom'] = v + 'px';\n\t\t\t} else {\n\t\t\t\tdelete st['margin-top'];\n\t\t\t\tdelete st['margin-bottom'];\n\t\t\t}\n\n\t\t\t// Merge\n\t\t\tst = tinyMCEPopup.dom.parseStyle(dom.serializeStyle(st), 'img');\n\t\t\tthis.styleVal = dom.serializeStyle(st, 'img');\n\t\t}\n\t},\n\n\tgetAttrib : function(e, at) {\n\t\tvar ed = tinyMCEPopup.editor, dom = ed.dom, v, v2;\n\n\t\tif (ed.settings.inline_styles) {\n\t\t\tswitch (at) {\n\t\t\t\tcase 'align':\n\t\t\t\t\tif (v = dom.getStyle(e, 'float'))\n\t\t\t\t\t\treturn v;\n\n\t\t\t\t\tif (v = dom.getStyle(e, 'vertical-align'))\n\t\t\t\t\t\treturn v;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'hspace':\n\t\t\t\t\tv = dom.getStyle(e, 'margin-left')\n\t\t\t\t\tv2 = dom.getStyle(e, 'margin-right');\n\t\t\t\t\tif (v && v == v2)\n\t\t\t\t\t\treturn parseInt(v.replace(/[^0-9]/g, ''));\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'vspace':\n\t\t\t\t\tv = dom.getStyle(e, 'margin-top')\n\t\t\t\t\tv2 = dom.getStyle(e, 'margin-bottom');\n\t\t\t\t\tif (v && v == v2)\n\t\t\t\t\t\treturn parseInt(v.replace(/[^0-9]/g, ''));\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'border':\n\t\t\t\t\tv = 0;\n\n\t\t\t\t\ttinymce.each(['top', 'right', 'bottom', 'left'], function(sv) {\n\t\t\t\t\t\tsv = dom.getStyle(e, 'border-' + sv + '-width');\n\n\t\t\t\t\t\t// False or not the same as prev\n\t\t\t\t\t\tif (!sv || (sv != v && v !== 0)) {\n\t\t\t\t\t\t\tv = 0;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (sv)\n\t\t\t\t\t\t\tv = sv;\n\t\t\t\t\t});\n\n\t\t\t\t\tif (v)\n\t\t\t\t\t\treturn parseInt(v.replace(/[^0-9]/g, ''));\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (v = dom.getAttrib(e, at))\n\t\t\treturn v;\n\n\t\treturn '';\n\t},\n\n\tresetImageData : function() {\n\t\tvar f = document.forms[0];\n\n\t\tf.width.value = f.height.value = \"\";\t\n\t},\n\n\tupdateImageData : function() {\n\t\tvar f = document.forms[0], t = ImageDialog;\n\n\t\tif (f.width.value == \"\")\n\t\t\tf.width.value = t.preloadImg.width;\n\n\t\tif (f.height.value == \"\")\n\t\t\tf.height.value = t.preloadImg.height;\n\t},\n\n\tgetImageData : function() {\n\t\tvar f = document.forms[0];\n\n\t\tthis.preloadImg = new Image();\n\t\tthis.preloadImg.onload = this.updateImageData;\n\t\tthis.preloadImg.onerror = this.resetImageData;\n\t\tthis.preloadImg.src = tinyMCEPopup.editor.documentBaseURI.toAbsolute(f.src.value);\n\t}\n};\n\nImageDialog.preInit();\ntinyMCEPopup.onInit.add(ImageDialog.init, ImageDialog);\n","Magento_Tinymce3/tiny_mce/themes/advanced/js/about.js":"tinyMCEPopup.requireLangPack();\n\nfunction init() {\n\tvar ed, tcont;\n\n\ttinyMCEPopup.resizeToInnerSize();\n\ted = tinyMCEPopup.editor;\n\n\t// Give FF some time\n\twindow.setTimeout(insertHelpIFrame, 10);\n\n\ttcont = document.getElementById('plugintablecontainer');\n\tdocument.getElementById('plugins_tab').style.display = 'none';\n\n\tvar html = \"\";\n\thtml += '<table id=\"plugintable\">';\n\thtml += '<thead>';\n\thtml += '<tr>';\n\thtml += '<td>' + ed.getLang('advanced_dlg.about_plugin') + '</td>';\n\thtml += '<td>' + ed.getLang('advanced_dlg.about_author') + '</td>';\n\thtml += '<td>' + ed.getLang('advanced_dlg.about_version') + '</td>';\n\thtml += '</tr>';\n\thtml += '</thead>';\n\thtml += '<tbody>';\n\n\ttinymce.each(ed.plugins, function(p, n) {\n\t\tvar info;\n\n\t\tif (!p.getInfo)\n\t\t\treturn;\n\n\t\thtml += '<tr>';\n\n\t\tinfo = p.getInfo();\n\n\t\tif (info.infourl != null && info.infourl != '')\n\t\t\thtml += '<td width=\"50%\" title=\"' + n + '\"><a href=\"' + info.infourl + '\" target=\"_blank\">' + info.longname + '</a></td>';\n\t\telse\n\t\t\thtml += '<td width=\"50%\" title=\"' + n + '\">' + info.longname + '</td>';\n\n\t\tif (info.authorurl != null && info.authorurl != '')\n\t\t\thtml += '<td width=\"35%\"><a href=\"' + info.authorurl + '\" target=\"_blank\">' + info.author + '</a></td>';\n\t\telse\n\t\t\thtml += '<td width=\"35%\">' + info.author + '</td>';\n\n\t\thtml += '<td width=\"15%\">' + info.version + '</td>';\n\t\thtml += '</tr>';\n\n\t\tdocument.getElementById('plugins_tab').style.display = '';\n\n\t});\n\n\thtml += '</tbody>';\n\thtml += '</table>';\n\n\ttcont.innerHTML = html;\n\n\ttinyMCEPopup.dom.get('version').innerHTML = tinymce.majorVersion + \".\" + tinymce.minorVersion;\n\ttinyMCEPopup.dom.get('date').innerHTML = tinymce.releaseDate;\n}\n\nfunction insertHelpIFrame() {\n\tvar html;\n\n\tif (tinyMCEPopup.getParam('docs_url')) {\n\t\thtml = '<iframe width=\"100%\" height=\"300\" src=\"' + tinyMCEPopup.editor.baseURI.toAbsolute(tinyMCEPopup.getParam('docs_url')) + '\"></iframe>';\n\t\tdocument.getElementById('iframecontainer').innerHTML = html;\n\t\tdocument.getElementById('help_tab').style.display = 'block';\n\t\tdocument.getElementById('help_tab').setAttribute(\"aria-hidden\", \"false\");\n\t}\n}\n\ntinyMCEPopup.onInit.add(init);\n","Magento_Tinymce3/tiny_mce/themes/advanced/langs/en.js":"tinyMCE.addI18n('en.advanced',{\"underline_desc\":\"Underline (Ctrl+U)\",\"italic_desc\":\"Italic (Ctrl+I)\",\"bold_desc\":\"Bold (Ctrl+B)\",dd:\"Definition Description\",dt:\"Definition Term \",samp:\"Code Sample\",code:\"Code\",blockquote:\"Block Quote\",h6:\"Heading 6\",h5:\"Heading 5\",h4:\"Heading 4\",h3:\"Heading 3\",h2:\"Heading 2\",h1:\"Heading 1\",pre:\"Preformatted\",address:\"Address\",div:\"DIV\",paragraph:\"Paragraph\",block:\"Format\",fontdefault:\"Font Family\",\"font_size\":\"Font Size\",\"style_select\":\"Styles\",\"anchor_delta_height\":\"\",\"anchor_delta_width\":\"\",\"charmap_delta_height\":\"\",\"charmap_delta_width\":\"\",\"colorpicker_delta_height\":\"\",\"colorpicker_delta_width\":\"\",\"link_delta_height\":\"\",\"link_delta_width\":\"\",\"image_delta_height\":\"\",\"image_delta_width\":\"\",\"more_colors\":\"More Colors...\",\"toolbar_focus\":\"Jump to tool buttons - Alt+Q, Jump to editor - Alt-Z, Jump to element path - Alt-X\",newdocument:\"Are you sure you want clear all contents?\",path:\"Path\",\"clipboard_msg\":\"Copy/Cut/Paste is not available in Mozilla and Firefox.\\nDo you want more information about this issue?\",\"blockquote_desc\":\"Block Quote\",\"help_desc\":\"Help\",\"newdocument_desc\":\"New Document\",\"image_props_desc\":\"Image Properties\",\"paste_desc\":\"Paste (Ctrl+V)\",\"copy_desc\":\"Copy (Ctrl+C)\",\"cut_desc\":\"Cut (Ctrl+X)\",\"anchor_desc\":\"Insert/Edit Anchor\",\"visualaid_desc\":\"show/Hide Guidelines/Invisible Elements\",\"charmap_desc\":\"Insert Special Character\",\"backcolor_desc\":\"Select Background Color\",\"forecolor_desc\":\"Select Text Color\",\"custom1_desc\":\"Your Custom Description Here\",\"removeformat_desc\":\"Remove Formatting\",\"hr_desc\":\"Insert Horizontal Line\",\"sup_desc\":\"Superscript\",\"sub_desc\":\"Subscript\",\"code_desc\":\"Edit HTML Source\",\"cleanup_desc\":\"Cleanup Messy Code\",\"image_desc\":\"Insert/Edit Image\",\"unlink_desc\":\"Unlink\",\"link_desc\":\"Insert/Edit Link\",\"redo_desc\":\"Redo (Ctrl+Y)\",\"undo_desc\":\"Undo (Ctrl+Z)\",\"indent_desc\":\"Increase Indent\",\"outdent_desc\":\"Decrease Indent\",\"numlist_desc\":\"Insert/Remove Numbered List\",\"bullist_desc\":\"Insert/Remove Bulleted List\",\"justifyfull_desc\":\"Align Full\",\"justifyright_desc\":\"Align Right\",\"justifycenter_desc\":\"Align Center\",\"justifyleft_desc\":\"Align Left\",\"striketrough_desc\":\"Strikethrough\",\"help_shortcut\":\"Press ALT-F10 for toolbar. Press ALT-0 for help\",\"rich_text_area\":\"Rich Text Area\",\"shortcuts_desc\":\"Accessability Help\",toolbar:\"Toolbar\"});","Magento_Tinymce3/tiny_mce/themes/advanced/langs/en_dlg.js":"tinyMCE.addI18n('en.advanced_dlg', {\"link_list\":\"Link List\",\"link_is_external\":\"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?\",\"link_is_email\":\"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?\",\"link_titlefield\":\"Title\",\"link_target_blank\":\"Open Link in a New Window\",\"link_target_same\":\"Open Link in the Same Window\",\"link_target\":\"Target\",\"link_url\":\"Link URL\",\"link_title\":\"Insert/Edit Link\",\"image_align_right\":\"Right\",\"image_align_left\":\"Left\",\"image_align_textbottom\":\"Text Bottom\",\"image_align_texttop\":\"Text Top\",\"image_align_bottom\":\"Bottom\",\"image_align_middle\":\"Middle\",\"image_align_top\":\"Top\",\"image_align_baseline\":\"Baseline\",\"image_align\":\"Alignment\",\"image_hspace\":\"Horizontal Space\",\"image_vspace\":\"Vertical Space\",\"image_dimensions\":\"Dimensions\",\"image_alt\":\"Image Description\",\"image_list\":\"Image List\",\"image_border\":\"Border\",\"image_src\":\"Image URL\",\"image_title\":\"Insert/Edit Image\",\"charmap_title\":\"Select Special Character\", \"charmap_usage\":\"Use left and right arrows to navigate.\",\"colorpicker_name\":\"Name:\",\"colorpicker_color\":\"Color:\",\"colorpicker_named_title\":\"Named Colors\",\"colorpicker_named_tab\":\"Named\",\"colorpicker_palette_title\":\"Palette Colors\",\"colorpicker_palette_tab\":\"Palette\",\"colorpicker_picker_title\":\"Color Picker\",\"colorpicker_picker_tab\":\"Picker\",\"colorpicker_title\":\"Select a Color\",\"code_wordwrap\":\"Word Wrap\",\"code_title\":\"HTML Source Editor\",\"anchor_name\":\"Anchor Name\",\"anchor_title\":\"Insert/Edit Anchor\",\"about_loaded\":\"Loaded Plugins\",\"about_version\":\"Version\",\"about_author\":\"Author\",\"about_plugin\":\"Plugin\",\"about_plugins\":\"Plugins\",\"about_license\":\"License\",\"about_help\":\"Help\",\"about_general\":\"About\",\"about_title\":\"About TinyMCE\",\"anchor_invalid\":\"Please specify a valid anchor name.\",\"accessibility_help\":\"Accessibility Help\",\"accessibility_usage_title\":\"General Usage\",\"\":\"\"});\n","Magento_Tinymce3/tiny_mce/themes/simple/editor_template.js":"(function(){var a=tinymce.DOM;tinymce.ThemeManager.requireLangPack(\"simple\");tinymce.create(\"tinymce.themes.SimpleTheme\",{init:function(c,d){var e=this,b=[\"Bold\",\"Italic\",\"Underline\",\"Strikethrough\",\"InsertUnorderedList\",\"InsertOrderedList\"],f=c.settings;e.editor=c;c.contentCSS.push(d+\"/skins/\"+f.skin+\"/content.css\");c.onInit.add(function(){c.onNodeChange.add(function(h,g){tinymce.each(b,function(i){g.get(i.toLowerCase()).setActive(h.queryCommandState(i))})})});a.loadCSS((f.editor_css?c.documentBaseURI.toAbsolute(f.editor_css):\"\")||d+\"/skins/\"+f.skin+\"/ui.css\")},renderUI:function(h){var e=this,i=h.targetNode,b,c,d=e.editor,f=d.controlManager,g;i=a.insertAfter(a.create(\"span\",{id:d.id+\"_container\",\"class\":\"mceEditor \"+d.settings.skin+\"SimpleSkin\"}),i);i=g=a.add(i,\"table\",{cellPadding:0,cellSpacing:0,\"class\":\"mceLayout\"});i=c=a.add(i,\"tbody\");i=a.add(c,\"tr\");i=b=a.add(a.add(i,\"td\"),\"div\",{\"class\":\"mceIframeContainer\"});i=a.add(a.add(c,\"tr\",{\"class\":\"last\"}),\"td\",{\"class\":\"mceToolbar mceLast\",align:\"center\"});c=e.toolbar=f.createToolbar(\"tools1\");c.add(f.createButton(\"bold\",{title:\"simple.bold_desc\",cmd:\"Bold\"}));c.add(f.createButton(\"italic\",{title:\"simple.italic_desc\",cmd:\"Italic\"}));c.add(f.createButton(\"underline\",{title:\"simple.underline_desc\",cmd:\"Underline\"}));c.add(f.createButton(\"strikethrough\",{title:\"simple.striketrough_desc\",cmd:\"Strikethrough\"}));c.add(f.createSeparator());c.add(f.createButton(\"undo\",{title:\"simple.undo_desc\",cmd:\"Undo\"}));c.add(f.createButton(\"redo\",{title:\"simple.redo_desc\",cmd:\"Redo\"}));c.add(f.createSeparator());c.add(f.createButton(\"cleanup\",{title:\"simple.cleanup_desc\",cmd:\"mceCleanup\"}));c.add(f.createSeparator());c.add(f.createButton(\"insertunorderedlist\",{title:\"simple.bullist_desc\",cmd:\"InsertUnorderedList\"}));c.add(f.createButton(\"insertorderedlist\",{title:\"simple.numlist_desc\",cmd:\"InsertOrderedList\"}));c.renderTo(i);return{iframeContainer:b,editorContainer:d.id+\"_container\",sizeContainer:g,deltaHeight:-20}},getInfo:function(){return{longname:\"Simple theme\",author:\"Moxiecode Systems AB\",authorurl:\"http://tinymce.moxiecode.com\",version:tinymce.majorVersion+\".\"+tinymce.minorVersion}}});tinymce.ThemeManager.add(\"simple\",tinymce.themes.SimpleTheme)})();","Magento_Tinymce3/tiny_mce/themes/simple/editor_template_src.js":"/**\n * editor_template_src.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function() {\n\tvar DOM = tinymce.DOM;\n\n\t// Tell it to load theme specific language pack(s)\n\ttinymce.ThemeManager.requireLangPack('simple');\n\n\ttinymce.create('tinymce.themes.SimpleTheme', {\n\t\tinit : function(ed, url) {\n\t\t\tvar t = this, states = ['Bold', 'Italic', 'Underline', 'Strikethrough', 'InsertUnorderedList', 'InsertOrderedList'], s = ed.settings;\n\n\t\t\tt.editor = ed;\n\t\t\ted.contentCSS.push(url + \"/skins/\" + s.skin + \"/content.css\");\n\n\t\t\ted.onInit.add(function() {\n\t\t\t\ted.onNodeChange.add(function(ed, cm) {\n\t\t\t\t\ttinymce.each(states, function(c) {\n\t\t\t\t\t\tcm.get(c.toLowerCase()).setActive(ed.queryCommandState(c));\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tDOM.loadCSS((s.editor_css ? ed.documentBaseURI.toAbsolute(s.editor_css) : '') || url + \"/skins/\" + s.skin + \"/ui.css\");\n\t\t},\n\n\t\trenderUI : function(o) {\n\t\t\tvar t = this, n = o.targetNode, ic, tb, ed = t.editor, cf = ed.controlManager, sc;\n\n\t\t\tn = DOM.insertAfter(DOM.create('span', {id : ed.id + '_container', 'class' : 'mceEditor ' + ed.settings.skin + 'SimpleSkin'}), n);\n\t\t\tn = sc = DOM.add(n, 'table', {cellPadding : 0, cellSpacing : 0, 'class' : 'mceLayout'});\n\t\t\tn = tb = DOM.add(n, 'tbody');\n\n\t\t\t// Create iframe container\n\t\t\tn = DOM.add(tb, 'tr');\n\t\t\tn = ic = DOM.add(DOM.add(n, 'td'), 'div', {'class' : 'mceIframeContainer'});\n\n\t\t\t// Create toolbar container\n\t\t\tn = DOM.add(DOM.add(tb, 'tr', {'class' : 'last'}), 'td', {'class' : 'mceToolbar mceLast', align : 'center'});\n\n\t\t\t// Create toolbar\n\t\t\ttb = t.toolbar = cf.createToolbar(\"tools1\");\n\t\t\ttb.add(cf.createButton('bold', {title : 'simple.bold_desc', cmd : 'Bold'}));\n\t\t\ttb.add(cf.createButton('italic', {title : 'simple.italic_desc', cmd : 'Italic'}));\n\t\t\ttb.add(cf.createButton('underline', {title : 'simple.underline_desc', cmd : 'Underline'}));\n\t\t\ttb.add(cf.createButton('strikethrough', {title : 'simple.striketrough_desc', cmd : 'Strikethrough'}));\n\t\t\ttb.add(cf.createSeparator());\n\t\t\ttb.add(cf.createButton('undo', {title : 'simple.undo_desc', cmd : 'Undo'}));\n\t\t\ttb.add(cf.createButton('redo', {title : 'simple.redo_desc', cmd : 'Redo'}));\n\t\t\ttb.add(cf.createSeparator());\n\t\t\ttb.add(cf.createButton('cleanup', {title : 'simple.cleanup_desc', cmd : 'mceCleanup'}));\n\t\t\ttb.add(cf.createSeparator());\n\t\t\ttb.add(cf.createButton('insertunorderedlist', {title : 'simple.bullist_desc', cmd : 'InsertUnorderedList'}));\n\t\t\ttb.add(cf.createButton('insertorderedlist', {title : 'simple.numlist_desc', cmd : 'InsertOrderedList'}));\n\t\t\ttb.renderTo(n);\n\n\t\t\treturn {\n\t\t\t\tiframeContainer : ic,\n\t\t\t\teditorContainer : ed.id + '_container',\n\t\t\t\tsizeContainer : sc,\n\t\t\t\tdeltaHeight : -20\n\t\t\t};\n\t\t},\n\n\t\tgetInfo : function() {\n\t\t\treturn {\n\t\t\t\tlongname : 'Simple theme',\n\t\t\t\tauthor : 'Moxiecode Systems AB',\n\t\t\t\tauthorurl : 'http://tinymce.moxiecode.com',\n\t\t\t\tversion : tinymce.majorVersion + \".\" + tinymce.minorVersion\n\t\t\t}\n\t\t}\n\t});\n\n\ttinymce.ThemeManager.add('simple', tinymce.themes.SimpleTheme);\n})();","Magento_Tinymce3/tiny_mce/themes/simple/langs/en.js":"tinyMCE.addI18n('en.simple',{\"cleanup_desc\":\"Cleanup Messy Code\",\"redo_desc\":\"Redo (Ctrl+Y)\",\"undo_desc\":\"Undo (Ctrl+Z)\",\"numlist_desc\":\"Insert/Remove Numbered List\",\"bullist_desc\":\"Insert/Remove Bulleted List\",\"striketrough_desc\":\"Strikethrough\",\"underline_desc\":\"Underline (Ctrl+U)\",\"italic_desc\":\"Italic (Ctrl+I)\",\"bold_desc\":\"Bold (Ctrl+B)\"});","Magento_Tinymce3/tiny_mce/langs/en.js":"tinyMCE.addI18n({en:{common:{\"more_colors\":\"More Colors...\",\"invalid_data\":\"Error: Invalid values entered, these are marked in red.\",\"popup_blocked\":\"Sorry, but we have noticed that your popup-blocker has disabled a window that provides application functionality. You will need to disable popup blocking on this site in order to fully utilize this tool.\",\"clipboard_no_support\":\"Currently not supported by your browser, use keyboard shortcuts instead.\",\"clipboard_msg\":\"Copy/Cut/Paste is not available in Mozilla and Firefox.\\nDo you want more information about this issue?\",\"not_set\":\"-- Not Set --\",\"class_name\":\"Class\",browse:\"Browse\",close:\"Close\",cancel:\"Cancel\",update:\"Update\",insert:\"Insert\",apply:\"Apply\",\"edit_confirm\":\"Do you want to use the WYSIWYG mode for this textarea?\",\"invalid_data_number\":\"{#field} must be a number\",\"invalid_data_min\":\"{#field} must be a number greater than {#min}\",\"invalid_data_size\":\"{#field} must be a number or percentage\",value:\"(value)\"},contextmenu:{full:\"Full\",right:\"Right\",center:\"Center\",left:\"Left\",align:\"Alignment\"},insertdatetime:{\"day_short\":\"Sun,Mon,Tue,Wed,Thu,Fri,Sat,Sun\",\"day_long\":\"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday,Sunday\",\"months_short\":\"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec\",\"months_long\":\"January,February,March,April,May,June,July,August,September,October,November,December\",\"inserttime_desc\":\"Insert Time\",\"insertdate_desc\":\"Insert Date\",\"time_fmt\":\"%H:%M:%S\",\"date_fmt\":\"%Y-%m-%d\"},print:{\"print_desc\":\"Print\"},preview:{\"preview_desc\":\"Preview\"},directionality:{\"rtl_desc\":\"Direction Right to Left\",\"ltr_desc\":\"Direction Left to Right\"},layer:{content:\"New layer...\",\"absolute_desc\":\"Toggle Absolute Positioning\",\"backward_desc\":\"Move Backward\",\"forward_desc\":\"Move Forward\",\"insertlayer_desc\":\"Insert New Layer\"},save:{\"save_desc\":\"Save\",\"cancel_desc\":\"Cancel All Changes\"},nonbreaking:{\"nonbreaking_desc\":\"Insert Non-Breaking Space Character\"},iespell:{download:\"ieSpell not detected. Do you want to install it now?\",\"iespell_desc\":\"Check Spelling\"},advhr:{\"delta_height\":\"\",\"delta_width\":\"\",\"advhr_desc\":\"Insert Horizontal Line\"},emotions:{\"delta_height\":\"\",\"delta_width\":\"\",\"emotions_desc\":\"Emotions\"},searchreplace:{\"replace_desc\":\"Find/Replace\",\"delta_width\":\"\",\"delta_height\":\"\",\"search_desc\":\"Find\"},advimage:{\"delta_width\":\"\",\"image_desc\":\"Insert/Edit Image\",\"delta_height\":\"\"},advlink:{\"delta_height\":\"\",\"delta_width\":\"\",\"link_desc\":\"Insert/Edit Link\"},xhtmlxtras:{\"attribs_delta_height\":\"\",\"attribs_delta_width\":\"\",\"ins_delta_height\":\"\",\"ins_delta_width\":\"\",\"del_delta_height\":\"\",\"del_delta_width\":\"\",\"acronym_delta_height\":\"\",\"acronym_delta_width\":\"\",\"abbr_delta_height\":\"\",\"abbr_delta_width\":\"\",\"cite_delta_height\":\"\",\"cite_delta_width\":\"\",\"attribs_desc\":\"Insert/Edit Attributes\",\"ins_desc\":\"Insertion\",\"del_desc\":\"Deletion\",\"acronym_desc\":\"Acronym\",\"abbr_desc\":\"Abbreviation\",\"cite_desc\":\"Citation\"},style:{\"delta_height\":\"\",\"delta_width\":\"\",desc:\"Edit CSS Style\"},paste:{\"plaintext_mode_stick\":\"Paste is now in plain text mode. Click again to toggle back to regular paste mode.\",\"plaintext_mode\":\"Paste is now in plain text mode. Click again to toggle back to regular paste mode. After you paste something you will be returned to regular paste mode.\",\"selectall_desc\":\"Select All\",\"paste_word_desc\":\"Paste from Word\",\"paste_text_desc\":\"Paste as Plain Text\"},\"paste_dlg\":{\"word_title\":\"Use Ctrl+V on your keyboard to paste the text into the window.\",\"text_linebreaks\":\"Keep Linebreaks\",\"text_title\":\"Use Ctrl+V on your keyboard to paste the text into the window.\"},table:{\"merge_cells_delta_height\":\"\",\"merge_cells_delta_width\":\"\",\"table_delta_height\":\"\",\"table_delta_width\":\"\",\"cellprops_delta_height\":\"\",\"cellprops_delta_width\":\"\",\"rowprops_delta_height\":\"\",\"rowprops_delta_width\":\"\",cell:\"Cell\",col:\"Column\",row:\"Row\",del:\"Delete Table\",\"copy_row_desc\":\"Copy Table Row\",\"cut_row_desc\":\"Cut Table Row\",\"paste_row_after_desc\":\"Paste Table Row After\",\"paste_row_before_desc\":\"Paste Table Row Before\",\"props_desc\":\"Table Properties\",\"cell_desc\":\"Table Cell Properties\",\"row_desc\":\"Table Row Properties\",\"merge_cells_desc\":\"Merge Table Cells\",\"split_cells_desc\":\"Split Merged Table Cells\",\"delete_col_desc\":\"Delete Column\",\"col_after_desc\":\"Insert Column After\",\"col_before_desc\":\"Insert Column Before\",\"delete_row_desc\":\"Delete Row\",\"row_after_desc\":\"Insert Row After\",\"row_before_desc\":\"Insert Row Before\",desc:\"Insert/Edit Table\"},autosave:{\"warning_message\":\"If you restore the saved content, you will lose all the content that is currently in the editor.\\n\\nAre you sure you want to restore the saved content?\",\"restore_content\":\"Restore auto-saved content.\",\"unload_msg\":\"The changes you made will be lost if you navigate away from this page.\"},fullscreen:{desc:\"Toggle Full Screen Mode\"},media:{\"delta_height\":\"\",\"delta_width\":\"\",edit:\"Edit Embedded Media\",desc:\"Insert/Edit Embedded Media\"},fullpage:{desc:\"Document Properties\",\"delta_width\":\"\",\"delta_height\":\"\"},template:{desc:\"Insert Predefined Template Content\"},visualchars:{desc:\"Show/Hide Visual Control Characters\"},spellchecker:{desc:\"Toggle Spell Checker\",menu:\"Spell Checker Settings\",\"ignore_word\":\"Ignore Word\",\"ignore_words\":\"Ignore All\",langs:\"Languages\",wait:\"Please wait...\",sug:\"Suggestions\",\"no_sug\":\"No Suggestions\",\"no_mpell\":\"No misspellings found.\",\"learn_word\":\"Learn word\"},pagebreak:{desc:\"Insert Page Break for Printing\"},advlist:{types:\"Types\",def:\"Default\",\"lower_alpha\":\"Lower Alpha\",\"lower_greek\":\"Lower Greek\",\"lower_roman\":\"Lower Roman\",\"upper_alpha\":\"Upper Alpha\",\"upper_roman\":\"Upper Roman\",circle:\"Circle\",disc:\"Disc\",square:\"Square\"},colors:{\"333300\":\"Dark olive\",\"993300\":\"Burnt orange\",\"000000\":\"Black\",\"003300\":\"Dark green\",\"003366\":\"Dark azure\",\"000080\":\"Navy Blue\",\"333399\":\"Indigo\",\"333333\":\"Very dark gray\",\"800000\":\"Maroon\",FF6600:\"Orange\",\"808000\":\"Olive\",\"008000\":\"Green\",\"008080\":\"Teal\",\"0000FF\":\"Blue\",\"666699\":\"Grayish blue\",\"808080\":\"Gray\",FF0000:\"Red\",FF9900:\"Amber\",\"99CC00\":\"Yellow green\",\"339966\":\"Sea green\",\"33CCCC\":\"Turquoise\",\"3366FF\":\"Royal blue\",\"800080\":\"Purple\",\"999999\":\"Medium gray\",FF00FF:\"Magenta\",FFCC00:\"Gold\",FFFF00:\"Yellow\",\"00FF00\":\"Lime\",\"00FFFF\":\"Aqua\",\"00CCFF\":\"Sky blue\",\"993366\":\"Brown\",C0C0C0:\"Silver\",FF99CC:\"Pink\",FFCC99:\"Peach\",FFFF99:\"Light yellow\",CCFFCC:\"Pale green\",CCFFFF:\"Pale cyan\",\"99CCFF\":\"Light sky blue\",CC99FF:\"Plum\",FFFFFF:\"White\"},aria:{\"rich_text_area\":\"Rich Text Area\"},wordcount:{words:\"Words:\"}}});","Magento_Tinymce3/tiny_mce/plugins/legacyoutput/editor_plugin_src.js":"/**\n * editor_plugin_src.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n *\n * This plugin will force TinyMCE to produce deprecated legacy output such as font elements, u elements, align\n * attributes and so forth. There are a few cases where these old items might be needed for example in email applications or with Flash\n *\n * However you should NOT use this plugin if you are building some system that produces web contents such as a CMS. All these elements are\n * not apart of the newer specifications for HTML and XHTML.\n */\n\n(function(tinymce) {\n\t// Override inline_styles setting to force TinyMCE to produce deprecated contents\n\ttinymce.onAddEditor.addToTop(function(tinymce, editor) {\n\t\teditor.settings.inline_styles = false;\n\t});\n\n\t// Create the legacy ouput plugin\n\ttinymce.create('tinymce.plugins.LegacyOutput', {\n\t\tinit : function(editor) {\n\t\t\teditor.onInit.add(function() {\n\t\t\t\tvar alignElements = 'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img',\n\t\t\t\t\tfontSizes = tinymce.explode(editor.settings.font_size_style_values),\n\t\t\t\t\tschema = editor.schema;\n\n\t\t\t\t// Override some internal formats to produce legacy elements and attributes\n\t\t\t\teditor.formatter.register({\n\t\t\t\t\t// Change alignment formats to use the deprecated align attribute\n\t\t\t\t\talignleft : {selector : alignElements, attributes : {align : 'left'}},\n\t\t\t\t\taligncenter : {selector : alignElements, attributes : {align : 'center'}},\n\t\t\t\t\talignright : {selector : alignElements, attributes : {align : 'right'}},\n\t\t\t\t\talignfull : {selector : alignElements, attributes : {align : 'justify'}},\n\n\t\t\t\t\t// Change the basic formatting elements to use deprecated element types\n\t\t\t\t\tbold : [\n\t\t\t\t\t\t{inline : 'b', remove : 'all'},\n\t\t\t\t\t\t{inline : 'strong', remove : 'all'},\n\t\t\t\t\t\t{inline : 'span', styles : {fontWeight : 'bold'}}\n\t\t\t\t\t],\n\t\t\t\t\titalic : [\n\t\t\t\t\t\t{inline : 'i', remove : 'all'},\n\t\t\t\t\t\t{inline : 'em', remove : 'all'},\n\t\t\t\t\t\t{inline : 'span', styles : {fontStyle : 'italic'}}\n\t\t\t\t\t],\n\t\t\t\t\tunderline : [\n\t\t\t\t\t\t{inline : 'u', remove : 'all'},\n\t\t\t\t\t\t{inline : 'span', styles : {textDecoration : 'underline'}, exact : true}\n\t\t\t\t\t],\n\t\t\t\t\tstrikethrough : [\n\t\t\t\t\t\t{inline : 'strike', remove : 'all'},\n\t\t\t\t\t\t{inline : 'span', styles : {textDecoration: 'line-through'}, exact : true}\n\t\t\t\t\t],\n\n\t\t\t\t\t// Change font size and font family to use the deprecated font element\n\t\t\t\t\tfontname : {inline : 'font', attributes : {face : '%value'}},\n\t\t\t\t\tfontsize : {\n\t\t\t\t\t\tinline : 'font',\n\t\t\t\t\t\tattributes : {\n\t\t\t\t\t\t\tsize : function(vars) {\n\t\t\t\t\t\t\t\treturn tinymce.inArray(fontSizes, vars.value) + 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\n\t\t\t\t\t// Setup font elements for colors as well\n\t\t\t\t\tforecolor : {inline : 'font', styles : {color : '%value'}},\n\t\t\t\t\thilitecolor : {inline : 'font', styles : {backgroundColor : '%value'}}\n\t\t\t\t});\n\n\t\t\t\t// Check that deprecated elements are allowed if not add them\n\t\t\t\ttinymce.each('b,i,u,strike'.split(','), function(name) {\n\t\t\t\t\tschema.addValidElements(name + '[*]');\n\t\t\t\t});\n\n\t\t\t\t// Add font element if it's missing\n\t\t\t\tif (!schema.getElementRule(\"font\"))\n\t\t\t\t\tschema.addValidElements(\"font[face|size|color|style]\");\n\n\t\t\t\t// Add the missing and depreacted align attribute for the serialization engine\n\t\t\t\ttinymce.each(alignElements.split(','), function(name) {\n\t\t\t\t\tvar rule = schema.getElementRule(name), found;\n\n\t\t\t\t\tif (rule) {\n\t\t\t\t\t\tif (!rule.attributes.align) {\n\t\t\t\t\t\t\trule.attributes.align = {};\n\t\t\t\t\t\t\trule.attributesOrder.push('align');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Listen for the onNodeChange event so that we can do special logic for the font size and font name drop boxes\n\t\t\t\teditor.onNodeChange.add(function(editor, control_manager) {\n\t\t\t\t\tvar control, fontElm, fontName, fontSize;\n\n\t\t\t\t\t// Find font element get it's name and size\n\t\t\t\t\tfontElm = editor.dom.getParent(editor.selection.getNode(), 'font');\n\t\t\t\t\tif (fontElm) {\n\t\t\t\t\t\tfontName = fontElm.face;\n\t\t\t\t\t\tfontSize = fontElm.size;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Select/unselect the font name in droplist\n\t\t\t\t\tif (control = control_manager.get('fontselect')) {\n\t\t\t\t\t\tcontrol.select(function(value) {\n\t\t\t\t\t\t\treturn value == fontName;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// Select/unselect the font size in droplist\n\t\t\t\t\tif (control = control_manager.get('fontsizeselect')) {\n\t\t\t\t\t\tcontrol.select(function(value) {\n\t\t\t\t\t\t\tvar index = tinymce.inArray(fontSizes, value.fontSize);\n\n\t\t\t\t\t\t\treturn index + 1 == fontSize;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\tgetInfo : function() {\n\t\t\treturn {\n\t\t\t\tlongname : 'LegacyOutput',\n\t\t\t\tauthor : 'Moxiecode Systems AB',\n\t\t\t\tauthorurl : 'http://tinymce.moxiecode.com',\n\t\t\t\tinfourl : 'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/legacyoutput',\n\t\t\t\tversion : tinymce.majorVersion + \".\" + tinymce.minorVersion\n\t\t\t};\n\t\t}\n\t});\n\n\t// Register plugin\n\ttinymce.PluginManager.add('legacyoutput', tinymce.plugins.LegacyOutput);\n})(tinymce);\n","Magento_Tinymce3/tiny_mce/plugins/legacyoutput/editor_plugin.js":"(function(a){a.onAddEditor.addToTop(function(c,b){b.settings.inline_styles=false});a.create(\"tinymce.plugins.LegacyOutput\",{init:function(b){b.onInit.add(function(){var c=\"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img\",e=a.explode(b.settings.font_size_style_values),d=b.schema;b.formatter.register({alignleft:{selector:c,attributes:{align:\"left\"}},aligncenter:{selector:c,attributes:{align:\"center\"}},alignright:{selector:c,attributes:{align:\"right\"}},alignfull:{selector:c,attributes:{align:\"justify\"}},bold:[{inline:\"b\",remove:\"all\"},{inline:\"strong\",remove:\"all\"},{inline:\"span\",styles:{fontWeight:\"bold\"}}],italic:[{inline:\"i\",remove:\"all\"},{inline:\"em\",remove:\"all\"},{inline:\"span\",styles:{fontStyle:\"italic\"}}],underline:[{inline:\"u\",remove:\"all\"},{inline:\"span\",styles:{textDecoration:\"underline\"},exact:true}],strikethrough:[{inline:\"strike\",remove:\"all\"},{inline:\"span\",styles:{textDecoration:\"line-through\"},exact:true}],fontname:{inline:\"font\",attributes:{face:\"%value\"}},fontsize:{inline:\"font\",attributes:{size:function(f){return a.inArray(e,f.value)+1}}},forecolor:{inline:\"font\",styles:{color:\"%value\"}},hilitecolor:{inline:\"font\",styles:{backgroundColor:\"%value\"}}});a.each(\"b,i,u,strike\".split(\",\"),function(f){d.addValidElements(f+\"[*]\")});if(!d.getElementRule(\"font\")){d.addValidElements(\"font[face|size|color|style]\")}a.each(c.split(\",\"),function(f){var h=d.getElementRule(f),g;if(h){if(!h.attributes.align){h.attributes.align={};h.attributesOrder.push(\"align\")}}});b.onNodeChange.add(function(g,k){var j,f,h,i;f=g.dom.getParent(g.selection.getNode(),\"font\");if(f){h=f.face;i=f.size}if(j=k.get(\"fontselect\")){j.select(function(l){return l==h})}if(j=k.get(\"fontsizeselect\")){j.select(function(m){var l=a.inArray(e,m.fontSize);return l+1==i})}})})},getInfo:function(){return{longname:\"LegacyOutput\",author:\"Moxiecode Systems AB\",authorurl:\"http://tinymce.moxiecode.com\",infourl:\"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/legacyoutput\",version:a.majorVersion+\".\"+a.minorVersion}}});a.PluginManager.add(\"legacyoutput\",a.plugins.LegacyOutput)})(tinymce);","Magento_Tinymce3/tiny_mce/plugins/emotions/editor_plugin_src.js":"/**\n * editor_plugin_src.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n\ttinymce.create('tinymce.plugins.EmotionsPlugin', {\n\t\tinit : function(ed, url) {\n\t\t\t// Register commands\n\t\t\ted.addCommand('mceEmotion', function() {\n\t\t\t\ted.windowManager.open({\n\t\t\t\t\tfile : url + '/emotions.htm',\n\t\t\t\t\twidth : 250 + parseInt(ed.getLang('emotions.delta_width', 0)),\n\t\t\t\t\theight : 160 + parseInt(ed.getLang('emotions.delta_height', 0)),\n\t\t\t\t\tinline : 1\n\t\t\t\t}, {\n\t\t\t\t\tplugin_url : url\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Register buttons\n\t\t\ted.addButton('emotions', {title : 'emotions.emotions_desc', cmd : 'mceEmotion'});\n\t\t},\n\n\t\tgetInfo : function() {\n\t\t\treturn {\n\t\t\t\tlongname : 'Emotions',\n\t\t\t\tauthor : 'Moxiecode Systems AB',\n\t\t\t\tauthorurl : 'http://tinymce.moxiecode.com',\n\t\t\t\tinfourl : 'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/emotions',\n\t\t\t\tversion : tinymce.majorVersion + \".\" + tinymce.minorVersion\n\t\t\t};\n\t\t}\n\t});\n\n\t// Register plugin\n\ttinymce.PluginManager.add('emotions', tinymce.plugins.EmotionsPlugin);\n})(tinymce);","Magento_Tinymce3/tiny_mce/plugins/emotions/editor_plugin.js":"(function(a){a.create(\"tinymce.plugins.EmotionsPlugin\",{init:function(b,c){b.addCommand(\"mceEmotion\",function(){b.windowManager.open({file:c+\"/emotions.htm\",width:250+parseInt(b.getLang(\"emotions.delta_width\",0)),height:160+parseInt(b.getLang(\"emotions.delta_height\",0)),inline:1},{plugin_url:c})});b.addButton(\"emotions\",{title:\"emotions.emotions_desc\",cmd:\"mceEmotion\"})},getInfo:function(){return{longname:\"Emotions\",author:\"Moxiecode Systems AB\",authorurl:\"http://tinymce.moxiecode.com\",infourl:\"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/emotions\",version:a.majorVersion+\".\"+a.minorVersion}}});a.PluginManager.add(\"emotions\",a.plugins.EmotionsPlugin)})(tinymce);","Magento_Tinymce3/tiny_mce/plugins/emotions/js/emotions.js":"tinyMCEPopup.requireLangPack();\n\nvar EmotionsDialog = {\n\taddKeyboardNavigation: function(){\n\t\tvar tableElm, cells, settings;\n\t\t\t\n\t\tcells = tinyMCEPopup.dom.select(\"a.emoticon_link\", \"emoticon_table\");\n\t\t\t\n\t\tsettings ={\n\t\t\troot: \"emoticon_table\",\n\t\t\titems: cells\n\t\t};\n\t\tcells[0].tabindex=0;\n\t\ttinyMCEPopup.dom.addClass(cells[0], \"mceFocus\");\n\t\tif (tinymce.isGecko) {\n\t\t\tcells[0].focus();\t\t\n\t\t} else {\n\t\t\tsetTimeout(function(){\n\t\t\t\tcells[0].focus();\n\t\t\t}, 100);\n\t\t}\n\t\ttinyMCEPopup.editor.windowManager.createInstance('tinymce.ui.KeyboardNavigation', settings, tinyMCEPopup.dom);\n\t}, \n\tinit : function(ed) {\n\t\ttinyMCEPopup.resizeToInnerSize();\n\t\tthis.addKeyboardNavigation();\n\t},\n\n\tinsert : function(file, title) {\n\t\tvar ed = tinyMCEPopup.editor, dom = ed.dom;\n\n\t\ttinyMCEPopup.execCommand('mceInsertContent', false, dom.createHTML('img', {\n\t\t\tsrc : tinyMCEPopup.getWindowArg('plugin_url') + '/img/' + file,\n\t\t\talt : ed.getLang(title),\n\t\t\ttitle : ed.getLang(title),\n\t\t\tborder : 0\n\t\t}));\n\n\t\ttinyMCEPopup.close();\n\t}\n};\n\ntinyMCEPopup.onInit.add(EmotionsDialog.init, EmotionsDialog);\n","Magento_Tinymce3/tiny_mce/plugins/emotions/langs/en_dlg.js":"tinyMCE.addI18n('en.emotions_dlg',{cry:\"Cry\",cool:\"Cool\",desc:\"Emotions\",title:\"Insert Emotion\",usage:\"Use left and right arrows to navigate.\",yell:\"Yell\",wink:\"Wink\",undecided:\"Undecided\",\"tongue_out\":\"Tongue Out\",surprised:\"Surprised\",smile:\"Smile\",sealed:\"Sealed\",\"money_mouth\":\"Money Mouth\",laughing:\"Laughing\",kiss:\"Kiss\",innocent:\"Innocent\",frown:\"Frown\",\"foot_in_mouth\":\"Foot in Mouth\",embarassed:\"Embarassed\"});\n","Magento_Tinymce3/tiny_mce/plugins/advlist/editor_plugin_src.js":"/**\n * editor_plugin_src.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function() {\n\tvar each = tinymce.each;\n\n\ttinymce.create('tinymce.plugins.AdvListPlugin', {\n\t\tinit : function(ed, url) {\n\t\t\tvar t = this;\n\n\t\t\tt.editor = ed;\n\n\t\t\tfunction buildFormats(str) {\n\t\t\t\tvar formats = [];\n\n\t\t\t\teach(str.split(/,/), function(type) {\n\t\t\t\t\tformats.push({\n\t\t\t\t\t\ttitle : 'advlist.' + (type == 'default' ? 'def' : type.replace(/-/g, '_')),\n\t\t\t\t\t\tstyles : {\n\t\t\t\t\t\t\tlistStyleType : type == 'default' ? '' : type\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\treturn formats;\n\t\t\t};\n\n\t\t\t// Setup number formats from config or default\n\t\t\tt.numlist = ed.getParam(\"advlist_number_styles\") || buildFormats(\"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman\");\n\t\t\tt.bullist = ed.getParam(\"advlist_bullet_styles\") || buildFormats(\"default,circle,disc,square\");\n\n\t\t\tif (tinymce.isIE && /MSIE [2-7]/.test(navigator.userAgent))\n\t\t\t\tt.isIE7 = true;\n\t\t},\n\n\t\tcreateControl: function(name, cm) {\n\t\t\tvar t = this, btn, format, editor = t.editor;\n\n\t\t\tif (name == 'numlist' || name == 'bullist') {\n\t\t\t\t// Default to first item if it's a default item\n\t\t\t\tif (t[name][0].title == 'advlist.def')\n\t\t\t\t\tformat = t[name][0];\n\n\t\t\t\tfunction hasFormat(node, format) {\n\t\t\t\t\tvar state = true;\n\n\t\t\t\t\teach(format.styles, function(value, name) {\n\t\t\t\t\t\t// Format doesn't match\n\t\t\t\t\t\tif (editor.dom.getStyle(node, name) != value) {\n\t\t\t\t\t\t\tstate = false;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\treturn state;\n\t\t\t\t};\n\n\t\t\t\tfunction applyListFormat() {\n\t\t\t\t\tvar list, dom = editor.dom, sel = editor.selection;\n\n\t\t\t\t\t// Check for existing list element\n\t\t\t\t\tlist = dom.getParent(sel.getNode(), 'ol,ul');\n\n\t\t\t\t\t// Switch/add list type if needed\n\t\t\t\t\tif (!list || list.nodeName == (name == 'bullist' ? 'OL' : 'UL') || hasFormat(list, format))\n\t\t\t\t\t\teditor.execCommand(name == 'bullist' ? 'InsertUnorderedList' : 'InsertOrderedList');\n\n\t\t\t\t\t// Append styles to new list element\n\t\t\t\t\tif (format) {\n\t\t\t\t\t\tlist = dom.getParent(sel.getNode(), 'ol,ul');\n\t\t\t\t\t\tif (list) {\n\t\t\t\t\t\t\tdom.setStyles(list, format.styles);\n\t\t\t\t\t\t\tlist.removeAttribute('data-mce-style');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\teditor.focus();\n\t\t\t\t};\n\n\t\t\t\tbtn = cm.createSplitButton(name, {\n\t\t\t\t\ttitle : 'advanced.' + name + '_desc',\n\t\t\t\t\t'class' : 'mce_' + name,\n\t\t\t\t\tonclick : function() {\n\t\t\t\t\t\tapplyListFormat();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tbtn.onRenderMenu.add(function(btn, menu) {\n\t\t\t\t\tmenu.onHideMenu.add(function() {\n\t\t\t\t\t\tif (t.bookmark) {\n\t\t\t\t\t\t\teditor.selection.moveToBookmark(t.bookmark);\n\t\t\t\t\t\t\tt.bookmark = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tmenu.onShowMenu.add(function() {\n\t\t\t\t\t\tvar dom = editor.dom, list = dom.getParent(editor.selection.getNode(), 'ol,ul'), fmtList;\n\n\t\t\t\t\t\tif (list || format) {\n\t\t\t\t\t\t\tfmtList = t[name];\n\n\t\t\t\t\t\t\t// Unselect existing items\n\t\t\t\t\t\t\teach(menu.items, function(item) {\n\t\t\t\t\t\t\t\tvar state = true;\n\n\t\t\t\t\t\t\t\titem.setSelected(0);\n\n\t\t\t\t\t\t\t\tif (list && !item.isDisabled()) {\n\t\t\t\t\t\t\t\t\teach(fmtList, function(fmt) {\n\t\t\t\t\t\t\t\t\t\tif (fmt.id == item.id) {\n\t\t\t\t\t\t\t\t\t\t\tif (!hasFormat(list, fmt)) {\n\t\t\t\t\t\t\t\t\t\t\t\tstate = false;\n\t\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\tif (state)\n\t\t\t\t\t\t\t\t\t\titem.setSelected(1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t// Select the current format\n\t\t\t\t\t\t\tif (!list)\n\t\t\t\t\t\t\t\tmenu.items[format.id].setSelected(1);\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\teditor.focus();\n\n\t\t\t\t\t\t// IE looses it's selection so store it away and restore it later\n\t\t\t\t\t\tif (tinymce.isIE) {\n\t\t\t\t\t\t\tt.bookmark = editor.selection.getBookmark(1);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tmenu.add({id : editor.dom.uniqueId(), title : 'advlist.types', 'class' : 'mceMenuItemTitle', titleItem: true}).setDisabled(1);\n\n\t\t\t\t\teach(t[name], function(item) {\n\t\t\t\t\t\t// IE<8 doesn't support lower-greek, skip it\n\t\t\t\t\t\tif (t.isIE7 && item.styles.listStyleType == 'lower-greek')\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\titem.id = editor.dom.uniqueId();\n\n\t\t\t\t\t\tmenu.add({id : item.id, title : item.title, onclick : function() {\n\t\t\t\t\t\t\tformat = item;\n\t\t\t\t\t\t\tapplyListFormat();\n\t\t\t\t\t\t}});\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\treturn btn;\n\t\t\t}\n\t\t},\n\n\t\tgetInfo : function() {\n\t\t\treturn {\n\t\t\t\tlongname : 'Advanced lists',\n\t\t\t\tauthor : 'Moxiecode Systems AB',\n\t\t\t\tauthorurl : 'http://tinymce.moxiecode.com',\n\t\t\t\tinfourl : 'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advlist',\n\t\t\t\tversion : tinymce.majorVersion + \".\" + tinymce.minorVersion\n\t\t\t};\n\t\t}\n\t});\n\n\t// Register plugin\n\ttinymce.PluginManager.add('advlist', tinymce.plugins.AdvListPlugin);\n})();","Magento_Tinymce3/tiny_mce/plugins/advlist/editor_plugin.js":"(function(){var a=tinymce.each;tinymce.create(\"tinymce.plugins.AdvListPlugin\",{init:function(b,c){var d=this;d.editor=b;function e(g){var f=[];a(g.split(/,/),function(h){f.push({title:\"advlist.\"+(h==\"default\"?\"def\":h.replace(/-/g,\"_\")),styles:{listStyleType:h==\"default\"?\"\":h}})});return f}d.numlist=b.getParam(\"advlist_number_styles\")||e(\"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman\");d.bullist=b.getParam(\"advlist_bullet_styles\")||e(\"default,circle,disc,square\");if(tinymce.isIE&&/MSIE [2-7]/.test(navigator.userAgent)){d.isIE7=true}},createControl:function(d,b){var f=this,e,i,g=f.editor;if(d==\"numlist\"||d==\"bullist\"){if(f[d][0].title==\"advlist.def\"){i=f[d][0]}function c(j,l){var k=true;a(l.styles,function(n,m){if(g.dom.getStyle(j,m)!=n){k=false;return false}});return k}function h(){var k,l=g.dom,j=g.selection;k=l.getParent(j.getNode(),\"ol,ul\");if(!k||k.nodeName==(d==\"bullist\"?\"OL\":\"UL\")||c(k,i)){g.execCommand(d==\"bullist\"?\"InsertUnorderedList\":\"InsertOrderedList\")}if(i){k=l.getParent(j.getNode(),\"ol,ul\");if(k){l.setStyles(k,i.styles);k.removeAttribute(\"data-mce-style\")}}g.focus()}e=b.createSplitButton(d,{title:\"advanced.\"+d+\"_desc\",\"class\":\"mce_\"+d,onclick:function(){h()}});e.onRenderMenu.add(function(j,k){k.onHideMenu.add(function(){if(f.bookmark){g.selection.moveToBookmark(f.bookmark);f.bookmark=0}});k.onShowMenu.add(function(){var n=g.dom,m=n.getParent(g.selection.getNode(),\"ol,ul\"),l;if(m||i){l=f[d];a(k.items,function(o){var p=true;o.setSelected(0);if(m&&!o.isDisabled()){a(l,function(q){if(q.id==o.id){if(!c(m,q)){p=false;return false}}});if(p){o.setSelected(1)}}});if(!m){k.items[i.id].setSelected(1)}}g.focus();if(tinymce.isIE){f.bookmark=g.selection.getBookmark(1)}});k.add({id:g.dom.uniqueId(),title:\"advlist.types\",\"class\":\"mceMenuItemTitle\",titleItem:true}).setDisabled(1);a(f[d],function(l){if(f.isIE7&&l.styles.listStyleType==\"lower-greek\"){return}l.id=g.dom.uniqueId();k.add({id:l.id,title:l.title,onclick:function(){i=l;h()}})})});return e}},getInfo:function(){return{longname:\"Advanced lists\",author:\"Moxiecode Systems AB\",authorurl:\"http://tinymce.moxiecode.com\",infourl:\"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advlist\",version:tinymce.majorVersion+\".\"+tinymce.minorVersion}}});tinymce.PluginManager.add(\"advlist\",tinymce.plugins.AdvListPlugin)})();","Magento_Tinymce3/tiny_mce/plugins/paste/editor_plugin_src.js":"/**\n * editor_plugin_src.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function() {\n\tvar each = tinymce.each,\n\t\tdefs = {\n\t\t\tpaste_auto_cleanup_on_paste : true,\n\t\t\tpaste_enable_default_filters : true,\n\t\t\tpaste_block_drop : false,\n\t\t\tpaste_retain_style_properties : \"none\",\n\t\t\tpaste_strip_class_attributes : \"mso\",\n\t\t\tpaste_remove_spans : false,\n\t\t\tpaste_remove_styles : false,\n\t\t\tpaste_remove_styles_if_webkit : true,\n\t\t\tpaste_convert_middot_lists : true,\n\t\t\tpaste_convert_headers_to_strong : false,\n\t\t\tpaste_dialog_width : \"450\",\n\t\t\tpaste_dialog_height : \"400\",\n\t\t\tpaste_text_use_dialog : false,\n\t\t\tpaste_text_sticky : false,\n\t\t\tpaste_text_sticky_default : false,\n\t\t\tpaste_text_notifyalways : false,\n\t\t\tpaste_text_linebreaktype : \"combined\",\n\t\t\tpaste_text_replacements : [\n\t\t\t\t[/\\u2026/g, \"...\"],\n\t\t\t\t[/[\\x93\\x94\\u201c\\u201d]/g, '\"'],\n\t\t\t\t[/[\\x60\\x91\\x92\\u2018\\u2019]/g, \"'\"]\n\t\t\t]\n\t\t};\n\n\tfunction getParam(ed, name) {\n\t\treturn ed.getParam(name, defs[name]);\n\t}\n\n\ttinymce.create('tinymce.plugins.PastePlugin', {\n\t\tinit : function(ed, url) {\n\t\t\tvar t = this;\n\n\t\t\tt.editor = ed;\n\t\t\tt.url = url;\n\n\t\t\t// Setup plugin events\n\t\t\tt.onPreProcess = new tinymce.util.Dispatcher(t);\n\t\t\tt.onPostProcess = new tinymce.util.Dispatcher(t);\n\n\t\t\t// Register default handlers\n\t\t\tt.onPreProcess.add(t._preProcess);\n\t\t\tt.onPostProcess.add(t._postProcess);\n\n\t\t\t// Register optional preprocess handler\n\t\t\tt.onPreProcess.add(function(pl, o) {\n\t\t\t\ted.execCallback('paste_preprocess', pl, o);\n\t\t\t});\n\n\t\t\t// Register optional postprocess\n\t\t\tt.onPostProcess.add(function(pl, o) {\n\t\t\t\ted.execCallback('paste_postprocess', pl, o);\n\t\t\t});\n\n\t\t\ted.onKeyDown.addToTop(function(ed, e) {\n\t\t\t\t// Block ctrl+v from adding an undo level since the default logic in tinymce.Editor will add that\n\t\t\t\tif (((tinymce.isMac ? e.metaKey : e.ctrlKey) && e.keyCode == 86) || (e.shiftKey && e.keyCode == 45))\n\t\t\t\t\treturn false; // Stop other listeners\n\t\t\t});\n\n\t\t\t// Initialize plain text flag\n\t\t\ted.pasteAsPlainText = getParam(ed, 'paste_text_sticky_default');\n\n\t\t\t// This function executes the process handlers and inserts the contents\n\t\t\t// force_rich overrides plain text mode set by user, important for pasting with execCommand\n\t\t\tfunction process(o, force_rich) {\n\t\t\t\tvar dom = ed.dom, rng;\n\n\t\t\t\t// Execute pre process handlers\n\t\t\t\tt.onPreProcess.dispatch(t, o);\n\n\t\t\t\t// Create DOM structure\n\t\t\t\to.node = dom.create('div', 0, o.content);\n\n\t\t\t\t// If pasting inside the same element and the contents is only one block\n\t\t\t\t// remove the block and keep the text since Firefox will copy parts of pre and h1-h6 as a pre element\n\t\t\t\tif (tinymce.isGecko) {\n\t\t\t\t\trng = ed.selection.getRng(true);\n\t\t\t\t\tif (rng.startContainer == rng.endContainer && rng.startContainer.nodeType == 3) {\n\t\t\t\t\t\t// Is only one block node and it doesn't contain word stuff\n\t\t\t\t\t\tif (o.node.childNodes.length === 1 && /^(p|h[1-6]|pre)$/i.test(o.node.firstChild.nodeName) && o.content.indexOf('__MCE_ITEM__') === -1)\n\t\t\t\t\t\t\tdom.remove(o.node.firstChild, true);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Execute post process handlers\n\t\t\t\tt.onPostProcess.dispatch(t, o);\n\n\t\t\t\t// Serialize content\n\t\t\t\to.content = ed.serializer.serialize(o.node, {getInner : 1, forced_root_block : ''});\n\n\t\t\t\t// Plain text option active?\n\t\t\t\tif ((!force_rich) && (ed.pasteAsPlainText)) {\n\t\t\t\t\tt._insertPlainText(o.content);\n\n\t\t\t\t\tif (!getParam(ed, \"paste_text_sticky\")) {\n\t\t\t\t\t\ted.pasteAsPlainText = false;\n\t\t\t\t\t\ted.controlManager.setActive(\"pastetext\", false);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tt._insert(o.content);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add command for external usage\n\t\t\ted.addCommand('mceInsertClipboardContent', function(u, o) {\n\t\t\t\tprocess(o, true);\n\t\t\t});\n\n\t\t\tif (!getParam(ed, \"paste_text_use_dialog\")) {\n\t\t\t\ted.addCommand('mcePasteText', function(u, v) {\n\t\t\t\t\tvar cookie = tinymce.util.Cookie;\n\n\t\t\t\t\ted.pasteAsPlainText = !ed.pasteAsPlainText;\n\t\t\t\t\ted.controlManager.setActive('pastetext', ed.pasteAsPlainText);\n\n\t\t\t\t\tif ((ed.pasteAsPlainText) && (!cookie.get(\"tinymcePasteText\"))) {\n\t\t\t\t\t\tif (getParam(ed, \"paste_text_sticky\")) {\n\t\t\t\t\t\t\ted.windowManager.alert(ed.translate('paste.plaintext_mode_sticky'));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ted.windowManager.alert(ed.translate('paste.plaintext_mode'));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!getParam(ed, \"paste_text_notifyalways\")) {\n\t\t\t\t\t\t\tcookie.set(\"tinymcePasteText\", \"1\", new Date(new Date().getFullYear() + 1, 12, 31))\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\ted.addButton('pastetext', {title: 'paste.paste_text_desc', cmd: 'mcePasteText'});\n\t\t\ted.addButton('selectall', {title: 'paste.selectall_desc', cmd: 'selectall'});\n\n\t\t\t// This function grabs the contents from the clipboard by adding a\n\t\t\t// hidden div and placing the caret inside it and after the browser paste\n\t\t\t// is done it grabs that contents and processes that\n\t\t\tfunction grabContent(e) {\n\t\t\t\tvar n, or, rng, oldRng, sel = ed.selection, dom = ed.dom, body = ed.getBody(), posY, textContent;\n\n\t\t\t\t// Check if browser supports direct plaintext access\n\t\t\t\tif (e.clipboardData || dom.doc.dataTransfer) {\n\t\t\t\t\ttextContent = (e.clipboardData || dom.doc.dataTransfer).getData('Text');\n\n\t\t\t\t\tif (ed.pasteAsPlainText) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tprocess({content : dom.encode(textContent).replace(/\\r?\\n/g, '<br />')});\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (dom.get('_mcePaste'))\n\t\t\t\t\treturn;\n\n\t\t\t\t// Create container to paste into\n\t\t\t\tn = dom.add(body, 'div', {id : '_mcePaste', 'class' : 'mcePaste', 'data-mce-bogus' : '1'}, '\\uFEFF\\uFEFF');\n\n\t\t\t\t// If contentEditable mode we need to find out the position of the closest element\n\t\t\t\tif (body != ed.getDoc().body)\n\t\t\t\t\tposY = dom.getPos(ed.selection.getStart(), body).y;\n\t\t\t\telse\n\t\t\t\t\tposY = body.scrollTop + dom.getViewPort(ed.getWin()).y;\n\n\t\t\t\t// Styles needs to be applied after the element is added to the document since WebKit will otherwise remove all styles\n\t\t\t\t// If also needs to be in view on IE or the paste would fail\n\t\t\t\tdom.setStyles(n, {\n\t\t\t\t\tposition : 'absolute',\n\t\t\t\t\tleft : tinymce.isGecko ? -40 : 0, // Need to move it out of site on Gecko since it will othewise display a ghost resize rect for the div\n\t\t\t\t\ttop : posY - 25,\n\t\t\t\t\twidth : 1,\n\t\t\t\t\theight : 1,\n\t\t\t\t\toverflow : 'hidden'\n\t\t\t\t});\n\n\t\t\t\tif (tinymce.isIE) {\n\t\t\t\t\t// Store away the old range\n\t\t\t\t\toldRng = sel.getRng();\n\n\t\t\t\t\t// Select the container\n\t\t\t\t\trng = dom.doc.body.createTextRange();\n\t\t\t\t\trng.moveToElementText(n);\n\t\t\t\t\trng.execCommand('Paste');\n\n\t\t\t\t\t// Remove container\n\t\t\t\t\tdom.remove(n);\n\n\t\t\t\t\t// Check if the contents was changed, if it wasn't then clipboard extraction failed probably due\n\t\t\t\t\t// to IE security settings so we pass the junk though better than nothing right\n\t\t\t\t\tif (n.innerHTML === '\\uFEFF\\uFEFF') {\n\t\t\t\t\t\ted.execCommand('mcePasteWord');\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Restore the old range and clear the contents before pasting\n\t\t\t\t\tsel.setRng(oldRng);\n\t\t\t\t\tsel.setContent('');\n\n\t\t\t\t\t// For some odd reason we need to detach the mceInsertContent call from the paste event\n\t\t\t\t\t// It's like IE has a reference to the parent element that you paste in and the selection gets messed up\n\t\t\t\t\t// when it tries to restore the selection\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t// Process contents\n\t\t\t\t\t\tprocess({content : n.innerHTML});\n\t\t\t\t\t}, 0);\n\n\t\t\t\t\t// Block the real paste event\n\t\t\t\t\treturn tinymce.dom.Event.cancel(e);\n\t\t\t\t} else {\n\t\t\t\t\tfunction block(e) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t};\n\n\t\t\t\t\t// Block mousedown and click to prevent selection change\n\t\t\t\t\tdom.bind(ed.getDoc(), 'mousedown', block);\n\t\t\t\t\tdom.bind(ed.getDoc(), 'keydown', block);\n\n\t\t\t\t\tor = ed.selection.getRng();\n\n\t\t\t\t\t// Move select contents inside DIV\n\t\t\t\t\tn = n.firstChild;\n\t\t\t\t\trng = ed.getDoc().createRange();\n\t\t\t\t\trng.setStart(n, 0);\n\t\t\t\t\trng.setEnd(n, 2);\n\t\t\t\t\tsel.setRng(rng);\n\n\t\t\t\t\t// Wait a while and grab the pasted contents\n\t\t\t\t\twindow.setTimeout(function() {\n\t\t\t\t\t\tvar h = '', nl;\n\n\t\t\t\t\t\t// Paste divs duplicated in paste divs seems to happen when you paste plain text so lets first look for that broken behavior in WebKit\n\t\t\t\t\t\tif (!dom.select('div.mcePaste > div.mcePaste').length) {\n\t\t\t\t\t\t\tnl = dom.select('div.mcePaste');\n\n\t\t\t\t\t\t\t// WebKit will split the div into multiple ones so this will loop through then all and join them to get the whole HTML string\n\t\t\t\t\t\t\teach(nl, function(n) {\n\t\t\t\t\t\t\t\tvar child = n.firstChild;\n\n\t\t\t\t\t\t\t\t// WebKit inserts a DIV container with lots of odd styles\n\t\t\t\t\t\t\t\tif (child && child.nodeName == 'DIV' && child.style.marginTop && child.style.backgroundColor) {\n\t\t\t\t\t\t\t\t\tdom.remove(child, 1);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Remove apply style spans\n\t\t\t\t\t\t\t\teach(dom.select('span.Apple-style-span', n), function(n) {\n\t\t\t\t\t\t\t\t\tdom.remove(n, 1);\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t// Remove bogus br elements\n\t\t\t\t\t\t\t\teach(dom.select('br[data-mce-bogus]', n), function(n) {\n\t\t\t\t\t\t\t\t\tdom.remove(n);\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t// WebKit will make a copy of the DIV for each line of plain text pasted and insert them into the DIV\n\t\t\t\t\t\t\t\tif (n.parentNode.className != 'mcePaste')\n\t\t\t\t\t\t\t\t\th += n.innerHTML;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Found WebKit weirdness so force the content into paragraphs this seems to happen when you paste plain text from Nodepad etc\n\t\t\t\t\t\t\t// So this logic will replace double enter with paragraphs and single enter with br so it kind of looks the same\n\t\t\t\t\t\t\th = '<p>' + dom.encode(textContent).replace(/\\r?\\n\\r?\\n/g, '</p><p>').replace(/\\r?\\n/g, '<br />') + '</p>';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Remove the nodes\n\t\t\t\t\t\teach(dom.select('div.mcePaste'), function(n) {\n\t\t\t\t\t\t\tdom.remove(n);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// Restore the old selection\n\t\t\t\t\t\tif (or)\n\t\t\t\t\t\t\tsel.setRng(or);\n\n\t\t\t\t\t\tprocess({content : h});\n\n\t\t\t\t\t\t// Unblock events ones we got the contents\n\t\t\t\t\t\tdom.unbind(ed.getDoc(), 'mousedown', block);\n\t\t\t\t\t\tdom.unbind(ed.getDoc(), 'keydown', block);\n\t\t\t\t\t}, 0);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Check if we should use the new auto process method\t\t\t\n\t\t\tif (getParam(ed, \"paste_auto_cleanup_on_paste\")) {\n\t\t\t\t// Is it's Opera or older FF use key handler\n\t\t\t\tif (tinymce.isOpera || /Firefox\\/2/.test(navigator.userAgent)) {\n\t\t\t\t\ted.onKeyDown.addToTop(function(ed, e) {\n\t\t\t\t\t\tif (((tinymce.isMac ? e.metaKey : e.ctrlKey) && e.keyCode == 86) || (e.shiftKey && e.keyCode == 45))\n\t\t\t\t\t\t\tgrabContent(e);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// Grab contents on paste event on Gecko and WebKit\n\t\t\t\t\ted.onPaste.addToTop(function(ed, e) {\n\t\t\t\t\t\treturn grabContent(e);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ted.onInit.add(function() {\n\t\t\t\ted.controlManager.setActive(\"pastetext\", ed.pasteAsPlainText);\n\n\t\t\t\t// Block all drag/drop events\n\t\t\t\tif (getParam(ed, \"paste_block_drop\")) {\n\t\t\t\t\ted.dom.bind(ed.getBody(), ['dragend', 'dragover', 'draggesture', 'dragdrop', 'drop', 'drag'], function(e) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Add legacy support\n\t\t\tt._legacySupport();\n\t\t},\n\n\t\tgetInfo : function() {\n\t\t\treturn {\n\t\t\t\tlongname : 'Paste text/word',\n\t\t\t\tauthor : 'Moxiecode Systems AB',\n\t\t\t\tauthorurl : 'http://tinymce.moxiecode.com',\n\t\t\t\tinfourl : 'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/paste',\n\t\t\t\tversion : tinymce.majorVersion + \".\" + tinymce.minorVersion\n\t\t\t};\n\t\t},\n\n\t\t_preProcess : function(pl, o) {\n\t\t\tvar ed = this.editor,\n\t\t\t\th = o.content,\n\t\t\t\tgrep = tinymce.grep,\n\t\t\t\texplode = tinymce.explode,\n\t\t\t\ttrim = tinymce.trim,\n\t\t\t\tlen, stripClass;\n\n\t\t\t//console.log('Before preprocess:' + o.content);\n\n\t\t\tfunction process(items) {\n\t\t\t\teach(items, function(v) {\n\t\t\t\t\t// Remove or replace\n\t\t\t\t\tif (v.constructor == RegExp)\n\t\t\t\t\t\th = h.replace(v, '');\n\t\t\t\t\telse\n\t\t\t\t\t\th = h.replace(v[0], v[1]);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tif (ed.settings.paste_enable_default_filters == false) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// IE9 adds BRs before/after block elements when contents is pasted from word or for example another browser\n\t\t\tif (tinymce.isIE && document.documentMode >= 9) {\n\t\t\t\t// IE9 adds BRs before/after block elements when contents is pasted from word or for example another browser\n\t\t\t\tprocess([[/(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6r]|p|div|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|blockquote|center|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g, '$1']]);\n\n\t\t\t\t// IE9 also adds an extra BR element for each soft-linefeed and it also adds a BR for each word wrap break\n\t\t\t\tprocess([\n\t\t\t\t\t[/<br><br>/g, '<BR><BR>'], // Replace multiple BR elements with uppercase BR to keep them intact\n\t\t\t\t\t[/<br>/g, ' '], // Replace single br elements with space since they are word wrap BR:s\n\t\t\t\t\t[/<BR><BR>/g, '<br>'] // Replace back the double brs but into a single BR\n\t\t\t\t]);\n\t\t\t}\n\n\t\t\t// Detect Word content and process it more aggressive\n\t\t\tif (/class=\"?Mso|style=\"[^\"]*\\bmso-|w:WordDocument/i.test(h) || o.wordContent) {\n\t\t\t\to.wordContent = true;\t\t\t// Mark the pasted contents as word specific content\n\t\t\t\t//console.log('Word contents detected.');\n\n\t\t\t\t// Process away some basic content\n\t\t\t\tprocess([\n\t\t\t\t\t/^\\s*(&nbsp;)+/gi,\t\t\t\t// &nbsp; entities at the start of contents\n\t\t\t\t\t/(&nbsp;|<br[^>]*>)+\\s*$/gi\t\t// &nbsp; entities at the end of contents\n\t\t\t\t]);\n\n\t\t\t\tif (getParam(ed, \"paste_convert_headers_to_strong\")) {\n\t\t\t\t\th = h.replace(/<p [^>]*class=\"?MsoHeading\"?[^>]*>(.*?)<\\/p>/gi, \"<p><strong>$1</strong></p>\");\n\t\t\t\t}\n\n\t\t\t\tif (getParam(ed, \"paste_convert_middot_lists\")) {\n\t\t\t\t\tprocess([\n\t\t\t\t\t\t[/<!--\\[if !supportLists\\]-->/gi, '$&__MCE_ITEM__'],\t\t\t\t\t// Convert supportLists to a list item marker\n\t\t\t\t\t\t[/(<span[^>]+(?:mso-list:|:\\s*symbol)[^>]+>)/gi, '$1__MCE_ITEM__'],\t\t// Convert mso-list and symbol spans to item markers\n\t\t\t\t\t\t[/(<p[^>]+(?:MsoListParagraph)[^>]+>)/gi, '$1__MCE_ITEM__']\t\t\t\t// Convert mso-list and symbol paragraphs to item markers (FF)\n\t\t\t\t\t]);\n\t\t\t\t}\n\n\t\t\t\tprocess([\n\t\t\t\t\t// Word comments like conditional comments etc\n\t\t\t\t\t/<!--[\\s\\S]+?-->/gi,\n\n\t\t\t\t\t// Remove comments, scripts (e.g., msoShowComment), XML tag, VML content, MS Office namespaced tags, and a few other tags\n\t\t\t\t\t/<(!|script[^>]*>.*?<\\/script(?=[>\\s])|\\/?(\\?xml(:\\w+)?|img|meta|link|style|\\w:\\w+)(?=[\\s\\/>]))[^>]*>/gi,\n\n\t\t\t\t\t// Convert <s> into <strike> for line-though\n\t\t\t\t\t[/<(\\/?)s>/gi, \"<$1strike>\"],\n\n\t\t\t\t\t// Replace nsbp entites to char since it's easier to handle\n\t\t\t\t\t[/&nbsp;/gi, \"\\u00a0\"]\n\t\t\t\t]);\n\n\t\t\t\t// Remove bad attributes, with or without quotes, ensuring that attribute text is really inside a tag.\n\t\t\t\t// If JavaScript had a RegExp look-behind, we could have integrated this with the last process() array and got rid of the loop. But alas, it does not, so we cannot.\n\t\t\t\tdo {\n\t\t\t\t\tlen = h.length;\n\t\t\t\t\th = h.replace(/(<[a-z][^>]*\\s)(?:id|name|language|type|on\\w+|\\w+:\\w+)=(?:\"[^\"]*\"|\\w+)\\s?/gi, \"$1\");\n\t\t\t\t} while (len != h.length);\n\n\t\t\t\t// Remove all spans if no styles is to be retained\n\t\t\t\tif (getParam(ed, \"paste_retain_style_properties\").replace(/^none$/i, \"\").length == 0) {\n\t\t\t\t\th = h.replace(/<\\/?span[^>]*>/gi, \"\");\n\t\t\t\t} else {\n\t\t\t\t\t// We're keeping styles, so at least clean them up.\n\t\t\t\t\t// CSS Reference: http://msdn.microsoft.com/en-us/library/aa155477.aspx\n\n\t\t\t\t\tprocess([\n\t\t\t\t\t\t// Convert <span style=\"mso-spacerun:yes\">___</span> to string of alternating breaking/non-breaking spaces of same length\n\t\t\t\t\t\t[/<span\\s+style\\s*=\\s*\"\\s*mso-spacerun\\s*:\\s*yes\\s*;?\\s*\"\\s*>([\\s\\u00a0]*)<\\/span>/gi,\n\t\t\t\t\t\t\tfunction(str, spaces) {\n\t\t\t\t\t\t\t\treturn (spaces.length > 0)? spaces.replace(/./, \" \").slice(Math.floor(spaces.length/2)).split(\"\").join(\"\\u00a0\") : \"\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t],\n\n\t\t\t\t\t\t// Examine all styles: delete junk, transform some, and keep the rest\n\t\t\t\t\t\t[/(<[a-z][^>]*)\\sstyle=\"([^\"]*)\"/gi,\n\t\t\t\t\t\t\tfunction(str, tag, style) {\n\t\t\t\t\t\t\t\tvar n = [],\n\t\t\t\t\t\t\t\t\ti = 0,\n\t\t\t\t\t\t\t\t\ts = explode(trim(style).replace(/&quot;/gi, \"'\"), \";\");\n\n\t\t\t\t\t\t\t\t// Examine each style definition within the tag's style attribute\n\t\t\t\t\t\t\t\teach(s, function(v) {\n\t\t\t\t\t\t\t\t\tvar name, value,\n\t\t\t\t\t\t\t\t\t\tparts = explode(v, \":\");\n\n\t\t\t\t\t\t\t\t\tfunction ensureUnits(v) {\n\t\t\t\t\t\t\t\t\t\treturn v + ((v !== \"0\") && (/\\d$/.test(v)))? \"px\" : \"\";\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (parts.length == 2) {\n\t\t\t\t\t\t\t\t\t\tname = parts[0].toLowerCase();\n\t\t\t\t\t\t\t\t\t\tvalue = parts[1].toLowerCase();\n\n\t\t\t\t\t\t\t\t\t\t// Translate certain MS Office styles into their CSS equivalents\n\t\t\t\t\t\t\t\t\t\tswitch (name) {\n\t\t\t\t\t\t\t\t\t\t\tcase \"mso-padding-alt\":\n\t\t\t\t\t\t\t\t\t\t\tcase \"mso-padding-top-alt\":\n\t\t\t\t\t\t\t\t\t\t\tcase \"mso-padding-right-alt\":\n\t\t\t\t\t\t\t\t\t\t\tcase \"mso-padding-bottom-alt\":\n\t\t\t\t\t\t\t\t\t\t\tcase \"mso-padding-left-alt\":\n\t\t\t\t\t\t\t\t\t\t\tcase \"mso-margin-alt\":\n\t\t\t\t\t\t\t\t\t\t\tcase \"mso-margin-top-alt\":\n\t\t\t\t\t\t\t\t\t\t\tcase \"mso-margin-right-alt\":\n\t\t\t\t\t\t\t\t\t\t\tcase \"mso-margin-bottom-alt\":\n\t\t\t\t\t\t\t\t\t\t\tcase \"mso-margin-left-alt\":\n\t\t\t\t\t\t\t\t\t\t\tcase \"mso-table-layout-alt\":\n\t\t\t\t\t\t\t\t\t\t\tcase \"mso-height\":\n\t\t\t\t\t\t\t\t\t\t\tcase \"mso-width\":\n\t\t\t\t\t\t\t\t\t\t\tcase \"mso-vertical-align-alt\":\n\t\t\t\t\t\t\t\t\t\t\t\tn[i++] = name.replace(/^mso-|-alt$/g, \"\") + \":\" + ensureUnits(value);\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\t\t\t\t\tcase \"horiz-align\":\n\t\t\t\t\t\t\t\t\t\t\t\tn[i++] = \"text-align:\" + value;\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\t\t\t\t\tcase \"vert-align\":\n\t\t\t\t\t\t\t\t\t\t\t\tn[i++] = \"vertical-align:\" + value;\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\t\t\t\t\tcase \"font-color\":\n\t\t\t\t\t\t\t\t\t\t\tcase \"mso-foreground\":\n\t\t\t\t\t\t\t\t\t\t\t\tn[i++] = \"color:\" + value;\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\t\t\t\t\tcase \"mso-background\":\n\t\t\t\t\t\t\t\t\t\t\tcase \"mso-highlight\":\n\t\t\t\t\t\t\t\t\t\t\t\tn[i++] = \"background:\" + value;\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\t\t\t\t\tcase \"mso-default-height\":\n\t\t\t\t\t\t\t\t\t\t\t\tn[i++] = \"min-height:\" + ensureUnits(value);\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\t\t\t\t\tcase \"mso-default-width\":\n\t\t\t\t\t\t\t\t\t\t\t\tn[i++] = \"min-width:\" + ensureUnits(value);\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\t\t\t\t\tcase \"mso-padding-between-alt\":\n\t\t\t\t\t\t\t\t\t\t\t\tn[i++] = \"border-collapse:separate;border-spacing:\" + ensureUnits(value);\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\t\t\t\t\tcase \"text-line-through\":\n\t\t\t\t\t\t\t\t\t\t\t\tif ((value == \"single\") || (value == \"double\")) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tn[i++] = \"text-decoration:line-through\";\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\t\t\t\t\tcase \"mso-zero-height\":\n\t\t\t\t\t\t\t\t\t\t\t\tif (value == \"yes\") {\n\t\t\t\t\t\t\t\t\t\t\t\t\tn[i++] = \"display:none\";\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t// Eliminate all MS Office style definitions that have no CSS equivalent by examining the first characters in the name\n\t\t\t\t\t\t\t\t\t\tif (/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?!align|decor|indent|trans)|top-bar|version|vnd|word-break)/.test(name)) {\n\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t// If it reached this point, it must be a valid CSS style\n\t\t\t\t\t\t\t\t\t\tn[i++] = name + \":\" + parts[1];\t\t// Lower-case name, but keep value case\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t// If style attribute contained any valid styles the re-write it; otherwise delete style attribute.\n\t\t\t\t\t\t\t\tif (i > 0) {\n\t\t\t\t\t\t\t\t\treturn tag + ' style=\"' + n.join(';') + '\"';\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn tag;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Replace headers with <strong>\n\t\t\tif (getParam(ed, \"paste_convert_headers_to_strong\")) {\n\t\t\t\tprocess([\n\t\t\t\t\t[/<h[1-6][^>]*>/gi, \"<p><strong>\"],\n\t\t\t\t\t[/<\\/h[1-6][^>]*>/gi, \"</strong></p>\"]\n\t\t\t\t]);\n\t\t\t}\n\n\t\t\tprocess([\n\t\t\t\t// Copy paste from Java like Open Office will produce this junk on FF\n\t\t\t\t[/Version:[\\d.]+\\nStartHTML:\\d+\\nEndHTML:\\d+\\nStartFragment:\\d+\\nEndFragment:\\d+/gi, '']\n\t\t\t]);\n\n\t\t\t// Class attribute options are: leave all as-is (\"none\"), remove all (\"all\"), or remove only those starting with mso (\"mso\").\n\t\t\t// Note:-  paste_strip_class_attributes: \"none\", verify_css_classes: true is also a good variation.\n\t\t\tstripClass = getParam(ed, \"paste_strip_class_attributes\");\n\n\t\t\tif (stripClass !== \"none\") {\n\t\t\t\tfunction removeClasses(match, g1) {\n\t\t\t\t\t\tif (stripClass === \"all\")\n\t\t\t\t\t\t\treturn '';\n\n\t\t\t\t\t\tvar cls = grep(explode(g1.replace(/^([\"'])(.*)\\1$/, \"$2\"), \" \"),\n\t\t\t\t\t\t\tfunction(v) {\n\t\t\t\t\t\t\t\treturn (/^(?!mso)/i.test(v));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\treturn cls.length ? ' class=\"' + cls.join(\" \") + '\"' : '';\n\t\t\t\t};\n\n\t\t\t\th = h.replace(/ class=\"([^\"]+)\"/gi, removeClasses);\n\t\t\t\th = h.replace(/ class=([\\-\\w]+)/gi, removeClasses);\n\t\t\t}\n\n\t\t\t// Remove spans option\n\t\t\tif (getParam(ed, \"paste_remove_spans\")) {\n\t\t\t\th = h.replace(/<\\/?span[^>]*>/gi, \"\");\n\t\t\t}\n\n\t\t\t//console.log('After preprocess:' + h);\n\n\t\t\to.content = h;\n\t\t},\n\n\t\t/**\n\t\t * Various post process items.\n\t\t */\n\t\t_postProcess : function(pl, o) {\n\t\t\tvar t = this, ed = t.editor, dom = ed.dom, styleProps;\n\n\t\t\tif (ed.settings.paste_enable_default_filters == false) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tif (o.wordContent) {\n\t\t\t\t// Remove named anchors or TOC links\n\t\t\t\teach(dom.select('a', o.node), function(a) {\n\t\t\t\t\tif (!a.href || a.href.indexOf('#_Toc') != -1)\n\t\t\t\t\t\tdom.remove(a, 1);\n\t\t\t\t});\n\n\t\t\t\tif (getParam(ed, \"paste_convert_middot_lists\")) {\n\t\t\t\t\tt._convertLists(pl, o);\n\t\t\t\t}\n\n\t\t\t\t// Process styles\n\t\t\t\tstyleProps = getParam(ed, \"paste_retain_style_properties\"); // retained properties\n\n\t\t\t\t// Process only if a string was specified and not equal to \"all\" or \"*\"\n\t\t\t\tif ((tinymce.is(styleProps, \"string\")) && (styleProps !== \"all\") && (styleProps !== \"*\")) {\n\t\t\t\t\tstyleProps = tinymce.explode(styleProps.replace(/^none$/i, \"\"));\n\n\t\t\t\t\t// Retains some style properties\n\t\t\t\t\teach(dom.select('*', o.node), function(el) {\n\t\t\t\t\t\tvar newStyle = {}, npc = 0, i, sp, sv;\n\n\t\t\t\t\t\t// Store a subset of the existing styles\n\t\t\t\t\t\tif (styleProps) {\n\t\t\t\t\t\t\tfor (i = 0; i < styleProps.length; i++) {\n\t\t\t\t\t\t\t\tsp = styleProps[i];\n\t\t\t\t\t\t\t\tsv = dom.getStyle(el, sp);\n\n\t\t\t\t\t\t\t\tif (sv) {\n\t\t\t\t\t\t\t\t\tnewStyle[sp] = sv;\n\t\t\t\t\t\t\t\t\tnpc++;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Remove all of the existing styles\n\t\t\t\t\t\tdom.setAttrib(el, 'style', '');\n\n\t\t\t\t\t\tif (styleProps && npc > 0)\n\t\t\t\t\t\t\tdom.setStyles(el, newStyle); // Add back the stored subset of styles\n\t\t\t\t\t\telse // Remove empty span tags that do not have class attributes\n\t\t\t\t\t\t\tif (el.nodeName == 'SPAN' && !el.className)\n\t\t\t\t\t\t\t\tdom.remove(el, true);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove all style information or only specifically on WebKit to avoid the style bug on that browser\n\t\t\tif (getParam(ed, \"paste_remove_styles\") || (getParam(ed, \"paste_remove_styles_if_webkit\") && tinymce.isWebKit)) {\n\t\t\t\teach(dom.select('*[style]', o.node), function(el) {\n\t\t\t\t\tel.removeAttribute('style');\n\t\t\t\t\tel.removeAttribute('data-mce-style');\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (tinymce.isWebKit) {\n\t\t\t\t\t// We need to compress the styles on WebKit since if you paste <img border=\"0\" /> it will become <img border=\"0\" style=\"... lots of junk ...\" />\n\t\t\t\t\t// Removing the mce_style that contains the real value will force the Serializer engine to compress the styles\n\t\t\t\t\teach(dom.select('*', o.node), function(el) {\n\t\t\t\t\t\tel.removeAttribute('data-mce-style');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Converts the most common bullet and number formats in Office into a real semantic UL/LI list.\n\t\t */\n\t\t_convertLists : function(pl, o) {\n\t\t\tvar dom = pl.editor.dom, listElm, li, lastMargin = -1, margin, levels = [], lastType, html;\n\n\t\t\t// Convert middot lists into real semantic lists\n\t\t\teach(dom.select('p', o.node), function(p) {\n\t\t\t\tvar sib, val = '', type, html, idx, parents;\n\n\t\t\t\t// Get text node value at beginning of paragraph\n\t\t\t\tfor (sib = p.firstChild; sib && sib.nodeType == 3; sib = sib.nextSibling)\n\t\t\t\t\tval += sib.nodeValue;\n\n\t\t\t\tval = p.innerHTML.replace(/<\\/?\\w+[^>]*>/gi, '').replace(/&nbsp;/g, '\\u00a0');\n\n\t\t\t\t// Detect unordered lists look for bullets\n\t\t\t\tif (/^(__MCE_ITEM__)+[\\u2022\\u00b7\\u00a7\\u00d8o\\u25CF]\\s*\\u00a0*/.test(val))\n\t\t\t\t\ttype = 'ul';\n\n\t\t\t\t// Detect ordered lists 1., a. or ixv.\n\t\t\t\tif (/^__MCE_ITEM__\\s*\\w+\\.\\s*\\u00a0+/.test(val))\n\t\t\t\t\ttype = 'ol';\n\n\t\t\t\t// Check if node value matches the list pattern: o&nbsp;&nbsp;\n\t\t\t\tif (type) {\n\t\t\t\t\tmargin = parseFloat(p.style.marginLeft || 0);\n\n\t\t\t\t\tif (margin > lastMargin)\n\t\t\t\t\t\tlevels.push(margin);\n\n\t\t\t\t\tif (!listElm || type != lastType) {\n\t\t\t\t\t\tlistElm = dom.create(type);\n\t\t\t\t\t\tdom.insertAfter(listElm, p);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Nested list element\n\t\t\t\t\t\tif (margin > lastMargin) {\n\t\t\t\t\t\t\tlistElm = li.appendChild(dom.create(type));\n\t\t\t\t\t\t} else if (margin < lastMargin) {\n\t\t\t\t\t\t\t// Find parent level based on margin value\n\t\t\t\t\t\t\tidx = tinymce.inArray(levels, margin);\n\t\t\t\t\t\t\tparents = dom.getParents(listElm.parentNode, type);\n\t\t\t\t\t\t\tlistElm = parents[parents.length - 1 - idx] || listElm;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Remove middot or number spans if they exists\n\t\t\t\t\teach(dom.select('span', p), function(span) {\n\t\t\t\t\t\tvar html = span.innerHTML.replace(/<\\/?\\w+[^>]*>/gi, '');\n\n\t\t\t\t\t\t// Remove span with the middot or the number\n\t\t\t\t\t\tif (type == 'ul' && /^__MCE_ITEM__[\\u2022\\u00b7\\u00a7\\u00d8o\\u25CF]/.test(html))\n\t\t\t\t\t\t\tdom.remove(span);\n\t\t\t\t\t\telse if (/^__MCE_ITEM__[\\s\\S]*\\w+\\.(&nbsp;|\\u00a0)*\\s*/.test(html))\n\t\t\t\t\t\t\tdom.remove(span);\n\t\t\t\t\t});\n\n\t\t\t\t\thtml = p.innerHTML;\n\n\t\t\t\t\t// Remove middot/list items\n\t\t\t\t\tif (type == 'ul')\n\t\t\t\t\t\thtml = p.innerHTML.replace(/__MCE_ITEM__/g, '').replace(/^[\\u2022\\u00b7\\u00a7\\u00d8o\\u25CF]\\s*(&nbsp;|\\u00a0)+\\s*/, '');\n\t\t\t\t\telse\n\t\t\t\t\t\thtml = p.innerHTML.replace(/__MCE_ITEM__/g, '').replace(/^\\s*\\w+\\.(&nbsp;|\\u00a0)+\\s*/, '');\n\n\t\t\t\t\t// Create li and add paragraph data into the new li\n\t\t\t\t\tli = listElm.appendChild(dom.create('li', 0, html));\n\t\t\t\t\tdom.remove(p);\n\n\t\t\t\t\tlastMargin = margin;\n\t\t\t\t\tlastType = type;\n\t\t\t\t} else\n\t\t\t\t\tlistElm = lastMargin = 0; // End list element\n\t\t\t});\n\n\t\t\t// Remove any left over makers\n\t\t\thtml = o.node.innerHTML;\n\t\t\tif (html.indexOf('__MCE_ITEM__') != -1)\n\t\t\t\to.node.innerHTML = html.replace(/__MCE_ITEM__/g, '');\n\t\t},\n\n\t\t/**\n\t\t * Inserts the specified contents at the caret position.\n\t\t */\n\t\t_insert : function(h, skip_undo) {\n\t\t\tvar ed = this.editor, r = ed.selection.getRng();\n\n\t\t\t// First delete the contents seems to work better on WebKit when the selection spans multiple list items or multiple table cells.\n\t\t\tif (!ed.selection.isCollapsed() && r.startContainer != r.endContainer)\n\t\t\t\ted.getDoc().execCommand('Delete', false, null);\n\n\t\t\ted.execCommand('mceInsertContent', false, h, {skip_undo : skip_undo});\n\t\t},\n\n\t\t/**\n\t\t * Instead of the old plain text method which tried to re-create a paste operation, the\n\t\t * new approach adds a plain text mode toggle switch that changes the behavior of paste.\n\t\t * This function is passed the same input that the regular paste plugin produces.\n\t\t * It performs additional scrubbing and produces (and inserts) the plain text.\n\t\t * This approach leverages all of the great existing functionality in the paste\n\t\t * plugin, and requires minimal changes to add the new functionality.\n\t\t * Speednet - June 2009\n\t\t */\n\t\t_insertPlainText : function(content) {\n\t\t\tvar ed = this.editor,\n\t\t\t\tlinebr = getParam(ed, \"paste_text_linebreaktype\"),\n\t\t\t\trl = getParam(ed, \"paste_text_replacements\"),\n\t\t\t\tis = tinymce.is;\n\n\t\t\tfunction process(items) {\n\t\t\t\teach(items, function(v) {\n\t\t\t\t\tif (v.constructor == RegExp)\n\t\t\t\t\t\tcontent = content.replace(v, \"\");\n\t\t\t\t\telse\n\t\t\t\t\t\tcontent = content.replace(v[0], v[1]);\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tif ((typeof(content) === \"string\") && (content.length > 0)) {\n\t\t\t\t// If HTML content with line-breaking tags, then remove all cr/lf chars because only tags will break a line\n\t\t\t\tif (/<(?:p|br|h[1-6]|ul|ol|dl|table|t[rdh]|div|blockquote|fieldset|pre|address|center)[^>]*>/i.test(content)) {\n\t\t\t\t\tprocess([\n\t\t\t\t\t\t/[\\n\\r]+/g\n\t\t\t\t\t]);\n\t\t\t\t} else {\n\t\t\t\t\t// Otherwise just get rid of carriage returns (only need linefeeds)\n\t\t\t\t\tprocess([\n\t\t\t\t\t\t/\\r+/g\n\t\t\t\t\t]);\n\t\t\t\t}\n\n\t\t\t\tprocess([\n\t\t\t\t\t[/<\\/(?:p|h[1-6]|ul|ol|dl|table|div|blockquote|fieldset|pre|address|center)>/gi, \"\\n\\n\"],\t\t// Block tags get a blank line after them\n\t\t\t\t\t[/<br[^>]*>|<\\/tr>/gi, \"\\n\"],\t\t\t\t// Single linebreak for <br /> tags and table rows\n\t\t\t\t\t[/<\\/t[dh]>\\s*<t[dh][^>]*>/gi, \"\\t\"],\t\t// Table cells get tabs betweem them\n\t\t\t\t\t/<[a-z!\\/?][^>]*>/gi,\t\t\t\t\t\t// Delete all remaining tags\n\t\t\t\t\t[/&nbsp;/gi, \" \"],\t\t\t\t\t\t\t// Convert non-break spaces to regular spaces (remember, *plain text*)\n\t\t\t\t\t[/(?:(?!\\n)\\s)*(\\n+)(?:(?!\\n)\\s)*/gi, \"$1\"],// Cool little RegExp deletes whitespace around linebreak chars.\n\t\t\t\t\t[/\\n{3,}/g, \"\\n\\n\"]\t\t\t\t\t\t\t// Max. 2 consecutive linebreaks\n\t\t\t\t]);\n\n\t\t\t\tcontent = ed.dom.decode(tinymce.html.Entities.encodeRaw(content));\n\n\t\t\t\t// Perform default or custom replacements\n\t\t\t\tif (is(rl, \"array\")) {\n\t\t\t\t\tprocess(rl);\n\t\t\t\t} else if (is(rl, \"string\")) {\n\t\t\t\t\tprocess(new RegExp(rl, \"gi\"));\n\t\t\t\t}\n\n\t\t\t\t// Treat paragraphs as specified in the config\n\t\t\t\tif (linebr == \"none\") {\n\t\t\t\t\t// Convert all line breaks to space\n\t\t\t\t\tprocess([\n\t\t\t\t\t\t[/\\n+/g, \" \"]\n\t\t\t\t\t]);\n\t\t\t\t} else if (linebr == \"br\") {\n\t\t\t\t\t// Convert all line breaks to <br />\n\t\t\t\t\tprocess([\n\t\t\t\t\t\t[/\\n/g, \"<br />\"]\n\t\t\t\t\t]);\n\t\t\t\t} else if (linebr == \"p\") {\n\t\t\t\t\t// Convert all line breaks to <p>...</p>\n\t\t\t\t\tprocess([\n\t\t\t\t\t\t[/\\n+/g, \"</p><p>\"],\n\t\t\t\t\t\t[/^(.*<\\/p>)(<p>)$/, '<p>$1']\n\t\t\t\t\t]);\n\t\t\t\t} else {\n\t\t\t\t\t// defaults to \"combined\"\n\t\t\t\t\t// Convert single line breaks to <br /> and double line breaks to <p>...</p>\n\t\t\t\t\tprocess([\n\t\t\t\t\t\t[/\\n\\n/g, \"</p><p>\"],\n\t\t\t\t\t\t[/^(.*<\\/p>)(<p>)$/, '<p>$1'],\n\t\t\t\t\t\t[/\\n/g, \"<br />\"]\n\t\t\t\t\t]);\n\t\t\t\t}\n\n\t\t\t\ted.execCommand('mceInsertContent', false, content);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * This method will open the old style paste dialogs. Some users might want the old behavior but still use the new cleanup engine.\n\t\t */\n\t\t_legacySupport : function() {\n\t\t\tvar t = this, ed = t.editor;\n\n\t\t\t// Register command(s) for backwards compatibility\n\t\t\ted.addCommand(\"mcePasteWord\", function() {\n\t\t\t\ted.windowManager.open({\n\t\t\t\t\tfile: t.url + \"/pasteword.htm\",\n\t\t\t\t\twidth: parseInt(getParam(ed, \"paste_dialog_width\")),\n\t\t\t\t\theight: parseInt(getParam(ed, \"paste_dialog_height\")),\n\t\t\t\t\tinline: 1\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tif (getParam(ed, \"paste_text_use_dialog\")) {\n\t\t\t\ted.addCommand(\"mcePasteText\", function() {\n\t\t\t\t\ted.windowManager.open({\n\t\t\t\t\t\tfile : t.url + \"/pastetext.htm\",\n\t\t\t\t\t\twidth: parseInt(getParam(ed, \"paste_dialog_width\")),\n\t\t\t\t\t\theight: parseInt(getParam(ed, \"paste_dialog_height\")),\n\t\t\t\t\t\tinline : 1\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Register button for backwards compatibility\n\t\t\ted.addButton(\"pasteword\", {title : \"paste.paste_word_desc\", cmd : \"mcePasteWord\"});\n\t\t}\n\t});\n\n\t// Register plugin\n\ttinymce.PluginManager.add(\"paste\", tinymce.plugins.PastePlugin);\n})();\n","Magento_Tinymce3/tiny_mce/plugins/paste/editor_plugin.js":"(function(){var c=tinymce.each,a={paste_auto_cleanup_on_paste:true,paste_enable_default_filters:true,paste_block_drop:false,paste_retain_style_properties:\"none\",paste_strip_class_attributes:\"mso\",paste_remove_spans:false,paste_remove_styles:false,paste_remove_styles_if_webkit:true,paste_convert_middot_lists:true,paste_convert_headers_to_strong:false,paste_dialog_width:\"450\",paste_dialog_height:\"400\",paste_text_use_dialog:false,paste_text_sticky:false,paste_text_sticky_default:false,paste_text_notifyalways:false,paste_text_linebreaktype:\"combined\",paste_text_replacements:[[/\\u2026/g,\"...\"],[/[\\x93\\x94\\u201c\\u201d]/g,'\"'],[/[\\x60\\x91\\x92\\u2018\\u2019]/g,\"'\"]]};function b(d,e){return d.getParam(e,a[e])}tinymce.create(\"tinymce.plugins.PastePlugin\",{init:function(d,e){var f=this;f.editor=d;f.url=e;f.onPreProcess=new tinymce.util.Dispatcher(f);f.onPostProcess=new tinymce.util.Dispatcher(f);f.onPreProcess.add(f._preProcess);f.onPostProcess.add(f._postProcess);f.onPreProcess.add(function(i,j){d.execCallback(\"paste_preprocess\",i,j)});f.onPostProcess.add(function(i,j){d.execCallback(\"paste_postprocess\",i,j)});d.onKeyDown.addToTop(function(i,j){if(((tinymce.isMac?j.metaKey:j.ctrlKey)&&j.keyCode==86)||(j.shiftKey&&j.keyCode==45)){return false}});d.pasteAsPlainText=b(d,\"paste_text_sticky_default\");function h(l,j){var k=d.dom,i;f.onPreProcess.dispatch(f,l);l.node=k.create(\"div\",0,l.content);if(tinymce.isGecko){i=d.selection.getRng(true);if(i.startContainer==i.endContainer&&i.startContainer.nodeType==3){if(l.node.childNodes.length===1&&/^(p|h[1-6]|pre)$/i.test(l.node.firstChild.nodeName)&&l.content.indexOf(\"__MCE_ITEM__\")===-1){k.remove(l.node.firstChild,true)}}}f.onPostProcess.dispatch(f,l);l.content=d.serializer.serialize(l.node,{getInner:1,forced_root_block:\"\"});if((!j)&&(d.pasteAsPlainText)){f._insertPlainText(l.content);if(!b(d,\"paste_text_sticky\")){d.pasteAsPlainText=false;d.controlManager.setActive(\"pastetext\",false)}}else{f._insert(l.content)}}d.addCommand(\"mceInsertClipboardContent\",function(i,j){h(j,true)});if(!b(d,\"paste_text_use_dialog\")){d.addCommand(\"mcePasteText\",function(j,i){var k=tinymce.util.Cookie;d.pasteAsPlainText=!d.pasteAsPlainText;d.controlManager.setActive(\"pastetext\",d.pasteAsPlainText);if((d.pasteAsPlainText)&&(!k.get(\"tinymcePasteText\"))){if(b(d,\"paste_text_sticky\")){d.windowManager.alert(d.translate(\"paste.plaintext_mode_sticky\"))}else{d.windowManager.alert(d.translate(\"paste.plaintext_mode\"))}if(!b(d,\"paste_text_notifyalways\")){k.set(\"tinymcePasteText\",\"1\",new Date(new Date().getFullYear()+1,12,31))}}})}d.addButton(\"pastetext\",{title:\"paste.paste_text_desc\",cmd:\"mcePasteText\"});d.addButton(\"selectall\",{title:\"paste.selectall_desc\",cmd:\"selectall\"});function g(s){var l,p,j,t,k=d.selection,o=d.dom,q=d.getBody(),i,r;if(s.clipboardData||o.doc.dataTransfer){r=(s.clipboardData||o.doc.dataTransfer).getData(\"Text\");if(d.pasteAsPlainText){s.preventDefault();h({content:o.encode(r).replace(/\\r?\\n/g,\"<br />\")});return}}if(o.get(\"_mcePaste\")){return}l=o.add(q,\"div\",{id:\"_mcePaste\",\"class\":\"mcePaste\",\"data-mce-bogus\":\"1\"},\"\\uFEFF\\uFEFF\");if(q!=d.getDoc().body){i=o.getPos(d.selection.getStart(),q).y}else{i=q.scrollTop+o.getViewPort(d.getWin()).y}o.setStyles(l,{position:\"absolute\",left:tinymce.isGecko?-40:0,top:i-25,width:1,height:1,overflow:\"hidden\"});if(tinymce.isIE){t=k.getRng();j=o.doc.body.createTextRange();j.moveToElementText(l);j.execCommand(\"Paste\");o.remove(l);if(l.innerHTML===\"\\uFEFF\\uFEFF\"){d.execCommand(\"mcePasteWord\");s.preventDefault();return}k.setRng(t);k.setContent(\"\");setTimeout(function(){h({content:l.innerHTML})},0);return tinymce.dom.Event.cancel(s)}else{function m(n){n.preventDefault()}o.bind(d.getDoc(),\"mousedown\",m);o.bind(d.getDoc(),\"keydown\",m);p=d.selection.getRng();l=l.firstChild;j=d.getDoc().createRange();j.setStart(l,0);j.setEnd(l,2);k.setRng(j);window.setTimeout(function(){var u=\"\",n;if(!o.select(\"div.mcePaste > div.mcePaste\").length){n=o.select(\"div.mcePaste\");c(n,function(w){var v=w.firstChild;if(v&&v.nodeName==\"DIV\"&&v.style.marginTop&&v.style.backgroundColor){o.remove(v,1)}c(o.select(\"span.Apple-style-span\",w),function(x){o.remove(x,1)});c(o.select(\"br[data-mce-bogus]\",w),function(x){o.remove(x)});if(w.parentNode.className!=\"mcePaste\"){u+=w.innerHTML}})}else{u=\"<p>\"+o.encode(r).replace(/\\r?\\n\\r?\\n/g,\"</p><p>\").replace(/\\r?\\n/g,\"<br />\")+\"</p>\"}c(o.select(\"div.mcePaste\"),function(v){o.remove(v)});if(p){k.setRng(p)}h({content:u});o.unbind(d.getDoc(),\"mousedown\",m);o.unbind(d.getDoc(),\"keydown\",m)},0)}}if(b(d,\"paste_auto_cleanup_on_paste\")){if(tinymce.isOpera||/Firefox\\/2/.test(navigator.userAgent)){d.onKeyDown.addToTop(function(i,j){if(((tinymce.isMac?j.metaKey:j.ctrlKey)&&j.keyCode==86)||(j.shiftKey&&j.keyCode==45)){g(j)}})}else{d.onPaste.addToTop(function(i,j){return g(j)})}}d.onInit.add(function(){d.controlManager.setActive(\"pastetext\",d.pasteAsPlainText);if(b(d,\"paste_block_drop\")){d.dom.bind(d.getBody(),[\"dragend\",\"dragover\",\"draggesture\",\"dragdrop\",\"drop\",\"drag\"],function(i){i.preventDefault();i.stopPropagation();return false})}});f._legacySupport()},getInfo:function(){return{longname:\"Paste text/word\",author:\"Moxiecode Systems AB\",authorurl:\"http://tinymce.moxiecode.com\",infourl:\"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/paste\",version:tinymce.majorVersion+\".\"+tinymce.minorVersion}},_preProcess:function(g,e){var k=this.editor,j=e.content,p=tinymce.grep,n=tinymce.explode,f=tinymce.trim,l,i;function d(h){c(h,function(o){if(o.constructor==RegExp){j=j.replace(o,\"\")}else{j=j.replace(o[0],o[1])}})}if(k.settings.paste_enable_default_filters==false){return}if(tinymce.isIE&&document.documentMode>=9){d([[/(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6r]|p|div|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|blockquote|center|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g,\"$1\"]]);d([[/<br><br>/g,\"<BR><BR>\"],[/<br>/g,\" \"],[/<BR><BR>/g,\"<br>\"]])}if(/class=\"?Mso|style=\"[^\"]*\\bmso-|w:WordDocument/i.test(j)||e.wordContent){e.wordContent=true;d([/^\\s*(&nbsp;)+/gi,/(&nbsp;|<br[^>]*>)+\\s*$/gi]);if(b(k,\"paste_convert_headers_to_strong\")){j=j.replace(/<p [^>]*class=\"?MsoHeading\"?[^>]*>(.*?)<\\/p>/gi,\"<p><strong>$1</strong></p>\")}if(b(k,\"paste_convert_middot_lists\")){d([[/<!--\\[if !supportLists\\]-->/gi,\"$&__MCE_ITEM__\"],[/(<span[^>]+(?:mso-list:|:\\s*symbol)[^>]+>)/gi,\"$1__MCE_ITEM__\"],[/(<p[^>]+(?:MsoListParagraph)[^>]+>)/gi,\"$1__MCE_ITEM__\"]])}d([/<!--[\\s\\S]+?-->/gi,/<(!|script[^>]*>.*?<\\/script(?=[>\\s])|\\/?(\\?xml(:\\w+)?|img|meta|link|style|\\w:\\w+)(?=[\\s\\/>]))[^>]*>/gi,[/<(\\/?)s>/gi,\"<$1strike>\"],[/&nbsp;/gi,\"\\u00a0\"]]);do{l=j.length;j=j.replace(/(<[a-z][^>]*\\s)(?:id|name|language|type|on\\w+|\\w+:\\w+)=(?:\"[^\"]*\"|\\w+)\\s?/gi,\"$1\")}while(l!=j.length);if(b(k,\"paste_retain_style_properties\").replace(/^none$/i,\"\").length==0){j=j.replace(/<\\/?span[^>]*>/gi,\"\")}else{d([[/<span\\s+style\\s*=\\s*\"\\s*mso-spacerun\\s*:\\s*yes\\s*;?\\s*\"\\s*>([\\s\\u00a0]*)<\\/span>/gi,function(o,h){return(h.length>0)?h.replace(/./,\" \").slice(Math.floor(h.length/2)).split(\"\").join(\"\\u00a0\"):\"\"}],[/(<[a-z][^>]*)\\sstyle=\"([^\"]*)\"/gi,function(t,h,r){var u=[],o=0,q=n(f(r).replace(/&quot;/gi,\"'\"),\";\");c(q,function(s){var w,y,z=n(s,\":\");function x(A){return A+((A!==\"0\")&&(/\\d$/.test(A)))?\"px\":\"\"}if(z.length==2){w=z[0].toLowerCase();y=z[1].toLowerCase();switch(w){case\"mso-padding-alt\":case\"mso-padding-top-alt\":case\"mso-padding-right-alt\":case\"mso-padding-bottom-alt\":case\"mso-padding-left-alt\":case\"mso-margin-alt\":case\"mso-margin-top-alt\":case\"mso-margin-right-alt\":case\"mso-margin-bottom-alt\":case\"mso-margin-left-alt\":case\"mso-table-layout-alt\":case\"mso-height\":case\"mso-width\":case\"mso-vertical-align-alt\":u[o++]=w.replace(/^mso-|-alt$/g,\"\")+\":\"+x(y);return;case\"horiz-align\":u[o++]=\"text-align:\"+y;return;case\"vert-align\":u[o++]=\"vertical-align:\"+y;return;case\"font-color\":case\"mso-foreground\":u[o++]=\"color:\"+y;return;case\"mso-background\":case\"mso-highlight\":u[o++]=\"background:\"+y;return;case\"mso-default-height\":u[o++]=\"min-height:\"+x(y);return;case\"mso-default-width\":u[o++]=\"min-width:\"+x(y);return;case\"mso-padding-between-alt\":u[o++]=\"border-collapse:separate;border-spacing:\"+x(y);return;case\"text-line-through\":if((y==\"single\")||(y==\"double\")){u[o++]=\"text-decoration:line-through\"}return;case\"mso-zero-height\":if(y==\"yes\"){u[o++]=\"display:none\"}return}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?!align|decor|indent|trans)|top-bar|version|vnd|word-break)/.test(w)){return}u[o++]=w+\":\"+z[1]}});if(o>0){return h+' style=\"'+u.join(\";\")+'\"'}else{return h}}]])}}if(b(k,\"paste_convert_headers_to_strong\")){d([[/<h[1-6][^>]*>/gi,\"<p><strong>\"],[/<\\/h[1-6][^>]*>/gi,\"</strong></p>\"]])}d([[/Version:[\\d.]+\\nStartHTML:\\d+\\nEndHTML:\\d+\\nStartFragment:\\d+\\nEndFragment:\\d+/gi,\"\"]]);i=b(k,\"paste_strip_class_attributes\");if(i!==\"none\"){function m(q,o){if(i===\"all\"){return\"\"}var h=p(n(o.replace(/^([\"'])(.*)\\1$/,\"$2\"),\" \"),function(r){return(/^(?!mso)/i.test(r))});return h.length?' class=\"'+h.join(\" \")+'\"':\"\"}j=j.replace(/ class=\"([^\"]+)\"/gi,m);j=j.replace(/ class=([\\-\\w]+)/gi,m)}if(b(k,\"paste_remove_spans\")){j=j.replace(/<\\/?span[^>]*>/gi,\"\")}e.content=j},_postProcess:function(g,i){var f=this,e=f.editor,h=e.dom,d;if(e.settings.paste_enable_default_filters==false){return}if(i.wordContent){c(h.select(\"a\",i.node),function(j){if(!j.href||j.href.indexOf(\"#_Toc\")!=-1){h.remove(j,1)}});if(b(e,\"paste_convert_middot_lists\")){f._convertLists(g,i)}d=b(e,\"paste_retain_style_properties\");if((tinymce.is(d,\"string\"))&&(d!==\"all\")&&(d!==\"*\")){d=tinymce.explode(d.replace(/^none$/i,\"\"));c(h.select(\"*\",i.node),function(m){var n={},k=0,l,o,j;if(d){for(l=0;l<d.length;l++){o=d[l];j=h.getStyle(m,o);if(j){n[o]=j;k++}}}h.setAttrib(m,\"style\",\"\");if(d&&k>0){h.setStyles(m,n)}else{if(m.nodeName==\"SPAN\"&&!m.className){h.remove(m,true)}}})}}if(b(e,\"paste_remove_styles\")||(b(e,\"paste_remove_styles_if_webkit\")&&tinymce.isWebKit)){c(h.select(\"*[style]\",i.node),function(j){j.removeAttribute(\"style\");j.removeAttribute(\"data-mce-style\")})}else{if(tinymce.isWebKit){c(h.select(\"*\",i.node),function(j){j.removeAttribute(\"data-mce-style\")})}}},_convertLists:function(g,e){var i=g.editor.dom,h,l,d=-1,f,m=[],k,j;c(i.select(\"p\",e.node),function(t){var q,u=\"\",s,r,n,o;for(q=t.firstChild;q&&q.nodeType==3;q=q.nextSibling){u+=q.nodeValue}u=t.innerHTML.replace(/<\\/?\\w+[^>]*>/gi,\"\").replace(/&nbsp;/g,\"\\u00a0\");if(/^(__MCE_ITEM__)+[\\u2022\\u00b7\\u00a7\\u00d8o\\u25CF]\\s*\\u00a0*/.test(u)){s=\"ul\"}if(/^__MCE_ITEM__\\s*\\w+\\.\\s*\\u00a0+/.test(u)){s=\"ol\"}if(s){f=parseFloat(t.style.marginLeft||0);if(f>d){m.push(f)}if(!h||s!=k){h=i.create(s);i.insertAfter(h,t)}else{if(f>d){h=l.appendChild(i.create(s))}else{if(f<d){n=tinymce.inArray(m,f);o=i.getParents(h.parentNode,s);h=o[o.length-1-n]||h}}}c(i.select(\"span\",t),function(v){var p=v.innerHTML.replace(/<\\/?\\w+[^>]*>/gi,\"\");if(s==\"ul\"&&/^__MCE_ITEM__[\\u2022\\u00b7\\u00a7\\u00d8o\\u25CF]/.test(p)){i.remove(v)}else{if(/^__MCE_ITEM__[\\s\\S]*\\w+\\.(&nbsp;|\\u00a0)*\\s*/.test(p)){i.remove(v)}}});r=t.innerHTML;if(s==\"ul\"){r=t.innerHTML.replace(/__MCE_ITEM__/g,\"\").replace(/^[\\u2022\\u00b7\\u00a7\\u00d8o\\u25CF]\\s*(&nbsp;|\\u00a0)+\\s*/,\"\")}else{r=t.innerHTML.replace(/__MCE_ITEM__/g,\"\").replace(/^\\s*\\w+\\.(&nbsp;|\\u00a0)+\\s*/,\"\")}l=h.appendChild(i.create(\"li\",0,r));i.remove(t);d=f;k=s}else{h=d=0}});j=e.node.innerHTML;if(j.indexOf(\"__MCE_ITEM__\")!=-1){e.node.innerHTML=j.replace(/__MCE_ITEM__/g,\"\")}},_insert:function(f,d){var e=this.editor,g=e.selection.getRng();if(!e.selection.isCollapsed()&&g.startContainer!=g.endContainer){e.getDoc().execCommand(\"Delete\",false,null)}e.execCommand(\"mceInsertContent\",false,f,{skip_undo:d})},_insertPlainText:function(g){var d=this.editor,e=b(d,\"paste_text_linebreaktype\"),i=b(d,\"paste_text_replacements\"),f=tinymce.is;function h(j){c(j,function(k){if(k.constructor==RegExp){g=g.replace(k,\"\")}else{g=g.replace(k[0],k[1])}})}if((typeof(g)===\"string\")&&(g.length>0)){if(/<(?:p|br|h[1-6]|ul|ol|dl|table|t[rdh]|div|blockquote|fieldset|pre|address|center)[^>]*>/i.test(g)){h([/[\\n\\r]+/g])}else{h([/\\r+/g])}h([[/<\\/(?:p|h[1-6]|ul|ol|dl|table|div|blockquote|fieldset|pre|address|center)>/gi,\"\\n\\n\"],[/<br[^>]*>|<\\/tr>/gi,\"\\n\"],[/<\\/t[dh]>\\s*<t[dh][^>]*>/gi,\"\\t\"],/<[a-z!\\/?][^>]*>/gi,[/&nbsp;/gi,\" \"],[/(?:(?!\\n)\\s)*(\\n+)(?:(?!\\n)\\s)*/gi,\"$1\"],[/\\n{3,}/g,\"\\n\\n\"]]);g=d.dom.decode(tinymce.html.Entities.encodeRaw(g));if(f(i,\"array\")){h(i)}else{if(f(i,\"string\")){h(new RegExp(i,\"gi\"))}}if(e==\"none\"){h([[/\\n+/g,\" \"]])}else{if(e==\"br\"){h([[/\\n/g,\"<br />\"]])}else{if(e==\"p\"){h([[/\\n+/g,\"</p><p>\"],[/^(.*<\\/p>)(<p>)$/,\"<p>$1\"]])}else{h([[/\\n\\n/g,\"</p><p>\"],[/^(.*<\\/p>)(<p>)$/,\"<p>$1\"],[/\\n/g,\"<br />\"]])}}}d.execCommand(\"mceInsertContent\",false,g)}},_legacySupport:function(){var e=this,d=e.editor;d.addCommand(\"mcePasteWord\",function(){d.windowManager.open({file:e.url+\"/pasteword.htm\",width:parseInt(b(d,\"paste_dialog_width\")),height:parseInt(b(d,\"paste_dialog_height\")),inline:1})});if(b(d,\"paste_text_use_dialog\")){d.addCommand(\"mcePasteText\",function(){d.windowManager.open({file:e.url+\"/pastetext.htm\",width:parseInt(b(d,\"paste_dialog_width\")),height:parseInt(b(d,\"paste_dialog_height\")),inline:1})})}d.addButton(\"pasteword\",{title:\"paste.paste_word_desc\",cmd:\"mcePasteWord\"})}});tinymce.PluginManager.add(\"paste\",tinymce.plugins.PastePlugin)})();","Magento_Tinymce3/tiny_mce/plugins/paste/js/pastetext.js":"tinyMCEPopup.requireLangPack();\n\nvar PasteTextDialog = {\n\tinit : function() {\n\t\tthis.resize();\n\t},\n\n\tinsert : function() {\n\t\tvar h = tinyMCEPopup.dom.encode(document.getElementById('content').value), lines;\n\n\t\t// Convert linebreaks into paragraphs\n\t\tif (document.getElementById('linebreaks').checked) {\n\t\t\tlines = h.split(/\\r?\\n/);\n\t\t\tif (lines.length > 1) {\n\t\t\t\th = '';\n\t\t\t\ttinymce.each(lines, function(row) {\n\t\t\t\t\th += '<p>' + row + '</p>';\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\ttinyMCEPopup.editor.execCommand('mceInsertClipboardContent', false, {content : h});\n\t\ttinyMCEPopup.close();\n\t},\n\n\tresize : function() {\n\t\tvar vp = tinyMCEPopup.dom.getViewPort(window), el;\n\n\t\tel = document.getElementById('content');\n\n\t\tel.style.width  = (vp.w - 20) + 'px';\n\t\tel.style.height = (vp.h - 90) + 'px';\n\t}\n};\n\ntinyMCEPopup.onInit.add(PasteTextDialog.init, PasteTextDialog);\n","Magento_Tinymce3/tiny_mce/plugins/paste/js/pasteword.js":"tinyMCEPopup.requireLangPack();\n\nvar PasteWordDialog = {\n\tinit : function() {\n\t\tvar ed = tinyMCEPopup.editor, el = document.getElementById('iframecontainer'), ifr, doc, css, cssHTML = '';\n\n\t\t// Create iframe\n\t\tel.innerHTML = '<iframe id=\"iframe\" src=\"javascript:\\'\\';\" frameBorder=\"0\" style=\"border: 1px solid gray\"></iframe>';\n\t\tifr = document.getElementById('iframe');\n\t\tdoc = ifr.contentWindow.document;\n\n\t\t// Force absolute CSS urls\n\t\tcss = [ed.baseURI.toAbsolute(\"themes/\" + ed.settings.theme + \"/skins/\" + ed.settings.skin + \"/content.css\")];\n\t\tcss = css.concat(tinymce.explode(ed.settings.content_css) || []);\n\t\ttinymce.each(css, function(u) {\n\t\t\tcssHTML += '<link href=\"' + ed.documentBaseURI.toAbsolute('' + u) + '\" rel=\"stylesheet\" type=\"text/css\" />';\n\t\t});\n\n\t\t// Write content into iframe\n\t\tdoc.open();\n\t\tdoc.write('<html><head>' + cssHTML + '</head><body class=\"mceContentBody\" spellcheck=\"false\"></body></html>');\n\t\tdoc.close();\n\n\t\tdoc.designMode = 'on';\n\t\tthis.resize();\n\n\t\twindow.setTimeout(function() {\n\t\t\tifr.contentWindow.focus();\n\t\t}, 10);\n\t},\n\n\tinsert : function() {\n\t\tvar h = document.getElementById('iframe').contentWindow.document.body.innerHTML;\n\n\t\ttinyMCEPopup.editor.execCommand('mceInsertClipboardContent', false, {content : h, wordContent : true});\n\t\ttinyMCEPopup.close();\n\t},\n\n\tresize : function() {\n\t\tvar vp = tinyMCEPopup.dom.getViewPort(window), el;\n\n\t\tel = document.getElementById('iframe');\n\n\t\tif (el) {\n\t\t\tel.style.width  = (vp.w - 20) + 'px';\n\t\t\tel.style.height = (vp.h - 90) + 'px';\n\t\t}\n\t}\n};\n\ntinyMCEPopup.onInit.add(PasteWordDialog.init, PasteWordDialog);\n","Magento_Tinymce3/tiny_mce/plugins/paste/langs/en_dlg.js":"tinyMCE.addI18n('en.paste_dlg',{\"word_title\":\"Use Ctrl+V on your keyboard to paste the text into the window.\",\"text_linebreaks\":\"Keep Linebreaks\",\"text_title\":\"Use Ctrl+V on your keyboard to paste the text into the window.\"});","Magento_Tinymce3/tiny_mce/plugins/save/editor_plugin_src.js":"/**\n * editor_plugin_src.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function() {\n\ttinymce.create('tinymce.plugins.Save', {\n\t\tinit : function(ed, url) {\n\t\t\tvar t = this;\n\n\t\t\tt.editor = ed;\n\n\t\t\t// Register commands\n\t\t\ted.addCommand('mceSave', t._save, t);\n\t\t\ted.addCommand('mceCancel', t._cancel, t);\n\n\t\t\t// Register buttons\n\t\t\ted.addButton('save', {title : 'save.save_desc', cmd : 'mceSave'});\n\t\t\ted.addButton('cancel', {title : 'save.cancel_desc', cmd : 'mceCancel'});\n\n\t\t\ted.onNodeChange.add(t._nodeChange, t);\n\t\t\ted.addShortcut('ctrl+s', ed.getLang('save.save_desc'), 'mceSave');\n\t\t},\n\n\t\tgetInfo : function() {\n\t\t\treturn {\n\t\t\t\tlongname : 'Save',\n\t\t\t\tauthor : 'Moxiecode Systems AB',\n\t\t\t\tauthorurl : 'http://tinymce.moxiecode.com',\n\t\t\t\tinfourl : 'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/save',\n\t\t\t\tversion : tinymce.majorVersion + \".\" + tinymce.minorVersion\n\t\t\t};\n\t\t},\n\n\t\t// Private methods\n\n\t\t_nodeChange : function(ed, cm, n) {\n\t\t\tvar ed = this.editor;\n\n\t\t\tif (ed.getParam('save_enablewhendirty')) {\n\t\t\t\tcm.setDisabled('save', !ed.isDirty());\n\t\t\t\tcm.setDisabled('cancel', !ed.isDirty());\n\t\t\t}\n\t\t},\n\n\t\t// Private methods\n\n\t\t_save : function() {\n\t\t\tvar ed = this.editor, formObj, os, i, elementId;\n\n\t\t\tformObj = tinymce.DOM.get(ed.id).form || tinymce.DOM.getParent(ed.id, 'form');\n\n\t\t\tif (ed.getParam(\"save_enablewhendirty\") && !ed.isDirty())\n\t\t\t\treturn;\n\n\t\t\ttinyMCE.triggerSave();\n\n\t\t\t// Use callback instead\n\t\t\tif (os = ed.getParam(\"save_onsavecallback\")) {\n\t\t\t\tif (ed.execCallback('save_onsavecallback', ed)) {\n\t\t\t\t\ted.startContent = tinymce.trim(ed.getContent({format : 'raw'}));\n\t\t\t\t\ted.nodeChanged();\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (formObj) {\n\t\t\t\ted.isNotDirty = true;\n\n\t\t\t\tif (formObj.onsubmit == null || formObj.onsubmit() != false)\n\t\t\t\t\tformObj.submit();\n\n\t\t\t\ted.nodeChanged();\n\t\t\t} else\n\t\t\t\ted.windowManager.alert(\"Error: No form element found.\");\n\t\t},\n\n\t\t_cancel : function() {\n\t\t\tvar ed = this.editor, os, h = tinymce.trim(ed.startContent);\n\n\t\t\t// Use callback instead\n\t\t\tif (os = ed.getParam(\"save_oncancelcallback\")) {\n\t\t\t\ted.execCallback('save_oncancelcallback', ed);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ted.setContent(h);\n\t\t\ted.undoManager.clear();\n\t\t\ted.nodeChanged();\n\t\t}\n\t});\n\n\t// Register plugin\n\ttinymce.PluginManager.add('save', tinymce.plugins.Save);\n})();","Magento_Tinymce3/tiny_mce/plugins/save/editor_plugin.js":"(function(){tinymce.create(\"tinymce.plugins.Save\",{init:function(a,b){var c=this;c.editor=a;a.addCommand(\"mceSave\",c._save,c);a.addCommand(\"mceCancel\",c._cancel,c);a.addButton(\"save\",{title:\"save.save_desc\",cmd:\"mceSave\"});a.addButton(\"cancel\",{title:\"save.cancel_desc\",cmd:\"mceCancel\"});a.onNodeChange.add(c._nodeChange,c);a.addShortcut(\"ctrl+s\",a.getLang(\"save.save_desc\"),\"mceSave\")},getInfo:function(){return{longname:\"Save\",author:\"Moxiecode Systems AB\",authorurl:\"http://tinymce.moxiecode.com\",infourl:\"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/save\",version:tinymce.majorVersion+\".\"+tinymce.minorVersion}},_nodeChange:function(b,a,c){var b=this.editor;if(b.getParam(\"save_enablewhendirty\")){a.setDisabled(\"save\",!b.isDirty());a.setDisabled(\"cancel\",!b.isDirty())}},_save:function(){var c=this.editor,a,e,d,b;a=tinymce.DOM.get(c.id).form||tinymce.DOM.getParent(c.id,\"form\");if(c.getParam(\"save_enablewhendirty\")&&!c.isDirty()){return}tinyMCE.triggerSave();if(e=c.getParam(\"save_onsavecallback\")){if(c.execCallback(\"save_onsavecallback\",c)){c.startContent=tinymce.trim(c.getContent({format:\"raw\"}));c.nodeChanged()}return}if(a){c.isNotDirty=true;if(a.onsubmit==null||a.onsubmit()!=false){a.submit()}c.nodeChanged()}else{c.windowManager.alert(\"Error: No form element found.\")}},_cancel:function(){var a=this.editor,c,b=tinymce.trim(a.startContent);if(c=a.getParam(\"save_oncancelcallback\")){a.execCallback(\"save_oncancelcallback\",a);return}a.setContent(b);a.undoManager.clear();a.nodeChanged()}});tinymce.PluginManager.add(\"save\",tinymce.plugins.Save)})();","Magento_Tinymce3/tiny_mce/plugins/insertdatetime/editor_plugin_src.js":"/**\n * editor_plugin_src.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function() {\n\ttinymce.create('tinymce.plugins.InsertDateTime', {\n\t\tinit : function(ed, url) {\n\t\t\tvar t = this;\n\n\t\t\tt.editor = ed;\n\n\t\t\ted.addCommand('mceInsertDate', function() {\n\t\t\t\tvar str = t._getDateTime(new Date(), ed.getParam(\"plugin_insertdate_dateFormat\", ed.getLang('insertdatetime.date_fmt')));\n\n\t\t\t\ted.execCommand('mceInsertContent', false, str);\n\t\t\t});\n\n\t\t\ted.addCommand('mceInsertTime', function() {\n\t\t\t\tvar str = t._getDateTime(new Date(), ed.getParam(\"plugin_insertdate_timeFormat\", ed.getLang('insertdatetime.time_fmt')));\n\n\t\t\t\ted.execCommand('mceInsertContent', false, str);\n\t\t\t});\n\n\t\t\ted.addButton('insertdate', {title : 'insertdatetime.insertdate_desc', cmd : 'mceInsertDate'});\n\t\t\ted.addButton('inserttime', {title : 'insertdatetime.inserttime_desc', cmd : 'mceInsertTime'});\n\t\t},\n\n\t\tgetInfo : function() {\n\t\t\treturn {\n\t\t\t\tlongname : 'Insert date/time',\n\t\t\t\tauthor : 'Moxiecode Systems AB',\n\t\t\t\tauthorurl : 'http://tinymce.moxiecode.com',\n\t\t\t\tinfourl : 'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/insertdatetime',\n\t\t\t\tversion : tinymce.majorVersion + \".\" + tinymce.minorVersion\n\t\t\t};\n\t\t},\n\n\t\t// Private methods\n\n\t\t_getDateTime : function(d, fmt) {\n\t\t\tvar ed = this.editor;\n\n\t\t\tfunction addZeros(value, len) {\n\t\t\t\tvalue = \"\" + value;\n\n\t\t\t\tif (value.length < len) {\n\t\t\t\t\tfor (var i=0; i<(len-value.length); i++)\n\t\t\t\t\t\tvalue = \"0\" + value;\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t};\n\n\t\t\tfmt = fmt.replace(\"%D\", \"%m/%d/%y\");\n\t\t\tfmt = fmt.replace(\"%r\", \"%I:%M:%S %p\");\n\t\t\tfmt = fmt.replace(\"%Y\", \"\" + d.getFullYear());\n\t\t\tfmt = fmt.replace(\"%y\", \"\" + d.getYear());\n\t\t\tfmt = fmt.replace(\"%m\", addZeros(d.getMonth()+1, 2));\n\t\t\tfmt = fmt.replace(\"%d\", addZeros(d.getDate(), 2));\n\t\t\tfmt = fmt.replace(\"%H\", \"\" + addZeros(d.getHours(), 2));\n\t\t\tfmt = fmt.replace(\"%M\", \"\" + addZeros(d.getMinutes(), 2));\n\t\t\tfmt = fmt.replace(\"%S\", \"\" + addZeros(d.getSeconds(), 2));\n\t\t\tfmt = fmt.replace(\"%I\", \"\" + ((d.getHours() + 11) % 12 + 1));\n\t\t\tfmt = fmt.replace(\"%p\", \"\" + (d.getHours() < 12 ? \"AM\" : \"PM\"));\n\t\t\tfmt = fmt.replace(\"%B\", \"\" + ed.getLang(\"insertdatetime.months_long\").split(',')[d.getMonth()]);\n\t\t\tfmt = fmt.replace(\"%b\", \"\" + ed.getLang(\"insertdatetime.months_short\").split(',')[d.getMonth()]);\n\t\t\tfmt = fmt.replace(\"%A\", \"\" + ed.getLang(\"insertdatetime.day_long\").split(',')[d.getDay()]);\n\t\t\tfmt = fmt.replace(\"%a\", \"\" + ed.getLang(\"insertdatetime.day_short\").split(',')[d.getDay()]);\n\t\t\tfmt = fmt.replace(\"%%\", \"%\");\n\n\t\t\treturn fmt;\n\t\t}\n\t});\n\n\t// Register plugin\n\ttinymce.PluginManager.add('insertdatetime', tinymce.plugins.InsertDateTime);\n})();","Magento_Tinymce3/tiny_mce/plugins/insertdatetime/editor_plugin.js":"(function(){tinymce.create(\"tinymce.plugins.InsertDateTime\",{init:function(a,b){var c=this;c.editor=a;a.addCommand(\"mceInsertDate\",function(){var d=c._getDateTime(new Date(),a.getParam(\"plugin_insertdate_dateFormat\",a.getLang(\"insertdatetime.date_fmt\")));a.execCommand(\"mceInsertContent\",false,d)});a.addCommand(\"mceInsertTime\",function(){var d=c._getDateTime(new Date(),a.getParam(\"plugin_insertdate_timeFormat\",a.getLang(\"insertdatetime.time_fmt\")));a.execCommand(\"mceInsertContent\",false,d)});a.addButton(\"insertdate\",{title:\"insertdatetime.insertdate_desc\",cmd:\"mceInsertDate\"});a.addButton(\"inserttime\",{title:\"insertdatetime.inserttime_desc\",cmd:\"mceInsertTime\"})},getInfo:function(){return{longname:\"Insert date/time\",author:\"Moxiecode Systems AB\",authorurl:\"http://tinymce.moxiecode.com\",infourl:\"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/insertdatetime\",version:tinymce.majorVersion+\".\"+tinymce.minorVersion}},_getDateTime:function(e,a){var c=this.editor;function b(g,d){g=\"\"+g;if(g.length<d){for(var f=0;f<(d-g.length);f++){g=\"0\"+g}}return g}a=a.replace(\"%D\",\"%m/%d/%y\");a=a.replace(\"%r\",\"%I:%M:%S %p\");a=a.replace(\"%Y\",\"\"+e.getFullYear());a=a.replace(\"%y\",\"\"+e.getYear());a=a.replace(\"%m\",b(e.getMonth()+1,2));a=a.replace(\"%d\",b(e.getDate(),2));a=a.replace(\"%H\",\"\"+b(e.getHours(),2));a=a.replace(\"%M\",\"\"+b(e.getMinutes(),2));a=a.replace(\"%S\",\"\"+b(e.getSeconds(),2));a=a.replace(\"%I\",\"\"+((e.getHours()+11)%12+1));a=a.replace(\"%p\",\"\"+(e.getHours()<12?\"AM\":\"PM\"));a=a.replace(\"%B\",\"\"+c.getLang(\"insertdatetime.months_long\").split(\",\")[e.getMonth()]);a=a.replace(\"%b\",\"\"+c.getLang(\"insertdatetime.months_short\").split(\",\")[e.getMonth()]);a=a.replace(\"%A\",\"\"+c.getLang(\"insertdatetime.day_long\").split(\",\")[e.getDay()]);a=a.replace(\"%a\",\"\"+c.getLang(\"insertdatetime.day_short\").split(\",\")[e.getDay()]);a=a.replace(\"%%\",\"%\");return a}});tinymce.PluginManager.add(\"insertdatetime\",tinymce.plugins.InsertDateTime)})();","Magento_Tinymce3/tiny_mce/plugins/print/editor_plugin_src.js":"/**\n * editor_plugin_src.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function() {\n\ttinymce.create('tinymce.plugins.Print', {\n\t\tinit : function(ed, url) {\n\t\t\ted.addCommand('mcePrint', function() {\n\t\t\t\ted.getWin().print();\n\t\t\t});\n\n\t\t\ted.addButton('print', {title : 'print.print_desc', cmd : 'mcePrint'});\n\t\t},\n\n\t\tgetInfo : function() {\n\t\t\treturn {\n\t\t\t\tlongname : 'Print',\n\t\t\t\tauthor : 'Moxiecode Systems AB',\n\t\t\t\tauthorurl : 'http://tinymce.moxiecode.com',\n\t\t\t\tinfourl : 'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/print',\n\t\t\t\tversion : tinymce.majorVersion + \".\" + tinymce.minorVersion\n\t\t\t};\n\t\t}\n\t});\n\n\t// Register plugin\n\ttinymce.PluginManager.add('print', tinymce.plugins.Print);\n})();\n","Magento_Tinymce3/tiny_mce/plugins/print/editor_plugin.js":"(function(){tinymce.create(\"tinymce.plugins.Print\",{init:function(a,b){a.addCommand(\"mcePrint\",function(){a.getWin().print()});a.addButton(\"print\",{title:\"print.print_desc\",cmd:\"mcePrint\"})},getInfo:function(){return{longname:\"Print\",author:\"Moxiecode Systems AB\",authorurl:\"http://tinymce.moxiecode.com\",infourl:\"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/print\",version:tinymce.majorVersion+\".\"+tinymce.minorVersion}}});tinymce.PluginManager.add(\"print\",tinymce.plugins.Print)})();","Magento_Tinymce3/tiny_mce/plugins/media/editor_plugin_src.js":"/**\n * editor_plugin_src.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function() {\n\tvar rootAttributes = tinymce.explode('id,name,width,height,style,align,class,hspace,vspace,bgcolor,type'), excludedAttrs = tinymce.makeMap(rootAttributes.join(',')), Node = tinymce.html.Node,\n\t\tmediaTypes, scriptRegExp, JSON = tinymce.util.JSON, mimeTypes;\n\n\t// Media types supported by this plugin\n\tmediaTypes = [\n\t\t// Type, clsid:s, mime types, codebase\n\t\t[\"Flash\", \"d27cdb6e-ae6d-11cf-96b8-444553540000\", \"application/x-shockwave-flash\", \"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0\"],\n\t\t[\"ShockWave\", \"166b1bca-3f9c-11cf-8075-444553540000\", \"application/x-director\", \"http://download.macromedia.com/pub/shockwave/cabs/director/sw.cab#version=8,5,1,0\"],\n\t\t[\"WindowsMedia\", \"6bf52a52-394a-11d3-b153-00c04f79faa6,22d6f312-b0f6-11d0-94ab-0080c74c7e95,05589fa1-c356-11ce-bf01-00aa0055595a\", \"application/x-mplayer2\", \"http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701\"],\n\t\t[\"QuickTime\", \"02bf25d5-8c17-4b23-bc80-d3488abddc6b\", \"video/quicktime\", \"http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0\"],\n\t\t[\"RealMedia\", \"cfcdaa03-8be4-11cf-b84b-0020afbbccfa\", \"audio/x-pn-realaudio-plugin\", \"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0\"],\n\t\t[\"Java\", \"8ad9c840-044e-11d1-b3e9-00805f499d93\", \"application/x-java-applet\", \"http://java.sun.com/products/plugin/autodl/jinstall-1_5_0-windows-i586.cab#Version=1,5,0,0\"],\n\t\t[\"Silverlight\", \"dfeaf541-f3e1-4c24-acac-99c30715084a\", \"application/x-silverlight-2\"],\n\t\t[\"Iframe\"],\n\t\t[\"Video\"],\n\t\t[\"EmbeddedAudio\"],\n\t\t[\"Audio\"]\n\t];\n\n\tfunction toArray(obj) {\n\t\tvar undef, out, i;\n\n\t\tif (obj && !obj.splice) {\n\t\t\tout = [];\n\n\t\t\tfor (i = 0; true; i++) {\n\t\t\t\tif (obj[i])\n\t\t\t\t\tout[i] = obj[i];\n\t\t\t\telse\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn out;\n\t\t}\n\n\t\treturn obj;\n\t};\n\n\ttinymce.create('tinymce.plugins.MediaPlugin', {\n\t\tinit : function(ed, url) {\n\t\t\tvar self = this, lookup = {}, i, y, item, name;\n\n\t\t\tfunction isMediaImg(node) {\n\t\t\t\treturn node && node.nodeName === 'IMG' && ed.dom.hasClass(node, 'mceItemMedia');\n\t\t\t};\n\n\t\t\tself.editor = ed;\n\t\t\tself.url = url;\n\n\t\t\t// Parse media types into a lookup table\n\t\t\tscriptRegExp = '';\n\t\t\tfor (i = 0; i < mediaTypes.length; i++) {\n\t\t\t\tname = mediaTypes[i][0];\n\n\t\t\t\titem = {\n\t\t\t\t\tname : name,\n\t\t\t\t\tclsids : tinymce.explode(mediaTypes[i][1] || ''),\n\t\t\t\t\tmimes : tinymce.explode(mediaTypes[i][2] || ''),\n\t\t\t\t\tcodebase : mediaTypes[i][3]\n\t\t\t\t};\n\n\t\t\t\tfor (y = 0; y < item.clsids.length; y++)\n\t\t\t\t\tlookup['clsid:' + item.clsids[y]] = item;\n\n\t\t\t\tfor (y = 0; y < item.mimes.length; y++)\n\t\t\t\t\tlookup[item.mimes[y]] = item;\n\n\t\t\t\tlookup['mceItem' + name] = item;\n\t\t\t\tlookup[name.toLowerCase()] = item;\n\n\t\t\t\tscriptRegExp += (scriptRegExp ? '|' : '') + name;\n\t\t\t}\n\n\t\t\t// Handle the media_types setting\n\t\t\ttinymce.each(ed.getParam(\"media_types\",\n\t\t\t\t\"video=mp4,m4v,ogv,webm;\" +\n\t\t\t\t\"silverlight=xap;\" +\n\t\t\t\t\"flash=swf,flv;\" +\n\t\t\t\t\"shockwave=dcr;\" +\n\t\t\t\t\"quicktime=mov,qt,mpg,mpeg;\" +\n\t\t\t\t\"shockwave=dcr;\" +\n\t\t\t\t\"windowsmedia=avi,wmv,wm,asf,asx,wmx,wvx;\" +\n\t\t\t\t\"realmedia=rm,ra,ram;\" +\n\t\t\t\t\"java=jar;\" +\n\t\t\t\t\"audio=mp3,ogg\"\n\t\t\t).split(';'), function(item) {\n\t\t\t\tvar i, extensions, type;\n\n\t\t\t\titem = item.split(/=/);\n\t\t\t\textensions = tinymce.explode(item[1].toLowerCase());\n\t\t\t\tfor (i = 0; i < extensions.length; i++) {\n\t\t\t\t\ttype = lookup[item[0].toLowerCase()];\n\n\t\t\t\t\tif (type)\n\t\t\t\t\t\tlookup[extensions[i]] = type;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tscriptRegExp = new RegExp('write(' + scriptRegExp + ')\\\\(([^)]+)\\\\)');\n\t\t\tself.lookup = lookup;\n\n\t\t\ted.onPreInit.add(function() {\n\t\t\t\t// Allow video elements\n\t\t\t\ted.schema.addValidElements('object[id|style|width|height|classid|codebase|*],param[name|value],embed[id|style|width|height|type|src|*],video[*],audio[*],source[*]');\n\n\t\t\t\t// Convert video elements to image placeholder\n\t\t\t\ted.parser.addNodeFilter('object,embed,video,audio,script,iframe', function(nodes) {\n\t\t\t\t\tvar i = nodes.length;\n\n\t\t\t\t\twhile (i--)\n\t\t\t\t\t\tself.objectToImg(nodes[i]);\n\t\t\t\t});\n\n\t\t\t\t// Convert image placeholders to video elements\n\t\t\t\ted.serializer.addNodeFilter('img', function(nodes, name, args) {\n\t\t\t\t\tvar i = nodes.length, node;\n\n\t\t\t\t\twhile (i--) {\n\t\t\t\t\t\tnode = nodes[i];\n\t\t\t\t\t\tif ((node.attr('class') || '').indexOf('mceItemMedia') !== -1)\n\t\t\t\t\t\t\tself.imgToObject(node, args);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\ted.onInit.add(function() {\n\t\t\t\t// Display \"media\" instead of \"img\" in element path\n\t\t\t\tif (ed.theme && ed.theme.onResolveName) {\n\t\t\t\t\ted.theme.onResolveName.add(function(theme, path_object) {\n\t\t\t\t\t\tif (path_object.name === 'img' && ed.dom.hasClass(path_object.node, 'mceItemMedia'))\n\t\t\t\t\t\t\tpath_object.name = 'media';\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Add contect menu if it's loaded\n\t\t\t\tif (ed && ed.plugins.contextmenu) {\n\t\t\t\t\ted.plugins.contextmenu.onContextMenu.add(function(plugin, menu, element) {\n\t\t\t\t\t\tif (element.nodeName === 'IMG' && element.className.indexOf('mceItemMedia') !== -1)\n\t\t\t\t\t\t\tmenu.add({title : 'media.edit', icon : 'media', cmd : 'mceMedia'});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Register commands\n\t\t\ted.addCommand('mceMedia', function() {\n\t\t\t\tvar data, img;\n\n\t\t\t\timg = ed.selection.getNode();\n\t\t\t\tif (isMediaImg(img)) {\n\t\t\t\t\tdata = ed.dom.getAttrib(img, 'data-mce-json');\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\tdata = JSON.parse(data);\n\n\t\t\t\t\t\t// Add some extra properties to the data object\n\t\t\t\t\t\ttinymce.each(rootAttributes, function(name) {\n\t\t\t\t\t\t\tvar value = ed.dom.getAttrib(img, name);\n\n\t\t\t\t\t\t\tif (value)\n\t\t\t\t\t\t\t\tdata[name] = value;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tdata.type = self.getType(img.className).name.toLowerCase();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!data) {\n\t\t\t\t\tdata = {\n\t\t\t\t\t\ttype : 'flash',\n\t\t\t\t\t\tvideo: {sources:[]},\n\t\t\t\t\t\tparams: {}\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\ted.windowManager.open({\n\t\t\t\t\tfile : url + '/media.htm',\n\t\t\t\t\twidth : 430 + parseInt(ed.getLang('media.delta_width', 0)),\n\t\t\t\t\theight : 500 + parseInt(ed.getLang('media.delta_height', 0)),\n\t\t\t\t\tinline : 1\n\t\t\t\t}, {\n\t\t\t\t\tplugin_url : url,\n\t\t\t\t\tdata : data\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Register buttons\n\t\t\ted.addButton('media', {title : 'media.desc', cmd : 'mceMedia'});\n\n\t\t\t// Update media selection status\n\t\t\ted.onNodeChange.add(function(ed, cm, node) {\n\t\t\t\tcm.setActive('media', isMediaImg(node));\n\t\t\t});\n\t\t},\n\n\t\tconvertUrl : function(url, force_absolute) {\n\t\t\tvar self = this, editor = self.editor, settings = editor.settings,\n\t\t\t\turlConverter = settings.url_converter,\n\t\t\t\turlConverterScope = settings.url_converter_scope || self;\n\n\t\t\tif (!url)\n\t\t\t\treturn url;\n\n\t\t\tif (force_absolute)\n\t\t\t\treturn editor.documentBaseURI.toAbsolute(url);\n\n\t\t\treturn urlConverter.call(urlConverterScope, url, 'src', 'object');\n\t\t},\n\n\t\tgetInfo : function() {\n\t\t\treturn {\n\t\t\t\tlongname : 'Media',\n\t\t\t\tauthor : 'Moxiecode Systems AB',\n\t\t\t\tauthorurl : 'http://tinymce.moxiecode.com',\n\t\t\t\tinfourl : 'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/media',\n\t\t\t\tversion : tinymce.majorVersion + \".\" + tinymce.minorVersion\n\t\t\t};\n\t\t},\n\n\t\t/**\n\t\t * Converts the JSON data object to an img node.\n\t\t */\n\t\tdataToImg : function(data, force_absolute) {\n\t\t\tvar self = this, editor = self.editor, baseUri = editor.documentBaseURI, sources, attrs, img, i;\n\n\t\t\tdata.params.src = self.convertUrl(data.params.src, force_absolute);\n\n\t\t\tattrs = data.video.attrs;\n\t\t\tif (attrs)\n\t\t\t\tattrs.src = self.convertUrl(attrs.src, force_absolute);\n\n\t\t\tif (attrs)\n\t\t\t\tattrs.poster = self.convertUrl(attrs.poster, force_absolute);\n\n\t\t\tsources = toArray(data.video.sources);\n\t\t\tif (sources) {\n\t\t\t\tfor (i = 0; i < sources.length; i++)\n\t\t\t\t\tsources[i].src = self.convertUrl(sources[i].src, force_absolute);\n\t\t\t}\n\n\t\t\timg = self.editor.dom.create('img', {\n\t\t\t\tid : data.id,\n\t\t\t\tstyle : data.style,\n\t\t\t\talign : data.align,\n\t\t\t\thspace : data.hspace,\n\t\t\t\tvspace : data.vspace,\n\t\t\t\tsrc : self.editor.theme.url + '/img/trans.gif',\n\t\t\t\t'class' : 'mceItemMedia mceItem' + self.getType(data.type).name,\n\t\t\t\t'data-mce-json' : JSON.serialize(data)\n\t\t\t});\n\n\t\t\timg.width = data.width || (data.type == 'audio' ? \"300\" : \"320\");\n\t\t\timg.height = data.height || (data.type == 'audio' ? \"32\" : \"240\");\n\n\t\t\treturn img;\n\t\t},\n\n\t\t/**\n\t\t * Converts the JSON data object to a HTML string.\n\t\t */\n\t\tdataToHtml : function(data, force_absolute) {\n\t\t\treturn this.editor.serializer.serialize(this.dataToImg(data, force_absolute), {forced_root_block : '', force_absolute : force_absolute});\n\t\t},\n\n\t\t/**\n\t\t * Converts the JSON data object to a HTML string.\n\t\t */\n\t\thtmlToData : function(html) {\n\t\t\tvar fragment, img, data;\n\n\t\t\tdata = {\n\t\t\t\ttype : 'flash',\n\t\t\t\tvideo: {sources:[]},\n\t\t\t\tparams: {}\n\t\t\t};\n\n\t\t\tfragment = this.editor.parser.parse(html);\n\t\t\timg = fragment.getAll('img')[0];\n\n\t\t\tif (img) {\n\t\t\t\tdata = JSON.parse(img.attr('data-mce-json'));\n\t\t\t\tdata.type = this.getType(img.attr('class')).name.toLowerCase();\n\n\t\t\t\t// Add some extra properties to the data object\n\t\t\t\ttinymce.each(rootAttributes, function(name) {\n\t\t\t\t\tvar value = img.attr(name);\n\n\t\t\t\t\tif (value)\n\t\t\t\t\t\tdata[name] = value;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn data;\n\t\t},\n\n\t\t/**\n\t\t * Get type item by extension, class, clsid or mime type.\n\t\t *\n\t\t * @method getType\n\t\t * @param {String} value Value to get type item by.\n\t\t * @return {Object} Type item object or undefined.\n\t\t */\n\t\tgetType : function(value) {\n\t\t\tvar i, values, typeItem;\n\n\t\t\t// Find type by checking the classes\n\t\t\tvalues = tinymce.explode(value, ' ');\n\t\t\tfor (i = 0; i < values.length; i++) {\n\t\t\t\ttypeItem = this.lookup[values[i]];\n\n\t\t\t\tif (typeItem)\n\t\t\t\t\treturn typeItem;\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Converts a tinymce.html.Node image element to video/object/embed.\n\t\t */\n\t\timgToObject : function(node, args) {\n\t\t\tvar self = this, editor = self.editor, video, object, embed, iframe, name, value, data,\n\t\t\t\tsource, sources, params, param, typeItem, i, item, mp4Source, replacement,\n\t\t\t\tposterSrc, style, audio;\n\n\t\t\t// Adds the flash player\n\t\t\tfunction addPlayer(video_src, poster_src) {\n\t\t\t\tvar baseUri, flashVars, flashVarsOutput, params, flashPlayer;\n\n\t\t\t\tflashPlayer = editor.getParam('flash_video_player_url', self.convertUrl(self.url + '/moxieplayer.swf'));\n\t\t\t\tif (flashPlayer) {\n\t\t\t\t\tbaseUri = editor.documentBaseURI;\n\t\t\t\t\tdata.params.src = flashPlayer;\n\n\t\t\t\t\t// Convert the movie url to absolute urls\n\t\t\t\t\tif (editor.getParam('flash_video_player_absvideourl', true)) {\n\t\t\t\t\t\tvideo_src = baseUri.toAbsolute(video_src || '', true);\n\t\t\t\t\t\tposter_src = baseUri.toAbsolute(poster_src || '', true);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Generate flash vars\n\t\t\t\t\tflashVarsOutput = '';\n\t\t\t\t\tflashVars = editor.getParam('flash_video_player_flashvars', {url : '$url', poster : '$poster'});\n\t\t\t\t\ttinymce.each(flashVars, function(value, name) {\n\t\t\t\t\t\t// Replace $url and $poster variables in flashvars value\n\t\t\t\t\t\tvalue = value.replace(/\\$url/, video_src || '');\n\t\t\t\t\t\tvalue = value.replace(/\\$poster/, poster_src || '');\n\n\t\t\t\t\t\tif (value.length > 0)\n\t\t\t\t\t\t\tflashVarsOutput += (flashVarsOutput ? '&' : '') + name + '=' + escape(value);\n\t\t\t\t\t});\n\n\t\t\t\t\tif (flashVarsOutput.length)\n\t\t\t\t\t\tdata.params.flashvars = flashVarsOutput;\n\n\t\t\t\t\tparams = editor.getParam('flash_video_player_params', {\n\t\t\t\t\t\tallowfullscreen: true,\n\t\t\t\t\t\tallowscriptaccess: true\n\t\t\t\t\t});\n\n\t\t\t\t\ttinymce.each(params, function(value, name) {\n\t\t\t\t\t\tdata.params[name] = \"\" + value;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tdata = node.attr('data-mce-json');\n\t\t\tif (!data)\n\t\t\t\treturn;\n\n\t\t\tdata = JSON.parse(data);\n\t\t\ttypeItem = this.getType(node.attr('class'));\n\n\t\t\tstyle = node.attr('data-mce-style')\n\t\t\tif (!style) {\n\t\t\t\tstyle = node.attr('style');\n\n\t\t\t\tif (style)\n\t\t\t\t\tstyle = editor.dom.serializeStyle(editor.dom.parseStyle(style, 'img'));\n\t\t\t}\n\n\t\t\t// Handle iframe\n\t\t\tif (typeItem.name === 'Iframe') {\n\t\t\t\treplacement = new Node('iframe', 1);\n\n\t\t\t\ttinymce.each(rootAttributes, function(name) {\n\t\t\t\t\tvar value = node.attr(name);\n\n\t\t\t\t\tif (name == 'class' && value)\n\t\t\t\t\t\tvalue = value.replace(/mceItem.+ ?/g, '');\n\n\t\t\t\t\tif (value && value.length > 0)\n\t\t\t\t\t\treplacement.attr(name, value);\n\t\t\t\t});\n\n\t\t\t\tfor (name in data.params)\n\t\t\t\t\treplacement.attr(name, data.params[name]);\n\n\t\t\t\treplacement.attr({\n\t\t\t\t\tstyle: style,\n\t\t\t\t\tsrc: data.params.src\n\t\t\t\t});\n\n\t\t\t\tnode.replace(replacement);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Handle scripts\n\t\t\tif (this.editor.settings.media_use_script) {\n\t\t\t\treplacement = new Node('script', 1).attr('type', 'text/javascript');\n\n\t\t\t\tvalue = new Node('#text', 3);\n\t\t\t\tvalue.value = 'write' + typeItem.name + '(' + JSON.serialize(tinymce.extend(data.params, {\n\t\t\t\t\twidth: node.attr('width'),\n\t\t\t\t\theight: node.attr('height')\n\t\t\t\t})) + ');';\n\n\t\t\t\treplacement.append(value);\n\t\t\t\tnode.replace(replacement);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Add HTML5 video element\n\t\t\tif (typeItem.name === 'Video' && data.video.sources[0]) {\n\t\t\t\t// Create new object element\n\t\t\t\tvideo = new Node('video', 1).attr(tinymce.extend({\n\t\t\t\t\tid : node.attr('id'),\n\t\t\t\t\twidth: node.attr('width'),\n\t\t\t\t\theight: node.attr('height'),\n\t\t\t\t\tstyle : style\n\t\t\t\t}, data.video.attrs));\n\n\t\t\t\t// Get poster source and use that for flash fallback\n\t\t\t\tif (data.video.attrs)\n\t\t\t\t\tposterSrc = data.video.attrs.poster;\n\n\t\t\t\tsources = data.video.sources = toArray(data.video.sources);\n\t\t\t\tfor (i = 0; i < sources.length; i++) {\n\t\t\t\t\tif (/\\.mp4$/.test(sources[i].src))\n\t\t\t\t\t\tmp4Source = sources[i].src;\n\t\t\t\t}\n\n\t\t\t\tif (!sources[0].type) {\n\t\t\t\t\tvideo.attr('src', sources[0].src);\n\t\t\t\t\tsources.splice(0, 1);\n\t\t\t\t}\n\n\t\t\t\tfor (i = 0; i < sources.length; i++) {\n\t\t\t\t\tsource = new Node('source', 1).attr(sources[i]);\n\t\t\t\t\tsource.shortEnded = true;\n\t\t\t\t\tvideo.append(source);\n\t\t\t\t}\n\n\t\t\t\t// Create flash fallback for video if we have a mp4 source\n\t\t\t\tif (mp4Source) {\n\t\t\t\t\taddPlayer(mp4Source, posterSrc);\n\t\t\t\t\ttypeItem = self.getType('flash');\n\t\t\t\t} else\n\t\t\t\t\tdata.params.src = '';\n\t\t\t}\n\n\t\t\t// Add HTML5 audio element\n\t\t\tif (typeItem.name === 'Audio' && data.video.sources[0]) {\n\t\t\t\t// Create new object element\n\t\t\t\taudio = new Node('audio', 1).attr(tinymce.extend({\n\t\t\t\t\tid : node.attr('id'),\n\t\t\t\t\twidth: node.attr('width'),\n\t\t\t\t\theight: node.attr('height'),\n\t\t\t\t\tstyle : style\n\t\t\t\t}, data.video.attrs));\n\n\t\t\t\t// Get poster source and use that for flash fallback\n\t\t\t\tif (data.video.attrs)\n\t\t\t\t\tposterSrc = data.video.attrs.poster;\n\n\t\t\t\tsources = data.video.sources = toArray(data.video.sources);\n\t\t\t\tif (!sources[0].type) {\n\t\t\t\t\taudio.attr('src', sources[0].src);\n\t\t\t\t\tsources.splice(0, 1);\n\t\t\t\t}\n\n\t\t\t\tfor (i = 0; i < sources.length; i++) {\n\t\t\t\t\tsource = new Node('source', 1).attr(sources[i]);\n\t\t\t\t\tsource.shortEnded = true;\n\t\t\t\t\taudio.append(source);\n\t\t\t\t}\n\n\t\t\t\tdata.params.src = '';\n\t\t\t}\n\n\t\t\tif (typeItem.name === 'EmbeddedAudio') {\n\t\t\t\tembed = new Node('embed', 1);\n\t\t\t\tembed.shortEnded = true;\n\t\t\t\tembed.attr({\n\t\t\t\t\tid: node.attr('id'),\n\t\t\t\t\twidth: node.attr('width'),\n\t\t\t\t\theight: node.attr('height'),\n\t\t\t\t\tstyle : style,\n\t\t\t\t\ttype: node.attr('type')\n\t\t\t\t});\n\n\t\t\t\tfor (name in data.params)\n\t\t\t\t\tembed.attr(name, data.params[name]);\n\n\t\t\t\ttinymce.each(rootAttributes, function(name) {\n\t\t\t\t\tif (data[name] && name != 'type')\n\t\t\t\t\t\tembed.attr(name, data[name]);\n\t\t\t\t});\n\n\t\t\t\tdata.params.src = '';\n\t\t\t}\n\n\t\t\t// Do we have a params src then we can generate object\n\t\t\tif (data.params.src) {\n\t\t\t\t// Is flv movie add player for it\n\t\t\t\tif (/\\.flv$/i.test(data.params.src))\n\t\t\t\t\taddPlayer(data.params.src, '');\n\n\t\t\t\tif (args && args.force_absolute)\n\t\t\t\t\tdata.params.src = editor.documentBaseURI.toAbsolute(data.params.src);\n\n\t\t\t\t// Create new object element\n\t\t\t\tobject = new Node('object', 1).attr({\n\t\t\t\t\tid : node.attr('id'),\n\t\t\t\t\twidth: node.attr('width'),\n\t\t\t\t\theight: node.attr('height'),\n\t\t\t\t\tstyle : style\n\t\t\t\t});\n\n\t\t\t\ttinymce.each(rootAttributes, function(name) {\n\t\t\t\t\tvar value = data[name];\n\n\t\t\t\t\tif (name == 'class' && value)\n\t\t\t\t\t\tvalue = value.replace(/mceItem.+ ?/g, '');\n\n\t\t\t\t\tif (value && name != 'type')\n\t\t\t\t\t\tobject.attr(name, value);\n\t\t\t\t});\n\n\t\t\t\t// Add params\n\t\t\t\tfor (name in data.params) {\n\t\t\t\t\tparam = new Node('param', 1);\n\t\t\t\t\tparam.shortEnded = true;\n\t\t\t\t\tvalue = data.params[name];\n\n\t\t\t\t\t// Windows media needs to use url instead of src for the media URL\n\t\t\t\t\tif (name === 'src' && typeItem.name === 'WindowsMedia')\n\t\t\t\t\t\tname = 'url';\n\n\t\t\t\t\tparam.attr({name: name, value: value});\n\t\t\t\t\tobject.append(param);\n\t\t\t\t}\n\n\t\t\t\t// Setup add type and classid if strict is disabled\n\t\t\t\tif (this.editor.getParam('media_strict', true)) {\n\t\t\t\t\tobject.attr({\n\t\t\t\t\t\tdata: data.params.src,\n\t\t\t\t\t\ttype: typeItem.mimes[0]\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tobject.attr({\n\t\t\t\t\t\tclassid: \"clsid:\" + typeItem.clsids[0],\n\t\t\t\t\t\tcodebase: typeItem.codebase\n\t\t\t\t\t});\n\n\t\t\t\t\tembed = new Node('embed', 1);\n\t\t\t\t\tembed.shortEnded = true;\n\t\t\t\t\tembed.attr({\n\t\t\t\t\t\tid: node.attr('id'),\n\t\t\t\t\t\twidth: node.attr('width'),\n\t\t\t\t\t\theight: node.attr('height'),\n\t\t\t\t\t\tstyle : style,\n\t\t\t\t\t\ttype: typeItem.mimes[0]\n\t\t\t\t\t});\n\n\t\t\t\t\tfor (name in data.params)\n\t\t\t\t\t\tembed.attr(name, data.params[name]);\n\n\t\t\t\t\ttinymce.each(rootAttributes, function(name) {\n\t\t\t\t\t\tif (data[name] && name != 'type')\n\t\t\t\t\t\t\tembed.attr(name, data[name]);\n\t\t\t\t\t});\n\n\t\t\t\t\tobject.append(embed);\n\t\t\t\t}\n\n\t\t\t\t// Insert raw HTML\n\t\t\t\tif (data.object_html) {\n\t\t\t\t\tvalue = new Node('#text', 3);\n\t\t\t\t\tvalue.raw = true;\n\t\t\t\t\tvalue.value = data.object_html;\n\t\t\t\t\tobject.append(value);\n\t\t\t\t}\n\n\t\t\t\t// Append object to video element if it exists\n\t\t\t\tif (video)\n\t\t\t\t\tvideo.append(object);\n\t\t\t}\n\n\t\t\tif (video) {\n\t\t\t\t// Insert raw HTML\n\t\t\t\tif (data.video_html) {\n\t\t\t\t\tvalue = new Node('#text', 3);\n\t\t\t\t\tvalue.raw = true;\n\t\t\t\t\tvalue.value = data.video_html;\n\t\t\t\t\tvideo.append(value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (audio) {\n\t\t\t\t// Insert raw HTML\n\t\t\t\tif (data.video_html) {\n\t\t\t\t\tvalue = new Node('#text', 3);\n\t\t\t\t\tvalue.raw = true;\n\t\t\t\t\tvalue.value = data.video_html;\n\t\t\t\t\taudio.append(value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar n = video || audio || object || embed;\n\t\t\tif (n)\n\t\t\t\tnode.replace(n);\n\t\t\telse\n\t\t\t\tnode.remove();\n\t\t},\n\n\t\t/**\n\t\t * Converts a tinymce.html.Node video/object/embed to an img element.\n\t\t *\n\t\t * The video/object/embed will be converted into an image placeholder with a JSON data attribute like this:\n\t\t * <img class=\"mceItemMedia mceItemFlash\" width=\"100\" height=\"100\" data-mce-json=\"{..}\" />\n\t\t *\n\t\t * The JSON structure will be like this:\n\t\t * {'params':{'flashvars':'something','quality':'high','src':'someurl'}, 'video':{'sources':[{src: 'someurl', type: 'video/mp4'}]}}\n\t\t */\n\t\tobjectToImg : function(node) {\n\t\t\tvar object, embed, video, iframe, img, name, id, width, height, style, i, html,\n\t\t\t\tparam, params, source, sources, data, type, lookup = this.lookup,\n\t\t\t\tmatches, attrs, urlConverter = this.editor.settings.url_converter,\n\t\t\t\turlConverterScope = this.editor.settings.url_converter_scope,\n\t\t\t\thspace, vspace, align, bgcolor;\n\n\t\t\tfunction getInnerHTML(node) {\n\t\t\t\treturn new tinymce.html.Serializer({\n\t\t\t\t\tinner: true,\n\t\t\t\t\tvalidate: false\n\t\t\t\t}).serialize(node);\n\t\t\t};\n\n\t\t\tfunction lookupAttribute(o, attr) {\n\t\t\t\treturn lookup[(o.attr(attr) || '').toLowerCase()];\n\t\t\t}\n\n\t\t\tfunction lookupExtension(src) {\n\t\t\t\tvar ext = src.replace(/^.*\\.([^.]+)$/, '$1');\n\t\t\t\treturn lookup[ext.toLowerCase() || ''];\n\t\t\t}\n\n\t\t\t// If node isn't in document\n\t\t\tif (!node.parent)\n\t\t\t\treturn;\n\n\t\t\t// Handle media scripts\n\t\t\tif (node.name === 'script') {\n\t\t\t\tif (node.firstChild)\n\t\t\t\t\tmatches = scriptRegExp.exec(node.firstChild.value);\n\n\t\t\t\tif (!matches)\n\t\t\t\t\treturn;\n\n\t\t\t\ttype = matches[1];\n\t\t\t\tdata = {video : {}, params : JSON.parse(matches[2])};\n\t\t\t\twidth = data.params.width;\n\t\t\t\theight = data.params.height;\n\t\t\t}\n\n\t\t\t// Setup data objects\n\t\t\tdata = data || {\n\t\t\t\tvideo : {},\n\t\t\t\tparams : {}\n\t\t\t};\n\n\t\t\t// Setup new image object\n\t\t\timg = new Node('img', 1);\n\t\t\timg.attr({\n\t\t\t\tsrc : this.editor.theme.url + '/img/trans.gif'\n\t\t\t});\n\n\t\t\t// Video element\n\t\t\tname = node.name;\n\t\t\tif (name === 'video' || name == 'audio') {\n\t\t\t\tvideo = node;\n\t\t\t\tobject = node.getAll('object')[0];\n\t\t\t\tembed = node.getAll('embed')[0];\n\t\t\t\twidth = video.attr('width');\n\t\t\t\theight = video.attr('height');\n\t\t\t\tid = video.attr('id');\n\t\t\t\tdata.video = {attrs : {}, sources : []};\n\n\t\t\t\t// Get all video attributes\n\t\t\t\tattrs = data.video.attrs;\n\t\t\t\tfor (name in video.attributes.map)\n\t\t\t\t\tattrs[name] = video.attributes.map[name];\n\n\t\t\t\tsource = node.attr('src');\n\t\t\t\tif (source)\n\t\t\t\t\tdata.video.sources.push({src : urlConverter.call(urlConverterScope, source, 'src', node.name)});\n\n\t\t\t\t// Get all sources\n\t\t\t\tsources = video.getAll(\"source\");\n\t\t\t\tfor (i = 0; i < sources.length; i++) {\n\t\t\t\t\tsource = sources[i].remove();\n\n\t\t\t\t\tdata.video.sources.push({\n\t\t\t\t\t\tsrc: urlConverter.call(urlConverterScope, source.attr('src'), 'src', 'source'),\n\t\t\t\t\t\ttype: source.attr('type'),\n\t\t\t\t\t\tmedia: source.attr('media')\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Convert the poster URL\n\t\t\t\tif (attrs.poster)\n\t\t\t\t\tattrs.poster = urlConverter.call(urlConverterScope, attrs.poster, 'poster', node.name);\n\t\t\t}\n\n\t\t\t// Object element\n\t\t\tif (node.name === 'object') {\n\t\t\t\tobject = node;\n\t\t\t\tembed = node.getAll('embed')[0];\n\t\t\t}\n\n\t\t\t// Embed element\n\t\t\tif (node.name === 'embed')\n\t\t\t\tembed = node;\n\n\t\t\t// Iframe element\n\t\t\tif (node.name === 'iframe') {\n\t\t\t\tiframe = node;\n\t\t\t\ttype = 'Iframe';\n\t\t\t}\n\n\t\t\tif (object) {\n\t\t\t\t// Get width/height\n\t\t\t\twidth = width || object.attr('width');\n\t\t\t\theight = height || object.attr('height');\n\t\t\t\tstyle = style || object.attr('style');\n\t\t\t\tid = id || object.attr('id');\n\t\t\t\thspace = hspace || object.attr('hspace');\n\t\t\t\tvspace = vspace || object.attr('vspace');\n\t\t\t\talign = align || object.attr('align');\n\t\t\t\tbgcolor = bgcolor || object.attr('bgcolor');\n\t\t\t\tdata.name = object.attr('name');\n\n\t\t\t\t// Get all object params\n\t\t\t\tparams = object.getAll(\"param\");\n\t\t\t\tfor (i = 0; i < params.length; i++) {\n\t\t\t\t\tparam = params[i];\n\t\t\t\t\tname = param.remove().attr('name');\n\n\t\t\t\t\tif (!excludedAttrs[name])\n\t\t\t\t\t\tdata.params[name] = param.attr('value');\n\t\t\t\t}\n\n\t\t\t\tdata.params.src = data.params.src || object.attr('data');\n\t\t\t}\n\n\t\t\tif (embed) {\n\t\t\t\t// Get width/height\n\t\t\t\twidth = width || embed.attr('width');\n\t\t\t\theight = height || embed.attr('height');\n\t\t\t\tstyle = style || embed.attr('style');\n\t\t\t\tid = id || embed.attr('id');\n\t\t\t\thspace = hspace || embed.attr('hspace');\n\t\t\t\tvspace = vspace || embed.attr('vspace');\n\t\t\t\talign = align || embed.attr('align');\n\t\t\t\tbgcolor = bgcolor || embed.attr('bgcolor');\n\n\t\t\t\t// Get all embed attributes\n\t\t\t\tfor (name in embed.attributes.map) {\n\t\t\t\t\tif (!excludedAttrs[name] && !data.params[name])\n\t\t\t\t\t\tdata.params[name] = embed.attributes.map[name];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (iframe) {\n\t\t\t\t// Get width/height\n\t\t\t\twidth = iframe.attr('width');\n\t\t\t\theight = iframe.attr('height');\n\t\t\t\tstyle = style || iframe.attr('style');\n\t\t\t\tid = iframe.attr('id');\n\t\t\t\thspace = iframe.attr('hspace');\n\t\t\t\tvspace = iframe.attr('vspace');\n\t\t\t\talign = iframe.attr('align');\n\t\t\t\tbgcolor = iframe.attr('bgcolor');\n\n\t\t\t\ttinymce.each(rootAttributes, function(name) {\n\t\t\t\t\timg.attr(name, iframe.attr(name));\n\t\t\t\t});\n\n\t\t\t\t// Get all iframe attributes\n\t\t\t\tfor (name in iframe.attributes.map) {\n\t\t\t\t\tif (!excludedAttrs[name] && !data.params[name])\n\t\t\t\t\t\tdata.params[name] = iframe.attributes.map[name];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Use src not movie\n\t\t\tif (data.params.movie) {\n\t\t\t\tdata.params.src = data.params.src || data.params.movie;\n\t\t\t\tdelete data.params.movie;\n\t\t\t}\n\n\t\t\t// Convert the URL to relative/absolute depending on configuration\n\t\t\tif (data.params.src)\n\t\t\t\tdata.params.src = urlConverter.call(urlConverterScope, data.params.src, 'src', 'object');\n\n\t\t\tif (video) {\n\t\t\t\tif (node.name === 'video')\n\t\t\t\t\ttype = lookup.video.name;\n\t\t\t\telse if (node.name === 'audio')\n\t\t\t\t\ttype = lookup.audio.name;\n\t\t\t}\n\n\t\t\tif (object && !type)\n\t\t\t\ttype = (lookupAttribute(object, 'clsid') || lookupAttribute(object, 'classid') || lookupAttribute(object, 'type') || {}).name;\n\n\t\t\tif (embed && !type)\n\t\t\t\ttype = (lookupAttribute(embed, 'type') || lookupExtension(data.params.src) || {}).name;\n\n\t\t\t// for embedded audio we preserve the original specified type\n\t\t\tif (embed && type == 'EmbeddedAudio') {\n\t\t\t\tdata.params.type = embed.attr('type');\n\t\t\t}\n\n\t\t\t// Replace the video/object/embed element with a placeholder image containing the data\n\t\t\tnode.replace(img);\n\n\t\t\t// Remove embed\n\t\t\tif (embed)\n\t\t\t\tembed.remove();\n\n\t\t\t// Serialize the inner HTML of the object element\n\t\t\tif (object) {\n\t\t\t\thtml = getInnerHTML(object.remove());\n\n\t\t\t\tif (html)\n\t\t\t\t\tdata.object_html = html;\n\t\t\t}\n\n\t\t\t// Serialize the inner HTML of the video element\n\t\t\tif (video) {\n\t\t\t\thtml = getInnerHTML(video.remove());\n\n\t\t\t\tif (html)\n\t\t\t\t\tdata.video_html = html;\n\t\t\t}\n\n\t\t\tdata.hspace = hspace;\n\t\t\tdata.vspace = vspace;\n\t\t\tdata.align = align;\n\t\t\tdata.bgcolor = bgcolor;\n\n\t\t\t// Set width/height of placeholder\n\t\t\timg.attr({\n\t\t\t\tid : id,\n\t\t\t\t'class' : 'mceItemMedia mceItem' + (type || 'Flash'),\n\t\t\t\tstyle : style,\n\t\t\t\twidth : width || (node.name == 'audio' ? \"300\" : \"320\"),\n\t\t\t\theight : height || (node.name == 'audio' ? \"32\" : \"240\"),\n\t\t\t\thspace : hspace,\n\t\t\t\tvspace : vspace,\n\t\t\t\talign : align,\n\t\t\t\tbgcolor : bgcolor,\n\t\t\t\t\"data-mce-json\" : JSON.serialize(data)\n\t\t\t});\n\t\t}\n\t});\n\n\t// Register plugin\n\ttinymce.PluginManager.add('media', tinymce.plugins.MediaPlugin);\n})();\n","Magento_Tinymce3/tiny_mce/plugins/media/editor_plugin.js":"(function(){var d=tinymce.explode(\"id,name,width,height,style,align,class,hspace,vspace,bgcolor,type\"),h=tinymce.makeMap(d.join(\",\")),b=tinymce.html.Node,f,a,g=tinymce.util.JSON,e;f=[[\"Flash\",\"d27cdb6e-ae6d-11cf-96b8-444553540000\",\"application/x-shockwave-flash\",\"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0\"],[\"ShockWave\",\"166b1bca-3f9c-11cf-8075-444553540000\",\"application/x-director\",\"http://download.macromedia.com/pub/shockwave/cabs/director/sw.cab#version=8,5,1,0\"],[\"WindowsMedia\",\"6bf52a52-394a-11d3-b153-00c04f79faa6,22d6f312-b0f6-11d0-94ab-0080c74c7e95,05589fa1-c356-11ce-bf01-00aa0055595a\",\"application/x-mplayer2\",\"http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701\"],[\"QuickTime\",\"02bf25d5-8c17-4b23-bc80-d3488abddc6b\",\"video/quicktime\",\"http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0\"],[\"RealMedia\",\"cfcdaa03-8be4-11cf-b84b-0020afbbccfa\",\"audio/x-pn-realaudio-plugin\",\"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0\"],[\"Java\",\"8ad9c840-044e-11d1-b3e9-00805f499d93\",\"application/x-java-applet\",\"http://java.sun.com/products/plugin/autodl/jinstall-1_5_0-windows-i586.cab#Version=1,5,0,0\"],[\"Silverlight\",\"dfeaf541-f3e1-4c24-acac-99c30715084a\",\"application/x-silverlight-2\"],[\"Iframe\"],[\"Video\"],[\"EmbeddedAudio\"],[\"Audio\"]];function c(m){var l,j,k;if(m&&!m.splice){j=[];for(k=0;true;k++){if(m[k]){j[k]=m[k]}else{break}}return j}return m}tinymce.create(\"tinymce.plugins.MediaPlugin\",{init:function(n,j){var r=this,l={},m,p,q,k;function o(i){return i&&i.nodeName===\"IMG\"&&n.dom.hasClass(i,\"mceItemMedia\")}r.editor=n;r.url=j;a=\"\";for(m=0;m<f.length;m++){k=f[m][0];q={name:k,clsids:tinymce.explode(f[m][1]||\"\"),mimes:tinymce.explode(f[m][2]||\"\"),codebase:f[m][3]};for(p=0;p<q.clsids.length;p++){l[\"clsid:\"+q.clsids[p]]=q}for(p=0;p<q.mimes.length;p++){l[q.mimes[p]]=q}l[\"mceItem\"+k]=q;l[k.toLowerCase()]=q;a+=(a?\"|\":\"\")+k}tinymce.each(n.getParam(\"media_types\",\"video=mp4,m4v,ogv,webm;silverlight=xap;flash=swf,flv;shockwave=dcr;quicktime=mov,qt,mpg,mpeg;shockwave=dcr;windowsmedia=avi,wmv,wm,asf,asx,wmx,wvx;realmedia=rm,ra,ram;java=jar;audio=mp3,ogg\").split(\";\"),function(v){var s,u,t;v=v.split(/=/);u=tinymce.explode(v[1].toLowerCase());for(s=0;s<u.length;s++){t=l[v[0].toLowerCase()];if(t){l[u[s]]=t}}});a=new RegExp(\"write(\"+a+\")\\\\(([^)]+)\\\\)\");r.lookup=l;n.onPreInit.add(function(){n.schema.addValidElements(\"object[id|style|width|height|classid|codebase|*],param[name|value],embed[id|style|width|height|type|src|*],video[*],audio[*],source[*]\");n.parser.addNodeFilter(\"object,embed,video,audio,script,iframe\",function(s){var t=s.length;while(t--){r.objectToImg(s[t])}});n.serializer.addNodeFilter(\"img\",function(s,u,t){var v=s.length,w;while(v--){w=s[v];if((w.attr(\"class\")||\"\").indexOf(\"mceItemMedia\")!==-1){r.imgToObject(w,t)}}})});n.onInit.add(function(){if(n.theme&&n.theme.onResolveName){n.theme.onResolveName.add(function(i,s){if(s.name===\"img\"&&n.dom.hasClass(s.node,\"mceItemMedia\")){s.name=\"media\"}})}if(n&&n.plugins.contextmenu){n.plugins.contextmenu.onContextMenu.add(function(s,t,i){if(i.nodeName===\"IMG\"&&i.className.indexOf(\"mceItemMedia\")!==-1){t.add({title:\"media.edit\",icon:\"media\",cmd:\"mceMedia\"})}})}});n.addCommand(\"mceMedia\",function(){var s,i;i=n.selection.getNode();if(o(i)){s=n.dom.getAttrib(i,\"data-mce-json\");if(s){s=g.parse(s);tinymce.each(d,function(t){var u=n.dom.getAttrib(i,t);if(u){s[t]=u}});s.type=r.getType(i.className).name.toLowerCase()}}if(!s){s={type:\"flash\",video:{sources:[]},params:{}}}n.windowManager.open({file:j+\"/media.htm\",width:430+parseInt(n.getLang(\"media.delta_width\",0)),height:500+parseInt(n.getLang(\"media.delta_height\",0)),inline:1},{plugin_url:j,data:s})});n.addButton(\"media\",{title:\"media.desc\",cmd:\"mceMedia\"});n.onNodeChange.add(function(s,i,t){i.setActive(\"media\",o(t))})},convertUrl:function(k,n){var j=this,m=j.editor,l=m.settings,o=l.url_converter,i=l.url_converter_scope||j;if(!k){return k}if(n){return m.documentBaseURI.toAbsolute(k)}return o.call(i,k,\"src\",\"object\")},getInfo:function(){return{longname:\"Media\",author:\"Moxiecode Systems AB\",authorurl:\"http://tinymce.moxiecode.com\",infourl:\"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/media\",version:tinymce.majorVersion+\".\"+tinymce.minorVersion}},dataToImg:function(m,k){var r=this,o=r.editor,p=o.documentBaseURI,j,q,n,l;m.params.src=r.convertUrl(m.params.src,k);q=m.video.attrs;if(q){q.src=r.convertUrl(q.src,k)}if(q){q.poster=r.convertUrl(q.poster,k)}j=c(m.video.sources);if(j){for(l=0;l<j.length;l++){j[l].src=r.convertUrl(j[l].src,k)}}n=r.editor.dom.create(\"img\",{id:m.id,style:m.style,align:m.align,hspace:m.hspace,vspace:m.vspace,src:r.editor.theme.url+\"/img/trans.gif\",\"class\":\"mceItemMedia mceItem\"+r.getType(m.type).name,\"data-mce-json\":g.serialize(m,\"'\")});n.width=m.width||(m.type==\"audio\"?\"300\":\"320\");n.height=m.height||(m.type==\"audio\"?\"32\":\"240\");return n},dataToHtml:function(i,j){return this.editor.serializer.serialize(this.dataToImg(i,j),{forced_root_block:\"\",force_absolute:j})},htmlToData:function(k){var j,i,l;l={type:\"flash\",video:{sources:[]},params:{}};j=this.editor.parser.parse(k);i=j.getAll(\"img\")[0];if(i){l=g.parse(i.attr(\"data-mce-json\"));l.type=this.getType(i.attr(\"class\")).name.toLowerCase();tinymce.each(d,function(m){var n=i.attr(m);if(n){l[m]=n}})}return l},getType:function(m){var k,j,l;j=tinymce.explode(m,\" \");for(k=0;k<j.length;k++){l=this.lookup[j[k]];if(l){return l}}},imgToObject:function(z,o){var u=this,p=u.editor,C,H,j,t,I,y,G,w,k,E,s,q,A,D,m,x,l,B,F;function r(i,n){var M,L,N,K,J;J=p.getParam(\"flash_video_player_url\",u.convertUrl(u.url+\"/moxieplayer.swf\"));if(J){M=p.documentBaseURI;G.params.src=J;if(p.getParam(\"flash_video_player_absvideourl\",true)){i=M.toAbsolute(i||\"\",true);n=M.toAbsolute(n||\"\",true)}N=\"\";L=p.getParam(\"flash_video_player_flashvars\",{url:\"$url\",poster:\"$poster\"});tinymce.each(L,function(P,O){P=P.replace(/\\$url/,i||\"\");P=P.replace(/\\$poster/,n||\"\");if(P.length>0){N+=(N?\"&\":\"\")+O+\"=\"+escape(P)}});if(N.length){G.params.flashvars=N}K=p.getParam(\"flash_video_player_params\",{allowfullscreen:true,allowscriptaccess:true});tinymce.each(K,function(P,O){G.params[O]=\"\"+P})}}G=z.attr(\"data-mce-json\");if(!G){return}G=g.parse(G);q=this.getType(z.attr(\"class\"));B=z.attr(\"data-mce-style\");if(!B){B=z.attr(\"style\");if(B){B=p.dom.serializeStyle(p.dom.parseStyle(B,\"img\"))}}if(q.name===\"Iframe\"){x=new b(\"iframe\",1);tinymce.each(d,function(i){var n=z.attr(i);if(i==\"class\"&&n){n=n.replace(/mceItem.+ ?/g,\"\")}if(n&&n.length>0){x.attr(i,n)}});for(I in G.params){x.attr(I,G.params[I])}x.attr({style:B,src:G.params.src});z.replace(x);return}if(this.editor.settings.media_use_script){x=new b(\"script\",1).attr(\"type\",\"text/javascript\");y=new b(\"#text\",3);y.value=\"write\"+q.name+\"(\"+g.serialize(tinymce.extend(G.params,{width:z.attr(\"width\"),height:z.attr(\"height\")}))+\");\";x.append(y);z.replace(x);return}if(q.name===\"Video\"&&G.video.sources[0]){C=new b(\"video\",1).attr(tinymce.extend({id:z.attr(\"id\"),width:z.attr(\"width\"),height:z.attr(\"height\"),style:B},G.video.attrs));if(G.video.attrs){l=G.video.attrs.poster}k=G.video.sources=c(G.video.sources);for(A=0;A<k.length;A++){if(/\\.mp4$/.test(k[A].src)){m=k[A].src}}if(!k[0].type){C.attr(\"src\",k[0].src);k.splice(0,1)}for(A=0;A<k.length;A++){w=new b(\"source\",1).attr(k[A]);w.shortEnded=true;C.append(w)}if(m){r(m,l);q=u.getType(\"flash\")}else{G.params.src=\"\"}}if(q.name===\"Audio\"&&G.video.sources[0]){F=new b(\"audio\",1).attr(tinymce.extend({id:z.attr(\"id\"),width:z.attr(\"width\"),height:z.attr(\"height\"),style:B},G.video.attrs));if(G.video.attrs){l=G.video.attrs.poster}k=G.video.sources=c(G.video.sources);if(!k[0].type){F.attr(\"src\",k[0].src);k.splice(0,1)}for(A=0;A<k.length;A++){w=new b(\"source\",1).attr(k[A]);w.shortEnded=true;F.append(w)}G.params.src=\"\"}if(q.name===\"EmbeddedAudio\"){j=new b(\"embed\",1);j.shortEnded=true;j.attr({id:z.attr(\"id\"),width:z.attr(\"width\"),height:z.attr(\"height\"),style:B,type:z.attr(\"type\")});for(I in G.params){j.attr(I,G.params[I])}tinymce.each(d,function(i){if(G[i]&&i!=\"type\"){j.attr(i,G[i])}});G.params.src=\"\"}if(G.params.src){if(/\\.flv$/i.test(G.params.src)){r(G.params.src,\"\")}if(o&&o.force_absolute){G.params.src=p.documentBaseURI.toAbsolute(G.params.src)}H=new b(\"object\",1).attr({id:z.attr(\"id\"),width:z.attr(\"width\"),height:z.attr(\"height\"),style:B});tinymce.each(d,function(i){var n=G[i];if(i==\"class\"&&n){n=n.replace(/mceItem.+ ?/g,\"\")}if(n&&i!=\"type\"){H.attr(i,n)}});for(I in G.params){s=new b(\"param\",1);s.shortEnded=true;y=G.params[I];if(I===\"src\"&&q.name===\"WindowsMedia\"){I=\"url\"}s.attr({name:I,value:y});H.append(s)}if(this.editor.getParam(\"media_strict\",true)){H.attr({data:G.params.src,type:q.mimes[0]})}else{H.attr({classid:\"clsid:\"+q.clsids[0],codebase:q.codebase});j=new b(\"embed\",1);j.shortEnded=true;j.attr({id:z.attr(\"id\"),width:z.attr(\"width\"),height:z.attr(\"height\"),style:B,type:q.mimes[0]});for(I in G.params){j.attr(I,G.params[I])}tinymce.each(d,function(i){if(G[i]&&i!=\"type\"){j.attr(i,G[i])}});H.append(j)}if(G.object_html){y=new b(\"#text\",3);y.raw=true;y.value=G.object_html;H.append(y)}if(C){C.append(H)}}if(C){if(G.video_html){y=new b(\"#text\",3);y.raw=true;y.value=G.video_html;C.append(y)}}if(F){if(G.video_html){y=new b(\"#text\",3);y.raw=true;y.value=G.video_html;F.append(y)}}var v=C||F||H||j;if(v){z.replace(v)}else{z.remove()}},objectToImg:function(C){var L,k,F,s,M,N,y,A,x,G,E,t,q,I,B,l,K,o,H=this.lookup,m,z,v=this.editor.settings.url_converter,n=this.editor.settings.url_converter_scope,w,r,D,j;function u(i){return new tinymce.html.Serializer({inner:true,validate:false}).serialize(i)}function J(O,i){return H[(O.attr(i)||\"\").toLowerCase()]}function p(O){var i=O.replace(/^.*\\.([^.]+)$/,\"$1\");return H[i.toLowerCase()||\"\"]}if(!C.parent){return}if(C.name===\"script\"){if(C.firstChild){m=a.exec(C.firstChild.value)}if(!m){return}o=m[1];K={video:{},params:g.parse(m[2])};A=K.params.width;x=K.params.height}K=K||{video:{},params:{}};M=new b(\"img\",1);M.attr({src:this.editor.theme.url+\"/img/trans.gif\"});N=C.name;if(N===\"video\"||N==\"audio\"){F=C;L=C.getAll(\"object\")[0];k=C.getAll(\"embed\")[0];A=F.attr(\"width\");x=F.attr(\"height\");y=F.attr(\"id\");K.video={attrs:{},sources:[]};z=K.video.attrs;for(N in F.attributes.map){z[N]=F.attributes.map[N]}B=C.attr(\"src\");if(B){K.video.sources.push({src:v.call(n,B,\"src\",C.name)})}l=F.getAll(\"source\");for(E=0;E<l.length;E++){B=l[E].remove();K.video.sources.push({src:v.call(n,B.attr(\"src\"),\"src\",\"source\"),type:B.attr(\"type\"),media:B.attr(\"media\")})}if(z.poster){z.poster=v.call(n,z.poster,\"poster\",C.name)}}if(C.name===\"object\"){L=C;k=C.getAll(\"embed\")[0]}if(C.name===\"embed\"){k=C}if(C.name===\"iframe\"){s=C;o=\"Iframe\"}if(L){A=A||L.attr(\"width\");x=x||L.attr(\"height\");G=G||L.attr(\"style\");y=y||L.attr(\"id\");w=w||L.attr(\"hspace\");r=r||L.attr(\"vspace\");D=D||L.attr(\"align\");j=j||L.attr(\"bgcolor\");K.name=L.attr(\"name\");I=L.getAll(\"param\");for(E=0;E<I.length;E++){q=I[E];N=q.remove().attr(\"name\");if(!h[N]){K.params[N]=q.attr(\"value\")}}K.params.src=K.params.src||L.attr(\"data\")}if(k){A=A||k.attr(\"width\");x=x||k.attr(\"height\");G=G||k.attr(\"style\");y=y||k.attr(\"id\");w=w||k.attr(\"hspace\");r=r||k.attr(\"vspace\");D=D||k.attr(\"align\");j=j||k.attr(\"bgcolor\");for(N in k.attributes.map){if(!h[N]&&!K.params[N]){K.params[N]=k.attributes.map[N]}}}if(s){A=s.attr(\"width\");x=s.attr(\"height\");G=G||s.attr(\"style\");y=s.attr(\"id\");w=s.attr(\"hspace\");r=s.attr(\"vspace\");D=s.attr(\"align\");j=s.attr(\"bgcolor\");tinymce.each(d,function(i){M.attr(i,s.attr(i))});for(N in s.attributes.map){if(!h[N]&&!K.params[N]){K.params[N]=s.attributes.map[N]}}}if(K.params.movie){K.params.src=K.params.src||K.params.movie;delete K.params.movie}if(K.params.src){K.params.src=v.call(n,K.params.src,\"src\",\"object\")}if(F){if(C.name===\"video\"){o=H.video.name}else{if(C.name===\"audio\"){o=H.audio.name}}}if(L&&!o){o=(J(L,\"clsid\")||J(L,\"classid\")||J(L,\"type\")||{}).name}if(k&&!o){o=(J(k,\"type\")||p(K.params.src)||{}).name}if(k&&o==\"EmbeddedAudio\"){K.params.type=k.attr(\"type\")}C.replace(M);if(k){k.remove()}if(L){t=u(L.remove());if(t){K.object_html=t}}if(F){t=u(F.remove());if(t){K.video_html=t}}K.hspace=w;K.vspace=r;K.align=D;K.bgcolor=j;M.attr({id:y,\"class\":\"mceItemMedia mceItem\"+(o||\"Flash\"),style:G,width:A||(C.name==\"audio\"?\"300\":\"320\"),height:x||(C.name==\"audio\"?\"32\":\"240\"),hspace:w,vspace:r,align:D,bgcolor:j,\"data-mce-json\":g.serialize(K,\"'\")})}});tinymce.PluginManager.add(\"media\",tinymce.plugins.MediaPlugin)})();","Magento_Tinymce3/tiny_mce/plugins/media/js/media.js":"(function() {\n\tvar url;\n\n\tif (url = tinyMCEPopup.getParam(\"media_external_list_url\"))\n\t\tdocument.write('<script language=\"javascript\" type=\"text/javascript\" src=\"' + tinyMCEPopup.editor.documentBaseURI.toAbsolute(url) + '\"></script>');\n\n\tfunction get(id) {\n\t\treturn document.getElementById(id);\n\t}\n\n\tfunction clone(obj) {\n\t\tvar i, len, copy, attr;\n\n\t\tif (null == obj || \"object\" != typeof obj)\n\t\t\treturn obj;\n\n\t\t// Handle Array\n\t\tif ('length' in obj) {\n\t\t\tcopy = [];\n\n\t\t\tfor (i = 0, len = obj.length; i < len; ++i) {\n\t\t\t\tcopy[i] = clone(obj[i]);\n\t\t\t}\n\n\t\t\treturn copy;\n\t\t}\n\n\t\t// Handle Object\n\t\tcopy = {};\n\t\tfor (attr in obj) {\n\t\t\tif (obj.hasOwnProperty(attr))\n\t\t\t\tcopy[attr] = clone(obj[attr]);\n\t\t}\n\n\t\treturn copy;\n\t}\n\n\tfunction getVal(id) {\n\t\tvar elm = get(id);\n\n\t\tif (elm.nodeName == \"SELECT\")\n\t\t\treturn elm.options[elm.selectedIndex].value;\n\n\t\tif (elm.type == \"checkbox\")\n\t\t\treturn elm.checked;\n\n\t\treturn elm.value;\n\t}\n\n\tfunction setVal(id, value, name) {\n\t\tif (typeof(value) != 'undefined') {\n\t\t\tvar elm = get(id);\n\n\t\t\tif (elm.nodeName == \"SELECT\")\n\t\t\t\tselectByValue(document.forms[0], id, value);\n\t\t\telse if (elm.type == \"checkbox\") {\n\t\t\t\tif (typeof(value) == 'string') {\n\t\t\t\t\tvalue = value.toLowerCase();\n\t\t\t\t\tvalue = (!name && value === 'true') || (name && value === name.toLowerCase());\n\t\t\t\t}\n\t\t\t\telm.checked = !!value;\n\t\t\t} else\n\t\t\t\telm.value = value;\n\t\t}\n\t}\n\n\twindow.Media = {\n\t\tinit : function() {\n\t\t\tvar html, editor, self = this;\n\n\t\t\tself.editor = editor = tinyMCEPopup.editor;\n\n\t\t\t// Setup file browsers and color pickers\n\t\t\tget('filebrowsercontainer').innerHTML = getBrowserHTML('filebrowser','src','media','media');\n\t\t\tget('qtsrcfilebrowsercontainer').innerHTML = getBrowserHTML('qtsrcfilebrowser','quicktime_qtsrc','media','media');\n\t\t\tget('bgcolor_pickcontainer').innerHTML = getColorPickerHTML('bgcolor_pick','bgcolor');\n\t\t\tget('video_altsource1_filebrowser').innerHTML = getBrowserHTML('video_filebrowser_altsource1','video_altsource1','media','media');\n\t\t\tget('video_altsource2_filebrowser').innerHTML = getBrowserHTML('video_filebrowser_altsource2','video_altsource2','media','media');\n\t\t\tget('audio_altsource1_filebrowser').innerHTML = getBrowserHTML('audio_filebrowser_altsource1','audio_altsource1','media','media');\n\t\t\tget('audio_altsource2_filebrowser').innerHTML = getBrowserHTML('audio_filebrowser_altsource2','audio_altsource2','media','media');\n\t\t\tget('video_poster_filebrowser').innerHTML = getBrowserHTML('filebrowser_poster','video_poster','media','image');\n\n\t\t\thtml = self.getMediaListHTML('medialist', 'src', 'media', 'media');\n\t\t\tif (html == \"\")\n\t\t\t\tget(\"linklistrow\").style.display = 'none';\n\t\t\telse\n\t\t\t\tget(\"linklistcontainer\").innerHTML = html;\n\n\t\t\tif (isVisible('filebrowser'))\n\t\t\t\tget('src').style.width = '230px';\n\n\t\t\tif (isVisible('video_filebrowser_altsource1'))\n\t\t\t\tget('video_altsource1').style.width = '220px';\n\n\t\t\tif (isVisible('video_filebrowser_altsource2'))\n\t\t\t\tget('video_altsource2').style.width = '220px';\n\n\t\t\tif (isVisible('audio_filebrowser_altsource1'))\n\t\t\t\tget('audio_altsource1').style.width = '220px';\n\n\t\t\tif (isVisible('audio_filebrowser_altsource2'))\n\t\t\t\tget('audio_altsource2').style.width = '220px';\n\n\t\t\tif (isVisible('filebrowser_poster'))\n\t\t\t\tget('video_poster').style.width = '220px';\n\n\t\t\teditor.dom.setOuterHTML(get('media_type'), self.getMediaTypeHTML(editor));\n\n\t\t\tself.setDefaultDialogSettings(editor);\n\t\t\tself.data = clone(tinyMCEPopup.getWindowArg('data'));\n\t\t\tself.dataToForm();\n\t\t\tself.preview();\n\n\t\t\tupdateColor('bgcolor_pick', 'bgcolor');\n\t\t},\n\n\t\tinsert : function() {\n\t\t\tvar editor = tinyMCEPopup.editor;\n\n\t\t\tthis.formToData();\n\t\t\teditor.execCommand('mceRepaint');\n\t\t\ttinyMCEPopup.restoreSelection();\n\t\t\teditor.selection.setNode(editor.plugins.media.dataToImg(this.data));\n\t\t\ttinyMCEPopup.close();\n\t\t},\n\n\t\tpreview : function() {\n\t\t\tget('prev').innerHTML = this.editor.plugins.media.dataToHtml(this.data, true);\n\t\t},\n\n\t\tmoveStates : function(to_form, field) {\n\t\t\tvar data = this.data, editor = this.editor,\n\t\t\t\tmediaPlugin = editor.plugins.media, ext, src, typeInfo, defaultStates, src;\n\n\t\t\tdefaultStates = {\n\t\t\t\t// QuickTime\n\t\t\t\tquicktime_autoplay : true,\n\t\t\t\tquicktime_controller : true,\n\n\t\t\t\t// Flash\n\t\t\t\tflash_play : true,\n\t\t\t\tflash_loop : true,\n\t\t\t\tflash_menu : true,\n\n\t\t\t\t// WindowsMedia\n\t\t\t\twindowsmedia_autostart : true,\n\t\t\t\twindowsmedia_enablecontextmenu : true,\n\t\t\t\twindowsmedia_invokeurls : true,\n\n\t\t\t\t// RealMedia\n\t\t\t\trealmedia_autogotourl : true,\n\t\t\t\trealmedia_imagestatus : true\n\t\t\t};\n\n\t\t\tfunction parseQueryParams(str) {\n\t\t\t\tvar out = {};\n\n\t\t\t\tif (str) {\n\t\t\t\t\ttinymce.each(str.split('&'), function(item) {\n\t\t\t\t\t\tvar parts = item.split('=');\n\n\t\t\t\t\t\tout[unescape(parts[0])] = unescape(parts[1]);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn out;\n\t\t\t};\n\n\t\t\tfunction setOptions(type, names) {\n\t\t\t\tvar i, name, formItemName, value, list;\n\n\t\t\t\tif (type == data.type || type == 'global') {\n\t\t\t\t\tnames = tinymce.explode(names);\n\t\t\t\t\tfor (i = 0; i < names.length; i++) {\n\t\t\t\t\t\tname = names[i];\n\t\t\t\t\t\tformItemName = type == 'global' ? name : type + '_' + name;\n\n\t\t\t\t\t\tif (type == 'global')\n\t\t\t\t\t\t\tlist = data;\n\t\t\t\t\t\telse if (type == 'video' || type == 'audio') {\n\t\t\t\t\t\t\tlist = data.video.attrs;\n\n\t\t\t\t\t\t\tif (!list && !to_form)\n\t\t\t\t\t\t\t\tdata.video.attrs = list = {};\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\tlist = data.params;\n\n\t\t\t\t\t\tif (list) {\n\t\t\t\t\t\t\tif (to_form) {\n\t\t\t\t\t\t\t\tsetVal(formItemName, list[name], type == 'video' || type == 'audio' ? name : '');\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdelete list[name];\n\n\t\t\t\t\t\t\t\tvalue = getVal(formItemName);\n\t\t\t\t\t\t\t\tif ((type == 'video' || type == 'audio') && value === true)\n\t\t\t\t\t\t\t\t\tvalue = name;\n\n\t\t\t\t\t\t\t\tif (defaultStates[formItemName]) {\n\t\t\t\t\t\t\t\t\tif (value !== defaultStates[formItemName]) {\n\t\t\t\t\t\t\t\t\t\tvalue = \"\" + value;\n\t\t\t\t\t\t\t\t\t\tlist[name] = value;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if (value) {\n\t\t\t\t\t\t\t\t\tvalue = \"\" + value;\n\t\t\t\t\t\t\t\t\tlist[name] = value;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!to_form) {\n\t\t\t\tdata.type = get('media_type').options[get('media_type').selectedIndex].value;\n\t\t\t\tdata.width = getVal('width');\n\t\t\t\tdata.height = getVal('height');\n\n\t\t\t\t// Switch type based on extension\n\t\t\t\tsrc = getVal('src');\n\t\t\t\tif (field == 'src') {\n\t\t\t\t\text = src.replace(/^.*\\.([^.]+)$/, '$1');\n\t\t\t\t\tif (typeInfo = mediaPlugin.getType(ext))\n\t\t\t\t\t\tdata.type = typeInfo.name.toLowerCase();\n\n\t\t\t\t\tsetVal('media_type', data.type);\n\t\t\t\t}\n\n\t\t\t\tif (data.type == \"video\" || data.type == \"audio\") {\n\t\t\t\t\tif (!data.video.sources)\n\t\t\t\t\t\tdata.video.sources = [];\n\n\t\t\t\t\tdata.video.sources[0] = {src: getVal('src')};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Hide all fieldsets and show the one active\n\t\t\tget('video_options').style.display = 'none';\n\t\t\tget('audio_options').style.display = 'none';\n\t\t\tget('flash_options').style.display = 'none';\n\t\t\tget('quicktime_options').style.display = 'none';\n\t\t\tget('shockwave_options').style.display = 'none';\n\t\t\tget('windowsmedia_options').style.display = 'none';\n\t\t\tget('realmedia_options').style.display = 'none';\n\t\t\tget('embeddedaudio_options').style.display = 'none';\n\n\t\t\tif (get(data.type + '_options'))\n\t\t\t\tget(data.type + '_options').style.display = 'block';\n\n\t\t\tsetVal('media_type', data.type);\n\n\t\t\tsetOptions('flash', 'play,loop,menu,swliveconnect,quality,scale,salign,wmode,base,flashvars');\n\t\t\tsetOptions('quicktime', 'loop,autoplay,cache,controller,correction,enablejavascript,kioskmode,autohref,playeveryframe,targetcache,scale,starttime,endtime,target,qtsrcchokespeed,volume,qtsrc');\n\t\t\tsetOptions('shockwave', 'sound,progress,autostart,swliveconnect,swvolume,swstretchstyle,swstretchhalign,swstretchvalign');\n\t\t\tsetOptions('windowsmedia', 'autostart,enabled,enablecontextmenu,fullscreen,invokeurls,mute,stretchtofit,windowlessvideo,balance,baseurl,captioningid,currentmarker,currentposition,defaultframe,playcount,rate,uimode,volume');\n\t\t\tsetOptions('realmedia', 'autostart,loop,autogotourl,center,imagestatus,maintainaspect,nojava,prefetch,shuffle,console,controls,numloop,scriptcallbacks');\n\t\t\tsetOptions('video', 'poster,autoplay,loop,muted,preload,controls');\n\t\t\tsetOptions('audio', 'autoplay,loop,preload,controls');\n\t\t\tsetOptions('embeddedaudio', 'autoplay,loop,controls');\n\t\t\tsetOptions('global', 'id,name,vspace,hspace,bgcolor,align,width,height');\n\n\t\t\tif (to_form) {\n\t\t\t\tif (data.type == 'video') {\n\t\t\t\t\tif (data.video.sources[0])\n\t\t\t\t\t\tsetVal('src', data.video.sources[0].src);\n\n\t\t\t\t\tsrc = data.video.sources[1];\n\t\t\t\t\tif (src)\n\t\t\t\t\t\tsetVal('video_altsource1', src.src);\n\n\t\t\t\t\tsrc = data.video.sources[2];\n\t\t\t\t\tif (src)\n\t\t\t\t\t\tsetVal('video_altsource2', src.src);\n                } else if (data.type == 'audio') {\n                    if (data.video.sources[0])\n                        setVal('src', data.video.sources[0].src);\n                    \n                    src = data.video.sources[1];\n                    if (src)\n                        setVal('audio_altsource1', src.src);\n                    \n                    src = data.video.sources[2];\n                    if (src)\n                        setVal('audio_altsource2', src.src);\n\t\t\t\t} else {\n\t\t\t\t\t// Check flash vars\n\t\t\t\t\tif (data.type == 'flash') {\n\t\t\t\t\t\ttinymce.each(editor.getParam('flash_video_player_flashvars', {url : '$url', poster : '$poster'}), function(value, name) {\n\t\t\t\t\t\t\tif (value == '$url')\n\t\t\t\t\t\t\t\tdata.params.src = parseQueryParams(data.params.flashvars)[name] || data.params.src || '';\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tsetVal('src', data.params.src);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsrc = getVal(\"src\");\n\n\t\t\t\t// YouTube *NEW*\n\t\t\t\tif (src.match(/youtu.be\\/[a-z1-9.-_]+/)) {\n\t\t\t\t\tdata.width = 425;\n\t\t\t\t\tdata.height = 350;\n\t\t\t\t\tdata.params.frameborder = '0';\n\t\t\t\t\tdata.type = 'iframe';\n\t\t\t\t\tsrc = 'http://www.youtube.com/embed/' + src.match(/youtu.be\\/([a-z1-9.-_]+)/)[1];\n\t\t\t\t\tsetVal('src', src);\n\t\t\t\t\tsetVal('media_type', data.type);\n\t\t\t\t}\n\n\t\t\t\t// YouTube\n\t\t\t\tif (src.match(/youtube.com(.+)v=([^&]+)/)) {\n\t\t\t\t\tdata.width = 425;\n\t\t\t\t\tdata.height = 350;\n\t\t\t\t\tdata.params.frameborder = '0';\n\t\t\t\t\tdata.type = 'iframe';\n\t\t\t\t\tsrc = 'http://www.youtube.com/embed/' + src.match(/v=([^&]+)/)[1];\n\t\t\t\t\tsetVal('src', src);\n\t\t\t\t\tsetVal('media_type', data.type);\n\t\t\t\t}\n\n\t\t\t\t// Google video\n\t\t\t\tif (src.match(/video.google.com(.+)docid=([^&]+)/)) {\n\t\t\t\t\tdata.width = 425;\n\t\t\t\t\tdata.height = 326;\n\t\t\t\t\tdata.type = 'flash';\n\t\t\t\t\tsrc = 'http://video.google.com/googleplayer.swf?docId=' + src.match(/docid=([^&]+)/)[1] + '&hl=en';\n\t\t\t\t\tsetVal('src', src);\n\t\t\t\t\tsetVal('media_type', data.type);\n\t\t\t\t}\n\n\t\t\t\tif (data.type == 'video') {\n\t\t\t\t\tif (!data.video.sources)\n\t\t\t\t\t\tdata.video.sources = [];\n\n\t\t\t\t\tdata.video.sources[0] = {src : src};\n\n\t\t\t\t\tsrc = getVal(\"video_altsource1\");\n\t\t\t\t\tif (src)\n\t\t\t\t\t\tdata.video.sources[1] = {src : src};\n\n\t\t\t\t\tsrc = getVal(\"video_altsource2\");\n\t\t\t\t\tif (src)\n\t\t\t\t\t\tdata.video.sources[2] = {src : src};\n                } else if (data.type == 'audio') {\n                    if (!data.video.sources)\n                        data.video.sources = [];\n                    \n                    data.video.sources[0] = {src : src};\n                    \n                    src = getVal(\"audio_altsource1\");\n                    if (src)\n                        data.video.sources[1] = {src : src};\n                    \n                    src = getVal(\"audio_altsource2\");\n                    if (src)\n                        data.video.sources[2] = {src : src};\n\t\t\t\t} else\n\t\t\t\t\tdata.params.src = src;\n\n\t\t\t\t// Set default size\n                setVal('width', data.width || (data.type == 'audio' ? 300 : 320));\n                setVal('height', data.height || (data.type == 'audio' ? 32 : 240));\n\t\t\t}\n\t\t},\n\n\t\tdataToForm : function() {\n\t\t\tthis.moveStates(true);\n\t\t},\n\n\t\tformToData : function(field) {\n\t\t\tif (field == \"width\" || field == \"height\")\n\t\t\t\tthis.changeSize(field);\n\n\t\t\tif (field == 'source') {\n\t\t\t\tthis.moveStates(false, field);\n\t\t\t\tsetVal('source', this.editor.plugins.media.dataToHtml(this.data));\n\t\t\t\tthis.panel = 'source';\n\t\t\t} else {\n\t\t\t\tif (this.panel == 'source') {\n\t\t\t\t\tthis.data = clone(this.editor.plugins.media.htmlToData(getVal('source')));\n\t\t\t\t\tthis.dataToForm();\n\t\t\t\t\tthis.panel = '';\n\t\t\t\t}\n\n\t\t\t\tthis.moveStates(false, field);\n\t\t\t\tthis.preview();\n\t\t\t}\n\t\t},\n\n\t\tbeforeResize : function() {\n            this.width = parseInt(getVal('width') || (this.data.type == 'audio' ? \"300\" : \"320\"), 10);\n            this.height = parseInt(getVal('height') || (this.data.type == 'audio' ? \"32\" : \"240\"), 10);\n\t\t},\n\n\t\tchangeSize : function(type) {\n\t\t\tvar width, height, scale, size;\n\n\t\t\tif (get('constrain').checked) {\n                width = parseInt(getVal('width') || (this.data.type == 'audio' ? \"300\" : \"320\"), 10);\n                height = parseInt(getVal('height') || (this.data.type == 'audio' ? \"32\" : \"240\"), 10);\n\n\t\t\t\tif (type == 'width') {\n\t\t\t\t\tthis.height = Math.round((width / this.width) * height);\n\t\t\t\t\tsetVal('height', this.height);\n\t\t\t\t} else {\n\t\t\t\t\tthis.width = Math.round((height / this.height) * width);\n\t\t\t\t\tsetVal('width', this.width);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tgetMediaListHTML : function() {\n\t\t\tif (typeof(tinyMCEMediaList) != \"undefined\" && tinyMCEMediaList.length > 0) {\n\t\t\t\tvar html = \"\";\n\n\t\t\t\thtml += '<select id=\"linklist\" name=\"linklist\" style=\"width: 250px\" onchange=\"this.form.src.value=this.options[this.selectedIndex].value;Media.formToData(\\'src\\');\">';\n\t\t\t\thtml += '<option value=\"\">---</option>';\n\n\t\t\t\tfor (var i=0; i<tinyMCEMediaList.length; i++)\n\t\t\t\t\thtml += '<option value=\"' + tinyMCEMediaList[i][1] + '\">' + tinyMCEMediaList[i][0] + '</option>';\n\n\t\t\t\thtml += '</select>';\n\n\t\t\t\treturn html;\n\t\t\t}\n\n\t\t\treturn \"\";\n\t\t},\n\n\t\tgetMediaTypeHTML : function(editor) {\n\t\t\tfunction option(media_type){\n\t\t\t\treturn '<option value=\"'+media_type+'\">'+tinyMCEPopup.editor.translate(\"media_dlg.\"+media_type)+'</option>'\n\t\t\t}\n\t\t\tvar html = \"\";\n\t\t\thtml += '<select id=\"media_type\" name=\"media_type\" onchange=\"Media.formToData(\\'type\\');\">';\n\t\t\thtml += option(\"video\");\n\t\t\thtml += option(\"audio\");\n\t\t\thtml += option(\"flash\");\n\t\t\thtml += option(\"quicktime\");\n\t\t\thtml += option(\"shockwave\");\n\t\t\thtml += option(\"windowsmedia\");\n\t\t\thtml += option(\"realmedia\");\n\t\t\thtml += option(\"iframe\");\n\n\t\t\tif (editor.getParam('media_embedded_audio', false)) {\n\t\t\t\thtml += option('embeddedaudio');\n\t\t\t}\n\t\t\t\n\t\t\thtml += '</select>';\n\t\t\treturn html;\n\t\t},\n\n\t\tsetDefaultDialogSettings : function(editor) {\n\t\t\tvar defaultDialogSettings = editor.getParam(\"media_dialog_defaults\", {});\n\t\t\ttinymce.each(defaultDialogSettings, function(v, k) {\n\t\t\t\tsetVal(k, v);\n\t\t\t});\n\t\t}\n\t};\n\n\ttinyMCEPopup.requireLangPack();\n\ttinyMCEPopup.onInit.add(function() {\n\t\tMedia.init();\n\t});\n})();\n","Magento_Tinymce3/tiny_mce/plugins/media/js/embed.js":"/**\n * This script contains embed functions for common plugins. This scripts are complety free to use for any purpose.\n */\n\nfunction writeFlash(p) {\n\twriteEmbed(\n\t\t'D27CDB6E-AE6D-11cf-96B8-444553540000',\n\t\t'http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0',\n\t\t'application/x-shockwave-flash',\n\t\tp\n\t);\n}\n\nfunction writeShockWave(p) {\n\twriteEmbed(\n\t'166B1BCA-3F9C-11CF-8075-444553540000',\n\t'http://download.macromedia.com/pub/shockwave/cabs/director/sw.cab#version=8,5,1,0',\n\t'application/x-director',\n\t\tp\n\t);\n}\n\nfunction writeQuickTime(p) {\n\twriteEmbed(\n\t\t'02BF25D5-8C17-4B23-BC80-D3488ABDDC6B',\n\t\t'http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0',\n\t\t'video/quicktime',\n\t\tp\n\t);\n}\n\nfunction writeRealMedia(p) {\n\twriteEmbed(\n\t\t'CFCDAA03-8BE4-11cf-B84B-0020AFBBCCFA',\n\t\t'http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0',\n\t\t'audio/x-pn-realaudio-plugin',\n\t\tp\n\t);\n}\n\nfunction writeWindowsMedia(p) {\n\tp.url = p.src;\n\twriteEmbed(\n\t\t'6BF52A52-394A-11D3-B153-00C04F79FAA6',\n\t\t'http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701',\n\t\t'application/x-mplayer2',\n\t\tp\n\t);\n}\n\nfunction writeEmbed(cls, cb, mt, p) {\n\tvar h = '', n;\n\n\th += '<object classid=\"clsid:' + cls + '\" codebase=\"' + cb + '\"';\n\th += typeof(p.id) != \"undefined\" ? 'id=\"' + p.id + '\"' : '';\n\th += typeof(p.name) != \"undefined\" ? 'name=\"' + p.name + '\"' : '';\n\th += typeof(p.width) != \"undefined\" ? 'width=\"' + p.width + '\"' : '';\n\th += typeof(p.height) != \"undefined\" ? 'height=\"' + p.height + '\"' : '';\n\th += typeof(p.align) != \"undefined\" ? 'align=\"' + p.align + '\"' : '';\n\th += '>';\n\n\tfor (n in p)\n\t\th += '<param name=\"' + n + '\" value=\"' + p[n] + '\">';\n\n\th += '<embed type=\"' + mt + '\"';\n\n\tfor (n in p)\n\t\th += n + '=\"' + p[n] + '\" ';\n\n\th += '></embed></object>';\n\n\tdocument.write(h);\n}\n","Magento_Tinymce3/tiny_mce/plugins/media/langs/en_dlg.js":"tinyMCE.addI18n('en.media_dlg',{list:\"List\",file:\"File/URL\",advanced:\"Advanced\",general:\"General\",title:\"Insert/Edit Embedded Media\",\"align_top_left\":\"Top Left\",\"align_center\":\"Center\",\"align_left\":\"Left\",\"align_bottom\":\"Bottom\",\"align_right\":\"Right\",\"align_top\":\"Top\",\"qt_stream_warn\":\"Streamed RTSP resources should be added to the QT Source field under the Advanced tab.\\nYou should also add a non-streamed version to the Source field.\",qtsrc:\"QT Source\",progress:\"Progress\",sound:\"Sound\",swstretchvalign:\"Stretch V-Align\",swstretchhalign:\"Stretch H-Align\",swstretchstyle:\"Stretch Style\",scriptcallbacks:\"Script Callbacks\",\"align_top_right\":\"Top Right\",uimode:\"UI Mode\",rate:\"Rate\",playcount:\"Play Count\",defaultframe:\"Default Frame\",currentposition:\"Current Position\",currentmarker:\"Current Marker\",captioningid:\"Captioning ID\",baseurl:\"Base URL\",balance:\"Balance\",windowlessvideo:\"Windowless Video\",stretchtofit:\"Stretch to Fit\",mute:\"Mute\",invokeurls:\"Invoke URLs\",fullscreen:\"Full Screen\",enabled:\"Enabled\",autostart:\"Auto Start\",volume:\"Volume\",target:\"Target\",qtsrcchokespeed:\"Choke Speed\",href:\"HREF\",endtime:\"End Time\",starttime:\"Start Time\",enablejavascript:\"Enable JavaScript\",correction:\"No Correction\",targetcache:\"Target Cache\",playeveryframe:\"Play Every Frame\",kioskmode:\"Kiosk Mode\",controller:\"Controller\",menu:\"Show Menu\",loop:\"Loop\",play:\"Auto Play\",hspace:\"H-Space\",vspace:\"V-Space\",\"class_name\":\"Class\",name:\"Name\",id:\"ID\",type:\"Type\",size:\"Dimensions\",preview:\"Preview\",\"constrain_proportions\":\"Constrain Proportions\",controls:\"Controls\",numloop:\"Num Loops\",console:\"Console\",cache:\"Cache\",autohref:\"Auto HREF\",liveconnect:\"SWLiveConnect\",flashvars:\"Flash Vars\",base:\"Base\",bgcolor:\"Background\",wmode:\"WMode\",salign:\"SAlign\",align:\"Align\",scale:\"Scale\",quality:\"Quality\",shuffle:\"Shuffle\",prefetch:\"Prefetch\",nojava:\"No Java\",maintainaspect:\"Maintain Aspect\",imagestatus:\"Image Status\",center:\"Center\",autogotourl:\"Auto Goto URL\",\"shockwave_options\":\"Shockwave Options\",\"rmp_options\":\"Real Media Player Options\",\"wmp_options\":\"Windows Media Player Options\",\"qt_options\":\"QuickTime Options\",\"flash_options\":\"Flash Options\",hidden:\"Hidden\",\"align_bottom_left\":\"Bottom Left\",\"align_bottom_right\":\"Bottom Right\",\"html5_video_options\":\"HTML5 Video Options\",altsource1:\"Alternative source 1\",altsource2:\"Alternative source 2\",preload:\"Preload\",poster:\"Poster\",source:\"Source\",\"html5_audio_options\":\"Audio Options\",\"preload_none\":\"Don\\'t Preload\",\"preload_metadata\":\"Preload video metadata\",\"preload_auto\":\"Let user\\'s browser decide\", \"embedded_audio_options\":\"Embedded Audio Options\", video:\"HTML5 Video\", audio:\"HTML5 Audio\", flash:\"Flash\", quicktime:\"QuickTime\", shockwave:\"Shockwave\", windowsmedia:\"Windows Media\", realmedia:\"Real Media\", iframe:\"Iframe\", embeddedaudio:\"Embedded Audio\" }); \n","Magento_Tinymce3/tiny_mce/plugins/visualchars/editor_plugin_src.js":"/**\n * editor_plugin_src.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function() {\n\ttinymce.create('tinymce.plugins.VisualChars', {\n\t\tinit : function(ed, url) {\n\t\t\tvar t = this;\n\n\t\t\tt.editor = ed;\n\n\t\t\t// Register commands\n\t\t\ted.addCommand('mceVisualChars', t._toggleVisualChars, t);\n\n\t\t\t// Register buttons\n\t\t\ted.addButton('visualchars', {title : 'visualchars.desc', cmd : 'mceVisualChars'});\n\n\t\t\ted.onBeforeGetContent.add(function(ed, o) {\n\t\t\t\tif (t.state && o.format != 'raw' && !o.draft) {\n\t\t\t\t\tt.state = true;\n\t\t\t\t\tt._toggleVisualChars(false);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tgetInfo : function() {\n\t\t\treturn {\n\t\t\t\tlongname : 'Visual characters',\n\t\t\t\tauthor : 'Moxiecode Systems AB',\n\t\t\t\tauthorurl : 'http://tinymce.moxiecode.com',\n\t\t\t\tinfourl : 'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/visualchars',\n\t\t\t\tversion : tinymce.majorVersion + \".\" + tinymce.minorVersion\n\t\t\t};\n\t\t},\n\n\t\t// Private methods\n\n\t\t_toggleVisualChars : function(bookmark) {\n\t\t\tvar t = this, ed = t.editor, nl, i, h, d = ed.getDoc(), b = ed.getBody(), nv, s = ed.selection, bo, div, bm;\n\n\t\t\tt.state = !t.state;\n\t\t\ted.controlManager.setActive('visualchars', t.state);\n\n\t\t\tif (bookmark)\n\t\t\t\tbm = s.getBookmark();\n\n\t\t\tif (t.state) {\n\t\t\t\tnl = [];\n\t\t\t\ttinymce.walk(b, function(n) {\n\t\t\t\t\tif (n.nodeType == 3 && n.nodeValue && n.nodeValue.indexOf('\\u00a0') != -1)\n\t\t\t\t\t\tnl.push(n);\n\t\t\t\t}, 'childNodes');\n\n\t\t\t\tfor (i = 0; i < nl.length; i++) {\n\t\t\t\t\tnv = nl[i].nodeValue;\n\t\t\t\t\tnv = nv.replace(/(\\u00a0)/g, '<span data-mce-bogus=\"1\" class=\"mceItemHidden mceItemNbsp\">$1</span>');\n\n\t\t\t\t\tdiv = ed.dom.create('div', null, nv);\n\t\t\t\t\twhile (node = div.lastChild)\n\t\t\t\t\t\ted.dom.insertAfter(node, nl[i]);\n\n\t\t\t\t\ted.dom.remove(nl[i]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnl = ed.dom.select('span.mceItemNbsp', b);\n\n\t\t\t\tfor (i = nl.length - 1; i >= 0; i--)\n\t\t\t\t\ted.dom.remove(nl[i], 1);\n\t\t\t}\n\n\t\t\ts.moveToBookmark(bm);\n\t\t}\n\t});\n\n\t// Register plugin\n\ttinymce.PluginManager.add('visualchars', tinymce.plugins.VisualChars);\n})();","Magento_Tinymce3/tiny_mce/plugins/visualchars/editor_plugin.js":"(function(){tinymce.create(\"tinymce.plugins.VisualChars\",{init:function(a,b){var c=this;c.editor=a;a.addCommand(\"mceVisualChars\",c._toggleVisualChars,c);a.addButton(\"visualchars\",{title:\"visualchars.desc\",cmd:\"mceVisualChars\"});a.onBeforeGetContent.add(function(d,e){if(c.state&&e.format!=\"raw\"&&!e.draft){c.state=true;c._toggleVisualChars(false)}})},getInfo:function(){return{longname:\"Visual characters\",author:\"Moxiecode Systems AB\",authorurl:\"http://tinymce.moxiecode.com\",infourl:\"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/visualchars\",version:tinymce.majorVersion+\".\"+tinymce.minorVersion}},_toggleVisualChars:function(m){var p=this,k=p.editor,a,g,j,n=k.getDoc(),o=k.getBody(),l,q=k.selection,e,c,f;p.state=!p.state;k.controlManager.setActive(\"visualchars\",p.state);if(m){f=q.getBookmark()}if(p.state){a=[];tinymce.walk(o,function(b){if(b.nodeType==3&&b.nodeValue&&b.nodeValue.indexOf(\"\\u00a0\")!=-1){a.push(b)}},\"childNodes\");for(g=0;g<a.length;g++){l=a[g].nodeValue;l=l.replace(/(\\u00a0)/g,'<span data-mce-bogus=\"1\" class=\"mceItemHidden mceItemNbsp\">$1</span>');c=k.dom.create(\"div\",null,l);while(node=c.lastChild){k.dom.insertAfter(node,a[g])}k.dom.remove(a[g])}}else{a=k.dom.select(\"span.mceItemNbsp\",o);for(g=a.length-1;g>=0;g--){k.dom.remove(a[g],1)}}q.moveToBookmark(f)}});tinymce.PluginManager.add(\"visualchars\",tinymce.plugins.VisualChars)})();","Magento_Tinymce3/tiny_mce/plugins/xhtmlxtras/editor_plugin_src.js":"/**\n * editor_plugin_src.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function() {\n\ttinymce.create('tinymce.plugins.XHTMLXtrasPlugin', {\n\t\tinit : function(ed, url) {\n\t\t\t// Register commands\n\t\t\ted.addCommand('mceCite', function() {\n\t\t\t\ted.windowManager.open({\n\t\t\t\t\tfile : url + '/cite.htm',\n\t\t\t\t\twidth : 350 + parseInt(ed.getLang('xhtmlxtras.cite_delta_width', 0)),\n\t\t\t\t\theight : 250 + parseInt(ed.getLang('xhtmlxtras.cite_delta_height', 0)),\n\t\t\t\t\tinline : 1\n\t\t\t\t}, {\n\t\t\t\t\tplugin_url : url\n\t\t\t\t});\n\t\t\t});\n\n\t\t\ted.addCommand('mceAcronym', function() {\n\t\t\t\ted.windowManager.open({\n\t\t\t\t\tfile : url + '/acronym.htm',\n\t\t\t\t\twidth : 350 + parseInt(ed.getLang('xhtmlxtras.acronym_delta_width', 0)),\n\t\t\t\t\theight : 250 + parseInt(ed.getLang('xhtmlxtras.acronym_delta_height', 0)),\n\t\t\t\t\tinline : 1\n\t\t\t\t}, {\n\t\t\t\t\tplugin_url : url\n\t\t\t\t});\n\t\t\t});\n\n\t\t\ted.addCommand('mceAbbr', function() {\n\t\t\t\ted.windowManager.open({\n\t\t\t\t\tfile : url + '/abbr.htm',\n\t\t\t\t\twidth : 350 + parseInt(ed.getLang('xhtmlxtras.abbr_delta_width', 0)),\n\t\t\t\t\theight : 250 + parseInt(ed.getLang('xhtmlxtras.abbr_delta_height', 0)),\n\t\t\t\t\tinline : 1\n\t\t\t\t}, {\n\t\t\t\t\tplugin_url : url\n\t\t\t\t});\n\t\t\t});\n\n\t\t\ted.addCommand('mceDel', function() {\n\t\t\t\ted.windowManager.open({\n\t\t\t\t\tfile : url + '/del.htm',\n\t\t\t\t\twidth : 340 + parseInt(ed.getLang('xhtmlxtras.del_delta_width', 0)),\n\t\t\t\t\theight : 310 + parseInt(ed.getLang('xhtmlxtras.del_delta_height', 0)),\n\t\t\t\t\tinline : 1\n\t\t\t\t}, {\n\t\t\t\t\tplugin_url : url\n\t\t\t\t});\n\t\t\t});\n\n\t\t\ted.addCommand('mceIns', function() {\n\t\t\t\ted.windowManager.open({\n\t\t\t\t\tfile : url + '/ins.htm',\n\t\t\t\t\twidth : 340 + parseInt(ed.getLang('xhtmlxtras.ins_delta_width', 0)),\n\t\t\t\t\theight : 310 + parseInt(ed.getLang('xhtmlxtras.ins_delta_height', 0)),\n\t\t\t\t\tinline : 1\n\t\t\t\t}, {\n\t\t\t\t\tplugin_url : url\n\t\t\t\t});\n\t\t\t});\n\n\t\t\ted.addCommand('mceAttributes', function() {\n\t\t\t\ted.windowManager.open({\n\t\t\t\t\tfile : url + '/attributes.htm',\n\t\t\t\t\twidth : 380 + parseInt(ed.getLang('xhtmlxtras.attr_delta_width', 0)),\n\t\t\t\t\theight : 370 + parseInt(ed.getLang('xhtmlxtras.attr_delta_height', 0)),\n\t\t\t\t\tinline : 1\n\t\t\t\t}, {\n\t\t\t\t\tplugin_url : url\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Register buttons\n\t\t\ted.addButton('cite', {title : 'xhtmlxtras.cite_desc', cmd : 'mceCite'});\n\t\t\ted.addButton('acronym', {title : 'xhtmlxtras.acronym_desc', cmd : 'mceAcronym'});\n\t\t\ted.addButton('abbr', {title : 'xhtmlxtras.abbr_desc', cmd : 'mceAbbr'});\n\t\t\ted.addButton('del', {title : 'xhtmlxtras.del_desc', cmd : 'mceDel'});\n\t\t\ted.addButton('ins', {title : 'xhtmlxtras.ins_desc', cmd : 'mceIns'});\n\t\t\ted.addButton('attribs', {title : 'xhtmlxtras.attribs_desc', cmd : 'mceAttributes'});\n\n\t\t\ted.onNodeChange.add(function(ed, cm, n, co) {\n\t\t\t\tn = ed.dom.getParent(n, 'CITE,ACRONYM,ABBR,DEL,INS');\n\n\t\t\t\tcm.setDisabled('cite', co);\n\t\t\t\tcm.setDisabled('acronym', co);\n\t\t\t\tcm.setDisabled('abbr', co);\n\t\t\t\tcm.setDisabled('del', co);\n\t\t\t\tcm.setDisabled('ins', co);\n\t\t\t\tcm.setDisabled('attribs', n && n.nodeName == 'BODY');\n\t\t\t\tcm.setActive('cite', 0);\n\t\t\t\tcm.setActive('acronym', 0);\n\t\t\t\tcm.setActive('abbr', 0);\n\t\t\t\tcm.setActive('del', 0);\n\t\t\t\tcm.setActive('ins', 0);\n\n\t\t\t\t// Activate all\n\t\t\t\tif (n) {\n\t\t\t\t\tdo {\n\t\t\t\t\t\tcm.setDisabled(n.nodeName.toLowerCase(), 0);\n\t\t\t\t\t\tcm.setActive(n.nodeName.toLowerCase(), 1);\n\t\t\t\t\t} while (n = n.parentNode);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\ted.onPreInit.add(function() {\n\t\t\t\t// Fixed IE issue where it can't handle these elements correctly\n\t\t\t\ted.dom.create('abbr');\n\t\t\t});\n\t\t},\n\n\t\tgetInfo : function() {\n\t\t\treturn {\n\t\t\t\tlongname : 'XHTML Xtras Plugin',\n\t\t\t\tauthor : 'Moxiecode Systems AB',\n\t\t\t\tauthorurl : 'http://tinymce.moxiecode.com',\n\t\t\t\tinfourl : 'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/xhtmlxtras',\n\t\t\t\tversion : tinymce.majorVersion + \".\" + tinymce.minorVersion\n\t\t\t};\n\t\t}\n\t});\n\n\t// Register plugin\n\ttinymce.PluginManager.add('xhtmlxtras', tinymce.plugins.XHTMLXtrasPlugin);\n})();","Magento_Tinymce3/tiny_mce/plugins/xhtmlxtras/editor_plugin.js":"(function(){tinymce.create(\"tinymce.plugins.XHTMLXtrasPlugin\",{init:function(a,b){a.addCommand(\"mceCite\",function(){a.windowManager.open({file:b+\"/cite.htm\",width:350+parseInt(a.getLang(\"xhtmlxtras.cite_delta_width\",0)),height:250+parseInt(a.getLang(\"xhtmlxtras.cite_delta_height\",0)),inline:1},{plugin_url:b})});a.addCommand(\"mceAcronym\",function(){a.windowManager.open({file:b+\"/acronym.htm\",width:350+parseInt(a.getLang(\"xhtmlxtras.acronym_delta_width\",0)),height:250+parseInt(a.getLang(\"xhtmlxtras.acronym_delta_height\",0)),inline:1},{plugin_url:b})});a.addCommand(\"mceAbbr\",function(){a.windowManager.open({file:b+\"/abbr.htm\",width:350+parseInt(a.getLang(\"xhtmlxtras.abbr_delta_width\",0)),height:250+parseInt(a.getLang(\"xhtmlxtras.abbr_delta_height\",0)),inline:1},{plugin_url:b})});a.addCommand(\"mceDel\",function(){a.windowManager.open({file:b+\"/del.htm\",width:340+parseInt(a.getLang(\"xhtmlxtras.del_delta_width\",0)),height:310+parseInt(a.getLang(\"xhtmlxtras.del_delta_height\",0)),inline:1},{plugin_url:b})});a.addCommand(\"mceIns\",function(){a.windowManager.open({file:b+\"/ins.htm\",width:340+parseInt(a.getLang(\"xhtmlxtras.ins_delta_width\",0)),height:310+parseInt(a.getLang(\"xhtmlxtras.ins_delta_height\",0)),inline:1},{plugin_url:b})});a.addCommand(\"mceAttributes\",function(){a.windowManager.open({file:b+\"/attributes.htm\",width:380+parseInt(a.getLang(\"xhtmlxtras.attr_delta_width\",0)),height:370+parseInt(a.getLang(\"xhtmlxtras.attr_delta_height\",0)),inline:1},{plugin_url:b})});a.addButton(\"cite\",{title:\"xhtmlxtras.cite_desc\",cmd:\"mceCite\"});a.addButton(\"acronym\",{title:\"xhtmlxtras.acronym_desc\",cmd:\"mceAcronym\"});a.addButton(\"abbr\",{title:\"xhtmlxtras.abbr_desc\",cmd:\"mceAbbr\"});a.addButton(\"del\",{title:\"xhtmlxtras.del_desc\",cmd:\"mceDel\"});a.addButton(\"ins\",{title:\"xhtmlxtras.ins_desc\",cmd:\"mceIns\"});a.addButton(\"attribs\",{title:\"xhtmlxtras.attribs_desc\",cmd:\"mceAttributes\"});a.onNodeChange.add(function(d,c,f,e){f=d.dom.getParent(f,\"CITE,ACRONYM,ABBR,DEL,INS\");c.setDisabled(\"cite\",e);c.setDisabled(\"acronym\",e);c.setDisabled(\"abbr\",e);c.setDisabled(\"del\",e);c.setDisabled(\"ins\",e);c.setDisabled(\"attribs\",f&&f.nodeName==\"BODY\");c.setActive(\"cite\",0);c.setActive(\"acronym\",0);c.setActive(\"abbr\",0);c.setActive(\"del\",0);c.setActive(\"ins\",0);if(f){do{c.setDisabled(f.nodeName.toLowerCase(),0);c.setActive(f.nodeName.toLowerCase(),1)}while(f=f.parentNode)}});a.onPreInit.add(function(){a.dom.create(\"abbr\")})},getInfo:function(){return{longname:\"XHTML Xtras Plugin\",author:\"Moxiecode Systems AB\",authorurl:\"http://tinymce.moxiecode.com\",infourl:\"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/xhtmlxtras\",version:tinymce.majorVersion+\".\"+tinymce.minorVersion}}});tinymce.PluginManager.add(\"xhtmlxtras\",tinymce.plugins.XHTMLXtrasPlugin)})();","Magento_Tinymce3/tiny_mce/plugins/xhtmlxtras/js/attributes.js":"/**\n * attributes.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\nfunction init() {\n\ttinyMCEPopup.resizeToInnerSize();\n\tvar inst = tinyMCEPopup.editor;\n\tvar dom = inst.dom;\n\tvar elm = inst.selection.getNode();\n\tvar f = document.forms[0];\n\tvar onclick = dom.getAttrib(elm, 'onclick');\n\n\tsetFormValue('title', dom.getAttrib(elm, 'title'));\n\tsetFormValue('id', dom.getAttrib(elm, 'id'));\n\tsetFormValue('style', dom.getAttrib(elm, \"style\"));\n\tsetFormValue('dir', dom.getAttrib(elm, 'dir'));\n\tsetFormValue('lang', dom.getAttrib(elm, 'lang'));\n\tsetFormValue('tabindex', dom.getAttrib(elm, 'tabindex', typeof(elm.tabindex) != \"undefined\" ? elm.tabindex : \"\"));\n\tsetFormValue('accesskey', dom.getAttrib(elm, 'accesskey', typeof(elm.accesskey) != \"undefined\" ? elm.accesskey : \"\"));\n\tsetFormValue('onfocus', dom.getAttrib(elm, 'onfocus'));\n\tsetFormValue('onblur', dom.getAttrib(elm, 'onblur'));\n\tsetFormValue('onclick', onclick);\n\tsetFormValue('ondblclick', dom.getAttrib(elm, 'ondblclick'));\n\tsetFormValue('onmousedown', dom.getAttrib(elm, 'onmousedown'));\n\tsetFormValue('onmouseup', dom.getAttrib(elm, 'onmouseup'));\n\tsetFormValue('onmouseover', dom.getAttrib(elm, 'onmouseover'));\n\tsetFormValue('onmousemove', dom.getAttrib(elm, 'onmousemove'));\n\tsetFormValue('onmouseout', dom.getAttrib(elm, 'onmouseout'));\n\tsetFormValue('onkeypress', dom.getAttrib(elm, 'onkeypress'));\n\tsetFormValue('onkeydown', dom.getAttrib(elm, 'onkeydown'));\n\tsetFormValue('onkeyup', dom.getAttrib(elm, 'onkeyup'));\n\tclassName = dom.getAttrib(elm, 'class');\n\n\taddClassesToList('classlist', 'advlink_styles');\n\tselectByValue(f, 'classlist', className, true);\n\n\tTinyMCE_EditableSelects.init();\n}\n\nfunction setFormValue(name, value) {\n\tif(value && document.forms[0].elements[name]){\n\t\tdocument.forms[0].elements[name].value = value;\n\t}\n}\n\nfunction insertAction() {\n\tvar inst = tinyMCEPopup.editor;\n\tvar elm = inst.selection.getNode();\n\n\tsetAllAttribs(elm);\n\ttinyMCEPopup.execCommand(\"mceEndUndoLevel\");\n\ttinyMCEPopup.close();\n}\n\nfunction setAttrib(elm, attrib, value) {\n\tvar formObj = document.forms[0];\n\tvar valueElm = formObj.elements[attrib.toLowerCase()];\n\tvar inst = tinyMCEPopup.editor;\n\tvar dom = inst.dom;\n\n\tif (typeof(value) == \"undefined\" || value == null) {\n\t\tvalue = \"\";\n\n\t\tif (valueElm)\n\t\t\tvalue = valueElm.value;\n\t}\n\n\tdom.setAttrib(elm, attrib.toLowerCase(), value);\n}\n\nfunction setAllAttribs(elm) {\n\tvar f = document.forms[0];\n\n\tsetAttrib(elm, 'title');\n\tsetAttrib(elm, 'id');\n\tsetAttrib(elm, 'style');\n\tsetAttrib(elm, 'class', getSelectValue(f, 'classlist'));\n\tsetAttrib(elm, 'dir');\n\tsetAttrib(elm, 'lang');\n\tsetAttrib(elm, 'tabindex');\n\tsetAttrib(elm, 'accesskey');\n\tsetAttrib(elm, 'onfocus');\n\tsetAttrib(elm, 'onblur');\n\tsetAttrib(elm, 'onclick');\n\tsetAttrib(elm, 'ondblclick');\n\tsetAttrib(elm, 'onmousedown');\n\tsetAttrib(elm, 'onmouseup');\n\tsetAttrib(elm, 'onmouseover');\n\tsetAttrib(elm, 'onmousemove');\n\tsetAttrib(elm, 'onmouseout');\n\tsetAttrib(elm, 'onkeypress');\n\tsetAttrib(elm, 'onkeydown');\n\tsetAttrib(elm, 'onkeyup');\n\n\t// Refresh in old MSIE\n//\tif (tinyMCE.isMSIE5)\n//\t\telm.outerHTML = elm.outerHTML;\n}\n\nfunction insertAttribute() {\n\ttinyMCEPopup.close();\n}\n\ntinyMCEPopup.onInit.add(init);\ntinyMCEPopup.requireLangPack();\n","Magento_Tinymce3/tiny_mce/plugins/xhtmlxtras/js/del.js":"/**\n * del.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\nfunction init() {\n\tSXE.initElementDialog('del');\n\tif (SXE.currentAction == \"update\") {\n\t\tsetFormValue('datetime', tinyMCEPopup.editor.dom.getAttrib(SXE.updateElement, 'datetime'));\n\t\tsetFormValue('cite', tinyMCEPopup.editor.dom.getAttrib(SXE.updateElement, 'cite'));\n\t\tSXE.showRemoveButton();\n\t}\n}\n\nfunction setElementAttribs(elm) {\n\tsetAllCommonAttribs(elm);\n\tsetAttrib(elm, 'datetime');\n\tsetAttrib(elm, 'cite');\n\telm.removeAttribute('data-mce-new');\n}\n\nfunction insertDel() {\n\tvar elm = tinyMCEPopup.editor.dom.getParent(SXE.focusElement, 'DEL');\n\n\tif (elm == null) {\n\t\tvar s = SXE.inst.selection.getContent();\n\t\tif(s.length > 0) {\n\t\t\tinsertInlineElement('del');\n\t\t\tvar elementArray = SXE.inst.dom.select('del[data-mce-new]');\n\t\t\tfor (var i=0; i<elementArray.length; i++) {\n\t\t\t\tvar elm = elementArray[i];\n\t\t\t\tsetElementAttribs(elm);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tsetElementAttribs(elm);\n\t}\n\ttinyMCEPopup.editor.nodeChanged();\n\ttinyMCEPopup.execCommand('mceEndUndoLevel');\n\ttinyMCEPopup.close();\n}\n\nfunction removeDel() {\n\tSXE.removeElement('del');\n\ttinyMCEPopup.close();\n}\n\ntinyMCEPopup.onInit.add(init);\n","Magento_Tinymce3/tiny_mce/plugins/xhtmlxtras/js/cite.js":"/**\n * cite.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\nfunction init() {\n\tSXE.initElementDialog('cite');\n\tif (SXE.currentAction == \"update\") {\n\t\tSXE.showRemoveButton();\n\t}\n}\n\nfunction insertCite() {\n\tSXE.insertElement('cite');\n\ttinyMCEPopup.close();\n}\n\nfunction removeCite() {\n\tSXE.removeElement('cite');\n\ttinyMCEPopup.close();\n}\n\ntinyMCEPopup.onInit.add(init);\n","Magento_Tinymce3/tiny_mce/plugins/xhtmlxtras/js/ins.js":"/**\n * ins.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\nfunction init() {\n\tSXE.initElementDialog('ins');\n\tif (SXE.currentAction == \"update\") {\n\t\tsetFormValue('datetime', tinyMCEPopup.editor.dom.getAttrib(SXE.updateElement, 'datetime'));\n\t\tsetFormValue('cite', tinyMCEPopup.editor.dom.getAttrib(SXE.updateElement, 'cite'));\n\t\tSXE.showRemoveButton();\n\t}\n}\n\nfunction setElementAttribs(elm) {\n\tsetAllCommonAttribs(elm);\n\tsetAttrib(elm, 'datetime');\n\tsetAttrib(elm, 'cite');\n\telm.removeAttribute('data-mce-new');\n}\n\nfunction insertIns() {\n\tvar elm = tinyMCEPopup.editor.dom.getParent(SXE.focusElement, 'INS');\n\n\tif (elm == null) {\n\t\tvar s = SXE.inst.selection.getContent();\n\t\tif(s.length > 0) {\n\t\t\tinsertInlineElement('ins');\n\t\t\tvar elementArray = SXE.inst.dom.select('ins[data-mce-new]');\n\t\t\tfor (var i=0; i<elementArray.length; i++) {\n\t\t\t\tvar elm = elementArray[i];\n\t\t\t\tsetElementAttribs(elm);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tsetElementAttribs(elm);\n\t}\n\ttinyMCEPopup.editor.nodeChanged();\n\ttinyMCEPopup.execCommand('mceEndUndoLevel');\n\ttinyMCEPopup.close();\n}\n\nfunction removeIns() {\n\tSXE.removeElement('ins');\n\ttinyMCEPopup.close();\n}\n\ntinyMCEPopup.onInit.add(init);\n","Magento_Tinymce3/tiny_mce/plugins/xhtmlxtras/js/element_common.js":"/**\n * element_common.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\ntinyMCEPopup.requireLangPack();\n\nfunction initCommonAttributes(elm) {\n\tvar formObj = document.forms[0], dom = tinyMCEPopup.editor.dom;\n\n\t// Setup form data for common element attributes\n\tsetFormValue('title', dom.getAttrib(elm, 'title'));\n\tsetFormValue('id', dom.getAttrib(elm, 'id'));\n\tselectByValue(formObj, 'class', dom.getAttrib(elm, 'class'), true);\n\tsetFormValue('style', dom.getAttrib(elm, 'style'));\n\tselectByValue(formObj, 'dir', dom.getAttrib(elm, 'dir'));\n\tsetFormValue('lang', dom.getAttrib(elm, 'lang'));\n\tsetFormValue('onfocus', dom.getAttrib(elm, 'onfocus'));\n\tsetFormValue('onblur', dom.getAttrib(elm, 'onblur'));\n\tsetFormValue('onclick', dom.getAttrib(elm, 'onclick'));\n\tsetFormValue('ondblclick', dom.getAttrib(elm, 'ondblclick'));\n\tsetFormValue('onmousedown', dom.getAttrib(elm, 'onmousedown'));\n\tsetFormValue('onmouseup', dom.getAttrib(elm, 'onmouseup'));\n\tsetFormValue('onmouseover', dom.getAttrib(elm, 'onmouseover'));\n\tsetFormValue('onmousemove', dom.getAttrib(elm, 'onmousemove'));\n\tsetFormValue('onmouseout', dom.getAttrib(elm, 'onmouseout'));\n\tsetFormValue('onkeypress', dom.getAttrib(elm, 'onkeypress'));\n\tsetFormValue('onkeydown', dom.getAttrib(elm, 'onkeydown'));\n\tsetFormValue('onkeyup', dom.getAttrib(elm, 'onkeyup'));\n}\n\nfunction setFormValue(name, value) {\n\tif(document.forms[0].elements[name]) document.forms[0].elements[name].value = value;\n}\n\nfunction insertDateTime(id) {\n\tdocument.getElementById(id).value = getDateTime(new Date(), \"%Y-%m-%dT%H:%M:%S\");\n}\n\nfunction getDateTime(d, fmt) {\n\tfmt = fmt.replace(\"%D\", \"%m/%d/%y\");\n\tfmt = fmt.replace(\"%r\", \"%I:%M:%S %p\");\n\tfmt = fmt.replace(\"%Y\", \"\" + d.getFullYear());\n\tfmt = fmt.replace(\"%y\", \"\" + d.getYear());\n\tfmt = fmt.replace(\"%m\", addZeros(d.getMonth()+1, 2));\n\tfmt = fmt.replace(\"%d\", addZeros(d.getDate(), 2));\n\tfmt = fmt.replace(\"%H\", \"\" + addZeros(d.getHours(), 2));\n\tfmt = fmt.replace(\"%M\", \"\" + addZeros(d.getMinutes(), 2));\n\tfmt = fmt.replace(\"%S\", \"\" + addZeros(d.getSeconds(), 2));\n\tfmt = fmt.replace(\"%I\", \"\" + ((d.getHours() + 11) % 12 + 1));\n\tfmt = fmt.replace(\"%p\", \"\" + (d.getHours() < 12 ? \"AM\" : \"PM\"));\n\tfmt = fmt.replace(\"%%\", \"%\");\n\n\treturn fmt;\n}\n\nfunction addZeros(value, len) {\n\tvar i;\n\n\tvalue = \"\" + value;\n\n\tif (value.length < len) {\n\t\tfor (i=0; i<(len-value.length); i++)\n\t\t\tvalue = \"0\" + value;\n\t}\n\n\treturn value;\n}\n\nfunction selectByValue(form_obj, field_name, value, add_custom, ignore_case) {\n\tif (!form_obj || !form_obj.elements[field_name])\n\t\treturn;\n\n\tvar sel = form_obj.elements[field_name];\n\n\tvar found = false;\n\tfor (var i=0; i<sel.options.length; i++) {\n\t\tvar option = sel.options[i];\n\n\t\tif (option.value == value || (ignore_case && option.value.toLowerCase() == value.toLowerCase())) {\n\t\t\toption.selected = true;\n\t\t\tfound = true;\n\t\t} else\n\t\t\toption.selected = false;\n\t}\n\n\tif (!found && add_custom && value != '') {\n\t\tvar option = new Option('Value: ' + value, value);\n\t\toption.selected = true;\n\t\tsel.options[sel.options.length] = option;\n\t}\n\n\treturn found;\n}\n\nfunction setAttrib(elm, attrib, value) {\n\tvar formObj = document.forms[0];\n\tvar valueElm = formObj.elements[attrib.toLowerCase()];\n\ttinyMCEPopup.editor.dom.setAttrib(elm, attrib, value || valueElm.value);\n}\n\nfunction setAllCommonAttribs(elm) {\n\tsetAttrib(elm, 'title');\n\tsetAttrib(elm, 'id');\n\tsetAttrib(elm, 'class');\n\tsetAttrib(elm, 'style');\n\tsetAttrib(elm, 'dir');\n\tsetAttrib(elm, 'lang');\n\t/*setAttrib(elm, 'onfocus');\n\tsetAttrib(elm, 'onblur');\n\tsetAttrib(elm, 'onclick');\n\tsetAttrib(elm, 'ondblclick');\n\tsetAttrib(elm, 'onmousedown');\n\tsetAttrib(elm, 'onmouseup');\n\tsetAttrib(elm, 'onmouseover');\n\tsetAttrib(elm, 'onmousemove');\n\tsetAttrib(elm, 'onmouseout');\n\tsetAttrib(elm, 'onkeypress');\n\tsetAttrib(elm, 'onkeydown');\n\tsetAttrib(elm, 'onkeyup');*/\n}\n\nSXE = {\n\tcurrentAction : \"insert\",\n\tinst : tinyMCEPopup.editor,\n\tupdateElement : null\n}\n\nSXE.focusElement = SXE.inst.selection.getNode();\n\nSXE.initElementDialog = function(element_name) {\n\taddClassesToList('class', 'xhtmlxtras_styles');\n\tTinyMCE_EditableSelects.init();\n\n\telement_name = element_name.toLowerCase();\n\tvar elm = SXE.inst.dom.getParent(SXE.focusElement, element_name.toUpperCase());\n\tif (elm != null && elm.nodeName.toUpperCase() == element_name.toUpperCase()) {\n\t\tSXE.currentAction = \"update\";\n\t}\n\n\tif (SXE.currentAction == \"update\") {\n\t\tinitCommonAttributes(elm);\n\t\tSXE.updateElement = elm;\n\t}\n\n\tdocument.forms[0].insert.value = tinyMCEPopup.getLang(SXE.currentAction, 'Insert', true); \n}\n\nSXE.insertElement = function(element_name) {\n\tvar elm = SXE.inst.dom.getParent(SXE.focusElement, element_name.toUpperCase()), h, tagName;\n\n\tif (elm == null) {\n\t\tvar s = SXE.inst.selection.getContent();\n\t\tif(s.length > 0) {\n\t\t\ttagName = element_name;\n\n\t\t\tinsertInlineElement(element_name);\n\t\t\tvar elementArray = tinymce.grep(SXE.inst.dom.select(element_name));\n\t\t\tfor (var i=0; i<elementArray.length; i++) {\n\t\t\t\tvar elm = elementArray[i];\n\n\t\t\t\tif (SXE.inst.dom.getAttrib(elm, 'data-mce-new')) {\n\t\t\t\t\telm.id = '';\n\t\t\t\t\telm.setAttribute('id', '');\n\t\t\t\t\telm.removeAttribute('id');\n\t\t\t\t\telm.removeAttribute('data-mce-new');\n\n\t\t\t\t\tsetAllCommonAttribs(elm);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\tsetAllCommonAttribs(elm);\n\t}\n\tSXE.inst.nodeChanged();\n\ttinyMCEPopup.execCommand('mceEndUndoLevel');\n}\n\nSXE.removeElement = function(element_name){\n\telement_name = element_name.toLowerCase();\n\telm = SXE.inst.dom.getParent(SXE.focusElement, element_name.toUpperCase());\n\tif(elm && elm.nodeName.toUpperCase() == element_name.toUpperCase()){\n\t\ttinyMCE.execCommand('mceRemoveNode', false, elm);\n\t\tSXE.inst.nodeChanged();\n\t\ttinyMCEPopup.execCommand('mceEndUndoLevel');\n\t}\n}\n\nSXE.showRemoveButton = function() {\n\t\tdocument.getElementById(\"remove\").style.display = '';\n}\n\nSXE.containsClass = function(elm,cl) {\n\treturn (elm.className.indexOf(cl) > -1) ? true : false;\n}\n\nSXE.removeClass = function(elm,cl) {\n\tif(elm.className == null || elm.className == \"\" || !SXE.containsClass(elm,cl)) {\n\t\treturn true;\n\t}\n\tvar classNames = elm.className.split(\" \");\n\tvar newClassNames = \"\";\n\tfor (var x = 0, cnl = classNames.length; x < cnl; x++) {\n\t\tif (classNames[x] != cl) {\n\t\t\tnewClassNames += (classNames[x] + \" \");\n\t\t}\n\t}\n\telm.className = newClassNames.substring(0,newClassNames.length-1); //removes extra space at the end\n}\n\nSXE.addClass = function(elm,cl) {\n\tif(!SXE.containsClass(elm,cl)) elm.className ? elm.className += \" \" + cl : elm.className = cl;\n\treturn true;\n}\n\nfunction insertInlineElement(en) {\n\tvar ed = tinyMCEPopup.editor, dom = ed.dom;\n\n\ted.getDoc().execCommand('FontName', false, 'mceinline');\n\ttinymce.each(dom.select('span,font'), function(n) {\n\t\tif (n.style.fontFamily == 'mceinline' || n.face == 'mceinline')\n\t\t\tdom.replace(dom.create(en, {'data-mce-new' : 1}), n, 1);\n\t});\n}\n","Magento_Tinymce3/tiny_mce/plugins/xhtmlxtras/js/acronym.js":"/**\n * acronym.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\nfunction init() {\n\tSXE.initElementDialog('acronym');\n\tif (SXE.currentAction == \"update\") {\n\t\tSXE.showRemoveButton();\n\t}\n}\n\nfunction insertAcronym() {\n\tSXE.insertElement('acronym');\n\ttinyMCEPopup.close();\n}\n\nfunction removeAcronym() {\n\tSXE.removeElement('acronym');\n\ttinyMCEPopup.close();\n}\n\ntinyMCEPopup.onInit.add(init);\n","Magento_Tinymce3/tiny_mce/plugins/xhtmlxtras/js/abbr.js":"/**\n * abbr.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\nfunction init() {\n\tSXE.initElementDialog('abbr');\n\tif (SXE.currentAction == \"update\") {\n\t\tSXE.showRemoveButton();\n\t}\n}\n\nfunction insertAbbr() {\n\tSXE.insertElement('abbr');\n\ttinyMCEPopup.close();\n}\n\nfunction removeAbbr() {\n\tSXE.removeElement('abbr');\n\ttinyMCEPopup.close();\n}\n\ntinyMCEPopup.onInit.add(init);\n","Magento_Tinymce3/tiny_mce/plugins/xhtmlxtras/langs/en_dlg.js":"tinyMCE.addI18n('en.xhtmlxtras_dlg',{\"attribs_title\":\"Insert/Edit Attributes\",\"option_rtl\":\"Right to Left\",\"option_ltr\":\"Left to Right\",\"insert_date\":\"Insert Current Date/Time\",remove:\"Remove\",\"title_cite_element\":\"Citation Element\",\"title_abbr_element\":\"Abbreviation Element\",\"title_acronym_element\":\"Acronym Element\",\"title_del_element\":\"Deletion Element\",\"title_ins_element\":\"Insertion Element\",\"fieldset_events_tab\":\"Element Events\",\"fieldset_attrib_tab\":\"Element Attributes\",\"fieldset_general_tab\":\"General Settings\",\"events_tab\":\"Events\",\"attrib_tab\":\"Attributes\",\"general_tab\":\"General\",\"attribute_attrib_tab\":\"Attributes\",\"attribute_events_tab\":\"Events\",\"attribute_label_accesskey\":\"AccessKey\",\"attribute_label_tabindex\":\"TabIndex\",\"attribute_label_langcode\":\"Language\",\"attribute_option_rtl\":\"Right to Left\",\"attribute_option_ltr\":\"Left to Right\",\"attribute_label_langdir\":\"Text Direction\",\"attribute_label_datetime\":\"Date/Time\",\"attribute_label_cite\":\"Cite\",\"attribute_label_style\":\"Style\",\"attribute_label_class\":\"Class\",\"attribute_label_id\":\"ID\",\"attribute_label_title\":\"Title\"});","Magento_Tinymce3/tiny_mce/plugins/example/editor_plugin_src.js":"/**\n * editor_plugin_src.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function() {\n\t// Load plugin specific language pack\n\ttinymce.PluginManager.requireLangPack('example');\n\n\ttinymce.create('tinymce.plugins.ExamplePlugin', {\n\t\t/**\n\t\t * Initializes the plugin, this will be executed after the plugin has been created.\n\t\t * This call is done before the editor instance has finished it's initialization so use the onInit event\n\t\t * of the editor instance to intercept that event.\n\t\t *\n\t\t * @param {tinymce.Editor} ed Editor instance that the plugin is initialized in.\n\t\t * @param {string} url Absolute URL to where the plugin is located.\n\t\t */\n\t\tinit : function(ed, url) {\n\t\t\t// Register the command so that it can be invoked by using tinyMCE.activeEditor.execCommand('mceExample');\n\t\t\ted.addCommand('mceExample', function() {\n\t\t\t\ted.windowManager.open({\n\t\t\t\t\tfile : url + '/dialog.htm',\n\t\t\t\t\twidth : 320 + parseInt(ed.getLang('example.delta_width', 0)),\n\t\t\t\t\theight : 120 + parseInt(ed.getLang('example.delta_height', 0)),\n\t\t\t\t\tinline : 1\n\t\t\t\t}, {\n\t\t\t\t\tplugin_url : url, // Plugin absolute URL\n\t\t\t\t\tsome_custom_arg : 'custom arg' // Custom argument\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Register example button\n\t\t\ted.addButton('example', {\n\t\t\t\ttitle : 'example.desc',\n\t\t\t\tcmd : 'mceExample',\n\t\t\t\timage : url + '/img/example.gif'\n\t\t\t});\n\n\t\t\t// Add a node change handler, selects the button in the UI when a image is selected\n\t\t\ted.onNodeChange.add(function(ed, cm, n) {\n\t\t\t\tcm.setActive('example', n.nodeName == 'IMG');\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Creates control instances based in the incoming name. This method is normally not\n\t\t * needed since the addButton method of the tinymce.Editor class is a more easy way of adding buttons\n\t\t * but you sometimes need to create more complex controls like listboxes, split buttons etc then this\n\t\t * method can be used to create those.\n\t\t *\n\t\t * @param {String} n Name of the control to create.\n\t\t * @param {tinymce.ControlManager} cm Control manager to use inorder to create new control.\n\t\t * @return {tinymce.ui.Control} New control instance or null if no control was created.\n\t\t */\n\t\tcreateControl : function(n, cm) {\n\t\t\treturn null;\n\t\t},\n\n\t\t/**\n\t\t * Returns information about the plugin as a name/value array.\n\t\t * The current keys are longname, author, authorurl, infourl and version.\n\t\t *\n\t\t * @return {Object} Name/value array containing information about the plugin.\n\t\t */\n\t\tgetInfo : function() {\n\t\t\treturn {\n\t\t\t\tlongname : 'Example plugin',\n\t\t\t\tauthor : 'Some author',\n\t\t\t\tauthorurl : 'http://tinymce.moxiecode.com',\n\t\t\t\tinfourl : 'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/example',\n\t\t\t\tversion : \"1.0\"\n\t\t\t};\n\t\t}\n\t});\n\n\t// Register plugin\n\ttinymce.PluginManager.add('example', tinymce.plugins.ExamplePlugin);\n})();","Magento_Tinymce3/tiny_mce/plugins/example/editor_plugin.js":"(function(){tinymce.PluginManager.requireLangPack(\"example\");tinymce.create(\"tinymce.plugins.ExamplePlugin\",{init:function(a,b){a.addCommand(\"mceExample\",function(){a.windowManager.open({file:b+\"/dialog.htm\",width:320+parseInt(a.getLang(\"example.delta_width\",0)),height:120+parseInt(a.getLang(\"example.delta_height\",0)),inline:1},{plugin_url:b,some_custom_arg:\"custom arg\"})});a.addButton(\"example\",{title:\"example.desc\",cmd:\"mceExample\",image:b+\"/img/example.gif\"});a.onNodeChange.add(function(d,c,e){c.setActive(\"example\",e.nodeName==\"IMG\")})},createControl:function(b,a){return null},getInfo:function(){return{longname:\"Example plugin\",author:\"Some author\",authorurl:\"http://tinymce.moxiecode.com\",infourl:\"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/example\",version:\"1.0\"}}});tinymce.PluginManager.add(\"example\",tinymce.plugins.ExamplePlugin)})();","Magento_Tinymce3/tiny_mce/plugins/example/js/dialog.js":"tinyMCEPopup.requireLangPack();\n\nvar ExampleDialog = {\n\tinit : function() {\n\t\tvar f = document.forms[0];\n\n\t\t// Get the selected contents as text and place it in the input\n\t\tf.someval.value = tinyMCEPopup.editor.selection.getContent({format : 'text'});\n\t\tf.somearg.value = tinyMCEPopup.getWindowArg('some_custom_arg');\n\t},\n\n\tinsert : function() {\n\t\t// Insert the contents from the input into the document\n\t\ttinyMCEPopup.editor.execCommand('mceInsertContent', false, document.forms[0].someval.value);\n\t\ttinyMCEPopup.close();\n\t}\n};\n\ntinyMCEPopup.onInit.add(ExampleDialog.init, ExampleDialog);\n","Magento_Tinymce3/tiny_mce/plugins/example/langs/en.js":"tinyMCE.addI18n('en.example',{\n\tdesc : 'This is just a template button'\n});\n","Magento_Tinymce3/tiny_mce/plugins/example/langs/en_dlg.js":"tinyMCE.addI18n('en.example_dlg',{\n\ttitle : 'This is just a example title'\n});\n","Magento_Tinymce3/tiny_mce/plugins/magentowidget/editor_plugin.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/* global tinyMCE, tinymceDeprecated, widgetTools, Base64 */\n/* eslint-disable strict */\ntinyMCE.addI18n({\n    en: {\n        magentowidget: {\n            'insert_widget': 'Insert Widget'\n        }\n    }\n});\n\n(function () {\n\n    tinymce.create('tinymce.plugins.MagentowidgetPlugin', {\n        /**\n         * @param {tinymceDeprecated.Editor} ed - Editor instance that the plugin is initialized in.\n         * @param {String} url - Absolute URL to where the plugin is located.\n         */\n        init: function (ed, url) {\n            ed.addCommand('mceMagentowidget', function () {\n                widgetTools.openDialog(\n                    ed.settings['magentowidget_url'] + 'widget_target_id/' + ed.getElement().id + '/'\n                );\n            });\n\n            // Register Widget plugin button\n            ed.addButton('magentowidget', {\n                title: 'magentowidget.insert_widget',\n                cmd: 'mceMagentowidget',\n                image: url + '/img/icon.gif'\n            });\n\n            // Add a node change handler, selects the button in the UI when a image is selected\n            ed.onNodeChange.add(function (edi, cm, n) {\n                var widgetCode;\n\n                widgetTools.setEditMode(false);\n                cm.setActive('magentowidget', false);\n\n                if (n.id && n.nodeName == 'IMG') { //eslint-disable-line eqeqeq\n                    widgetCode = Base64.idDecode(n.id);\n\n                    if (widgetCode.indexOf('{{widget') !== -1) {\n                        widgetTools.setEditMode(true);\n                        cm.setActive('magentowidget', true);\n                    }\n                }\n            });\n\n            // Add a widget placeholder image double click callback\n            ed.onDblClick.add(function (edi, e) {\n                var n = e.target,\n                    widgetCode;\n\n                if (n.id && n.nodeName == 'IMG') { //eslint-disable-line eqeqeq\n                    widgetCode = Base64.idDecode(n.id);\n\n                    if (widgetCode.indexOf('{{widget') !== -1) {\n                        widgetTools.setEditMode(true);\n                        edi.execCommand('mceMagentowidget');\n                    }\n                }\n            });\n        },\n\n        /**\n         * @return {Object}\n         */\n        getInfo: function () {\n            return {\n                longname: 'Magento Widget Manager Plugin for TinyMCE 3.x',\n                author: 'Magento Core Team',\n                authorurl: 'http://magentocommerce.com',\n                infourl: 'http://magentocommerce.com',\n                version: '1.0'\n            };\n        }\n    });\n\n    // Register plugin\n    tinymce.PluginManager.add('magentowidget', tinymce.plugins.MagentowidgetPlugin);\n})();\n","Magento_Tinymce3/tiny_mce/plugins/spellchecker/editor_plugin_src.js":"/**\n * editor_plugin_src.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function() {\n\tvar JSONRequest = tinymce.util.JSONRequest, each = tinymce.each, DOM = tinymce.DOM;\n\n\ttinymce.create('tinymce.plugins.SpellcheckerPlugin', {\n\t\tgetInfo : function() {\n\t\t\treturn {\n\t\t\t\tlongname : 'Spellchecker',\n\t\t\t\tauthor : 'Moxiecode Systems AB',\n\t\t\t\tauthorurl : 'http://tinymce.moxiecode.com',\n\t\t\t\tinfourl : 'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/spellchecker',\n\t\t\t\tversion : tinymce.majorVersion + \".\" + tinymce.minorVersion\n\t\t\t};\n\t\t},\n\n\t\tinit : function(ed, url) {\n\t\t\tvar t = this, cm;\n\n\t\t\tt.url = url;\n\t\t\tt.editor = ed;\n\t\t\tt.rpcUrl = ed.getParam(\"spellchecker_rpc_url\", \"{backend}\");\n\n\t\t\tif (t.rpcUrl == '{backend}') {\n\t\t\t\t// Sniff if the browser supports native spellchecking (Don't know of a better way)\n\t\t\t\tif (tinymce.isIE)\n\t\t\t\t\treturn;\n\n\t\t\t\tt.hasSupport = true;\n\n\t\t\t\t// Disable the context menu when spellchecking is active\n\t\t\t\ted.onContextMenu.addToTop(function(ed, e) {\n\t\t\t\t\tif (t.active)\n\t\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Register commands\n\t\t\ted.addCommand('mceSpellCheck', function() {\n\t\t\t\tif (t.rpcUrl == '{backend}') {\n\t\t\t\t\t// Enable/disable native spellchecker\n\t\t\t\t\tt.editor.getBody().spellcheck = t.active = !t.active;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!t.active) {\n\t\t\t\t\ted.setProgressState(1);\n\t\t\t\t\tt._sendRPC('checkWords', [t.selectedLang, t._getWords()], function(r) {\n\t\t\t\t\t\tif (r.length > 0) {\n\t\t\t\t\t\t\tt.active = 1;\n\t\t\t\t\t\t\tt._markWords(r);\n\t\t\t\t\t\t\ted.setProgressState(0);\n\t\t\t\t\t\t\ted.nodeChanged();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ted.setProgressState(0);\n\n\t\t\t\t\t\t\tif (ed.getParam('spellchecker_report_no_misspellings', true))\n\t\t\t\t\t\t\t\ted.windowManager.alert('spellchecker.no_mpell');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else\n\t\t\t\t\tt._done();\n\t\t\t});\n\n\t\t\tif (ed.settings.content_css !== false)\n\t\t\t\ted.contentCSS.push(url + '/css/content.css');\n\n\t\t\ted.onClick.add(t._showMenu, t);\n\t\t\ted.onContextMenu.add(t._showMenu, t);\n\t\t\ted.onBeforeGetContent.add(function() {\n\t\t\t\tif (t.active)\n\t\t\t\t\tt._removeWords();\n\t\t\t});\n\n\t\t\ted.onNodeChange.add(function(ed, cm) {\n\t\t\t\tcm.setActive('spellchecker', t.active);\n\t\t\t});\n\n\t\t\ted.onSetContent.add(function() {\n\t\t\t\tt._done();\n\t\t\t});\n\n\t\t\ted.onBeforeGetContent.add(function() {\n\t\t\t\tt._done();\n\t\t\t});\n\n\t\t\ted.onBeforeExecCommand.add(function(ed, cmd) {\n\t\t\t\tif (cmd == 'mceFullScreen')\n\t\t\t\t\tt._done();\n\t\t\t});\n\n\t\t\t// Find selected language\n\t\t\tt.languages = {};\n\t\t\teach(ed.getParam('spellchecker_languages', '+English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr,German=de,Italian=it,Polish=pl,Portuguese=pt,Spanish=es,Swedish=sv', 'hash'), function(v, k) {\n\t\t\t\tif (k.indexOf('+') === 0) {\n\t\t\t\t\tk = k.substring(1);\n\t\t\t\t\tt.selectedLang = v;\n\t\t\t\t}\n\n\t\t\t\tt.languages[k] = v;\n\t\t\t});\n\t\t},\n\n\t\tcreateControl : function(n, cm) {\n\t\t\tvar t = this, c, ed = t.editor;\n\n\t\t\tif (n == 'spellchecker') {\n\t\t\t\t// Use basic button if we use the native spellchecker\n\t\t\t\tif (t.rpcUrl == '{backend}') {\n\t\t\t\t\t// Create simple toggle button if we have native support\n\t\t\t\t\tif (t.hasSupport)\n\t\t\t\t\t\tc = cm.createButton(n, {title : 'spellchecker.desc', cmd : 'mceSpellCheck', scope : t});\n\n\t\t\t\t\treturn c;\n\t\t\t\t}\n\n\t\t\t\tc = cm.createSplitButton(n, {title : 'spellchecker.desc', cmd : 'mceSpellCheck', scope : t});\n\n\t\t\t\tc.onRenderMenu.add(function(c, m) {\n\t\t\t\t\tm.add({title : 'spellchecker.langs', 'class' : 'mceMenuItemTitle'}).setDisabled(1);\n\t\t\t\t\teach(t.languages, function(v, k) {\n\t\t\t\t\t\tvar o = {icon : 1}, mi;\n\n\t\t\t\t\t\to.onclick = function() {\n\t\t\t\t\t\t\tif (v == t.selectedLang) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmi.setSelected(1);\n\t\t\t\t\t\t\tt.selectedItem.setSelected(0);\n\t\t\t\t\t\t\tt.selectedItem = mi;\n\t\t\t\t\t\t\tt.selectedLang = v;\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\to.title = k;\n\t\t\t\t\t\tmi = m.add(o);\n\t\t\t\t\t\tmi.setSelected(v == t.selectedLang);\n\n\t\t\t\t\t\tif (v == t.selectedLang)\n\t\t\t\t\t\t\tt.selectedItem = mi;\n\t\t\t\t\t})\n\t\t\t\t});\n\n\t\t\t\treturn c;\n\t\t\t}\n\t\t},\n\n\t\t// Internal functions\n\n\t\t_walk : function(n, f) {\n\t\t\tvar d = this.editor.getDoc(), w;\n\n\t\t\tif (d.createTreeWalker) {\n\t\t\t\tw = d.createTreeWalker(n, NodeFilter.SHOW_TEXT, null, false);\n\n\t\t\t\twhile ((n = w.nextNode()) != null)\n\t\t\t\t\tf.call(this, n);\n\t\t\t} else\n\t\t\t\ttinymce.walk(n, f, 'childNodes');\n\t\t},\n\n\t\t_getSeparators : function() {\n\t\t\tvar re = '', i, str = this.editor.getParam('spellchecker_word_separator_chars', '\\\\s!\"#$%&()*+,-./:;<=>?@[\\]^_{|}\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\\u201d\\u201c');\n\n\t\t\t// Build word separator regexp\n\t\t\tfor (i=0; i<str.length; i++)\n\t\t\t\tre += '\\\\' + str.charAt(i);\n\n\t\t\treturn re;\n\t\t},\n\n\t\t_getWords : function() {\n\t\t\tvar ed = this.editor, wl = [], tx = '', lo = {}, rawWords = [];\n\n\t\t\t// Get area text\n\t\t\tthis._walk(ed.getBody(), function(n) {\n\t\t\t\tif (n.nodeType == 3)\n\t\t\t\t\ttx += n.nodeValue + ' ';\n\t\t\t});\n\n\t\t\t// split the text up into individual words\n\t\t\tif (ed.getParam('spellchecker_word_pattern')) {\n\t\t\t\t// look for words that match the pattern\n\t\t\t\trawWords = tx.match('(' + ed.getParam('spellchecker_word_pattern') + ')', 'gi');\n\t\t\t} else {\n\t\t\t\t// Split words by separator\n\t\t\t\ttx = tx.replace(new RegExp('([0-9]|[' + this._getSeparators() + '])', 'g'), ' ');\n\t\t\t\ttx = tinymce.trim(tx.replace(/(\\s+)/g, ' '));\n\t\t\t\trawWords = tx.split(' ');\n\t\t\t}\n\n\t\t\t// Build word array and remove duplicates\n\t\t\teach(rawWords, function(v) {\n\t\t\t\tif (!lo[v]) {\n\t\t\t\t\twl.push(v);\n\t\t\t\t\tlo[v] = 1;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn wl;\n\t\t},\n\n\t\t_removeWords : function(w) {\n\t\t\tvar ed = this.editor, dom = ed.dom, se = ed.selection, b = se.getBookmark();\n\n\t\t\teach(dom.select('span').reverse(), function(n) {\n\t\t\t\tif (n && (dom.hasClass(n, 'mceItemHiddenSpellWord') || dom.hasClass(n, 'mceItemHidden'))) {\n\t\t\t\t\tif (!w || dom.decode(n.innerHTML) == w)\n\t\t\t\t\t\tdom.remove(n, 1);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tse.moveToBookmark(b);\n\t\t},\n\n\t\t_markWords : function(wl) {\n\t\t\tvar ed = this.editor, dom = ed.dom, doc = ed.getDoc(), se = ed.selection, b = se.getBookmark(), nl = [],\n\t\t\t\tw = wl.join('|'), re = this._getSeparators(), rx = new RegExp('(^|[' + re + '])(' + w + ')(?=[' + re + ']|$)', 'g');\n\n\t\t\t// Collect all text nodes\n\t\t\tthis._walk(ed.getBody(), function(n) {\n\t\t\t\tif (n.nodeType == 3) {\n\t\t\t\t\tnl.push(n);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Wrap incorrect words in spans\n\t\t\teach(nl, function(n) {\n\t\t\t\tvar node, elem, txt, pos, v = n.nodeValue;\n\n\t\t\t\tif (rx.test(v)) {\n\t\t\t\t\t// Encode the content\n\t\t\t\t\tv = dom.encode(v);\n\t\t\t\t\t// Create container element\n\t\t\t\t\telem = dom.create('span', {'class' : 'mceItemHidden'});\n\n\t\t\t\t\t// Following code fixes IE issues by creating text nodes\n\t\t\t\t\t// using DOM methods instead of innerHTML.\n\t\t\t\t\t// Bug #3124: <PRE> elements content is broken after spellchecking.\n\t\t\t\t\t// Bug #1408: Preceding whitespace characters are removed\n\t\t\t\t\t// @TODO: I'm not sure that both are still issues on IE9.\n\t\t\t\t\tif (tinymce.isIE) {\n\t\t\t\t\t\t// Enclose mispelled words with temporal tag\n\t\t\t\t\t\tv = v.replace(rx, '$1<mcespell>$2</mcespell>');\n\t\t\t\t\t\t// Loop over the content finding mispelled words\n\t\t\t\t\t\twhile ((pos = v.indexOf('<mcespell>')) != -1) {\n\t\t\t\t\t\t\t// Add text node for the content before the word\n\t\t\t\t\t\t\ttxt = v.substring(0, pos);\n\t\t\t\t\t\t\tif (txt.length) {\n\t\t\t\t\t\t\t\tnode = doc.createTextNode(dom.decode(txt));\n\t\t\t\t\t\t\t\telem.appendChild(node);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tv = v.substring(pos+10);\n\t\t\t\t\t\t\tpos = v.indexOf('</mcespell>');\n\t\t\t\t\t\t\ttxt = v.substring(0, pos);\n\t\t\t\t\t\t\tv = v.substring(pos+11);\n\t\t\t\t\t\t\t// Add span element for the word\n\t\t\t\t\t\t\telem.appendChild(dom.create('span', {'class' : 'mceItemHiddenSpellWord'}, txt));\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Add text node for the rest of the content\n\t\t\t\t\t\tif (v.length) {\n\t\t\t\t\t\t\tnode = doc.createTextNode(dom.decode(v));\n\t\t\t\t\t\t\telem.appendChild(node);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Other browsers preserve whitespace characters on innerHTML usage\n\t\t\t\t\t\telem.innerHTML = v.replace(rx, '$1<span class=\"mceItemHiddenSpellWord\">$2</span>');\n\t\t\t\t\t}\n\n\t\t\t\t\t// Finally, replace the node with the container\n\t\t\t\t\tdom.replace(elem, n);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tse.moveToBookmark(b);\n\t\t},\n\n\t\t_showMenu : function(ed, e) {\n\t\t\tvar t = this, ed = t.editor, m = t._menu, p1, dom = ed.dom, vp = dom.getViewPort(ed.getWin()), wordSpan = e.target;\n\n\t\t\te = 0; // Fixes IE memory leak\n\n\t\t\tif (!m) {\n\t\t\t\tm = ed.controlManager.createDropMenu('spellcheckermenu', {'class' : 'mceNoIcons'});\n\t\t\t\tt._menu = m;\n\t\t\t}\n\n\t\t\tif (dom.hasClass(wordSpan, 'mceItemHiddenSpellWord')) {\n\t\t\t\tm.removeAll();\n\t\t\t\tm.add({title : 'spellchecker.wait', 'class' : 'mceMenuItemTitle'}).setDisabled(1);\n\n\t\t\t\tt._sendRPC('getSuggestions', [t.selectedLang, dom.decode(wordSpan.innerHTML)], function(r) {\n\t\t\t\t\tvar ignoreRpc;\n\n\t\t\t\t\tm.removeAll();\n\n\t\t\t\t\tif (r.length > 0) {\n\t\t\t\t\t\tm.add({title : 'spellchecker.sug', 'class' : 'mceMenuItemTitle'}).setDisabled(1);\n\t\t\t\t\t\teach(r, function(v) {\n\t\t\t\t\t\t\tm.add({title : v, onclick : function() {\n\t\t\t\t\t\t\t\tdom.replace(ed.getDoc().createTextNode(v), wordSpan);\n\t\t\t\t\t\t\t\tt._checkDone();\n\t\t\t\t\t\t\t}});\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tm.addSeparator();\n\t\t\t\t\t} else\n\t\t\t\t\t\tm.add({title : 'spellchecker.no_sug', 'class' : 'mceMenuItemTitle'}).setDisabled(1);\n\n\t\t\t\t\tif (ed.getParam('show_ignore_words', true)) {\n\t\t\t\t\t\tignoreRpc = t.editor.getParam(\"spellchecker_enable_ignore_rpc\", '');\n\t\t\t\t\t\tm.add({\n\t\t\t\t\t\t\ttitle : 'spellchecker.ignore_word',\n\t\t\t\t\t\t\tonclick : function() {\n\t\t\t\t\t\t\t\tvar word = wordSpan.innerHTML;\n\n\t\t\t\t\t\t\t\tdom.remove(wordSpan, 1);\n\t\t\t\t\t\t\t\tt._checkDone();\n\n\t\t\t\t\t\t\t\t// tell the server if we need to\n\t\t\t\t\t\t\t\tif (ignoreRpc) {\n\t\t\t\t\t\t\t\t\ted.setProgressState(1);\n\t\t\t\t\t\t\t\t\tt._sendRPC('ignoreWord', [t.selectedLang, word], function(r) {\n\t\t\t\t\t\t\t\t\t\ted.setProgressState(0);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tm.add({\n\t\t\t\t\t\t\ttitle : 'spellchecker.ignore_words',\n\t\t\t\t\t\t\tonclick : function() {\n\t\t\t\t\t\t\t\tvar word = wordSpan.innerHTML;\n\n\t\t\t\t\t\t\t\tt._removeWords(dom.decode(word));\n\t\t\t\t\t\t\t\tt._checkDone();\n\n\t\t\t\t\t\t\t\t// tell the server if we need to\n\t\t\t\t\t\t\t\tif (ignoreRpc) {\n\t\t\t\t\t\t\t\t\ted.setProgressState(1);\n\t\t\t\t\t\t\t\t\tt._sendRPC('ignoreWords', [t.selectedLang, word], function(r) {\n\t\t\t\t\t\t\t\t\t\ted.setProgressState(0);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tif (t.editor.getParam(\"spellchecker_enable_learn_rpc\")) {\n\t\t\t\t\t\tm.add({\n\t\t\t\t\t\t\ttitle : 'spellchecker.learn_word',\n\t\t\t\t\t\t\tonclick : function() {\n\t\t\t\t\t\t\t\tvar word = wordSpan.innerHTML;\n\n\t\t\t\t\t\t\t\tdom.remove(wordSpan, 1);\n\t\t\t\t\t\t\t\tt._checkDone();\n\n\t\t\t\t\t\t\t\ted.setProgressState(1);\n\t\t\t\t\t\t\t\tt._sendRPC('learnWord', [t.selectedLang, word], function(r) {\n\t\t\t\t\t\t\t\t\ted.setProgressState(0);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tm.update();\n\t\t\t\t});\n\n\t\t\t\tp1 = DOM.getPos(ed.getContentAreaContainer());\n\t\t\t\tm.settings.offset_x = p1.x;\n\t\t\t\tm.settings.offset_y = p1.y;\n\n\t\t\t\ted.selection.select(wordSpan);\n\t\t\t\tp1 = dom.getPos(wordSpan);\n\t\t\t\tm.showMenu(p1.x, p1.y + wordSpan.offsetHeight - vp.y);\n\n\t\t\t\treturn tinymce.dom.Event.cancel(e);\n\t\t\t} else\n\t\t\t\tm.hideMenu();\n\t\t},\n\n\t\t_checkDone : function() {\n\t\t\tvar t = this, ed = t.editor, dom = ed.dom, o;\n\n\t\t\teach(dom.select('span'), function(n) {\n\t\t\t\tif (n && dom.hasClass(n, 'mceItemHiddenSpellWord')) {\n\t\t\t\t\to = true;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (!o)\n\t\t\t\tt._done();\n\t\t},\n\n\t\t_done : function() {\n\t\t\tvar t = this, la = t.active;\n\n\t\t\tif (t.active) {\n\t\t\t\tt.active = 0;\n\t\t\t\tt._removeWords();\n\n\t\t\t\tif (t._menu)\n\t\t\t\t\tt._menu.hideMenu();\n\n\t\t\t\tif (la)\n\t\t\t\t\tt.editor.nodeChanged();\n\t\t\t}\n\t\t},\n\n\t\t_sendRPC : function(m, p, cb) {\n\t\t\tvar t = this;\n\n\t\t\tJSONRequest.sendRPC({\n\t\t\t\turl : t.rpcUrl,\n\t\t\t\tmethod : m,\n\t\t\t\tparams : p,\n\t\t\t\tsuccess : cb,\n\t\t\t\terror : function(e, x) {\n\t\t\t\t\tt.editor.setProgressState(0);\n\t\t\t\t\tt.editor.windowManager.alert(e.errstr || ('Error response: ' + x.responseText));\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\n\t// Register plugin\n\ttinymce.PluginManager.add('spellchecker', tinymce.plugins.SpellcheckerPlugin);\n})();\n","Magento_Tinymce3/tiny_mce/plugins/spellchecker/editor_plugin.js":"(function(){var a=tinymce.util.JSONRequest,c=tinymce.each,b=tinymce.DOM;tinymce.create(\"tinymce.plugins.SpellcheckerPlugin\",{getInfo:function(){return{longname:\"Spellchecker\",author:\"Moxiecode Systems AB\",authorurl:\"http://tinymce.moxiecode.com\",infourl:\"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/spellchecker\",version:tinymce.majorVersion+\".\"+tinymce.minorVersion}},init:function(e,f){var g=this,d;g.url=f;g.editor=e;g.rpcUrl=e.getParam(\"spellchecker_rpc_url\",\"{backend}\");if(g.rpcUrl==\"{backend}\"){if(tinymce.isIE){return}g.hasSupport=true;e.onContextMenu.addToTop(function(h,i){if(g.active){return false}})}e.addCommand(\"mceSpellCheck\",function(){if(g.rpcUrl==\"{backend}\"){g.editor.getBody().spellcheck=g.active=!g.active;return}if(!g.active){e.setProgressState(1);g._sendRPC(\"checkWords\",[g.selectedLang,g._getWords()],function(h){if(h.length>0){g.active=1;g._markWords(h);e.setProgressState(0);e.nodeChanged()}else{e.setProgressState(0);if(e.getParam(\"spellchecker_report_no_misspellings\",true)){e.windowManager.alert(\"spellchecker.no_mpell\")}}})}else{g._done()}});if(e.settings.content_css!==false){e.contentCSS.push(f+\"/css/content.css\")}e.onClick.add(g._showMenu,g);e.onContextMenu.add(g._showMenu,g);e.onBeforeGetContent.add(function(){if(g.active){g._removeWords()}});e.onNodeChange.add(function(i,h){h.setActive(\"spellchecker\",g.active)});e.onSetContent.add(function(){g._done()});e.onBeforeGetContent.add(function(){g._done()});e.onBeforeExecCommand.add(function(h,i){if(i==\"mceFullScreen\"){g._done()}});g.languages={};c(e.getParam(\"spellchecker_languages\",\"+English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr,German=de,Italian=it,Polish=pl,Portuguese=pt,Spanish=es,Swedish=sv\",\"hash\"),function(i,h){if(h.indexOf(\"+\")===0){h=h.substring(1);g.selectedLang=i}g.languages[h]=i})},createControl:function(h,d){var f=this,g,e=f.editor;if(h==\"spellchecker\"){if(f.rpcUrl==\"{backend}\"){if(f.hasSupport){g=d.createButton(h,{title:\"spellchecker.desc\",cmd:\"mceSpellCheck\",scope:f})}return g}g=d.createSplitButton(h,{title:\"spellchecker.desc\",cmd:\"mceSpellCheck\",scope:f});g.onRenderMenu.add(function(j,i){i.add({title:\"spellchecker.langs\",\"class\":\"mceMenuItemTitle\"}).setDisabled(1);c(f.languages,function(n,m){var p={icon:1},l;p.onclick=function(){if(n==f.selectedLang){return}l.setSelected(1);f.selectedItem.setSelected(0);f.selectedItem=l;f.selectedLang=n};p.title=m;l=i.add(p);l.setSelected(n==f.selectedLang);if(n==f.selectedLang){f.selectedItem=l}})});return g}},_walk:function(i,g){var h=this.editor.getDoc(),e;if(h.createTreeWalker){e=h.createTreeWalker(i,NodeFilter.SHOW_TEXT,null,false);while((i=e.nextNode())!=null){g.call(this,i)}}else{tinymce.walk(i,g,\"childNodes\")}},_getSeparators:function(){var e=\"\",d,f=this.editor.getParam(\"spellchecker_word_separator_chars\",'\\\\s!\"#$%&()*+,-./:;<=>?@[]^_{|}????????????????\\u201d\\u201c');for(d=0;d<f.length;d++){e+=\"\\\\\"+f.charAt(d)}return e},_getWords:function(){var e=this.editor,g=[],d=\"\",f={},h=[];this._walk(e.getBody(),function(i){if(i.nodeType==3){d+=i.nodeValue+\" \"}});if(e.getParam(\"spellchecker_word_pattern\")){h=d.match(\"(\"+e.getParam(\"spellchecker_word_pattern\")+\")\",\"gi\")}else{d=d.replace(new RegExp(\"([0-9]|[\"+this._getSeparators()+\"])\",\"g\"),\" \");d=tinymce.trim(d.replace(/(\\s+)/g,\" \"));h=d.split(\" \")}c(h,function(i){if(!f[i]){g.push(i);f[i]=1}});return g},_removeWords:function(e){var f=this.editor,h=f.dom,g=f.selection,d=g.getBookmark();c(h.select(\"span\").reverse(),function(i){if(i&&(h.hasClass(i,\"mceItemHiddenSpellWord\")||h.hasClass(i,\"mceItemHidden\"))){if(!e||h.decode(i.innerHTML)==e){h.remove(i,1)}}});g.moveToBookmark(d)},_markWords:function(l){var g=this.editor,f=g.dom,j=g.getDoc(),h=g.selection,i=h.getBookmark(),d=[],k=l.join(\"|\"),m=this._getSeparators(),e=new RegExp(\"(^|[\"+m+\"])(\"+k+\")(?=[\"+m+\"]|$)\",\"g\");this._walk(g.getBody(),function(o){if(o.nodeType==3){d.push(o)}});c(d,function(t){var r,q,o,s,p=t.nodeValue;if(e.test(p)){p=f.encode(p);q=f.create(\"span\",{\"class\":\"mceItemHidden\"});if(tinymce.isIE){p=p.replace(e,\"$1<mcespell>$2</mcespell>\");while((s=p.indexOf(\"<mcespell>\"))!=-1){o=p.substring(0,s);if(o.length){r=j.createTextNode(f.decode(o));q.appendChild(r)}p=p.substring(s+10);s=p.indexOf(\"</mcespell>\");o=p.substring(0,s);p=p.substring(s+11);q.appendChild(f.create(\"span\",{\"class\":\"mceItemHiddenSpellWord\"},o))}if(p.length){r=j.createTextNode(f.decode(p));q.appendChild(r)}}else{q.innerHTML=p.replace(e,'$1<span class=\"mceItemHiddenSpellWord\">$2</span>')}f.replace(q,t)}});h.moveToBookmark(i)},_showMenu:function(h,j){var i=this,h=i.editor,d=i._menu,l,k=h.dom,g=k.getViewPort(h.getWin()),f=j.target;j=0;if(!d){d=h.controlManager.createDropMenu(\"spellcheckermenu\",{\"class\":\"mceNoIcons\"});i._menu=d}if(k.hasClass(f,\"mceItemHiddenSpellWord\")){d.removeAll();d.add({title:\"spellchecker.wait\",\"class\":\"mceMenuItemTitle\"}).setDisabled(1);i._sendRPC(\"getSuggestions\",[i.selectedLang,k.decode(f.innerHTML)],function(m){var e;d.removeAll();if(m.length>0){d.add({title:\"spellchecker.sug\",\"class\":\"mceMenuItemTitle\"}).setDisabled(1);c(m,function(n){d.add({title:n,onclick:function(){k.replace(h.getDoc().createTextNode(n),f);i._checkDone()}})});d.addSeparator()}else{d.add({title:\"spellchecker.no_sug\",\"class\":\"mceMenuItemTitle\"}).setDisabled(1)}if(h.getParam(\"show_ignore_words\",true)){e=i.editor.getParam(\"spellchecker_enable_ignore_rpc\",\"\");d.add({title:\"spellchecker.ignore_word\",onclick:function(){var n=f.innerHTML;k.remove(f,1);i._checkDone();if(e){h.setProgressState(1);i._sendRPC(\"ignoreWord\",[i.selectedLang,n],function(o){h.setProgressState(0)})}}});d.add({title:\"spellchecker.ignore_words\",onclick:function(){var n=f.innerHTML;i._removeWords(k.decode(n));i._checkDone();if(e){h.setProgressState(1);i._sendRPC(\"ignoreWords\",[i.selectedLang,n],function(o){h.setProgressState(0)})}}})}if(i.editor.getParam(\"spellchecker_enable_learn_rpc\")){d.add({title:\"spellchecker.learn_word\",onclick:function(){var n=f.innerHTML;k.remove(f,1);i._checkDone();h.setProgressState(1);i._sendRPC(\"learnWord\",[i.selectedLang,n],function(o){h.setProgressState(0)})}})}d.update()});l=b.getPos(h.getContentAreaContainer());d.settings.offset_x=l.x;d.settings.offset_y=l.y;h.selection.select(f);l=k.getPos(f);d.showMenu(l.x,l.y+f.offsetHeight-g.y);return tinymce.dom.Event.cancel(j)}else{d.hideMenu()}},_checkDone:function(){var e=this,d=e.editor,g=d.dom,f;c(g.select(\"span\"),function(h){if(h&&g.hasClass(h,\"mceItemHiddenSpellWord\")){f=true;return false}});if(!f){e._done()}},_done:function(){var d=this,e=d.active;if(d.active){d.active=0;d._removeWords();if(d._menu){d._menu.hideMenu()}if(e){d.editor.nodeChanged()}}},_sendRPC:function(e,g,d){var f=this;a.sendRPC({url:f.rpcUrl,method:e,params:g,success:d,error:function(i,h){f.editor.setProgressState(0);f.editor.windowManager.alert(i.errstr||(\"Error response: \"+h.responseText))}})}});tinymce.PluginManager.add(\"spellchecker\",tinymce.plugins.SpellcheckerPlugin)})();","Magento_Tinymce3/tiny_mce/plugins/advimage/editor_plugin_src.js":"/**\n * editor_plugin_src.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function() {\n\ttinymce.create('tinymce.plugins.AdvancedImagePlugin', {\n\t\tinit : function(ed, url) {\n\t\t\t// Register commands\n\t\t\ted.addCommand('mceAdvImage', function() {\n\t\t\t\t// Internal image object like a flash placeholder\n\t\t\t\tif (ed.dom.getAttrib(ed.selection.getNode(), 'class', '').indexOf('mceItem') != -1)\n\t\t\t\t\treturn;\n\n\t\t\t\ted.windowManager.open({\n\t\t\t\t\tfile : url + '/image.htm',\n\t\t\t\t\twidth : 480 + parseInt(ed.getLang('advimage.delta_width', 0)),\n\t\t\t\t\theight : 385 + parseInt(ed.getLang('advimage.delta_height', 0)),\n\t\t\t\t\tinline : 1\n\t\t\t\t}, {\n\t\t\t\t\tplugin_url : url\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Register buttons\n\t\t\ted.addButton('image', {\n\t\t\t\ttitle : 'advimage.image_desc',\n\t\t\t\tcmd : 'mceAdvImage'\n\t\t\t});\n\t\t},\n\n\t\tgetInfo : function() {\n\t\t\treturn {\n\t\t\t\tlongname : 'Advanced image',\n\t\t\t\tauthor : 'Moxiecode Systems AB',\n\t\t\t\tauthorurl : 'http://tinymce.moxiecode.com',\n\t\t\t\tinfourl : 'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advimage',\n\t\t\t\tversion : tinymce.majorVersion + \".\" + tinymce.minorVersion\n\t\t\t};\n\t\t}\n\t});\n\n\t// Register plugin\n\ttinymce.PluginManager.add('advimage', tinymce.plugins.AdvancedImagePlugin);\n})();","Magento_Tinymce3/tiny_mce/plugins/advimage/editor_plugin.js":"(function(){tinymce.create(\"tinymce.plugins.AdvancedImagePlugin\",{init:function(a,b){a.addCommand(\"mceAdvImage\",function(){if(a.dom.getAttrib(a.selection.getNode(),\"class\",\"\").indexOf(\"mceItem\")!=-1){return}a.windowManager.open({file:b+\"/image.htm\",width:480+parseInt(a.getLang(\"advimage.delta_width\",0)),height:385+parseInt(a.getLang(\"advimage.delta_height\",0)),inline:1},{plugin_url:b})});a.addButton(\"image\",{title:\"advimage.image_desc\",cmd:\"mceAdvImage\"})},getInfo:function(){return{longname:\"Advanced image\",author:\"Moxiecode Systems AB\",authorurl:\"http://tinymce.moxiecode.com\",infourl:\"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advimage\",version:tinymce.majorVersion+\".\"+tinymce.minorVersion}}});tinymce.PluginManager.add(\"advimage\",tinymce.plugins.AdvancedImagePlugin)})();","Magento_Tinymce3/tiny_mce/plugins/advimage/js/image.js":"var ImageDialog = {\n\tpreInit : function() {\n\t\tvar url;\n\n\t\ttinyMCEPopup.requireLangPack();\n\n\t\tif (url = tinyMCEPopup.getParam(\"external_image_list_url\"))\n\t\t\tdocument.write('<script language=\"javascript\" type=\"text/javascript\" src=\"' + tinyMCEPopup.editor.documentBaseURI.toAbsolute(url) + '\"></script>');\n\t},\n\n\tinit : function(ed) {\n\t\tvar f = document.forms[0], nl = f.elements, ed = tinyMCEPopup.editor, dom = ed.dom, n = ed.selection.getNode(), fl = tinyMCEPopup.getParam('external_image_list', 'tinyMCEImageList');\n\n\t\ttinyMCEPopup.resizeToInnerSize();\n\t\tthis.fillClassList('class_list');\n\t\tthis.fillFileList('src_list', fl);\n\t\tthis.fillFileList('over_list', fl);\n\t\tthis.fillFileList('out_list', fl);\n\t\tTinyMCE_EditableSelects.init();\n\n\t\tif (n.nodeName == 'IMG') {\n\t\t\tnl.src.value = dom.getAttrib(n, 'src');\n\t\t\tnl.width.value = dom.getAttrib(n, 'width');\n\t\t\tnl.height.value = dom.getAttrib(n, 'height');\n\t\t\tnl.alt.value = dom.getAttrib(n, 'alt');\n\t\t\tnl.title.value = dom.getAttrib(n, 'title');\n\t\t\tnl.vspace.value = this.getAttrib(n, 'vspace');\n\t\t\tnl.hspace.value = this.getAttrib(n, 'hspace');\n\t\t\tnl.border.value = this.getAttrib(n, 'border');\n\t\t\tselectByValue(f, 'align', this.getAttrib(n, 'align'));\n\t\t\tselectByValue(f, 'class_list', dom.getAttrib(n, 'class'), true, true);\n\t\t\tnl.style.value = dom.getAttrib(n, 'style');\n\t\t\tnl.id.value = dom.getAttrib(n, 'id');\n\t\t\tnl.dir.value = dom.getAttrib(n, 'dir');\n\t\t\tnl.lang.value = dom.getAttrib(n, 'lang');\n\t\t\tnl.usemap.value = dom.getAttrib(n, 'usemap');\n\t\t\tnl.longdesc.value = dom.getAttrib(n, 'longdesc');\n\t\t\tnl.insert.value = ed.getLang('update');\n\n\t\t\tif (/^\\s*this.src\\s*=\\s*\\'([^\\']+)\\';?\\s*$/.test(dom.getAttrib(n, 'onmouseover')))\n\t\t\t\tnl.onmouseoversrc.value = dom.getAttrib(n, 'onmouseover').replace(/^\\s*this.src\\s*=\\s*\\'([^\\']+)\\';?\\s*$/, '$1');\n\n\t\t\tif (/^\\s*this.src\\s*=\\s*\\'([^\\']+)\\';?\\s*$/.test(dom.getAttrib(n, 'onmouseout')))\n\t\t\t\tnl.onmouseoutsrc.value = dom.getAttrib(n, 'onmouseout').replace(/^\\s*this.src\\s*=\\s*\\'([^\\']+)\\';?\\s*$/, '$1');\n\n\t\t\tif (ed.settings.inline_styles) {\n\t\t\t\t// Move attribs to styles\n\t\t\t\tif (dom.getAttrib(n, 'align'))\n\t\t\t\t\tthis.updateStyle('align');\n\n\t\t\t\tif (dom.getAttrib(n, 'hspace'))\n\t\t\t\t\tthis.updateStyle('hspace');\n\n\t\t\t\tif (dom.getAttrib(n, 'border'))\n\t\t\t\t\tthis.updateStyle('border');\n\n\t\t\t\tif (dom.getAttrib(n, 'vspace'))\n\t\t\t\t\tthis.updateStyle('vspace');\n\t\t\t}\n\t\t}\n\n\t\t// Setup browse button\n\t\tdocument.getElementById('srcbrowsercontainer').innerHTML = getBrowserHTML('srcbrowser','src','image','theme_advanced_image');\n\t\tif (isVisible('srcbrowser'))\n\t\t\tdocument.getElementById('src').style.width = '260px';\n\n\t\t// Setup browse button\n\t\tdocument.getElementById('onmouseoversrccontainer').innerHTML = getBrowserHTML('overbrowser','onmouseoversrc','image','theme_advanced_image');\n\t\tif (isVisible('overbrowser'))\n\t\t\tdocument.getElementById('onmouseoversrc').style.width = '260px';\n\n\t\t// Setup browse button\n\t\tdocument.getElementById('onmouseoutsrccontainer').innerHTML = getBrowserHTML('outbrowser','onmouseoutsrc','image','theme_advanced_image');\n\t\tif (isVisible('outbrowser'))\n\t\t\tdocument.getElementById('onmouseoutsrc').style.width = '260px';\n\n\t\t// If option enabled default contrain proportions to checked\n\t\tif (ed.getParam(\"advimage_constrain_proportions\", true))\n\t\t\tf.constrain.checked = true;\n\n\t\t// Check swap image if valid data\n\t\tif (nl.onmouseoversrc.value || nl.onmouseoutsrc.value)\n\t\t\tthis.setSwapImage(true);\n\t\telse\n\t\t\tthis.setSwapImage(false);\n\n\t\tthis.changeAppearance();\n\t\tthis.showPreviewImage(nl.src.value, 1);\n\t},\n\n\tinsert : function(file, title) {\n\t\tvar ed = tinyMCEPopup.editor, t = this, f = document.forms[0];\n\n\t\tif (f.src.value === '') {\n\t\t\tif (ed.selection.getNode().nodeName == 'IMG') {\n\t\t\t\ted.dom.remove(ed.selection.getNode());\n\t\t\t\ted.execCommand('mceRepaint');\n\t\t\t}\n\n\t\t\ttinyMCEPopup.close();\n\t\t\treturn;\n\t\t}\n\n\t\tif (tinyMCEPopup.getParam(\"accessibility_warnings\", 1)) {\n\t\t\tif (!f.alt.value) {\n\t\t\t\ttinyMCEPopup.confirm(tinyMCEPopup.getLang('advimage_dlg.missing_alt'), function(s) {\n\t\t\t\t\tif (s)\n\t\t\t\t\t\tt.insertAndClose();\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tt.insertAndClose();\n\t},\n\n\tinsertAndClose : function() {\n\t\tvar ed = tinyMCEPopup.editor, f = document.forms[0], nl = f.elements, v, args = {}, el;\n\n\t\ttinyMCEPopup.restoreSelection();\n\n\t\t// Fixes crash in Safari\n\t\tif (tinymce.isWebKit)\n\t\t\ted.getWin().focus();\n\n\t\tif (!ed.settings.inline_styles) {\n\t\t\targs = {\n\t\t\t\tvspace : nl.vspace.value,\n\t\t\t\thspace : nl.hspace.value,\n\t\t\t\tborder : nl.border.value,\n\t\t\t\talign : getSelectValue(f, 'align')\n\t\t\t};\n\t\t} else {\n\t\t\t// Remove deprecated values\n\t\t\targs = {\n\t\t\t\tvspace : '',\n\t\t\t\thspace : '',\n\t\t\t\tborder : '',\n\t\t\t\talign : ''\n\t\t\t};\n\t\t}\n\n\t\ttinymce.extend(args, {\n\t\t\tsrc : nl.src.value.replace(/ /g, '%20'),\n\t\t\twidth : nl.width.value,\n\t\t\theight : nl.height.value,\n\t\t\talt : nl.alt.value,\n\t\t\ttitle : nl.title.value,\n\t\t\t'class' : getSelectValue(f, 'class_list'),\n\t\t\tstyle : nl.style.value,\n\t\t\tid : nl.id.value,\n\t\t\tdir : nl.dir.value,\n\t\t\tlang : nl.lang.value,\n\t\t\tusemap : nl.usemap.value,\n\t\t\tlongdesc : nl.longdesc.value\n\t\t});\n\n\t\targs.onmouseover = args.onmouseout = '';\n\n\t\tif (f.onmousemovecheck.checked) {\n\t\t\tif (nl.onmouseoversrc.value)\n\t\t\t\targs.onmouseover = \"this.src='\" + nl.onmouseoversrc.value + \"';\";\n\n\t\t\tif (nl.onmouseoutsrc.value)\n\t\t\t\targs.onmouseout = \"this.src='\" + nl.onmouseoutsrc.value + \"';\";\n\t\t}\n\n\t\tel = ed.selection.getNode();\n\n\t\tif (el && el.nodeName == 'IMG') {\n\t\t\ted.dom.setAttribs(el, args);\n\t\t} else {\n\t\t\ttinymce.each(args, function(value, name) {\n\t\t\t\tif (value === \"\") {\n\t\t\t\t\tdelete args[name];\n\t\t\t\t}\n\t\t\t});\n\n\t\t\ted.execCommand('mceInsertContent', false, tinyMCEPopup.editor.dom.createHTML('img', args), {skip_undo : 1});\n\t\t\ted.undoManager.add();\n\t\t}\n\n\t\ttinyMCEPopup.editor.execCommand('mceRepaint');\n\t\ttinyMCEPopup.editor.focus();\n\t\ttinyMCEPopup.close();\n\t\ted.onChange.dispatch(ed);\n\t},\n\n\tgetAttrib : function(e, at) {\n\t\tvar ed = tinyMCEPopup.editor, dom = ed.dom, v, v2;\n\n\t\tif (ed.settings.inline_styles) {\n\t\t\tswitch (at) {\n\t\t\t\tcase 'align':\n\t\t\t\t\tif (v = dom.getStyle(e, 'float'))\n\t\t\t\t\t\treturn v;\n\n\t\t\t\t\tif (v = dom.getStyle(e, 'vertical-align'))\n\t\t\t\t\t\treturn v;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'hspace':\n\t\t\t\t\tv = dom.getStyle(e, 'margin-left')\n\t\t\t\t\tv2 = dom.getStyle(e, 'margin-right');\n\n\t\t\t\t\tif (v && v == v2)\n\t\t\t\t\t\treturn parseInt(v.replace(/[^0-9]/g, ''));\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'vspace':\n\t\t\t\t\tv = dom.getStyle(e, 'margin-top')\n\t\t\t\t\tv2 = dom.getStyle(e, 'margin-bottom');\n\t\t\t\t\tif (v && v == v2)\n\t\t\t\t\t\treturn parseInt(v.replace(/[^0-9]/g, ''));\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'border':\n\t\t\t\t\tv = 0;\n\n\t\t\t\t\ttinymce.each(['top', 'right', 'bottom', 'left'], function(sv) {\n\t\t\t\t\t\tsv = dom.getStyle(e, 'border-' + sv + '-width');\n\n\t\t\t\t\t\t// False or not the same as prev\n\t\t\t\t\t\tif (!sv || (sv != v && v !== 0)) {\n\t\t\t\t\t\t\tv = 0;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (sv)\n\t\t\t\t\t\t\tv = sv;\n\t\t\t\t\t});\n\n\t\t\t\t\tif (v)\n\t\t\t\t\t\treturn parseInt(v.replace(/[^0-9]/g, ''));\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (v = dom.getAttrib(e, at))\n\t\t\treturn v;\n\n\t\treturn '';\n\t},\n\n\tsetSwapImage : function(st) {\n\t\tvar f = document.forms[0];\n\n\t\tf.onmousemovecheck.checked = st;\n\t\tsetBrowserDisabled('overbrowser', !st);\n\t\tsetBrowserDisabled('outbrowser', !st);\n\n\t\tif (f.over_list)\n\t\t\tf.over_list.disabled = !st;\n\n\t\tif (f.out_list)\n\t\t\tf.out_list.disabled = !st;\n\n\t\tf.onmouseoversrc.disabled = !st;\n\t\tf.onmouseoutsrc.disabled  = !st;\n\t},\n\n\tfillClassList : function(id) {\n\t\tvar dom = tinyMCEPopup.dom, lst = dom.get(id), v, cl;\n\n\t\tif (v = tinyMCEPopup.getParam('theme_advanced_styles')) {\n\t\t\tcl = [];\n\n\t\t\ttinymce.each(v.split(';'), function(v) {\n\t\t\t\tvar p = v.split('=');\n\n\t\t\t\tcl.push({'title' : p[0], 'class' : p[1]});\n\t\t\t});\n\t\t} else\n\t\t\tcl = tinyMCEPopup.editor.dom.getClasses();\n\n\t\tif (cl.length > 0) {\n\t\t\tlst.options.length = 0;\n\t\t\tlst.options[lst.options.length] = new Option(tinyMCEPopup.getLang('not_set'), '');\n\n\t\t\ttinymce.each(cl, function(o) {\n\t\t\t\tlst.options[lst.options.length] = new Option(o.title || o['class'], o['class']);\n\t\t\t});\n\t\t} else\n\t\t\tdom.remove(dom.getParent(id, 'tr'));\n\t},\n\n\tfillFileList : function(id, l) {\n\t\tvar dom = tinyMCEPopup.dom, lst = dom.get(id), v, cl;\n\n\t\tl = typeof(l) === 'function' ? l() : window[l];\n\t\tlst.options.length = 0;\n\n\t\tif (l && l.length > 0) {\n\t\t\tlst.options[lst.options.length] = new Option('', '');\n\n\t\t\ttinymce.each(l, function(o) {\n\t\t\t\tlst.options[lst.options.length] = new Option(o[0], o[1]);\n\t\t\t});\n\t\t} else\n\t\t\tdom.remove(dom.getParent(id, 'tr'));\n\t},\n\n\tresetImageData : function() {\n\t\tvar f = document.forms[0];\n\n\t\tf.elements.width.value = f.elements.height.value = '';\n\t},\n\n\tupdateImageData : function(img, st) {\n\t\tvar f = document.forms[0];\n\n\t\tif (!st) {\n\t\t\tf.elements.width.value = img.width;\n\t\t\tf.elements.height.value = img.height;\n\t\t}\n\n\t\tthis.preloadImg = img;\n\t},\n\n\tchangeAppearance : function() {\n\t\tvar ed = tinyMCEPopup.editor, f = document.forms[0], img = document.getElementById('alignSampleImg');\n\n\t\tif (img) {\n\t\t\tif (ed.getParam('inline_styles')) {\n\t\t\t\ted.dom.setAttrib(img, 'style', f.style.value);\n\t\t\t} else {\n\t\t\t\timg.align = f.align.value;\n\t\t\t\timg.border = f.border.value;\n\t\t\t\timg.hspace = f.hspace.value;\n\t\t\t\timg.vspace = f.vspace.value;\n\t\t\t}\n\t\t}\n\t},\n\n\tchangeHeight : function() {\n\t\tvar f = document.forms[0], tp, t = this;\n\n\t\tif (!f.constrain.checked || !t.preloadImg) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (f.width.value == \"\" || f.height.value == \"\")\n\t\t\treturn;\n\n\t\ttp = (parseInt(f.width.value) / parseInt(t.preloadImg.width)) * t.preloadImg.height;\n\t\tf.height.value = tp.toFixed(0);\n\t},\n\n\tchangeWidth : function() {\n\t\tvar f = document.forms[0], tp, t = this;\n\n\t\tif (!f.constrain.checked || !t.preloadImg) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (f.width.value == \"\" || f.height.value == \"\")\n\t\t\treturn;\n\n\t\ttp = (parseInt(f.height.value) / parseInt(t.preloadImg.height)) * t.preloadImg.width;\n\t\tf.width.value = tp.toFixed(0);\n\t},\n\n\tupdateStyle : function(ty) {\n\t\tvar dom = tinyMCEPopup.dom, b, bStyle, bColor, v, isIE = tinymce.isIE, f = document.forms[0], img = dom.create('img', {style : dom.get('style').value});\n\n\t\tif (tinyMCEPopup.editor.settings.inline_styles) {\n\t\t\t// Handle align\n\t\t\tif (ty == 'align') {\n\t\t\t\tdom.setStyle(img, 'float', '');\n\t\t\t\tdom.setStyle(img, 'vertical-align', '');\n\n\t\t\t\tv = getSelectValue(f, 'align');\n\t\t\t\tif (v) {\n\t\t\t\t\tif (v == 'left' || v == 'right')\n\t\t\t\t\t\tdom.setStyle(img, 'float', v);\n\t\t\t\t\telse\n\t\t\t\t\t\timg.style.verticalAlign = v;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Handle border\n\t\t\tif (ty == 'border') {\n\t\t\t\tb = img.style.border ? img.style.border.split(' ') : [];\n\t\t\t\tbStyle = dom.getStyle(img, 'border-style');\n\t\t\t\tbColor = dom.getStyle(img, 'border-color');\n\n\t\t\t\tdom.setStyle(img, 'border', '');\n\n\t\t\t\tv = f.border.value;\n\t\t\t\tif (v || v == '0') {\n\t\t\t\t\tif (v == '0')\n\t\t\t\t\t\timg.style.border = isIE ? '0' : '0 none none';\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (b.length == 3 && b[isIE ? 2 : 1])\n\t\t\t\t\t\t\tbStyle = b[isIE ? 2 : 1];\n\t\t\t\t\t\telse if (!bStyle || bStyle == 'none')\n\t\t\t\t\t\t\tbStyle = 'solid';\n\t\t\t\t\t\tif (b.length == 3 && b[isIE ? 0 : 2])\n\t\t\t\t\t\t\tbColor = b[isIE ? 0 : 2];\n\t\t\t\t\t\telse if (!bColor || bColor == 'none')\n\t\t\t\t\t\t\tbColor = 'black';\n\t\t\t\t\t\timg.style.border = v + 'px ' + bStyle + ' ' + bColor;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Handle hspace\n\t\t\tif (ty == 'hspace') {\n\t\t\t\tdom.setStyle(img, 'marginLeft', '');\n\t\t\t\tdom.setStyle(img, 'marginRight', '');\n\n\t\t\t\tv = f.hspace.value;\n\t\t\t\tif (v) {\n\t\t\t\t\timg.style.marginLeft = v + 'px';\n\t\t\t\t\timg.style.marginRight = v + 'px';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Handle vspace\n\t\t\tif (ty == 'vspace') {\n\t\t\t\tdom.setStyle(img, 'marginTop', '');\n\t\t\t\tdom.setStyle(img, 'marginBottom', '');\n\n\t\t\t\tv = f.vspace.value;\n\t\t\t\tif (v) {\n\t\t\t\t\timg.style.marginTop = v + 'px';\n\t\t\t\t\timg.style.marginBottom = v + 'px';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Merge\n\t\t\tdom.get('style').value = dom.serializeStyle(dom.parseStyle(img.style.cssText), 'img');\n\t\t}\n\t},\n\n\tchangeMouseMove : function() {\n\t},\n\n\tshowPreviewImage : function(u, st) {\n\t\tif (!u) {\n\t\t\ttinyMCEPopup.dom.setHTML('prev', '');\n\t\t\treturn;\n\t\t}\n\n\t\tif (!st && tinyMCEPopup.getParam(\"advimage_update_dimensions_onchange\", true))\n\t\t\tthis.resetImageData();\n\n\t\tu = tinyMCEPopup.editor.documentBaseURI.toAbsolute(u);\n\n\t\tif (!st)\n\t\t\ttinyMCEPopup.dom.setHTML('prev', '<img id=\"previewImg\" src=\"' + u + '\" border=\"0\" onload=\"ImageDialog.updateImageData(this);\" onerror=\"ImageDialog.resetImageData();\" />');\n\t\telse\n\t\t\ttinyMCEPopup.dom.setHTML('prev', '<img id=\"previewImg\" src=\"' + u + '\" border=\"0\" onload=\"ImageDialog.updateImageData(this, 1);\" />');\n\t}\n};\n\nImageDialog.preInit();\ntinyMCEPopup.onInit.add(ImageDialog.init, ImageDialog);\n","Magento_Tinymce3/tiny_mce/plugins/advimage/langs/en_dlg.js":"tinyMCE.addI18n('en.advimage_dlg',{\"image_list\":\"Image List\",\"align_right\":\"Right\",\"align_left\":\"Left\",\"align_textbottom\":\"Text Bottom\",\"align_texttop\":\"Text Top\",\"align_bottom\":\"Bottom\",\"align_middle\":\"Middle\",\"align_top\":\"Top\",\"align_baseline\":\"Baseline\",align:\"Alignment\",hspace:\"Horizontal Space\",vspace:\"Vertical Space\",dimensions:\"Dimensions\",border:\"Border\",list:\"Image List\",alt:\"Image Description\",src:\"Image URL\",\"dialog_title\":\"Insert/Edit Image\",\"missing_alt\":\"Are you sure you want to continue without including an Image Description? Without it the image may not be accessible to some users with disabilities, or to those using a text browser, or browsing the Web with images turned off.\",\"example_img\":\"Appearance Preview Image\",misc:\"Miscellaneous\",mouseout:\"For Mouse Out\",mouseover:\"For Mouse Over\",\"alt_image\":\"Alternative Image\",\"swap_image\":\"Swap Image\",map:\"Image Map\",id:\"ID\",rtl:\"Right to Left\",ltr:\"Left to Right\",classes:\"Classes\",style:\"Style\",\"long_desc\":\"Long Description Link\",langcode:\"Language Code\",langdir:\"Language Direction\",\"constrain_proportions\":\"Constrain Proportions\",preview:\"Preview\",title:\"Title\",general:\"General\",\"tab_advanced\":\"Advanced\",\"tab_appearance\":\"Appearance\",\"tab_general\":\"General\",width:\"Width\",height:\"Height\"});","Magento_Tinymce3/tiny_mce/plugins/pagebreak/editor_plugin_src.js":"/**\n * editor_plugin_src.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function() {\n\ttinymce.create('tinymce.plugins.PageBreakPlugin', {\n\t\tinit : function(ed, url) {\n\t\t\tvar pb = '<img src=\"' + ed.theme.url + '/img/trans.gif\" class=\"mcePageBreak mceItemNoResize\" />', cls = 'mcePageBreak', sep = ed.getParam('pagebreak_separator', '<!-- pagebreak -->'), pbRE;\n\n\t\t\tpbRE = new RegExp(sep.replace(/[\\?\\.\\*\\[\\]\\(\\)\\{\\}\\+\\^\\$\\:]/g, function(a) {return '\\\\' + a;}), 'g');\n\n\t\t\t// Register commands\n\t\t\ted.addCommand('mcePageBreak', function() {\n\t\t\t\ted.execCommand('mceInsertContent', 0, pb);\n\t\t\t});\n\n\t\t\t// Register buttons\n\t\t\ted.addButton('pagebreak', {title : 'pagebreak.desc', cmd : cls});\n\n\t\t\ted.onInit.add(function() {\n\t\t\t\tif (ed.theme.onResolveName) {\n\t\t\t\t\ted.theme.onResolveName.add(function(th, o) {\n\t\t\t\t\t\tif (o.node.nodeName == 'IMG' && ed.dom.hasClass(o.node, cls))\n\t\t\t\t\t\t\to.name = 'pagebreak';\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\ted.onClick.add(function(ed, e) {\n\t\t\t\te = e.target;\n\n\t\t\t\tif (e.nodeName === 'IMG' && ed.dom.hasClass(e, cls))\n\t\t\t\t\ted.selection.select(e);\n\t\t\t});\n\n\t\t\ted.onNodeChange.add(function(ed, cm, n) {\n\t\t\t\tcm.setActive('pagebreak', n.nodeName === 'IMG' && ed.dom.hasClass(n, cls));\n\t\t\t});\n\n\t\t\ted.onBeforeSetContent.add(function(ed, o) {\n\t\t\t\to.content = o.content.replace(pbRE, pb);\n\t\t\t});\n\n\t\t\ted.onPostProcess.add(function(ed, o) {\n\t\t\t\tif (o.get)\n\t\t\t\t\to.content = o.content.replace(/<img[^>]+>/g, function(im) {\n\t\t\t\t\t\tif (im.indexOf('class=\"mcePageBreak') !== -1)\n\t\t\t\t\t\t\tim = sep;\n\n\t\t\t\t\t\treturn im;\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\tgetInfo : function() {\n\t\t\treturn {\n\t\t\t\tlongname : 'PageBreak',\n\t\t\t\tauthor : 'Moxiecode Systems AB',\n\t\t\t\tauthorurl : 'http://tinymce.moxiecode.com',\n\t\t\t\tinfourl : 'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/pagebreak',\n\t\t\t\tversion : tinymce.majorVersion + \".\" + tinymce.minorVersion\n\t\t\t};\n\t\t}\n\t});\n\n\t// Register plugin\n\ttinymce.PluginManager.add('pagebreak', tinymce.plugins.PageBreakPlugin);\n})();","Magento_Tinymce3/tiny_mce/plugins/pagebreak/editor_plugin.js":"(function(){tinymce.create(\"tinymce.plugins.PageBreakPlugin\",{init:function(b,d){var f='<img src=\"'+b.theme.url+'/img/trans.gif\" class=\"mcePageBreak mceItemNoResize\" />',a=\"mcePageBreak\",c=b.getParam(\"pagebreak_separator\",\"<!-- pagebreak -->\"),e;e=new RegExp(c.replace(/[\\?\\.\\*\\[\\]\\(\\)\\{\\}\\+\\^\\$\\:]/g,function(g){return\"\\\\\"+g}),\"g\");b.addCommand(\"mcePageBreak\",function(){b.execCommand(\"mceInsertContent\",0,f)});b.addButton(\"pagebreak\",{title:\"pagebreak.desc\",cmd:a});b.onInit.add(function(){if(b.theme.onResolveName){b.theme.onResolveName.add(function(g,h){if(h.node.nodeName==\"IMG\"&&b.dom.hasClass(h.node,a)){h.name=\"pagebreak\"}})}});b.onClick.add(function(g,h){h=h.target;if(h.nodeName===\"IMG\"&&g.dom.hasClass(h,a)){g.selection.select(h)}});b.onNodeChange.add(function(h,g,i){g.setActive(\"pagebreak\",i.nodeName===\"IMG\"&&h.dom.hasClass(i,a))});b.onBeforeSetContent.add(function(g,h){h.content=h.content.replace(e,f)});b.onPostProcess.add(function(g,h){if(h.get){h.content=h.content.replace(/<img[^>]+>/g,function(i){if(i.indexOf('class=\"mcePageBreak')!==-1){i=c}return i})}})},getInfo:function(){return{longname:\"PageBreak\",author:\"Moxiecode Systems AB\",authorurl:\"http://tinymce.moxiecode.com\",infourl:\"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/pagebreak\",version:tinymce.majorVersion+\".\"+tinymce.minorVersion}}});tinymce.PluginManager.add(\"pagebreak\",tinymce.plugins.PageBreakPlugin)})();","Magento_Tinymce3/tiny_mce/plugins/fullpage/editor_plugin_src.js":"/**\n * editor_plugin_src.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function() {\n\tvar each = tinymce.each, Node = tinymce.html.Node;\n\n\ttinymce.create('tinymce.plugins.FullPagePlugin', {\n\t\tinit : function(ed, url) {\n\t\t\tvar t = this;\n\n\t\t\tt.editor = ed;\n\n\t\t\t// Register commands\n\t\t\ted.addCommand('mceFullPageProperties', function() {\n\t\t\t\ted.windowManager.open({\n\t\t\t\t\tfile : url + '/fullpage.htm',\n\t\t\t\t\twidth : 430 + parseInt(ed.getLang('fullpage.delta_width', 0)),\n\t\t\t\t\theight : 495 + parseInt(ed.getLang('fullpage.delta_height', 0)),\n\t\t\t\t\tinline : 1\n\t\t\t\t}, {\n\t\t\t\t\tplugin_url : url,\n\t\t\t\t\tdata : t._htmlToData()\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Register buttons\n\t\t\ted.addButton('fullpage', {title : 'fullpage.desc', cmd : 'mceFullPageProperties'});\n\n\t\t\ted.onBeforeSetContent.add(t._setContent, t);\n\t\t\ted.onGetContent.add(t._getContent, t);\n\t\t},\n\n\t\tgetInfo : function() {\n\t\t\treturn {\n\t\t\t\tlongname : 'Fullpage',\n\t\t\t\tauthor : 'Moxiecode Systems AB',\n\t\t\t\tauthorurl : 'http://tinymce.moxiecode.com',\n\t\t\t\tinfourl : 'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/fullpage',\n\t\t\t\tversion : tinymce.majorVersion + \".\" + tinymce.minorVersion\n\t\t\t};\n\t\t},\n\n\t\t// Private plugin internal methods\n\n\t\t_htmlToData : function() {\n\t\t\tvar headerFragment = this._parseHeader(), data = {}, nodes, elm, matches, editor = this.editor;\n\n\t\t\tfunction getAttr(elm, name) {\n\t\t\t\tvar value = elm.attr(name);\n\n\t\t\t\treturn value || '';\n\t\t\t};\n\n\t\t\t// Default some values\n\t\t\tdata.fontface = editor.getParam(\"fullpage_default_fontface\", \"\");\n\t\t\tdata.fontsize = editor.getParam(\"fullpage_default_fontsize\", \"\");\n\n\t\t\t// Parse XML PI\n\t\t\telm = headerFragment.firstChild;\n\t\t\tif (elm.type == 7) {\n\t\t\t\tdata.xml_pi = true;\n\t\t\t\tmatches = /encoding=\"([^\"]+)\"/.exec(elm.value);\n\t\t\t\tif (matches)\n\t\t\t\t\tdata.docencoding = matches[1];\n\t\t\t}\n\n\t\t\t// Parse doctype\n\t\t\telm = headerFragment.getAll('#doctype')[0];\n\t\t\tif (elm)\n\t\t\t\tdata.doctype = '<!DOCTYPE' + elm.value + \">\"; \n\n\t\t\t// Parse title element\n\t\t\telm = headerFragment.getAll('title')[0];\n\t\t\tif (elm && elm.firstChild) {\n\t\t\t\tdata.metatitle = elm.firstChild.value;\n\t\t\t}\n\n\t\t\t// Parse meta elements\n\t\t\teach(headerFragment.getAll('meta'), function(meta) {\n\t\t\t\tvar name = meta.attr('name'), httpEquiv = meta.attr('http-equiv'), matches;\n\n\t\t\t\tif (name)\n\t\t\t\t\tdata['meta' + name.toLowerCase()] = meta.attr('content');\n\t\t\t\telse if (httpEquiv == \"Content-Type\") {\n\t\t\t\t\tmatches = /charset\\s*=\\s*(.*)\\s*/gi.exec(meta.attr('content'));\n\n\t\t\t\t\tif (matches)\n\t\t\t\t\t\tdata.docencoding = matches[1];\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Parse html attribs\n\t\t\telm = headerFragment.getAll('html')[0];\n\t\t\tif (elm)\n\t\t\t\tdata.langcode = getAttr(elm, 'lang') || getAttr(elm, 'xml:lang');\n\t\n\t\t\t// Parse stylesheet\n\t\t\telm = headerFragment.getAll('link')[0];\n\t\t\tif (elm && elm.attr('rel') == 'stylesheet')\n\t\t\t\tdata.stylesheet = elm.attr('href');\n\n\t\t\t// Parse body parts\n\t\t\telm = headerFragment.getAll('body')[0];\n\t\t\tif (elm) {\n\t\t\t\tdata.langdir = getAttr(elm, 'dir');\n\t\t\t\tdata.style = getAttr(elm, 'style');\n\t\t\t\tdata.visited_color = getAttr(elm, 'vlink');\n\t\t\t\tdata.link_color = getAttr(elm, 'link');\n\t\t\t\tdata.active_color = getAttr(elm, 'alink');\n\t\t\t}\n\n\t\t\treturn data;\n\t\t},\n\n\t\t_dataToHtml : function(data) {\n\t\t\tvar headerFragment, headElement, html, elm, value, dom = this.editor.dom;\n\n\t\t\tfunction setAttr(elm, name, value) {\n\t\t\t\telm.attr(name, value ? value : undefined);\n\t\t\t};\n\n\t\t\tfunction addHeadNode(node) {\n\t\t\t\tif (headElement.firstChild)\n\t\t\t\t\theadElement.insert(node, headElement.firstChild);\n\t\t\t\telse\n\t\t\t\t\theadElement.append(node);\n\t\t\t};\n\n\t\t\theaderFragment = this._parseHeader();\n\t\t\theadElement = headerFragment.getAll('head')[0];\n\t\t\tif (!headElement) {\n\t\t\t\telm = headerFragment.getAll('html')[0];\n\t\t\t\theadElement = new Node('head', 1);\n\n\t\t\t\tif (elm.firstChild)\n\t\t\t\t\telm.insert(headElement, elm.firstChild, true);\n\t\t\t\telse\n\t\t\t\t\telm.append(headElement);\n\t\t\t}\n\n\t\t\t// Add/update/remove XML-PI\n\t\t\telm = headerFragment.firstChild;\n\t\t\tif (data.xml_pi) {\n\t\t\t\tvalue = 'version=\"1.0\"';\n\n\t\t\t\tif (data.docencoding)\n\t\t\t\t\tvalue += ' encoding=\"' + data.docencoding + '\"';\n\n\t\t\t\tif (elm.type != 7) {\n\t\t\t\t\telm = new Node('xml', 7);\n\t\t\t\t\theaderFragment.insert(elm, headerFragment.firstChild, true);\n\t\t\t\t}\n\n\t\t\t\telm.value = value;\n\t\t\t} else if (elm && elm.type == 7)\n\t\t\t\telm.remove();\n\n\t\t\t// Add/update/remove doctype\n\t\t\telm = headerFragment.getAll('#doctype')[0];\n\t\t\tif (data.doctype) {\n\t\t\t\tif (!elm) {\n\t\t\t\t\telm = new Node('#doctype', 10);\n\n\t\t\t\t\tif (data.xml_pi)\n\t\t\t\t\t\theaderFragment.insert(elm, headerFragment.firstChild);\n\t\t\t\t\telse\n\t\t\t\t\t\taddHeadNode(elm);\n\t\t\t\t}\n\n\t\t\t\telm.value = data.doctype.substring(9, data.doctype.length - 1);\n\t\t\t} else if (elm)\n\t\t\t\telm.remove();\n\n\t\t\t// Add/update/remove title\n\t\t\telm = headerFragment.getAll('title')[0];\n\t\t\tif (data.metatitle) {\n\t\t\t\tif (!elm) {\n\t\t\t\t\telm = new Node('title', 1);\n\t\t\t\t\telm.append(new Node('#text', 3)).value = data.metatitle;\n\t\t\t\t\taddHeadNode(elm);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add meta encoding\n\t\t\tif (data.docencoding) {\n\t\t\t\telm = null;\n\t\t\t\teach(headerFragment.getAll('meta'), function(meta) {\n\t\t\t\t\tif (meta.attr('http-equiv') == 'Content-Type')\n\t\t\t\t\t\telm = meta;\n\t\t\t\t});\n\n\t\t\t\tif (!elm) {\n\t\t\t\t\telm = new Node('meta', 1);\n\t\t\t\t\telm.attr('http-equiv', 'Content-Type');\n\t\t\t\t\telm.shortEnded = true;\n\t\t\t\t\taddHeadNode(elm);\n\t\t\t\t}\n\n\t\t\t\telm.attr('content', 'text/html; charset=' + data.docencoding);\n\t\t\t}\n\n\t\t\t// Add/update/remove meta\n\t\t\teach('keywords,description,author,copyright,robots'.split(','), function(name) {\n\t\t\t\tvar nodes = headerFragment.getAll('meta'), i, meta, value = data['meta' + name];\n\n\t\t\t\tfor (i = 0; i < nodes.length; i++) {\n\t\t\t\t\tmeta = nodes[i];\n\n\t\t\t\t\tif (meta.attr('name') == name) {\n\t\t\t\t\t\tif (value)\n\t\t\t\t\t\t\tmeta.attr('content', value);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tmeta.remove();\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (value) {\n\t\t\t\t\telm = new Node('meta', 1);\n\t\t\t\t\telm.attr('name', name);\n\t\t\t\t\telm.attr('content', value);\n\t\t\t\t\telm.shortEnded = true;\n\n\t\t\t\t\taddHeadNode(elm);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Add/update/delete link\n\t\t\telm = headerFragment.getAll('link')[0];\n\t\t\tif (elm && elm.attr('rel') == 'stylesheet') {\n\t\t\t\tif (data.stylesheet)\n\t\t\t\t\telm.attr('href', data.stylesheet);\n\t\t\t\telse\n\t\t\t\t\telm.remove();\n\t\t\t} else if (data.stylesheet) {\n\t\t\t\telm = new Node('link', 1);\n\t\t\t\telm.attr({\n\t\t\t\t\trel : 'stylesheet',\n\t\t\t\t\ttext : 'text/css',\n\t\t\t\t\thref : data.stylesheet\n\t\t\t\t});\n\t\t\t\telm.shortEnded = true;\n\n\t\t\t\taddHeadNode(elm);\n\t\t\t}\n\n\t\t\t// Update body attributes\n\t\t\telm = headerFragment.getAll('body')[0];\n\t\t\tif (elm) {\n\t\t\t\tsetAttr(elm, 'dir', data.langdir);\n\t\t\t\tsetAttr(elm, 'style', data.style);\n\t\t\t\tsetAttr(elm, 'vlink', data.visited_color);\n\t\t\t\tsetAttr(elm, 'link', data.link_color);\n\t\t\t\tsetAttr(elm, 'alink', data.active_color);\n\n\t\t\t\t// Update iframe body as well\n\t\t\t\tdom.setAttribs(this.editor.getBody(), {\n\t\t\t\t\tstyle : data.style,\n\t\t\t\t\tdir : data.dir,\n\t\t\t\t\tvLink : data.visited_color,\n\t\t\t\t\tlink : data.link_color,\n\t\t\t\t\taLink : data.active_color\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Set html attributes\n\t\t\telm = headerFragment.getAll('html')[0];\n\t\t\tif (elm) {\n\t\t\t\tsetAttr(elm, 'lang', data.langcode);\n\t\t\t\tsetAttr(elm, 'xml:lang', data.langcode);\n\t\t\t}\n\n\t\t\t// Serialize header fragment and crop away body part\n\t\t\thtml = new tinymce.html.Serializer({\n\t\t\t\tvalidate: false,\n\t\t\t\tindent: true,\n\t\t\t\tapply_source_formatting : true,\n\t\t\t\tindent_before: 'head,html,body,meta,title,script,link,style',\n\t\t\t\tindent_after: 'head,html,body,meta,title,script,link,style'\n\t\t\t}).serialize(headerFragment);\n\n\t\t\tthis.head = html.substring(0, html.indexOf('</body>'));\n\t\t},\n\n\t\t_parseHeader : function() {\n\t\t\t// Parse the contents with a DOM parser\n\t\t\treturn new tinymce.html.DomParser({\n\t\t\t\tvalidate: false,\n\t\t\t\troot_name: '#document'\n\t\t\t}).parse(this.head);\n\t\t},\n\n\t\t_setContent : function(ed, o) {\n\t\t\tvar self = this, startPos, endPos, content = o.content, headerFragment, styles = '', dom = self.editor.dom, elm;\n\n\t\t\tfunction low(s) {\n\t\t\t\treturn s.replace(/<\\/?[A-Z]+/g, function(a) {\n\t\t\t\t\treturn a.toLowerCase();\n\t\t\t\t})\n\t\t\t};\n\n\t\t\t// Ignore raw updated if we already have a head, this will fix issues with undo/redo keeping the head/foot separate\n\t\t\tif (o.format == 'raw' && self.head)\n\t\t\t\treturn;\n\n\t\t\tif (o.source_view && ed.getParam('fullpage_hide_in_source_view'))\n\t\t\t\treturn;\n\n\t\t\t// Parse out head, body and footer\n\t\t\tcontent = content.replace(/<(\\/?)BODY/gi, '<$1body');\n\t\t\tstartPos = content.indexOf('<body');\n\n\t\t\tif (startPos != -1) {\n\t\t\t\tstartPos = content.indexOf('>', startPos);\n\t\t\t\tself.head = low(content.substring(0, startPos + 1));\n\n\t\t\t\tendPos = content.indexOf('</body', startPos);\n\t\t\t\tif (endPos == -1)\n\t\t\t\t\tendPos = content.length;\n\n\t\t\t\to.content = content.substring(startPos + 1, endPos);\n\t\t\t\tself.foot = low(content.substring(endPos));\n\t\t\t} else {\n\t\t\t\tself.head = this._getDefaultHeader();\n\t\t\t\tself.foot = '\\n</body>\\n</html>';\n\t\t\t}\n\n\t\t\t// Parse header and update iframe\n\t\t\theaderFragment = self._parseHeader();\n\t\t\teach(headerFragment.getAll('style'), function(node) {\n\t\t\t\tif (node.firstChild)\n\t\t\t\t\tstyles += node.firstChild.value;\n\t\t\t});\n\n\t\t\telm = headerFragment.getAll('body')[0];\n\t\t\tif (elm) {\n\t\t\t\tdom.setAttribs(self.editor.getBody(), {\n\t\t\t\t\tstyle : elm.attr('style') || '',\n\t\t\t\t\tdir : elm.attr('dir') || '',\n\t\t\t\t\tvLink : elm.attr('vlink') || '',\n\t\t\t\t\tlink : elm.attr('link') || '',\n\t\t\t\t\taLink : elm.attr('alink') || ''\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tdom.remove('fullpage_styles');\n\n\t\t\tif (styles) {\n\t\t\t\tdom.add(self.editor.getDoc().getElementsByTagName('head')[0], 'style', {id : 'fullpage_styles'}, styles);\n\n\t\t\t\t// Needed for IE 6/7\n\t\t\t\telm = dom.get('fullpage_styles');\n\t\t\t\tif (elm.styleSheet)\n\t\t\t\t\telm.styleSheet.cssText = styles;\n\t\t\t}\n\t\t},\n\n\t\t_getDefaultHeader : function() {\n\t\t\tvar header = '', editor = this.editor, value, styles = '';\n\n\t\t\tif (editor.getParam('fullpage_default_xml_pi'))\n\t\t\t\theader += '<?xml version=\"1.0\" encoding=\"' + editor.getParam('fullpage_default_encoding', 'ISO-8859-1') + '\" ?>\\n';\n\n\t\t\theader += editor.getParam('fullpage_default_doctype', '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">');\n\t\t\theader += '\\n<html>\\n<head>\\n';\n\n\t\t\tif (value = editor.getParam('fullpage_default_title'))\n\t\t\t\theader += '<title>' + value + '</title>\\n';\n\n\t\t\tif (value = editor.getParam('fullpage_default_encoding'))\n\t\t\t\theader += '<meta http-equiv=\"Content-Type\" content=\"text/html; charset=' + value + '\" />\\n';\n\n\t\t\tif (value = editor.getParam('fullpage_default_font_family'))\n\t\t\t\tstyles += 'font-family: ' + value + ';';\n\n\t\t\tif (value = editor.getParam('fullpage_default_font_size'))\n\t\t\t\tstyles += 'font-size: ' + value + ';';\n\n\t\t\tif (value = editor.getParam('fullpage_default_text_color'))\n\t\t\t\tstyles += 'color: ' + value + ';';\n\n\t\t\theader += '</head>\\n<body' + (styles ? ' style=\"' + styles + '\"' : '') + '>\\n';\n\n\t\t\treturn header;\n\t\t},\n\n\t\t_getContent : function(ed, o) {\n\t\t\tvar self = this;\n\n\t\t\tif (!o.source_view || !ed.getParam('fullpage_hide_in_source_view'))\n\t\t\t\to.content = tinymce.trim(self.head) + '\\n' + tinymce.trim(o.content) + '\\n' + tinymce.trim(self.foot);\n\t\t}\n\t});\n\n\t// Register plugin\n\ttinymce.PluginManager.add('fullpage', tinymce.plugins.FullPagePlugin);\n})();\n","Magento_Tinymce3/tiny_mce/plugins/fullpage/editor_plugin.js":"(function(){var b=tinymce.each,a=tinymce.html.Node;tinymce.create(\"tinymce.plugins.FullPagePlugin\",{init:function(c,d){var e=this;e.editor=c;c.addCommand(\"mceFullPageProperties\",function(){c.windowManager.open({file:d+\"/fullpage.htm\",width:430+parseInt(c.getLang(\"fullpage.delta_width\",0)),height:495+parseInt(c.getLang(\"fullpage.delta_height\",0)),inline:1},{plugin_url:d,data:e._htmlToData()})});c.addButton(\"fullpage\",{title:\"fullpage.desc\",cmd:\"mceFullPageProperties\"});c.onBeforeSetContent.add(e._setContent,e);c.onGetContent.add(e._getContent,e)},getInfo:function(){return{longname:\"Fullpage\",author:\"Moxiecode Systems AB\",authorurl:\"http://tinymce.moxiecode.com\",infourl:\"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/fullpage\",version:tinymce.majorVersion+\".\"+tinymce.minorVersion}},_htmlToData:function(){var f=this._parseHeader(),h={},c,i,g,e=this.editor;function d(l,j){var k=l.attr(j);return k||\"\"}h.fontface=e.getParam(\"fullpage_default_fontface\",\"\");h.fontsize=e.getParam(\"fullpage_default_fontsize\",\"\");i=f.firstChild;if(i.type==7){h.xml_pi=true;g=/encoding=\"([^\"]+)\"/.exec(i.value);if(g){h.docencoding=g[1]}}i=f.getAll(\"#doctype\")[0];if(i){h.doctype=\"<!DOCTYPE\"+i.value+\">\"}i=f.getAll(\"title\")[0];if(i&&i.firstChild){h.metatitle=i.firstChild.value}b(f.getAll(\"meta\"),function(m){var k=m.attr(\"name\"),j=m.attr(\"http-equiv\"),l;if(k){h[\"meta\"+k.toLowerCase()]=m.attr(\"content\")}else{if(j==\"Content-Type\"){l=/charset\\s*=\\s*(.*)\\s*/gi.exec(m.attr(\"content\"));if(l){h.docencoding=l[1]}}}});i=f.getAll(\"html\")[0];if(i){h.langcode=d(i,\"lang\")||d(i,\"xml:lang\")}i=f.getAll(\"link\")[0];if(i&&i.attr(\"rel\")==\"stylesheet\"){h.stylesheet=i.attr(\"href\")}i=f.getAll(\"body\")[0];if(i){h.langdir=d(i,\"dir\");h.style=d(i,\"style\");h.visited_color=d(i,\"vlink\");h.link_color=d(i,\"link\");h.active_color=d(i,\"alink\")}return h},_dataToHtml:function(g){var f,d,h,j,k,e=this.editor.dom;function c(n,l,m){n.attr(l,m?m:undefined)}function i(l){if(d.firstChild){d.insert(l,d.firstChild)}else{d.append(l)}}f=this._parseHeader();d=f.getAll(\"head\")[0];if(!d){j=f.getAll(\"html\")[0];d=new a(\"head\",1);if(j.firstChild){j.insert(d,j.firstChild,true)}else{j.append(d)}}j=f.firstChild;if(g.xml_pi){k='version=\"1.0\"';if(g.docencoding){k+=' encoding=\"'+g.docencoding+'\"'}if(j.type!=7){j=new a(\"xml\",7);f.insert(j,f.firstChild,true)}j.value=k}else{if(j&&j.type==7){j.remove()}}j=f.getAll(\"#doctype\")[0];if(g.doctype){if(!j){j=new a(\"#doctype\",10);if(g.xml_pi){f.insert(j,f.firstChild)}else{i(j)}}j.value=g.doctype.substring(9,g.doctype.length-1)}else{if(j){j.remove()}}j=f.getAll(\"title\")[0];if(g.metatitle){if(!j){j=new a(\"title\",1);j.append(new a(\"#text\",3)).value=g.metatitle;i(j)}}if(g.docencoding){j=null;b(f.getAll(\"meta\"),function(l){if(l.attr(\"http-equiv\")==\"Content-Type\"){j=l}});if(!j){j=new a(\"meta\",1);j.attr(\"http-equiv\",\"Content-Type\");j.shortEnded=true;i(j)}j.attr(\"content\",\"text/html; charset=\"+g.docencoding)}b(\"keywords,description,author,copyright,robots\".split(\",\"),function(m){var l=f.getAll(\"meta\"),n,p,o=g[\"meta\"+m];for(n=0;n<l.length;n++){p=l[n];if(p.attr(\"name\")==m){if(o){p.attr(\"content\",o)}else{p.remove()}return}}if(o){j=new a(\"meta\",1);j.attr(\"name\",m);j.attr(\"content\",o);j.shortEnded=true;i(j)}});j=f.getAll(\"link\")[0];if(j&&j.attr(\"rel\")==\"stylesheet\"){if(g.stylesheet){j.attr(\"href\",g.stylesheet)}else{j.remove()}}else{if(g.stylesheet){j=new a(\"link\",1);j.attr({rel:\"stylesheet\",text:\"text/css\",href:g.stylesheet});j.shortEnded=true;i(j)}}j=f.getAll(\"body\")[0];if(j){c(j,\"dir\",g.langdir);c(j,\"style\",g.style);c(j,\"vlink\",g.visited_color);c(j,\"link\",g.link_color);c(j,\"alink\",g.active_color);e.setAttribs(this.editor.getBody(),{style:g.style,dir:g.dir,vLink:g.visited_color,link:g.link_color,aLink:g.active_color})}j=f.getAll(\"html\")[0];if(j){c(j,\"lang\",g.langcode);c(j,\"xml:lang\",g.langcode)}h=new tinymce.html.Serializer({validate:false,indent:true,apply_source_formatting:true,indent_before:\"head,html,body,meta,title,script,link,style\",indent_after:\"head,html,body,meta,title,script,link,style\"}).serialize(f);this.head=h.substring(0,h.indexOf(\"</body>\"))},_parseHeader:function(){return new tinymce.html.DomParser({validate:false,root_name:\"#document\"}).parse(this.head)},_setContent:function(g,d){var m=this,i,c,h=d.content,f,l=\"\",e=m.editor.dom,j;function k(n){return n.replace(/<\\/?[A-Z]+/g,function(o){return o.toLowerCase()})}if(d.format==\"raw\"&&m.head){return}if(d.source_view&&g.getParam(\"fullpage_hide_in_source_view\")){return}h=h.replace(/<(\\/?)BODY/gi,\"<$1body\");i=h.indexOf(\"<body\");if(i!=-1){i=h.indexOf(\">\",i);m.head=k(h.substring(0,i+1));c=h.indexOf(\"</body\",i);if(c==-1){c=h.length}d.content=h.substring(i+1,c);m.foot=k(h.substring(c))}else{m.head=this._getDefaultHeader();m.foot=\"\\n</body>\\n</html>\"}f=m._parseHeader();b(f.getAll(\"style\"),function(n){if(n.firstChild){l+=n.firstChild.value}});j=f.getAll(\"body\")[0];if(j){e.setAttribs(m.editor.getBody(),{style:j.attr(\"style\")||\"\",dir:j.attr(\"dir\")||\"\",vLink:j.attr(\"vlink\")||\"\",link:j.attr(\"link\")||\"\",aLink:j.attr(\"alink\")||\"\"})}e.remove(\"fullpage_styles\");if(l){e.add(m.editor.getDoc().getElementsByTagName(\"head\")[0],\"style\",{id:\"fullpage_styles\"},l);j=e.get(\"fullpage_styles\");if(j.styleSheet){j.styleSheet.cssText=l}}},_getDefaultHeader:function(){var f=\"\",c=this.editor,e,d=\"\";if(c.getParam(\"fullpage_default_xml_pi\")){f+='<?xml version=\"1.0\" encoding=\"'+c.getParam(\"fullpage_default_encoding\",\"ISO-8859-1\")+'\" ?>\\n'}f+=c.getParam(\"fullpage_default_doctype\",'<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">');f+=\"\\n<html>\\n<head>\\n\";if(e=c.getParam(\"fullpage_default_title\")){f+=\"<title>\"+e+\"</title>\\n\"}if(e=c.getParam(\"fullpage_default_encoding\")){f+='<meta http-equiv=\"Content-Type\" content=\"text/html; charset='+e+'\" />\\n'}if(e=c.getParam(\"fullpage_default_font_family\")){d+=\"font-family: \"+e+\";\"}if(e=c.getParam(\"fullpage_default_font_size\")){d+=\"font-size: \"+e+\";\"}if(e=c.getParam(\"fullpage_default_text_color\")){d+=\"color: \"+e+\";\"}f+=\"</head>\\n<body\"+(d?' style=\"'+d+'\"':\"\")+\">\\n\";return f},_getContent:function(d,e){var c=this;if(!e.source_view||!d.getParam(\"fullpage_hide_in_source_view\")){e.content=tinymce.trim(c.head)+\"\\n\"+tinymce.trim(e.content)+\"\\n\"+tinymce.trim(c.foot)}}});tinymce.PluginManager.add(\"fullpage\",tinymce.plugins.FullPagePlugin)})();","Magento_Tinymce3/tiny_mce/plugins/fullpage/js/fullpage.js":"/**\n * fullpage.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function() {\n\ttinyMCEPopup.requireLangPack();\n\n\tvar defaultDocTypes = \n\t\t'XHTML 1.0 Transitional=<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">,' +\n\t\t'XHTML 1.0 Frameset=<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Frameset//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd\">,' +\n\t\t'XHTML 1.0 Strict=<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">,' +\n\t\t'XHTML 1.1=<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.1//EN\" \"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd\">,' +\n\t\t'HTML 4.01 Transitional=<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\">,' +\n\t\t'HTML 4.01 Strict=<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\">,' +\n\t\t'HTML 4.01 Frameset=<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Frameset//EN\" \"http://www.w3.org/TR/html4/frameset.dtd\">';\n\n\tvar defaultEncodings = \n\t\t'Western european (iso-8859-1)=iso-8859-1,' +\n\t\t'Central European (iso-8859-2)=iso-8859-2,' +\n\t\t'Unicode (UTF-8)=utf-8,' +\n\t\t'Chinese traditional (Big5)=big5,' +\n\t\t'Cyrillic (iso-8859-5)=iso-8859-5,' +\n\t\t'Japanese (iso-2022-jp)=iso-2022-jp,' +\n\t\t'Greek (iso-8859-7)=iso-8859-7,' +\n\t\t'Korean (iso-2022-kr)=iso-2022-kr,' +\n\t\t'ASCII (us-ascii)=us-ascii';\n\n\tvar defaultFontNames = 'Arial=arial,helvetica,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,times new roman,times,serif;Tahoma=tahoma,arial,helvetica,sans-serif;Times New Roman=times new roman,times,serif;Verdana=verdana,arial,helvetica,sans-serif;Impact=impact;WingDings=wingdings';\n\tvar defaultFontSizes = '10px,11px,12px,13px,14px,15px,16px';\n\n\tfunction setVal(id, value) {\n\t\tvar elm = document.getElementById(id);\n\n\t\tif (elm) {\n\t\t\tvalue = value || '';\n\n\t\t\tif (elm.nodeName == \"SELECT\")\n\t\t\t\tselectByValue(document.forms[0], id, value);\n\t\t\telse if (elm.type == \"checkbox\")\n\t\t\t\telm.checked = !!value;\n\t\t\telse\n\t\t\t\telm.value = value;\n\t\t}\n\t};\n\n\tfunction getVal(id) {\n\t\tvar elm = document.getElementById(id);\n\n\t\tif (elm.nodeName == \"SELECT\")\n\t\t\treturn elm.options[elm.selectedIndex].value;\n\n\t\tif (elm.type == \"checkbox\")\n\t\t\treturn elm.checked;\n\n\t\treturn elm.value;\n\t};\n\n\twindow.FullPageDialog = {\n\t\tchangedStyle : function() {\n\t\t\tvar val, styles = tinyMCEPopup.editor.dom.parseStyle(getVal('style'));\n\n\t\t\tsetVal('fontface', styles['font-face']);\n\t\t\tsetVal('fontsize', styles['font-size']);\n\t\t\tsetVal('textcolor', styles['color']);\n\n\t\t\tif (val = styles['background-image'])\n\t\t\t\tsetVal('bgimage', val.replace(new RegExp(\"url\\\\('?([^']*)'?\\\\)\", 'gi'), \"$1\"));\n\t\t\telse\n\t\t\t\tsetVal('bgimage', '');\n\n\t\t\tsetVal('bgcolor', styles['background-color']);\n\n\t\t\t// Reset margin form elements\n\t\t\tsetVal('topmargin', '');\n\t\t\tsetVal('rightmargin', '');\n\t\t\tsetVal('bottommargin', '');\n\t\t\tsetVal('leftmargin', '');\n\n\t\t\t// Expand margin\n\t\t\tif (val = styles['margin']) {\n\t\t\t\tval = val.split(' ');\n\t\t\t\tstyles['margin-top'] = val[0] || '';\n\t\t\t\tstyles['margin-right'] = val[1] || val[0] || '';\n\t\t\t\tstyles['margin-bottom'] = val[2] || val[0] || '';\n\t\t\t\tstyles['margin-left'] = val[3] || val[0] || '';\n\t\t\t}\n\n\t\t\tif (val = styles['margin-top'])\n\t\t\t\tsetVal('topmargin', val.replace(/px/, ''));\n\n\t\t\tif (val = styles['margin-right'])\n\t\t\t\tsetVal('rightmargin', val.replace(/px/, ''));\n\n\t\t\tif (val = styles['margin-bottom'])\n\t\t\t\tsetVal('bottommargin', val.replace(/px/, ''));\n\n\t\t\tif (val = styles['margin-left'])\n\t\t\t\tsetVal('leftmargin', val.replace(/px/, ''));\n\n\t\t\tupdateColor('bgcolor_pick', 'bgcolor');\n\t\t\tupdateColor('textcolor_pick', 'textcolor');\n\t\t},\n\n\t\tchangedStyleProp : function() {\n\t\t\tvar val, dom = tinyMCEPopup.editor.dom, styles = dom.parseStyle(getVal('style'));\n\t\n\t\t\tstyles['font-face'] = getVal('fontface');\n\t\t\tstyles['font-size'] = getVal('fontsize');\n\t\t\tstyles['color'] = getVal('textcolor');\n\t\t\tstyles['background-color'] = getVal('bgcolor');\n\n\t\t\tif (val = getVal('bgimage'))\n\t\t\t\tstyles['background-image'] = \"url('\" + val + \"')\";\n\t\t\telse\n\t\t\t\tstyles['background-image'] = '';\n\n\t\t\tdelete styles['margin'];\n\n\t\t\tif (val = getVal('topmargin'))\n\t\t\t\tstyles['margin-top'] = val + \"px\";\n\t\t\telse\n\t\t\t\tstyles['margin-top'] = '';\n\n\t\t\tif (val = getVal('rightmargin'))\n\t\t\t\tstyles['margin-right'] = val + \"px\";\n\t\t\telse\n\t\t\t\tstyles['margin-right'] = '';\n\n\t\t\tif (val = getVal('bottommargin'))\n\t\t\t\tstyles['margin-bottom'] = val + \"px\";\n\t\t\telse\n\t\t\t\tstyles['margin-bottom'] = '';\n\n\t\t\tif (val = getVal('leftmargin'))\n\t\t\t\tstyles['margin-left'] = val + \"px\";\n\t\t\telse\n\t\t\t\tstyles['margin-left'] = '';\n\n\t\t\t// Serialize, parse and reserialize this will compress redundant styles\n\t\t\tsetVal('style', dom.serializeStyle(dom.parseStyle(dom.serializeStyle(styles))));\n\t\t\tthis.changedStyle();\n\t\t},\n\t\t\n\t\tupdate : function() {\n\t\t\tvar data = {};\n\n\t\t\ttinymce.each(tinyMCEPopup.dom.select('select,input,textarea'), function(node) {\n\t\t\t\tdata[node.id] = getVal(node.id);\n\t\t\t});\n\n\t\t\ttinyMCEPopup.editor.plugins.fullpage._dataToHtml(data);\n\t\t\ttinyMCEPopup.close();\n\t\t}\n\t};\n\t\n\tfunction init() {\n\t\tvar form = document.forms[0], i, item, list, editor = tinyMCEPopup.editor;\n\n\t\t// Setup doctype select box\n\t\tlist = editor.getParam(\"fullpage_doctypes\", defaultDocTypes).split(',');\n\t\tfor (i = 0; i < list.length; i++) {\n\t\t\titem = list[i].split('=');\n\n\t\t\tif (item.length > 1)\n\t\t\t\taddSelectValue(form, 'doctype', item[0], item[1]);\n\t\t}\n\n\t\t// Setup fonts select box\n\t\tlist = editor.getParam(\"fullpage_fonts\", defaultFontNames).split(';');\n\t\tfor (i = 0; i < list.length; i++) {\n\t\t\titem = list[i].split('=');\n\n\t\t\tif (item.length > 1)\n\t\t\t\taddSelectValue(form, 'fontface', item[0], item[1]);\n\t\t}\n\n\t\t// Setup fontsize select box\n\t\tlist = editor.getParam(\"fullpage_fontsizes\", defaultFontSizes).split(',');\n\t\tfor (i = 0; i < list.length; i++)\n\t\t\taddSelectValue(form, 'fontsize', list[i], list[i]);\n\n\t\t// Setup encodings select box\n\t\tlist = editor.getParam(\"fullpage_encodings\", defaultEncodings).split(',');\n\t\tfor (i = 0; i < list.length; i++) {\n\t\t\titem = list[i].split('=');\n\n\t\t\tif (item.length > 1)\n\t\t\t\taddSelectValue(form, 'docencoding', item[0], item[1]);\n\t\t}\n\n\t\t// Setup color pickers\n\t\tdocument.getElementById('bgcolor_pickcontainer').innerHTML = getColorPickerHTML('bgcolor_pick','bgcolor');\n\t\tdocument.getElementById('link_color_pickcontainer').innerHTML = getColorPickerHTML('link_color_pick','link_color');\n\t\tdocument.getElementById('visited_color_pickcontainer').innerHTML = getColorPickerHTML('visited_color_pick','visited_color');\n\t\tdocument.getElementById('active_color_pickcontainer').innerHTML = getColorPickerHTML('active_color_pick','active_color');\n\t\tdocument.getElementById('textcolor_pickcontainer').innerHTML = getColorPickerHTML('textcolor_pick','textcolor');\n\t\tdocument.getElementById('stylesheet_browsercontainer').innerHTML = getBrowserHTML('stylesheetbrowser','stylesheet','file','fullpage');\n\t\tdocument.getElementById('bgimage_pickcontainer').innerHTML = getBrowserHTML('bgimage_browser','bgimage','image','fullpage');\n\n\t\t// Resize some elements\n\t\tif (isVisible('stylesheetbrowser'))\n\t\t\tdocument.getElementById('stylesheet').style.width = '220px';\n\n\t\tif (isVisible('link_href_browser'))\n\t\t\tdocument.getElementById('element_link_href').style.width = '230px';\n\n\t\tif (isVisible('bgimage_browser'))\n\t\t\tdocument.getElementById('bgimage').style.width = '210px';\n\n\t\t// Update form\n\t\ttinymce.each(tinyMCEPopup.getWindowArg('data'), function(value, key) {\n\t\t\tsetVal(key, value);\n\t\t});\n\n\t\tFullPageDialog.changedStyle();\n\n\t\t// Update colors\n\t\tupdateColor('textcolor_pick', 'textcolor');\n\t\tupdateColor('bgcolor_pick', 'bgcolor');\n\t\tupdateColor('visited_color_pick', 'visited_color');\n\t\tupdateColor('active_color_pick', 'active_color');\n\t\tupdateColor('link_color_pick', 'link_color');\n\t};\n\n\ttinyMCEPopup.onInit.add(init);\n})();\n","Magento_Tinymce3/tiny_mce/plugins/fullpage/langs/en_dlg.js":"tinyMCE.addI18n('en.fullpage_dlg',{title:\"Document Properties\",\"meta_tab\":\"General\",\"appearance_tab\":\"Appearance\",\"advanced_tab\":\"Advanced\",\"meta_props\":\"Meta Information\",langprops:\"Language and Encoding\",\"meta_title\":\"Title\",\"meta_keywords\":\"Keywords\",\"meta_description\":\"Description\",\"meta_robots\":\"Robots\",doctypes:\"Doctype\",langcode:\"Language Code\",langdir:\"Language Direction\",ltr:\"Left to Right\",rtl:\"Right to Left\",\"xml_pi\":\"XML Declaration\",encoding:\"Character Encoding\",\"appearance_bgprops\":\"Background Properties\",\"appearance_marginprops\":\"Body Margins\",\"appearance_linkprops\":\"Link Colors\",\"appearance_textprops\":\"Text Properties\",bgcolor:\"Background Color\",bgimage:\"Background Image\",\"left_margin\":\"Left Margin\",\"right_margin\":\"Right Margin\",\"top_margin\":\"Top Margin\",\"bottom_margin\":\"Bottom Margin\",\"text_color\":\"Text Color\",\"font_size\":\"Font Size\",\"font_face\":\"Font Face\",\"link_color\":\"Link Color\",\"hover_color\":\"Hover Color\",\"visited_color\":\"Visited Color\",\"active_color\":\"Active Color\",textcolor:\"Color\",fontsize:\"Font Size\",fontface:\"Font Family\",\"meta_index_follow\":\"Index and Follow the Links\",\"meta_index_nofollow\":\"Index and Don\\'t Follow the Links\",\"meta_noindex_follow\":\"Do Not Index but Follow the Links\",\"meta_noindex_nofollow\":\"Do Not Index and Don\\'t Follow the Links\",\"appearance_style\":\"Stylesheet and Style Properties\",stylesheet:\"Stylesheet\",style:\"Style\",author:\"Author\",copyright:\"Copyright\",add:\"Add New Element\",remove:\"Remove Selected Element\",moveup:\"Move Selected Element Up\",movedown:\"Move Selected Element Down\",\"head_elements\":\"Head Elements\",info:\"Information\",\"add_title\":\"Title Element\",\"add_meta\":\"Meta Element\",\"add_script\":\"Script Element\",\"add_style\":\"Style Element\",\"add_link\":\"Link Element\",\"add_base\":\"Base Element\",\"add_comment\":\"Comment Node\",\"title_element\":\"Title Element\",\"script_element\":\"Script Element\",\"style_element\":\"Style Element\",\"base_element\":\"Base Element\",\"link_element\":\"Link Element\",\"meta_element\":\"Meta Element\",\"comment_element\":\"Comment\",src:\"Source\",language:\"Language\",href:\"HREF\",target:\"Target\",type:\"Type\",charset:\"Charset\",defer:\"Defer\",media:\"Media\",properties:\"Properties\",name:\"Name\",value:\"Value\",content:\"Content\",rel:\"Rel\",rev:\"Rev\",hreflang:\"HREF Lang\",\"general_props\":\"General\",\"advanced_props\":\"Advanced\"});","Magento_Tinymce3/tiny_mce/plugins/example_dependency/editor_plugin_src.js":"/**\n * editor_plugin_src.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function() {\n\n\ttinymce.create('tinymce.plugins.ExampleDependencyPlugin', {\n\t\t/**\n\t\t * Initializes the plugin, this will be executed after the plugin has been created.\n\t\t * This call is done before the editor instance has finished it's initialization so use the onInit event\n\t\t * of the editor instance to intercept that event.\n\t\t *\n\t\t * @param {tinymce.Editor} ed Editor instance that the plugin is initialized in.\n\t\t * @param {string} url Absolute URL to where the plugin is located.\n\t\t */\n\t\tinit : function(ed, url) {\n\t\t},\n\n\n\t\t/**\n\t\t * Returns information about the plugin as a name/value array.\n\t\t * The current keys are longname, author, authorurl, infourl and version.\n\t\t *\n\t\t * @return {Object} Name/value array containing information about the plugin.\n\t\t */\n\t\tgetInfo : function() {\n\t\t\treturn {\n\t\t\t\tlongname : 'Example Dependency plugin',\n\t\t\t\tauthor : 'Some author',\n\t\t\t\tauthorurl : 'http://tinymce.moxiecode.com',\n\t\t\t\tinfourl : 'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/example_dependency',\n\t\t\t\tversion : \"1.0\"\n\t\t\t};\n\t\t}\n\t});\n\n\t/**\n\t * Register the plugin, specifying the list of the plugins that this plugin depends on.  They are specified in a list, with the list loaded in order.\n\t * plugins in this list will be initialised when this plugin is initialized. (before the init method is called).\n\t * plugins in a depends list should typically be specified using the short name).  If necessary this can be done\n\t * with an object which has the url to the plugin and the shortname.\n\t */\n\ttinymce.PluginManager.add('example_dependency', tinymce.plugins.ExampleDependencyPlugin, ['example']);\n})();\n","Magento_Tinymce3/tiny_mce/plugins/example_dependency/editor_plugin.js":"(function(){tinymce.create(\"tinymce.plugins.ExampleDependencyPlugin\",{init:function(a,b){},getInfo:function(){return{longname:\"Example Dependency plugin\",author:\"Some author\",authorurl:\"http://tinymce.moxiecode.com\",infourl:\"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/example_dependency\",version:\"1.0\"}}});tinymce.PluginManager.add(\"example_dependency\",tinymce.plugins.ExampleDependencyPlugin,[\"example\"])})();","Magento_Tinymce3/tiny_mce/plugins/table/editor_plugin_src.js":"/**\n * editor_plugin_src.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function(tinymce) {\n\tvar each = tinymce.each;\n\n\t// Checks if the selection/caret is at the start of the specified block element\n\tfunction isAtStart(rng, par) {\n\t\tvar doc = par.ownerDocument, rng2 = doc.createRange(), elm;\n\n\t\trng2.setStartBefore(par);\n\t\trng2.setEnd(rng.endContainer, rng.endOffset);\n\n\t\telm = doc.createElement('body');\n\t\telm.appendChild(rng2.cloneContents());\n\n\t\t// Check for text characters of other elements that should be treated as content\n\t\treturn elm.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi, '-').replace(/<[^>]+>/g, '').length == 0;\n\t};\n\n\tfunction getSpanVal(td, name) {\n\t\treturn parseInt(td.getAttribute(name) || 1);\n\t}\n\n\t/**\n\t * Table Grid class.\n\t */\n\tfunction TableGrid(table, dom, selection) {\n\t\tvar grid, startPos, endPos, selectedCell;\n\n\t\tbuildGrid();\n\t\tselectedCell = dom.getParent(selection.getStart(), 'th,td');\n\t\tif (selectedCell) {\n\t\t\tstartPos = getPos(selectedCell);\n\t\t\tendPos = findEndPos();\n\t\t\tselectedCell = getCell(startPos.x, startPos.y);\n\t\t}\n\n\t\tfunction cloneNode(node, children) {\n\t\t\tnode = node.cloneNode(children);\n\t\t\tnode.removeAttribute('id');\n\n\t\t\treturn node;\n\t\t}\n\n\t\tfunction buildGrid() {\n\t\t\tvar startY = 0;\n\n\t\t\tgrid = [];\n\n\t\t\teach(['thead', 'tbody', 'tfoot'], function(part) {\n\t\t\t\tvar rows = dom.select('> ' + part + ' tr', table);\n\n\t\t\t\teach(rows, function(tr, y) {\n\t\t\t\t\ty += startY;\n\n\t\t\t\t\teach(dom.select('> td, > th', tr), function(td, x) {\n\t\t\t\t\t\tvar x2, y2, rowspan, colspan;\n\n\t\t\t\t\t\t// Skip over existing cells produced by rowspan\n\t\t\t\t\t\tif (grid[y]) {\n\t\t\t\t\t\t\twhile (grid[y][x])\n\t\t\t\t\t\t\t\tx++;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Get col/rowspan from cell\n\t\t\t\t\t\trowspan = getSpanVal(td, 'rowspan');\n\t\t\t\t\t\tcolspan = getSpanVal(td, 'colspan');\n\n\t\t\t\t\t\t// Fill out rowspan/colspan right and down\n\t\t\t\t\t\tfor (y2 = y; y2 < y + rowspan; y2++) {\n\t\t\t\t\t\t\tif (!grid[y2])\n\t\t\t\t\t\t\t\tgrid[y2] = [];\n\n\t\t\t\t\t\t\tfor (x2 = x; x2 < x + colspan; x2++) {\n\t\t\t\t\t\t\t\tgrid[y2][x2] = {\n\t\t\t\t\t\t\t\t\tpart : part,\n\t\t\t\t\t\t\t\t\treal : y2 == y && x2 == x,\n\t\t\t\t\t\t\t\t\telm : td,\n\t\t\t\t\t\t\t\t\trowspan : rowspan,\n\t\t\t\t\t\t\t\t\tcolspan : colspan\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tstartY += rows.length;\n\t\t\t});\n\t\t};\n\n\t\tfunction getCell(x, y) {\n\t\t\tvar row;\n\n\t\t\trow = grid[y];\n\t\t\tif (row)\n\t\t\t\treturn row[x];\n\t\t};\n\n\t\tfunction setSpanVal(td, name, val) {\n\t\t\tif (td) {\n\t\t\t\tval = parseInt(val);\n\n\t\t\t\tif (val === 1)\n\t\t\t\t\ttd.removeAttribute(name, 1);\n\t\t\t\telse\n\t\t\t\t\ttd.setAttribute(name, val, 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction isCellSelected(cell) {\n\t\t\treturn cell && (dom.hasClass(cell.elm, 'mceSelected') || cell == selectedCell);\n\t\t};\n\n\t\tfunction getSelectedRows() {\n\t\t\tvar rows = [];\n\n\t\t\teach(table.rows, function(row) {\n\t\t\t\teach(row.cells, function(cell) {\n\t\t\t\t\tif (dom.hasClass(cell, 'mceSelected') || cell == selectedCell.elm) {\n\t\t\t\t\t\trows.push(row);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn rows;\n\t\t};\n\n\t\tfunction deleteTable() {\n\t\t\tvar rng = dom.createRng();\n\n\t\t\trng.setStartAfter(table);\n\t\t\trng.setEndAfter(table);\n\n\t\t\tselection.setRng(rng);\n\n\t\t\tdom.remove(table);\n\t\t};\n\n\t\tfunction cloneCell(cell) {\n\t\t\tvar formatNode;\n\n\t\t\t// Clone formats\n\t\t\ttinymce.walk(cell, function(node) {\n\t\t\t\tvar curNode;\n\n\t\t\t\tif (node.nodeType == 3) {\n\t\t\t\t\teach(dom.getParents(node.parentNode, null, cell).reverse(), function(node) {\n\t\t\t\t\t\tnode = cloneNode(node, false);\n\n\t\t\t\t\t\tif (!formatNode)\n\t\t\t\t\t\t\tformatNode = curNode = node;\n\t\t\t\t\t\telse if (curNode)\n\t\t\t\t\t\t\tcurNode.appendChild(node);\n\n\t\t\t\t\t\tcurNode = node;\n\t\t\t\t\t});\n\n\t\t\t\t\t// Add something to the inner node\n\t\t\t\t\tif (curNode)\n\t\t\t\t\t\tcurNode.innerHTML = tinymce.isIE ? '&nbsp;' : '<br data-mce-bogus=\"1\" />';\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}, 'childNodes');\n\n\t\t\tcell = cloneNode(cell, false);\n\t\t\tsetSpanVal(cell, 'rowSpan', 1);\n\t\t\tsetSpanVal(cell, 'colSpan', 1);\n\n\t\t\tif (formatNode) {\n\t\t\t\tcell.appendChild(formatNode);\n\t\t\t} else {\n\t\t\t\tif (!tinymce.isIE)\n\t\t\t\t\tcell.innerHTML = '<br data-mce-bogus=\"1\" />';\n\t\t\t}\n\n\t\t\treturn cell;\n\t\t};\n\n\t\tfunction cleanup() {\n\t\t\tvar rng = dom.createRng();\n\n\t\t\t// Empty rows\n\t\t\teach(dom.select('tr', table), function(tr) {\n\t\t\t\tif (tr.cells.length == 0)\n\t\t\t\t\tdom.remove(tr);\n\t\t\t});\n\n\t\t\t// Empty table\n\t\t\tif (dom.select('tr', table).length == 0) {\n\t\t\t\trng.setStartAfter(table);\n\t\t\t\trng.setEndAfter(table);\n\t\t\t\tselection.setRng(rng);\n\t\t\t\tdom.remove(table);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Empty header/body/footer\n\t\t\teach(dom.select('thead,tbody,tfoot', table), function(part) {\n\t\t\t\tif (part.rows.length == 0)\n\t\t\t\t\tdom.remove(part);\n\t\t\t});\n\n\t\t\t// Restore selection to start position if it still exists\n\t\t\tbuildGrid();\n\n\t\t\t// Restore the selection to the closest table position\n\t\t\trow = grid[Math.min(grid.length - 1, startPos.y)];\n\t\t\tif (row) {\n\t\t\t\tselection.select(row[Math.min(row.length - 1, startPos.x)].elm, true);\n\t\t\t\tselection.collapse(true);\n\t\t\t}\n\t\t};\n\n\t\tfunction fillLeftDown(x, y, rows, cols) {\n\t\t\tvar tr, x2, r, c, cell;\n\n\t\t\ttr = grid[y][x].elm.parentNode;\n\t\t\tfor (r = 1; r <= rows; r++) {\n\t\t\t\ttr = dom.getNext(tr, 'tr');\n\n\t\t\t\tif (tr) {\n\t\t\t\t\t// Loop left to find real cell\n\t\t\t\t\tfor (x2 = x; x2 >= 0; x2--) {\n\t\t\t\t\t\tcell = grid[y + r][x2].elm;\n\n\t\t\t\t\t\tif (cell.parentNode == tr) {\n\t\t\t\t\t\t\t// Append clones after\n\t\t\t\t\t\t\tfor (c = 1; c <= cols; c++)\n\t\t\t\t\t\t\t\tdom.insertAfter(cloneCell(cell), cell);\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (x2 == -1) {\n\t\t\t\t\t\t// Insert nodes before first cell\n\t\t\t\t\t\tfor (c = 1; c <= cols; c++)\n\t\t\t\t\t\t\ttr.insertBefore(cloneCell(tr.cells[0]), tr.cells[0]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tfunction split() {\n\t\t\teach(grid, function(row, y) {\n\t\t\t\teach(row, function(cell, x) {\n\t\t\t\t\tvar colSpan, rowSpan, newCell, i;\n\n\t\t\t\t\tif (isCellSelected(cell)) {\n\t\t\t\t\t\tcell = cell.elm;\n\t\t\t\t\t\tcolSpan = getSpanVal(cell, 'colspan');\n\t\t\t\t\t\trowSpan = getSpanVal(cell, 'rowspan');\n\n\t\t\t\t\t\tif (colSpan > 1 || rowSpan > 1) {\n\t\t\t\t\t\t\tsetSpanVal(cell, 'rowSpan', 1);\n\t\t\t\t\t\t\tsetSpanVal(cell, 'colSpan', 1);\n\n\t\t\t\t\t\t\t// Insert cells right\n\t\t\t\t\t\t\tfor (i = 0; i < colSpan - 1; i++)\n\t\t\t\t\t\t\t\tdom.insertAfter(cloneCell(cell), cell);\n\n\t\t\t\t\t\t\tfillLeftDown(x, y, rowSpan - 1, colSpan);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\n\t\tfunction merge(cell, cols, rows) {\n\t\t\tvar startX, startY, endX, endY, x, y, startCell, endCell, cell, children, count;\n\n\t\t\t// Use specified cell and cols/rows\n\t\t\tif (cell) {\n\t\t\t\tpos = getPos(cell);\n\t\t\t\tstartX = pos.x;\n\t\t\t\tstartY = pos.y;\n\t\t\t\tendX = startX + (cols - 1);\n\t\t\t\tendY = startY + (rows - 1);\n\t\t\t} else {\n\t\t\t\t// Use selection\n\t\t\t\tstartX = startPos.x;\n\t\t\t\tstartY = startPos.y;\n\t\t\t\tendX = endPos.x;\n\t\t\t\tendY = endPos.y;\n\t\t\t}\n\n\t\t\t// Find start/end cells\n\t\t\tstartCell = getCell(startX, startY);\n\t\t\tendCell = getCell(endX, endY);\n\n\t\t\t// Check if the cells exists and if they are of the same part for example tbody = tbody\n\t\t\tif (startCell && endCell && startCell.part == endCell.part) {\n\t\t\t\t// Split and rebuild grid\n\t\t\t\tsplit();\n\t\t\t\tbuildGrid();\n\n\t\t\t\t// Set row/col span to start cell\n\t\t\t\tstartCell = getCell(startX, startY).elm;\n\t\t\t\tsetSpanVal(startCell, 'colSpan', (endX - startX) + 1);\n\t\t\t\tsetSpanVal(startCell, 'rowSpan', (endY - startY) + 1);\n\n\t\t\t\t// Remove other cells and add it's contents to the start cell\n\t\t\t\tfor (y = startY; y <= endY; y++) {\n\t\t\t\t\tfor (x = startX; x <= endX; x++) {\n\t\t\t\t\t\tif (!grid[y] || !grid[y][x])\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\tcell = grid[y][x].elm;\n\n\t\t\t\t\t\tif (cell != startCell) {\n\t\t\t\t\t\t\t// Move children to startCell\n\t\t\t\t\t\t\tchildren = tinymce.grep(cell.childNodes);\n\t\t\t\t\t\t\teach(children, function(node) {\n\t\t\t\t\t\t\t\tstartCell.appendChild(node);\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t// Remove bogus nodes if there is children in the target cell\n\t\t\t\t\t\t\tif (children.length) {\n\t\t\t\t\t\t\t\tchildren = tinymce.grep(startCell.childNodes);\n\t\t\t\t\t\t\t\tcount = 0;\n\t\t\t\t\t\t\t\teach(children, function(node) {\n\t\t\t\t\t\t\t\t\tif (node.nodeName == 'BR' && dom.getAttrib(node, 'data-mce-bogus') && count++ < children.length - 1)\n\t\t\t\t\t\t\t\t\t\tstartCell.removeChild(node);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// Remove cell\n\t\t\t\t\t\t\tdom.remove(cell);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Remove empty rows etc and restore caret location\n\t\t\t\tcleanup();\n\t\t\t}\n\t\t};\n\n\t\tfunction insertRow(before) {\n\t\t\tvar posY, cell, lastCell, x, rowElm, newRow, newCell, otherCell, rowSpan;\n\n\t\t\t// Find first/last row\n\t\t\teach(grid, function(row, y) {\n\t\t\t\teach(row, function(cell, x) {\n\t\t\t\t\tif (isCellSelected(cell)) {\n\t\t\t\t\t\tcell = cell.elm;\n\t\t\t\t\t\trowElm = cell.parentNode;\n\t\t\t\t\t\tnewRow = cloneNode(rowElm, false);\n\t\t\t\t\t\tposY = y;\n\n\t\t\t\t\t\tif (before)\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (before)\n\t\t\t\t\treturn !posY;\n\t\t\t});\n\n\t\t\tfor (x = 0; x < grid[0].length; x++) {\n\t\t\t\t// Cell not found could be because of an invalid table structure\n\t\t\t\tif (!grid[posY][x])\n\t\t\t\t\tcontinue;\n\n\t\t\t\tcell = grid[posY][x].elm;\n\n\t\t\t\tif (cell != lastCell) {\n\t\t\t\t\tif (!before) {\n\t\t\t\t\t\trowSpan = getSpanVal(cell, 'rowspan');\n\t\t\t\t\t\tif (rowSpan > 1) {\n\t\t\t\t\t\t\tsetSpanVal(cell, 'rowSpan', rowSpan + 1);\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Check if cell above can be expanded\n\t\t\t\t\t\tif (posY > 0 && grid[posY - 1][x]) {\n\t\t\t\t\t\t\totherCell = grid[posY - 1][x].elm;\n\t\t\t\t\t\t\trowSpan = getSpanVal(otherCell, 'rowSpan');\n\t\t\t\t\t\t\tif (rowSpan > 1) {\n\t\t\t\t\t\t\t\tsetSpanVal(otherCell, 'rowSpan', rowSpan + 1);\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Insert new cell into new row\n\t\t\t\t\tnewCell = cloneCell(cell);\n\t\t\t\t\tsetSpanVal(newCell, 'colSpan', cell.colSpan);\n\n\t\t\t\t\tnewRow.appendChild(newCell);\n\n\t\t\t\t\tlastCell = cell;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (newRow.hasChildNodes()) {\n\t\t\t\tif (!before)\n\t\t\t\t\tdom.insertAfter(newRow, rowElm);\n\t\t\t\telse\n\t\t\t\t\trowElm.parentNode.insertBefore(newRow, rowElm);\n\t\t\t}\n\t\t};\n\n\t\tfunction insertCol(before) {\n\t\t\tvar posX, lastCell;\n\n\t\t\t// Find first/last column\n\t\t\teach(grid, function(row, y) {\n\t\t\t\teach(row, function(cell, x) {\n\t\t\t\t\tif (isCellSelected(cell)) {\n\t\t\t\t\t\tposX = x;\n\n\t\t\t\t\t\tif (before)\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (before)\n\t\t\t\t\treturn !posX;\n\t\t\t});\n\n\t\t\teach(grid, function(row, y) {\n\t\t\t\tvar cell, rowSpan, colSpan;\n\n\t\t\t\tif (!row[posX])\n\t\t\t\t\treturn;\n\n\t\t\t\tcell = row[posX].elm;\n\t\t\t\tif (cell != lastCell) {\n\t\t\t\t\tcolSpan = getSpanVal(cell, 'colspan');\n\t\t\t\t\trowSpan = getSpanVal(cell, 'rowspan');\n\n\t\t\t\t\tif (colSpan == 1) {\n\t\t\t\t\t\tif (!before) {\n\t\t\t\t\t\t\tdom.insertAfter(cloneCell(cell), cell);\n\t\t\t\t\t\t\tfillLeftDown(posX, y, rowSpan - 1, colSpan);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcell.parentNode.insertBefore(cloneCell(cell), cell);\n\t\t\t\t\t\t\tfillLeftDown(posX, y, rowSpan - 1, colSpan);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else\n\t\t\t\t\t\tsetSpanVal(cell, 'colSpan', cell.colSpan + 1);\n\n\t\t\t\t\tlastCell = cell;\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tfunction deleteCols() {\n\t\t\tvar cols = [];\n\n\t\t\t// Get selected column indexes\n\t\t\teach(grid, function(row, y) {\n\t\t\t\teach(row, function(cell, x) {\n\t\t\t\t\tif (isCellSelected(cell) && tinymce.inArray(cols, x) === -1) {\n\t\t\t\t\t\teach(grid, function(row) {\n\t\t\t\t\t\t\tvar cell = row[x].elm, colSpan;\n\n\t\t\t\t\t\t\tcolSpan = getSpanVal(cell, 'colSpan');\n\n\t\t\t\t\t\t\tif (colSpan > 1)\n\t\t\t\t\t\t\t\tsetSpanVal(cell, 'colSpan', colSpan - 1);\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tdom.remove(cell);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tcols.push(x);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tcleanup();\n\t\t};\n\n\t\tfunction deleteRows() {\n\t\t\tvar rows;\n\n\t\t\tfunction deleteRow(tr) {\n\t\t\t\tvar nextTr, pos, lastCell;\n\n\t\t\t\tnextTr = dom.getNext(tr, 'tr');\n\n\t\t\t\t// Move down row spanned cells\n\t\t\t\teach(tr.cells, function(cell) {\n\t\t\t\t\tvar rowSpan = getSpanVal(cell, 'rowSpan');\n\n\t\t\t\t\tif (rowSpan > 1) {\n\t\t\t\t\t\tsetSpanVal(cell, 'rowSpan', rowSpan - 1);\n\t\t\t\t\t\tpos = getPos(cell);\n\t\t\t\t\t\tfillLeftDown(pos.x, pos.y, 1, 1);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Delete cells\n\t\t\t\tpos = getPos(tr.cells[0]);\n\t\t\t\teach(grid[pos.y], function(cell) {\n\t\t\t\t\tvar rowSpan;\n\n\t\t\t\t\tcell = cell.elm;\n\n\t\t\t\t\tif (cell != lastCell) {\n\t\t\t\t\t\trowSpan = getSpanVal(cell, 'rowSpan');\n\n\t\t\t\t\t\tif (rowSpan <= 1)\n\t\t\t\t\t\t\tdom.remove(cell);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tsetSpanVal(cell, 'rowSpan', rowSpan - 1);\n\n\t\t\t\t\t\tlastCell = cell;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\n\t\t\t// Get selected rows and move selection out of scope\n\t\t\trows = getSelectedRows();\n\n\t\t\t// Delete all selected rows\n\t\t\teach(rows.reverse(), function(tr) {\n\t\t\t\tdeleteRow(tr);\n\t\t\t});\n\n\t\t\tcleanup();\n\t\t};\n\n\t\tfunction cutRows() {\n\t\t\tvar rows = getSelectedRows();\n\n\t\t\tdom.remove(rows);\n\t\t\tcleanup();\n\n\t\t\treturn rows;\n\t\t};\n\n\t\tfunction copyRows() {\n\t\t\tvar rows = getSelectedRows();\n\n\t\t\teach(rows, function(row, i) {\n\t\t\t\trows[i] = cloneNode(row, true);\n\t\t\t});\n\n\t\t\treturn rows;\n\t\t};\n\n\t\tfunction pasteRows(rows, before) {\n\t\t\tvar selectedRows = getSelectedRows(),\n\t\t\t\ttargetRow = selectedRows[before ? 0 : selectedRows.length - 1],\n\t\t\t\ttargetCellCount = targetRow.cells.length;\n\n\t\t\t// Calc target cell count\n\t\t\teach(grid, function(row) {\n\t\t\t\tvar match;\n\n\t\t\t\ttargetCellCount = 0;\n\t\t\t\teach(row, function(cell, x) {\n\t\t\t\t\tif (cell.real)\n\t\t\t\t\t\ttargetCellCount += cell.colspan;\n\n\t\t\t\t\tif (cell.elm.parentNode == targetRow)\n\t\t\t\t\t\tmatch = 1;\n\t\t\t\t});\n\n\t\t\t\tif (match)\n\t\t\t\t\treturn false;\n\t\t\t});\n\n\t\t\tif (!before)\n\t\t\t\trows.reverse();\n\n\t\t\teach(rows, function(row) {\n\t\t\t\tvar cellCount = row.cells.length, cell;\n\n\t\t\t\t// Remove col/rowspans\n\t\t\t\tfor (i = 0; i < cellCount; i++) {\n\t\t\t\t\tcell = row.cells[i];\n\t\t\t\t\tsetSpanVal(cell, 'colSpan', 1);\n\t\t\t\t\tsetSpanVal(cell, 'rowSpan', 1);\n\t\t\t\t}\n\n\t\t\t\t// Needs more cells\n\t\t\t\tfor (i = cellCount; i < targetCellCount; i++)\n\t\t\t\t\trow.appendChild(cloneCell(row.cells[cellCount - 1]));\n\n\t\t\t\t// Needs less cells\n\t\t\t\tfor (i = targetCellCount; i < cellCount; i++)\n\t\t\t\t\tdom.remove(row.cells[i]);\n\n\t\t\t\t// Add before/after\n\t\t\t\tif (before)\n\t\t\t\t\ttargetRow.parentNode.insertBefore(row, targetRow);\n\t\t\t\telse\n\t\t\t\t\tdom.insertAfter(row, targetRow);\n\t\t\t});\n\t\t};\n\n\t\tfunction getPos(target) {\n\t\t\tvar pos;\n\n\t\t\teach(grid, function(row, y) {\n\t\t\t\teach(row, function(cell, x) {\n\t\t\t\t\tif (cell.elm == target) {\n\t\t\t\t\t\tpos = {x : x, y : y};\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn !pos;\n\t\t\t});\n\n\t\t\treturn pos;\n\t\t};\n\n\t\tfunction setStartCell(cell) {\n\t\t\tstartPos = getPos(cell);\n\t\t};\n\n\t\tfunction findEndPos() {\n\t\t\tvar pos, maxX, maxY;\n\n\t\t\tmaxX = maxY = 0;\n\n\t\t\teach(grid, function(row, y) {\n\t\t\t\teach(row, function(cell, x) {\n\t\t\t\t\tvar colSpan, rowSpan;\n\n\t\t\t\t\tif (isCellSelected(cell)) {\n\t\t\t\t\t\tcell = grid[y][x];\n\n\t\t\t\t\t\tif (x > maxX)\n\t\t\t\t\t\t\tmaxX = x;\n\n\t\t\t\t\t\tif (y > maxY)\n\t\t\t\t\t\t\tmaxY = y;\n\n\t\t\t\t\t\tif (cell.real) {\n\t\t\t\t\t\t\tcolSpan = cell.colspan - 1;\n\t\t\t\t\t\t\trowSpan = cell.rowspan - 1;\n\n\t\t\t\t\t\t\tif (colSpan) {\n\t\t\t\t\t\t\t\tif (x + colSpan > maxX)\n\t\t\t\t\t\t\t\t\tmaxX = x + colSpan;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (rowSpan) {\n\t\t\t\t\t\t\t\tif (y + rowSpan > maxY)\n\t\t\t\t\t\t\t\t\tmaxY = y + rowSpan;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn {x : maxX, y : maxY};\n\t\t};\n\n\t\tfunction setEndCell(cell) {\n\t\t\tvar startX, startY, endX, endY, maxX, maxY, colSpan, rowSpan;\n\n\t\t\tendPos = getPos(cell);\n\n\t\t\tif (startPos && endPos) {\n\t\t\t\t// Get start/end positions\n\t\t\t\tstartX = Math.min(startPos.x, endPos.x);\n\t\t\t\tstartY = Math.min(startPos.y, endPos.y);\n\t\t\t\tendX = Math.max(startPos.x, endPos.x);\n\t\t\t\tendY = Math.max(startPos.y, endPos.y);\n\n\t\t\t\t// Expand end positon to include spans\n\t\t\t\tmaxX = endX;\n\t\t\t\tmaxY = endY;\n\n\t\t\t\t// Expand startX\n\t\t\t\tfor (y = startY; y <= maxY; y++) {\n\t\t\t\t\tcell = grid[y][startX];\n\n\t\t\t\t\tif (!cell.real) {\n\t\t\t\t\t\tif (startX - (cell.colspan - 1) < startX)\n\t\t\t\t\t\t\tstartX -= cell.colspan - 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Expand startY\n\t\t\t\tfor (x = startX; x <= maxX; x++) {\n\t\t\t\t\tcell = grid[startY][x];\n\n\t\t\t\t\tif (!cell.real) {\n\t\t\t\t\t\tif (startY - (cell.rowspan - 1) < startY)\n\t\t\t\t\t\t\tstartY -= cell.rowspan - 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Find max X, Y\n\t\t\t\tfor (y = startY; y <= endY; y++) {\n\t\t\t\t\tfor (x = startX; x <= endX; x++) {\n\t\t\t\t\t\tcell = grid[y][x];\n\n\t\t\t\t\t\tif (cell.real) {\n\t\t\t\t\t\t\tcolSpan = cell.colspan - 1;\n\t\t\t\t\t\t\trowSpan = cell.rowspan - 1;\n\n\t\t\t\t\t\t\tif (colSpan) {\n\t\t\t\t\t\t\t\tif (x + colSpan > maxX)\n\t\t\t\t\t\t\t\t\tmaxX = x + colSpan;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (rowSpan) {\n\t\t\t\t\t\t\t\tif (y + rowSpan > maxY)\n\t\t\t\t\t\t\t\t\tmaxY = y + rowSpan;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Remove current selection\n\t\t\t\tdom.removeClass(dom.select('td.mceSelected,th.mceSelected'), 'mceSelected');\n\n\t\t\t\t// Add new selection\n\t\t\t\tfor (y = startY; y <= maxY; y++) {\n\t\t\t\t\tfor (x = startX; x <= maxX; x++) {\n\t\t\t\t\t\tif (grid[y][x])\n\t\t\t\t\t\t\tdom.addClass(grid[y][x].elm, 'mceSelected');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// Expose to public\n\t\ttinymce.extend(this, {\n\t\t\tdeleteTable : deleteTable,\n\t\t\tsplit : split,\n\t\t\tmerge : merge,\n\t\t\tinsertRow : insertRow,\n\t\t\tinsertCol : insertCol,\n\t\t\tdeleteCols : deleteCols,\n\t\t\tdeleteRows : deleteRows,\n\t\t\tcutRows : cutRows,\n\t\t\tcopyRows : copyRows,\n\t\t\tpasteRows : pasteRows,\n\t\t\tgetPos : getPos,\n\t\t\tsetStartCell : setStartCell,\n\t\t\tsetEndCell : setEndCell\n\t\t});\n\t};\n\n\ttinymce.create('tinymce.plugins.TablePlugin', {\n\t\tinit : function(ed, url) {\n\t\t\tvar winMan, clipboardRows, hasCellSelection = true; // Might be selected cells on reload\n\n\t\t\tfunction createTableGrid(node) {\n\t\t\t\tvar selection = ed.selection, tblElm = ed.dom.getParent(node || selection.getNode(), 'table');\n\n\t\t\t\tif (tblElm)\n\t\t\t\t\treturn new TableGrid(tblElm, ed.dom, selection);\n\t\t\t};\n\n\t\t\tfunction cleanup() {\n\t\t\t\t// Restore selection possibilities\n\t\t\t\ted.getBody().style.webkitUserSelect = '';\n\n\t\t\t\tif (hasCellSelection) {\n\t\t\t\t\ted.dom.removeClass(ed.dom.select('td.mceSelected,th.mceSelected'), 'mceSelected');\n\t\t\t\t\thasCellSelection = false;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Register buttons\n\t\t\teach([\n\t\t\t\t['table', 'table.desc', 'mceInsertTable', true],\n\t\t\t\t['delete_table', 'table.del', 'mceTableDelete'],\n\t\t\t\t['delete_col', 'table.delete_col_desc', 'mceTableDeleteCol'],\n\t\t\t\t['delete_row', 'table.delete_row_desc', 'mceTableDeleteRow'],\n\t\t\t\t['col_after', 'table.col_after_desc', 'mceTableInsertColAfter'],\n\t\t\t\t['col_before', 'table.col_before_desc', 'mceTableInsertColBefore'],\n\t\t\t\t['row_after', 'table.row_after_desc', 'mceTableInsertRowAfter'],\n\t\t\t\t['row_before', 'table.row_before_desc', 'mceTableInsertRowBefore'],\n\t\t\t\t['row_props', 'table.row_desc', 'mceTableRowProps', true],\n\t\t\t\t['cell_props', 'table.cell_desc', 'mceTableCellProps', true],\n\t\t\t\t['split_cells', 'table.split_cells_desc', 'mceTableSplitCells', true],\n\t\t\t\t['merge_cells', 'table.merge_cells_desc', 'mceTableMergeCells', true]\n\t\t\t], function(c) {\n\t\t\t\ted.addButton(c[0], {title : c[1], cmd : c[2], ui : c[3]});\n\t\t\t});\n\n\t\t\t// Select whole table is a table border is clicked\n\t\t\tif (!tinymce.isIE) {\n\t\t\t\ted.onClick.add(function(ed, e) {\n\t\t\t\t\te = e.target;\n\n\t\t\t\t\tif (e.nodeName === 'TABLE') {\n\t\t\t\t\t\ted.selection.select(e);\n\t\t\t\t\t\ted.nodeChanged();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\ted.onPreProcess.add(function(ed, args) {\n\t\t\t\tvar nodes, i, node, dom = ed.dom, value;\n\n\t\t\t\tnodes = dom.select('table', args.node);\n\t\t\t\ti = nodes.length;\n\t\t\t\twhile (i--) {\n\t\t\t\t\tnode = nodes[i];\n\t\t\t\t\tdom.setAttrib(node, 'data-mce-style', '');\n\n\t\t\t\t\tif ((value = dom.getAttrib(node, 'width'))) {\n\t\t\t\t\t\tdom.setStyle(node, 'width', value);\n\t\t\t\t\t\tdom.setAttrib(node, 'width', '');\n\t\t\t\t\t}\n\n\t\t\t\t\tif ((value = dom.getAttrib(node, 'height'))) {\n\t\t\t\t\t\tdom.setStyle(node, 'height', value);\n\t\t\t\t\t\tdom.setAttrib(node, 'height', '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Handle node change updates\n\t\t\ted.onNodeChange.add(function(ed, cm, n) {\n\t\t\t\tvar p;\n\n\t\t\t\tn = ed.selection.getStart();\n\t\t\t\tp = ed.dom.getParent(n, 'td,th,caption');\n\t\t\t\tcm.setActive('table', n.nodeName === 'TABLE' || !!p);\n\n\t\t\t\t// Disable table tools if we are in caption\n\t\t\t\tif (p && p.nodeName === 'CAPTION')\n\t\t\t\t\tp = 0;\n\n\t\t\t\tcm.setDisabled('delete_table', !p);\n\t\t\t\tcm.setDisabled('delete_col', !p);\n\t\t\t\tcm.setDisabled('delete_table', !p);\n\t\t\t\tcm.setDisabled('delete_row', !p);\n\t\t\t\tcm.setDisabled('col_after', !p);\n\t\t\t\tcm.setDisabled('col_before', !p);\n\t\t\t\tcm.setDisabled('row_after', !p);\n\t\t\t\tcm.setDisabled('row_before', !p);\n\t\t\t\tcm.setDisabled('row_props', !p);\n\t\t\t\tcm.setDisabled('cell_props', !p);\n\t\t\t\tcm.setDisabled('split_cells', !p);\n\t\t\t\tcm.setDisabled('merge_cells', !p);\n\t\t\t});\n\n\t\t\ted.onInit.add(function(ed) {\n\t\t\t\tvar startTable, startCell, dom = ed.dom, tableGrid;\n\n\t\t\t\twinMan = ed.windowManager;\n\n\t\t\t\t// Add cell selection logic\n\t\t\t\ted.onMouseDown.add(function(ed, e) {\n\t\t\t\t\tif (e.button != 2) {\n\t\t\t\t\t\tcleanup();\n\n\t\t\t\t\t\tstartCell = dom.getParent(e.target, 'td,th');\n\t\t\t\t\t\tstartTable = dom.getParent(startCell, 'table');\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tdom.bind(ed.getDoc(), 'mouseover', function(e) {\n\t\t\t\t\tvar sel, table, target = e.target;\n\n\t\t\t\t\tif (startCell && (tableGrid || target != startCell) && (target.nodeName == 'TD' || target.nodeName == 'TH')) {\n\t\t\t\t\t\ttable = dom.getParent(target, 'table');\n\t\t\t\t\t\tif (table == startTable) {\n\t\t\t\t\t\t\tif (!tableGrid) {\n\t\t\t\t\t\t\t\ttableGrid = createTableGrid(table);\n\t\t\t\t\t\t\t\ttableGrid.setStartCell(startCell);\n\n\t\t\t\t\t\t\t\ted.getBody().style.webkitUserSelect = 'none';\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\ttableGrid.setEndCell(target);\n\t\t\t\t\t\t\thasCellSelection = true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Remove current selection\n\t\t\t\t\t\tsel = ed.selection.getSel();\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (sel.removeAllRanges)\n\t\t\t\t\t\t\t\tsel.removeAllRanges();\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tsel.empty();\n\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\t// IE9 might throw errors here\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\ted.onMouseUp.add(function(ed, e) {\n\t\t\t\t\tvar rng, sel = ed.selection, selectedCells, nativeSel = sel.getSel(), walker, node, lastNode, endNode;\n\n\t\t\t\t\t// Move selection to startCell\n\t\t\t\t\tif (startCell) {\n\t\t\t\t\t\tif (tableGrid)\n\t\t\t\t\t\t\ted.getBody().style.webkitUserSelect = '';\n\n\t\t\t\t\t\tfunction setPoint(node, start) {\n\t\t\t\t\t\t\tvar walker = new tinymce.dom.TreeWalker(node, node);\n\n\t\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\t\t// Text node\n\t\t\t\t\t\t\t\tif (node.nodeType == 3 && tinymce.trim(node.nodeValue).length != 0) {\n\t\t\t\t\t\t\t\t\tif (start)\n\t\t\t\t\t\t\t\t\t\trng.setStart(node, 0);\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\trng.setEnd(node, node.nodeValue.length);\n\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// BR element\n\t\t\t\t\t\t\t\tif (node.nodeName == 'BR') {\n\t\t\t\t\t\t\t\t\tif (start)\n\t\t\t\t\t\t\t\t\t\trng.setStartBefore(node);\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\trng.setEndBefore(node);\n\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} while (node = (start ? walker.next() : walker.prev()));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Try to expand text selection as much as we can only Gecko supports cell selection\n\t\t\t\t\t\tselectedCells = dom.select('td.mceSelected,th.mceSelected');\n\t\t\t\t\t\tif (selectedCells.length > 0) {\n\t\t\t\t\t\t\trng = dom.createRng();\n\t\t\t\t\t\t\tnode = selectedCells[0];\n\t\t\t\t\t\t\tendNode = selectedCells[selectedCells.length - 1];\n\t\t\t\t\t\t\trng.setStartBefore(node);\n\t\t\t\t\t\t\trng.setEndAfter(node);\n\n\t\t\t\t\t\t\tsetPoint(node, 1);\n\t\t\t\t\t\t\twalker = new tinymce.dom.TreeWalker(node, dom.getParent(selectedCells[0], 'table'));\n\n\t\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\t\tif (node.nodeName == 'TD' || node.nodeName == 'TH') {\n\t\t\t\t\t\t\t\t\tif (!dom.hasClass(node, 'mceSelected'))\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\tlastNode = node;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} while (node = walker.next());\n\n\t\t\t\t\t\t\tsetPoint(lastNode);\n\n\t\t\t\t\t\t\tsel.setRng(rng);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ted.nodeChanged();\n\t\t\t\t\t\tstartCell = tableGrid = startTable = null;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\ted.onKeyUp.add(function(ed, e) {\n\t\t\t\t\tcleanup();\n\t\t\t\t});\n\n\t\t\t\ted.onKeyDown.add(function (ed, e) {\n\t\t\t\t\tfixTableCellSelection(ed);\n\t\t\t\t});\n\n\t\t\t\ted.onMouseDown.add(function (ed, e) {\n\t\t\t\t\tif (e.button != 2) {\n\t\t\t\t\t\tfixTableCellSelection(ed);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tfunction tableCellSelected(ed, rng, n, currentCell) {\n\t\t\t\t\t// The decision of when a table cell is selected is somewhat involved.  The fact that this code is\n\t\t\t\t\t// required is actually a pointer to the root cause of this bug. A cell is selected when the start \n\t\t\t\t\t// and end offsets are 0, the start container is a text, and the selection node is either a TR (most cases)\n\t\t\t\t\t// or the parent of the table (in the case of the selection containing the last cell of a table).\n\t\t\t\t\tvar TEXT_NODE = 3, table = ed.dom.getParent(rng.startContainer, 'TABLE'), \n\t\t\t\t\ttableParent, allOfCellSelected, tableCellSelection;\n\t\t\t\t\tif (table) \n\t\t\t\t\ttableParent = table.parentNode;\n\t\t\t\t\tallOfCellSelected =rng.startContainer.nodeType == TEXT_NODE && \n\t\t\t\t\t\trng.startOffset == 0 && \n\t\t\t\t\t\trng.endOffset == 0 && \n\t\t\t\t\t\tcurrentCell && \n\t\t\t\t\t\t(n.nodeName==\"TR\" || n==tableParent);\n\t\t\t\t\ttableCellSelection = (n.nodeName==\"TD\"||n.nodeName==\"TH\")&& !currentCell;\t   \n\t\t\t\t\treturn  allOfCellSelected || tableCellSelection;\n\t\t\t\t\t// return false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// this nasty hack is here to work around some WebKit selection bugs.\n\t\t\t\tfunction fixTableCellSelection(ed) {\n\t\t\t\t\tif (!tinymce.isWebKit)\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tvar rng = ed.selection.getRng();\n\t\t\t\t\tvar n = ed.selection.getNode();\n\t\t\t\t\tvar currentCell = ed.dom.getParent(rng.startContainer, 'TD,TH');\n\t\t\t\t\n\t\t\t\t\tif (!tableCellSelected(ed, rng, n, currentCell))\n\t\t\t\t\t\treturn;\n\t\t\t\t\t\tif (!currentCell) {\n\t\t\t\t\t\t\tcurrentCell=n;\n\t\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// Get the very last node inside the table cell\n\t\t\t\t\tvar end = currentCell.lastChild;\n\t\t\t\t\twhile (end.lastChild)\n\t\t\t\t\t\tend = end.lastChild;\n\t\t\t\t\t\n\t\t\t\t\t// Select the entire table cell. Nothing outside of the table cell should be selected.\n\t\t\t\t\trng.setEnd(end, end.nodeValue.length);\n\t\t\t\t\ted.selection.setRng(rng);\n\t\t\t\t}\n\t\t\t\ted.plugins.table.fixTableCellSelection=fixTableCellSelection;\n\n\t\t\t\t// Add context menu\n\t\t\t\tif (ed && ed.plugins.contextmenu) {\n\t\t\t\t\ted.plugins.contextmenu.onContextMenu.add(function(th, m, e) {\n\t\t\t\t\t\tvar sm, se = ed.selection, el = se.getNode() || ed.getBody();\n\n\t\t\t\t\t\tif (ed.dom.getParent(e, 'td') || ed.dom.getParent(e, 'th') || ed.dom.select('td.mceSelected,th.mceSelected').length) {\n\t\t\t\t\t\t\tm.removeAll();\n\n\t\t\t\t\t\t\tif (el.nodeName == 'A' && !ed.dom.getAttrib(el, 'name')) {\n\t\t\t\t\t\t\t\tm.add({title : 'advanced.link_desc', icon : 'link', cmd : ed.plugins.advlink ? 'mceAdvLink' : 'mceLink', ui : true});\n\t\t\t\t\t\t\t\tm.add({title : 'advanced.unlink_desc', icon : 'unlink', cmd : 'UnLink'});\n\t\t\t\t\t\t\t\tm.addSeparator();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (el.nodeName == 'IMG' && el.className.indexOf('mceItem') == -1) {\n\t\t\t\t\t\t\t\tm.add({title : 'advanced.image_desc', icon : 'image', cmd : ed.plugins.advimage ? 'mceAdvImage' : 'mceImage', ui : true});\n\t\t\t\t\t\t\t\tm.addSeparator();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tm.add({title : 'table.desc', icon : 'table', cmd : 'mceInsertTable', value : {action : 'insert'}});\n\t\t\t\t\t\t\tm.add({title : 'table.props_desc', icon : 'table_props', cmd : 'mceInsertTable'});\n\t\t\t\t\t\t\tm.add({title : 'table.del', icon : 'delete_table', cmd : 'mceTableDelete'});\n\t\t\t\t\t\t\tm.addSeparator();\n\n\t\t\t\t\t\t\t// Cell menu\n\t\t\t\t\t\t\tsm = m.addMenu({title : 'table.cell'});\n\t\t\t\t\t\t\tsm.add({title : 'table.cell_desc', icon : 'cell_props', cmd : 'mceTableCellProps'});\n\t\t\t\t\t\t\tsm.add({title : 'table.split_cells_desc', icon : 'split_cells', cmd : 'mceTableSplitCells'});\n\t\t\t\t\t\t\tsm.add({title : 'table.merge_cells_desc', icon : 'merge_cells', cmd : 'mceTableMergeCells'});\n\n\t\t\t\t\t\t\t// Row menu\n\t\t\t\t\t\t\tsm = m.addMenu({title : 'table.row'});\n\t\t\t\t\t\t\tsm.add({title : 'table.row_desc', icon : 'row_props', cmd : 'mceTableRowProps'});\n\t\t\t\t\t\t\tsm.add({title : 'table.row_before_desc', icon : 'row_before', cmd : 'mceTableInsertRowBefore'});\n\t\t\t\t\t\t\tsm.add({title : 'table.row_after_desc', icon : 'row_after', cmd : 'mceTableInsertRowAfter'});\n\t\t\t\t\t\t\tsm.add({title : 'table.delete_row_desc', icon : 'delete_row', cmd : 'mceTableDeleteRow'});\n\t\t\t\t\t\t\tsm.addSeparator();\n\t\t\t\t\t\t\tsm.add({title : 'table.cut_row_desc', icon : 'cut', cmd : 'mceTableCutRow'});\n\t\t\t\t\t\t\tsm.add({title : 'table.copy_row_desc', icon : 'copy', cmd : 'mceTableCopyRow'});\n\t\t\t\t\t\t\tsm.add({title : 'table.paste_row_before_desc', icon : 'paste', cmd : 'mceTablePasteRowBefore'}).setDisabled(!clipboardRows);\n\t\t\t\t\t\t\tsm.add({title : 'table.paste_row_after_desc', icon : 'paste', cmd : 'mceTablePasteRowAfter'}).setDisabled(!clipboardRows);\n\n\t\t\t\t\t\t\t// Column menu\n\t\t\t\t\t\t\tsm = m.addMenu({title : 'table.col'});\n\t\t\t\t\t\t\tsm.add({title : 'table.col_before_desc', icon : 'col_before', cmd : 'mceTableInsertColBefore'});\n\t\t\t\t\t\t\tsm.add({title : 'table.col_after_desc', icon : 'col_after', cmd : 'mceTableInsertColAfter'});\n\t\t\t\t\t\t\tsm.add({title : 'table.delete_col_desc', icon : 'delete_col', cmd : 'mceTableDeleteCol'});\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\tm.add({title : 'table.desc', icon : 'table', cmd : 'mceInsertTable'});\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Fix to allow navigating up and down in a table in WebKit browsers.\n\t\t\t\tif (tinymce.isWebKit) {\n\t\t\t\t\tfunction moveSelection(ed, e) {\n\t\t\t\t\t\tvar VK = tinymce.VK;\n\t\t\t\t\t\tvar key = e.keyCode;\n\n\t\t\t\t\t\tfunction handle(upBool, sourceNode, event) {\n\t\t\t\t\t\t\tvar siblingDirection = upBool ? 'previousSibling' : 'nextSibling';\n\t\t\t\t\t\t\tvar currentRow = ed.dom.getParent(sourceNode, 'tr');\n\t\t\t\t\t\t\tvar siblingRow = currentRow[siblingDirection];\n\n\t\t\t\t\t\t\tif (siblingRow) {\n\t\t\t\t\t\t\t\tmoveCursorToRow(ed, sourceNode, siblingRow, upBool);\n\t\t\t\t\t\t\t\ttinymce.dom.Event.cancel(event);\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvar tableNode = ed.dom.getParent(currentRow, 'table');\n\t\t\t\t\t\t\t\tvar middleNode = currentRow.parentNode;\n\t\t\t\t\t\t\t\tvar parentNodeName = middleNode.nodeName.toLowerCase();\n\t\t\t\t\t\t\t\tif (parentNodeName === 'tbody' || parentNodeName === (upBool ? 'tfoot' : 'thead')) {\n\t\t\t\t\t\t\t\t\tvar targetParent = getTargetParent(upBool, tableNode, middleNode, 'tbody');\n\t\t\t\t\t\t\t\t\tif (targetParent !== null) {\n\t\t\t\t\t\t\t\t\t\treturn moveToRowInTarget(upBool, targetParent, sourceNode, event);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn escapeTable(upBool, currentRow, siblingDirection, tableNode, event);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction getTargetParent(upBool, topNode, secondNode, nodeName) {\n\t\t\t\t\t\t\tvar tbodies = ed.dom.select('>' + nodeName, topNode);\n\t\t\t\t\t\t\tvar position = tbodies.indexOf(secondNode);\n\t\t\t\t\t\t\tif (upBool && position === 0 || !upBool && position === tbodies.length - 1) {\n\t\t\t\t\t\t\t\treturn getFirstHeadOrFoot(upBool, topNode);\n\t\t\t\t\t\t\t} else if (position === -1) {\n\t\t\t\t\t\t\t\tvar topOrBottom = secondNode.tagName.toLowerCase() === 'thead' ? 0 : tbodies.length - 1;\n\t\t\t\t\t\t\t\treturn tbodies[topOrBottom];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn tbodies[position + (upBool ? -1 : 1)];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction getFirstHeadOrFoot(upBool, parent) {\n\t\t\t\t\t\t\tvar tagName = upBool ? 'thead' : 'tfoot';\n\t\t\t\t\t\t\tvar headOrFoot = ed.dom.select('>' + tagName, parent);\n\t\t\t\t\t\t\treturn headOrFoot.length !== 0 ? headOrFoot[0] : null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction moveToRowInTarget(upBool, targetParent, sourceNode, event) {\n\t\t\t\t\t\t\tvar targetRow = getChildForDirection(targetParent, upBool);\n\t\t\t\t\t\t\ttargetRow && moveCursorToRow(ed, sourceNode, targetRow, upBool);\n\t\t\t\t\t\t\ttinymce.dom.Event.cancel(event);\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction escapeTable(upBool, currentRow, siblingDirection, table, event) {\n\t\t\t\t\t\t\tvar tableSibling = table[siblingDirection];\n\t\t\t\t\t\t\tif (tableSibling) {\n\t\t\t\t\t\t\t\tmoveCursorToStartOfElement(tableSibling);\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvar parentCell = ed.dom.getParent(table, 'td,th');\n\t\t\t\t\t\t\t\tif (parentCell) {\n\t\t\t\t\t\t\t\t\treturn handle(upBool, parentCell, event);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tvar backUpSibling = getChildForDirection(currentRow, !upBool);\n\t\t\t\t\t\t\t\t\tmoveCursorToStartOfElement(backUpSibling);\n\t\t\t\t\t\t\t\t\treturn tinymce.dom.Event.cancel(event);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction getChildForDirection(parent, up) {\n\t\t\t\t\t\t\treturn parent && parent[up ? 'lastChild' : 'firstChild'];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction moveCursorToStartOfElement(n) {\n\t\t\t\t\t\t\ted.selection.setCursorLocation(n, 0);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction isVerticalMovement() {\n\t\t\t\t\t\t\treturn key == VK.UP || key == VK.DOWN;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction isInTable(ed) {\n\t\t\t\t\t\t\tvar node = ed.selection.getNode();\n\t\t\t\t\t\t\tvar currentRow = ed.dom.getParent(node, 'tr');\n\t\t\t\t\t\t\treturn currentRow !== null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction columnIndex(column) {\n\t\t\t\t\t\t\tvar colIndex = 0;\n\t\t\t\t\t\t\tvar c = column;\n\t\t\t\t\t\t\twhile (c.previousSibling) {\n\t\t\t\t\t\t\t\tc = c.previousSibling;\n\t\t\t\t\t\t\t\tcolIndex = colIndex + getSpanVal(c, \"colspan\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn colIndex;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction findColumn(rowElement, columnIndex) {\n\t\t\t\t\t\t\tvar c = 0;\n\t\t\t\t\t\t\tvar r = 0;\n\t\t\t\t\t\t\teach(rowElement.children, function(cell, i) {\n\t\t\t\t\t\t\t\tc = c + getSpanVal(cell, \"colspan\");\n\t\t\t\t\t\t\t\tr = i;\n\t\t\t\t\t\t\t\tif (c > columnIndex)\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn r;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction moveCursorToRow(ed, node, row, upBool) {\n\t\t\t\t\t\t\tvar srcColumnIndex = columnIndex(ed.dom.getParent(node, 'td,th'));\n\t\t\t\t\t\t\tvar tgtColumnIndex = findColumn(row, srcColumnIndex);\n\t\t\t\t\t\t\tvar tgtNode = row.childNodes[tgtColumnIndex];\n\t\t\t\t\t\t\tvar rowCellTarget = getChildForDirection(tgtNode, upBool);\n\t\t\t\t\t\t\tmoveCursorToStartOfElement(rowCellTarget || tgtNode);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction shouldFixCaret(preBrowserNode) {\n\t\t\t\t\t\t\tvar newNode = ed.selection.getNode();\n\t\t\t\t\t\t\tvar newParent = ed.dom.getParent(newNode, 'td,th');\n\t\t\t\t\t\t\tvar oldParent = ed.dom.getParent(preBrowserNode, 'td,th');\n\t\t\t\t\t\t\treturn newParent && newParent !== oldParent && checkSameParentTable(newParent, oldParent)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction checkSameParentTable(nodeOne, NodeTwo) {\n\t\t\t\t\t\t\treturn ed.dom.getParent(nodeOne, 'TABLE') === ed.dom.getParent(NodeTwo, 'TABLE');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (isVerticalMovement() && isInTable(ed)) {\n\t\t\t\t\t\t\tvar preBrowserNode = ed.selection.getNode();\n\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\tif (shouldFixCaret(preBrowserNode)) {\n\t\t\t\t\t\t\t\t\thandle(!e.shiftKey && key === VK.UP, preBrowserNode, e);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\ted.onKeyDown.add(moveSelection);\n\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t// Fixes an issue on Gecko where it's impossible to place the caret behind a table\n\t\t\t\t// This fix will force a paragraph element after the table but only when the forced_root_block setting is enabled\n\t\t\t\tif (!tinymce.isIE) {\n\t\t\t\t\tfunction fixTableCaretPos() {\n\t\t\t\t\t\tvar last;\n\n\t\t\t\t\t\t// Skip empty text nodes form the end\n\t\t\t\t\t\tfor (last = ed.getBody().lastChild; last && last.nodeType == 3 && !last.nodeValue.length; last = last.previousSibling);\n\n\t\t\t\t\t\tif (last && last.nodeName == 'TABLE')\n\t\t\t\t\t\t\ted.dom.add(ed.getBody(), 'p', null, '<br mce_bogus=\"1\" />');\n\t\t\t\t\t};\n\n\t\t\t\t\t// Fixes an bug where it's impossible to place the caret before a table in Gecko\n\t\t\t\t\t// this fix solves it by detecting when the caret is at the beginning of such a table\n\t\t\t\t\t// and then manually moves the caret infront of the table\n\t\t\t\t\tif (tinymce.isGecko) {\n\t\t\t\t\t\ted.onKeyDown.add(function(ed, e) {\n\t\t\t\t\t\t\tvar rng, table, dom = ed.dom;\n\n\t\t\t\t\t\t\t// On gecko it's not possible to place the caret before a table\n\t\t\t\t\t\t\tif (e.keyCode == 37 || e.keyCode == 38) {\n\t\t\t\t\t\t\t\trng = ed.selection.getRng();\n\t\t\t\t\t\t\t\ttable = dom.getParent(rng.startContainer, 'table');\n\n\t\t\t\t\t\t\t\tif (table && ed.getBody().firstChild == table) {\n\t\t\t\t\t\t\t\t\tif (isAtStart(rng, table)) {\n\t\t\t\t\t\t\t\t\t\trng = dom.createRng();\n\n\t\t\t\t\t\t\t\t\t\trng.setStartBefore(table);\n\t\t\t\t\t\t\t\t\t\trng.setEndBefore(table);\n\n\t\t\t\t\t\t\t\t\t\ted.selection.setRng(rng);\n\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\ted.onKeyUp.add(fixTableCaretPos);\n\t\t\t\t\ted.onSetContent.add(fixTableCaretPos);\n\t\t\t\t\ted.onVisualAid.add(fixTableCaretPos);\n\n\t\t\t\t\ted.onPreProcess.add(function(ed, o) {\n\t\t\t\t\t\tvar last = o.node.lastChild;\n\n\t\t\t\t\t\tif (last && last.childNodes.length == 1 && last.firstChild.nodeName == 'BR')\n\t\t\t\t\t\t\ted.dom.remove(last);\n\t\t\t\t\t});\n\n\t\t\t\t\tfixTableCaretPos();\n\t\t\t\t\ted.startContent = ed.getContent({format : 'raw'});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Register action commands\n\t\t\teach({\n\t\t\t\tmceTableSplitCells : function(grid) {\n\t\t\t\t\tgrid.split();\n\t\t\t\t},\n\n\t\t\t\tmceTableMergeCells : function(grid) {\n\t\t\t\t\tvar rowSpan, colSpan, cell;\n\n\t\t\t\t\tcell = ed.dom.getParent(ed.selection.getNode(), 'th,td');\n\t\t\t\t\tif (cell) {\n\t\t\t\t\t\trowSpan = cell.rowSpan;\n\t\t\t\t\t\tcolSpan = cell.colSpan;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!ed.dom.select('td.mceSelected,th.mceSelected').length) {\n\t\t\t\t\t\twinMan.open({\n\t\t\t\t\t\t\turl : url + '/merge_cells.htm',\n\t\t\t\t\t\t\twidth : 240 + parseInt(ed.getLang('table.merge_cells_delta_width', 0)),\n\t\t\t\t\t\t\theight : 110 + parseInt(ed.getLang('table.merge_cells_delta_height', 0)),\n\t\t\t\t\t\t\tinline : 1\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\trows : rowSpan,\n\t\t\t\t\t\t\tcols : colSpan,\n\t\t\t\t\t\t\tonaction : function(data) {\n\t\t\t\t\t\t\t\tgrid.merge(cell, data.cols, data.rows);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tplugin_url : url\n\t\t\t\t\t\t});\n\t\t\t\t\t} else\n\t\t\t\t\t\tgrid.merge();\n\t\t\t\t},\n\n\t\t\t\tmceTableInsertRowBefore : function(grid) {\n\t\t\t\t\tgrid.insertRow(true);\n\t\t\t\t},\n\n\t\t\t\tmceTableInsertRowAfter : function(grid) {\n\t\t\t\t\tgrid.insertRow();\n\t\t\t\t},\n\n\t\t\t\tmceTableInsertColBefore : function(grid) {\n\t\t\t\t\tgrid.insertCol(true);\n\t\t\t\t},\n\n\t\t\t\tmceTableInsertColAfter : function(grid) {\n\t\t\t\t\tgrid.insertCol();\n\t\t\t\t},\n\n\t\t\t\tmceTableDeleteCol : function(grid) {\n\t\t\t\t\tgrid.deleteCols();\n\t\t\t\t},\n\n\t\t\t\tmceTableDeleteRow : function(grid) {\n\t\t\t\t\tgrid.deleteRows();\n\t\t\t\t},\n\n\t\t\t\tmceTableCutRow : function(grid) {\n\t\t\t\t\tclipboardRows = grid.cutRows();\n\t\t\t\t},\n\n\t\t\t\tmceTableCopyRow : function(grid) {\n\t\t\t\t\tclipboardRows = grid.copyRows();\n\t\t\t\t},\n\n\t\t\t\tmceTablePasteRowBefore : function(grid) {\n\t\t\t\t\tgrid.pasteRows(clipboardRows, true);\n\t\t\t\t},\n\n\t\t\t\tmceTablePasteRowAfter : function(grid) {\n\t\t\t\t\tgrid.pasteRows(clipboardRows);\n\t\t\t\t},\n\n\t\t\t\tmceTableDelete : function(grid) {\n\t\t\t\t\tgrid.deleteTable();\n\t\t\t\t}\n\t\t\t}, function(func, name) {\n\t\t\t\ted.addCommand(name, function() {\n\t\t\t\t\tvar grid = createTableGrid();\n\n\t\t\t\t\tif (grid) {\n\t\t\t\t\t\tfunc(grid);\n\t\t\t\t\t\ted.execCommand('mceRepaint');\n\t\t\t\t\t\tcleanup();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Register dialog commands\n\t\t\teach({\n\t\t\t\tmceInsertTable : function(val) {\n\t\t\t\t\twinMan.open({\n\t\t\t\t\t\turl : url + '/table.htm',\n\t\t\t\t\t\twidth : 400 + parseInt(ed.getLang('table.table_delta_width', 0)),\n\t\t\t\t\t\theight : 320 + parseInt(ed.getLang('table.table_delta_height', 0)),\n\t\t\t\t\t\tinline : 1\n\t\t\t\t\t}, {\n\t\t\t\t\t\tplugin_url : url,\n\t\t\t\t\t\taction : val ? val.action : 0\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tmceTableRowProps : function() {\n\t\t\t\t\twinMan.open({\n\t\t\t\t\t\turl : url + '/row.htm',\n\t\t\t\t\t\twidth : 400 + parseInt(ed.getLang('table.rowprops_delta_width', 0)),\n\t\t\t\t\t\theight : 295 + parseInt(ed.getLang('table.rowprops_delta_height', 0)),\n\t\t\t\t\t\tinline : 1\n\t\t\t\t\t}, {\n\t\t\t\t\t\tplugin_url : url\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tmceTableCellProps : function() {\n\t\t\t\t\twinMan.open({\n\t\t\t\t\t\turl : url + '/cell.htm',\n\t\t\t\t\t\twidth : 400 + parseInt(ed.getLang('table.cellprops_delta_width', 0)),\n\t\t\t\t\t\theight : 295 + parseInt(ed.getLang('table.cellprops_delta_height', 0)),\n\t\t\t\t\t\tinline : 1\n\t\t\t\t\t}, {\n\t\t\t\t\t\tplugin_url : url\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, function(func, name) {\n\t\t\t\ted.addCommand(name, function(ui, val) {\n\t\t\t\t\tfunc(val);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t});\n\n\t// Register plugin\n\ttinymce.PluginManager.add('table', tinymce.plugins.TablePlugin);\n})(tinymce);\n","Magento_Tinymce3/tiny_mce/plugins/table/editor_plugin.js":"(function(d){var e=d.each;function c(g,h){var j=h.ownerDocument,f=j.createRange(),k;f.setStartBefore(h);f.setEnd(g.endContainer,g.endOffset);k=j.createElement(\"body\");k.appendChild(f.cloneContents());return k.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,\"-\").replace(/<[^>]+>/g,\"\").length==0}function a(g,f){return parseInt(g.getAttribute(f)||1)}function b(H,G,K){var g,L,D,o;t();o=G.getParent(K.getStart(),\"th,td\");if(o){L=F(o);D=I();o=z(L.x,L.y)}function A(N,M){N=N.cloneNode(M);N.removeAttribute(\"id\");return N}function t(){var M=0;g=[];e([\"thead\",\"tbody\",\"tfoot\"],function(N){var O=G.select(\"> \"+N+\" tr\",H);e(O,function(P,Q){Q+=M;e(G.select(\"> td, > th\",P),function(W,R){var S,T,U,V;if(g[Q]){while(g[Q][R]){R++}}U=a(W,\"rowspan\");V=a(W,\"colspan\");for(T=Q;T<Q+U;T++){if(!g[T]){g[T]=[]}for(S=R;S<R+V;S++){g[T][S]={part:N,real:T==Q&&S==R,elm:W,rowspan:U,colspan:V}}}})});M+=O.length})}function z(M,O){var N;N=g[O];if(N){return N[M]}}function s(O,M,N){if(O){N=parseInt(N);if(N===1){O.removeAttribute(M,1)}else{O.setAttribute(M,N,1)}}}function j(M){return M&&(G.hasClass(M.elm,\"mceSelected\")||M==o)}function k(){var M=[];e(H.rows,function(N){e(N.cells,function(O){if(G.hasClass(O,\"mceSelected\")||O==o.elm){M.push(N);return false}})});return M}function r(){var M=G.createRng();M.setStartAfter(H);M.setEndAfter(H);K.setRng(M);G.remove(H)}function f(M){var N;d.walk(M,function(P){var O;if(P.nodeType==3){e(G.getParents(P.parentNode,null,M).reverse(),function(Q){Q=A(Q,false);if(!N){N=O=Q}else{if(O){O.appendChild(Q)}}O=Q});if(O){O.innerHTML=d.isIE?\"&nbsp;\":'<br data-mce-bogus=\"1\" />'}return false}},\"childNodes\");M=A(M,false);s(M,\"rowSpan\",1);s(M,\"colSpan\",1);if(N){M.appendChild(N)}else{if(!d.isIE){M.innerHTML='<br data-mce-bogus=\"1\" />'}}return M}function q(){var M=G.createRng();e(G.select(\"tr\",H),function(N){if(N.cells.length==0){G.remove(N)}});if(G.select(\"tr\",H).length==0){M.setStartAfter(H);M.setEndAfter(H);K.setRng(M);G.remove(H);return}e(G.select(\"thead,tbody,tfoot\",H),function(N){if(N.rows.length==0){G.remove(N)}});t();row=g[Math.min(g.length-1,L.y)];if(row){K.select(row[Math.min(row.length-1,L.x)].elm,true);K.collapse(true)}}function u(S,Q,U,R){var P,N,M,O,T;P=g[Q][S].elm.parentNode;for(M=1;M<=U;M++){P=G.getNext(P,\"tr\");if(P){for(N=S;N>=0;N--){T=g[Q+M][N].elm;if(T.parentNode==P){for(O=1;O<=R;O++){G.insertAfter(f(T),T)}break}}if(N==-1){for(O=1;O<=R;O++){P.insertBefore(f(P.cells[0]),P.cells[0])}}}}}function C(){e(g,function(M,N){e(M,function(P,O){var S,R,T,Q;if(j(P)){P=P.elm;S=a(P,\"colspan\");R=a(P,\"rowspan\");if(S>1||R>1){s(P,\"rowSpan\",1);s(P,\"colSpan\",1);for(Q=0;Q<S-1;Q++){G.insertAfter(f(P),P)}u(O,N,R-1,S)}}})})}function p(V,S,Y){var P,O,X,W,U,R,T,M,V,N,Q;if(V){pos=F(V);P=pos.x;O=pos.y;X=P+(S-1);W=O+(Y-1)}else{P=L.x;O=L.y;X=D.x;W=D.y}T=z(P,O);M=z(X,W);if(T&&M&&T.part==M.part){C();t();T=z(P,O).elm;s(T,\"colSpan\",(X-P)+1);s(T,\"rowSpan\",(W-O)+1);for(R=O;R<=W;R++){for(U=P;U<=X;U++){if(!g[R]||!g[R][U]){continue}V=g[R][U].elm;if(V!=T){N=d.grep(V.childNodes);e(N,function(Z){T.appendChild(Z)});if(N.length){N=d.grep(T.childNodes);Q=0;e(N,function(Z){if(Z.nodeName==\"BR\"&&G.getAttrib(Z,\"data-mce-bogus\")&&Q++<N.length-1){T.removeChild(Z)}})}G.remove(V)}}}q()}}function l(Q){var M,S,P,R,T,U,N,V,O;e(g,function(W,X){e(W,function(Z,Y){if(j(Z)){Z=Z.elm;T=Z.parentNode;U=A(T,false);M=X;if(Q){return false}}});if(Q){return !M}});for(R=0;R<g[0].length;R++){if(!g[M][R]){continue}S=g[M][R].elm;if(S!=P){if(!Q){O=a(S,\"rowspan\");if(O>1){s(S,\"rowSpan\",O+1);continue}}else{if(M>0&&g[M-1][R]){V=g[M-1][R].elm;O=a(V,\"rowSpan\");if(O>1){s(V,\"rowSpan\",O+1);continue}}}N=f(S);s(N,\"colSpan\",S.colSpan);U.appendChild(N);P=S}}if(U.hasChildNodes()){if(!Q){G.insertAfter(U,T)}else{T.parentNode.insertBefore(U,T)}}}function h(N){var O,M;e(g,function(P,Q){e(P,function(S,R){if(j(S)){O=R;if(N){return false}}});if(N){return !O}});e(g,function(S,T){var P,Q,R;if(!S[O]){return}P=S[O].elm;if(P!=M){R=a(P,\"colspan\");Q=a(P,\"rowspan\");if(R==1){if(!N){G.insertAfter(f(P),P);u(O,T,Q-1,R)}else{P.parentNode.insertBefore(f(P),P);u(O,T,Q-1,R)}}else{s(P,\"colSpan\",P.colSpan+1)}M=P}})}function n(){var M=[];e(g,function(N,O){e(N,function(Q,P){if(j(Q)&&d.inArray(M,P)===-1){e(g,function(T){var R=T[P].elm,S;S=a(R,\"colSpan\");if(S>1){s(R,\"colSpan\",S-1)}else{G.remove(R)}});M.push(P)}})});q()}function m(){var N;function M(Q){var P,R,O;P=G.getNext(Q,\"tr\");e(Q.cells,function(S){var T=a(S,\"rowSpan\");if(T>1){s(S,\"rowSpan\",T-1);R=F(S);u(R.x,R.y,1,1)}});R=F(Q.cells[0]);e(g[R.y],function(S){var T;S=S.elm;if(S!=O){T=a(S,\"rowSpan\");if(T<=1){G.remove(S)}else{s(S,\"rowSpan\",T-1)}O=S}})}N=k();e(N.reverse(),function(O){M(O)});q()}function E(){var M=k();G.remove(M);q();return M}function J(){var M=k();e(M,function(O,N){M[N]=A(O,true)});return M}function B(O,N){var P=k(),M=P[N?0:P.length-1],Q=M.cells.length;e(g,function(S){var R;Q=0;e(S,function(U,T){if(U.real){Q+=U.colspan}if(U.elm.parentNode==M){R=1}});if(R){return false}});if(!N){O.reverse()}e(O,function(T){var S=T.cells.length,R;for(i=0;i<S;i++){R=T.cells[i];s(R,\"colSpan\",1);s(R,\"rowSpan\",1)}for(i=S;i<Q;i++){T.appendChild(f(T.cells[S-1]))}for(i=Q;i<S;i++){G.remove(T.cells[i])}if(N){M.parentNode.insertBefore(T,M)}else{G.insertAfter(T,M)}})}function F(M){var N;e(g,function(O,P){e(O,function(R,Q){if(R.elm==M){N={x:Q,y:P};return false}});return !N});return N}function w(M){L=F(M)}function I(){var O,N,M;N=M=0;e(g,function(P,Q){e(P,function(S,R){var U,T;if(j(S)){S=g[Q][R];if(R>N){N=R}if(Q>M){M=Q}if(S.real){U=S.colspan-1;T=S.rowspan-1;if(U){if(R+U>N){N=R+U}}if(T){if(Q+T>M){M=Q+T}}}}})});return{x:N,y:M}}function v(S){var P,O,U,T,N,M,Q,R;D=F(S);if(L&&D){P=Math.min(L.x,D.x);O=Math.min(L.y,D.y);U=Math.max(L.x,D.x);T=Math.max(L.y,D.y);N=U;M=T;for(y=O;y<=M;y++){S=g[y][P];if(!S.real){if(P-(S.colspan-1)<P){P-=S.colspan-1}}}for(x=P;x<=N;x++){S=g[O][x];if(!S.real){if(O-(S.rowspan-1)<O){O-=S.rowspan-1}}}for(y=O;y<=T;y++){for(x=P;x<=U;x++){S=g[y][x];if(S.real){Q=S.colspan-1;R=S.rowspan-1;if(Q){if(x+Q>N){N=x+Q}}if(R){if(y+R>M){M=y+R}}}}}G.removeClass(G.select(\"td.mceSelected,th.mceSelected\"),\"mceSelected\");for(y=O;y<=M;y++){for(x=P;x<=N;x++){if(g[y][x]){G.addClass(g[y][x].elm,\"mceSelected\")}}}}}d.extend(this,{deleteTable:r,split:C,merge:p,insertRow:l,insertCol:h,deleteCols:n,deleteRows:m,cutRows:E,copyRows:J,pasteRows:B,getPos:F,setStartCell:w,setEndCell:v})}d.create(\"tinymce.plugins.TablePlugin\",{init:function(g,h){var f,m,j=true;function l(p){var o=g.selection,n=g.dom.getParent(p||o.getNode(),\"table\");if(n){return new b(n,g.dom,o)}}function k(){g.getBody().style.webkitUserSelect=\"\";if(j){g.dom.removeClass(g.dom.select(\"td.mceSelected,th.mceSelected\"),\"mceSelected\");j=false}}e([[\"table\",\"table.desc\",\"mceInsertTable\",true],[\"delete_table\",\"table.del\",\"mceTableDelete\"],[\"delete_col\",\"table.delete_col_desc\",\"mceTableDeleteCol\"],[\"delete_row\",\"table.delete_row_desc\",\"mceTableDeleteRow\"],[\"col_after\",\"table.col_after_desc\",\"mceTableInsertColAfter\"],[\"col_before\",\"table.col_before_desc\",\"mceTableInsertColBefore\"],[\"row_after\",\"table.row_after_desc\",\"mceTableInsertRowAfter\"],[\"row_before\",\"table.row_before_desc\",\"mceTableInsertRowBefore\"],[\"row_props\",\"table.row_desc\",\"mceTableRowProps\",true],[\"cell_props\",\"table.cell_desc\",\"mceTableCellProps\",true],[\"split_cells\",\"table.split_cells_desc\",\"mceTableSplitCells\",true],[\"merge_cells\",\"table.merge_cells_desc\",\"mceTableMergeCells\",true]],function(n){g.addButton(n[0],{title:n[1],cmd:n[2],ui:n[3]})});if(!d.isIE){g.onClick.add(function(n,o){o=o.target;if(o.nodeName===\"TABLE\"){n.selection.select(o);n.nodeChanged()}})}g.onPreProcess.add(function(o,p){var n,q,r,t=o.dom,s;n=t.select(\"table\",p.node);q=n.length;while(q--){r=n[q];t.setAttrib(r,\"data-mce-style\",\"\");if((s=t.getAttrib(r,\"width\"))){t.setStyle(r,\"width\",s);t.setAttrib(r,\"width\",\"\")}if((s=t.getAttrib(r,\"height\"))){t.setStyle(r,\"height\",s);t.setAttrib(r,\"height\",\"\")}}});g.onNodeChange.add(function(q,o,s){var r;s=q.selection.getStart();r=q.dom.getParent(s,\"td,th,caption\");o.setActive(\"table\",s.nodeName===\"TABLE\"||!!r);if(r&&r.nodeName===\"CAPTION\"){r=0}o.setDisabled(\"delete_table\",!r);o.setDisabled(\"delete_col\",!r);o.setDisabled(\"delete_table\",!r);o.setDisabled(\"delete_row\",!r);o.setDisabled(\"col_after\",!r);o.setDisabled(\"col_before\",!r);o.setDisabled(\"row_after\",!r);o.setDisabled(\"row_before\",!r);o.setDisabled(\"row_props\",!r);o.setDisabled(\"cell_props\",!r);o.setDisabled(\"split_cells\",!r);o.setDisabled(\"merge_cells\",!r)});g.onInit.add(function(r){var p,t,q=r.dom,u;f=r.windowManager;r.onMouseDown.add(function(w,z){if(z.button!=2){k();t=q.getParent(z.target,\"td,th\");p=q.getParent(t,\"table\")}});q.bind(r.getDoc(),\"mouseover\",function(C){var A,z,B=C.target;if(t&&(u||B!=t)&&(B.nodeName==\"TD\"||B.nodeName==\"TH\")){z=q.getParent(B,\"table\");if(z==p){if(!u){u=l(z);u.setStartCell(t);r.getBody().style.webkitUserSelect=\"none\"}u.setEndCell(B);j=true}A=r.selection.getSel();try{if(A.removeAllRanges){A.removeAllRanges()}else{A.empty()}}catch(w){}C.preventDefault()}});r.onMouseUp.add(function(F,G){var z,B=F.selection,H,I=B.getSel(),w,C,A,E;if(t){if(u){F.getBody().style.webkitUserSelect=\"\"}function D(J,L){var K=new d.dom.TreeWalker(J,J);do{if(J.nodeType==3&&d.trim(J.nodeValue).length!=0){if(L){z.setStart(J,0)}else{z.setEnd(J,J.nodeValue.length)}return}if(J.nodeName==\"BR\"){if(L){z.setStartBefore(J)}else{z.setEndBefore(J)}return}}while(J=(L?K.next():K.prev()))}H=q.select(\"td.mceSelected,th.mceSelected\");if(H.length>0){z=q.createRng();C=H[0];E=H[H.length-1];z.setStartBefore(C);z.setEndAfter(C);D(C,1);w=new d.dom.TreeWalker(C,q.getParent(H[0],\"table\"));do{if(C.nodeName==\"TD\"||C.nodeName==\"TH\"){if(!q.hasClass(C,\"mceSelected\")){break}A=C}}while(C=w.next());D(A);B.setRng(z)}F.nodeChanged();t=u=p=null}});r.onKeyUp.add(function(w,z){k()});r.onKeyDown.add(function(w,z){n(w)});r.onMouseDown.add(function(w,z){if(z.button!=2){n(w)}});function o(D,z,A,F){var B=3,G=D.dom.getParent(z.startContainer,\"TABLE\"),C,w,E;if(G){C=G.parentNode}w=z.startContainer.nodeType==B&&z.startOffset==0&&z.endOffset==0&&F&&(A.nodeName==\"TR\"||A==C);E=(A.nodeName==\"TD\"||A.nodeName==\"TH\")&&!F;return w||E}function n(A){if(!d.isWebKit){return}var z=A.selection.getRng();var C=A.selection.getNode();var B=A.dom.getParent(z.startContainer,\"TD,TH\");if(!o(A,z,C,B)){return}if(!B){B=C}var w=B.lastChild;while(w.lastChild){w=w.lastChild}z.setEnd(w,w.nodeValue.length);A.selection.setRng(z)}r.plugins.table.fixTableCellSelection=n;if(r&&r.plugins.contextmenu){r.plugins.contextmenu.onContextMenu.add(function(A,w,C){var D,B=r.selection,z=B.getNode()||r.getBody();if(r.dom.getParent(C,\"td\")||r.dom.getParent(C,\"th\")||r.dom.select(\"td.mceSelected,th.mceSelected\").length){w.removeAll();if(z.nodeName==\"A\"&&!r.dom.getAttrib(z,\"name\")){w.add({title:\"advanced.link_desc\",icon:\"link\",cmd:r.plugins.advlink?\"mceAdvLink\":\"mceLink\",ui:true});w.add({title:\"advanced.unlink_desc\",icon:\"unlink\",cmd:\"UnLink\"});w.addSeparator()}if(z.nodeName==\"IMG\"&&z.className.indexOf(\"mceItem\")==-1){w.add({title:\"advanced.image_desc\",icon:\"image\",cmd:r.plugins.advimage?\"mceAdvImage\":\"mceImage\",ui:true});w.addSeparator()}w.add({title:\"table.desc\",icon:\"table\",cmd:\"mceInsertTable\",value:{action:\"insert\"}});w.add({title:\"table.props_desc\",icon:\"table_props\",cmd:\"mceInsertTable\"});w.add({title:\"table.del\",icon:\"delete_table\",cmd:\"mceTableDelete\"});w.addSeparator();D=w.addMenu({title:\"table.cell\"});D.add({title:\"table.cell_desc\",icon:\"cell_props\",cmd:\"mceTableCellProps\"});D.add({title:\"table.split_cells_desc\",icon:\"split_cells\",cmd:\"mceTableSplitCells\"});D.add({title:\"table.merge_cells_desc\",icon:\"merge_cells\",cmd:\"mceTableMergeCells\"});D=w.addMenu({title:\"table.row\"});D.add({title:\"table.row_desc\",icon:\"row_props\",cmd:\"mceTableRowProps\"});D.add({title:\"table.row_before_desc\",icon:\"row_before\",cmd:\"mceTableInsertRowBefore\"});D.add({title:\"table.row_after_desc\",icon:\"row_after\",cmd:\"mceTableInsertRowAfter\"});D.add({title:\"table.delete_row_desc\",icon:\"delete_row\",cmd:\"mceTableDeleteRow\"});D.addSeparator();D.add({title:\"table.cut_row_desc\",icon:\"cut\",cmd:\"mceTableCutRow\"});D.add({title:\"table.copy_row_desc\",icon:\"copy\",cmd:\"mceTableCopyRow\"});D.add({title:\"table.paste_row_before_desc\",icon:\"paste\",cmd:\"mceTablePasteRowBefore\"}).setDisabled(!m);D.add({title:\"table.paste_row_after_desc\",icon:\"paste\",cmd:\"mceTablePasteRowAfter\"}).setDisabled(!m);D=w.addMenu({title:\"table.col\"});D.add({title:\"table.col_before_desc\",icon:\"col_before\",cmd:\"mceTableInsertColBefore\"});D.add({title:\"table.col_after_desc\",icon:\"col_after\",cmd:\"mceTableInsertColAfter\"});D.add({title:\"table.delete_col_desc\",icon:\"delete_col\",cmd:\"mceTableDeleteCol\"})}else{w.add({title:\"table.desc\",icon:\"table\",cmd:\"mceInsertTable\"})}})}if(d.isWebKit){function v(C,N){var L=d.VK;var Q=N.keyCode;function O(Y,U,S){var T=Y?\"previousSibling\":\"nextSibling\";var Z=C.dom.getParent(U,\"tr\");var X=Z[T];if(X){z(C,U,X,Y);d.dom.Event.cancel(S);return true}else{var aa=C.dom.getParent(Z,\"table\");var W=Z.parentNode;var R=W.nodeName.toLowerCase();if(R===\"tbody\"||R===(Y?\"tfoot\":\"thead\")){var V=w(Y,aa,W,\"tbody\");if(V!==null){return K(Y,V,U,S)}}return M(Y,Z,T,aa,S)}}function w(V,T,U,X){var S=C.dom.select(\">\"+X,T);var R=S.indexOf(U);if(V&&R===0||!V&&R===S.length-1){return B(V,T)}else{if(R===-1){var W=U.tagName.toLowerCase()===\"thead\"?0:S.length-1;return S[W]}else{return S[R+(V?-1:1)]}}}function B(U,T){var S=U?\"thead\":\"tfoot\";var R=C.dom.select(\">\"+S,T);return R.length!==0?R[0]:null}function K(V,T,S,U){var R=J(T,V);R&&z(C,S,R,V);d.dom.Event.cancel(U);return true}function M(Y,U,R,X,W){var S=X[R];if(S){F(S);return true}else{var V=C.dom.getParent(X,\"td,th\");if(V){return O(Y,V,W)}else{var T=J(U,!Y);F(T);return d.dom.Event.cancel(W)}}}function J(S,R){return S&&S[R?\"lastChild\":\"firstChild\"]}function F(R){C.selection.setCursorLocation(R,0)}function A(){return Q==L.UP||Q==L.DOWN}function D(R){var T=R.selection.getNode();var S=R.dom.getParent(T,\"tr\");return S!==null}function P(S){var R=0;var T=S;while(T.previousSibling){T=T.previousSibling;R=R+a(T,\"colspan\")}return R}function E(T,R){var U=0;var S=0;e(T.children,function(V,W){U=U+a(V,\"colspan\");S=W;if(U>R){return false}});return S}function z(T,W,Y,V){var X=P(T.dom.getParent(W,\"td,th\"));var S=E(Y,X);var R=Y.childNodes[S];var U=J(R,V);F(U||R)}function H(R){var T=C.selection.getNode();var U=C.dom.getParent(T,\"td,th\");var S=C.dom.getParent(R,\"td,th\");return U&&U!==S&&I(U,S)}function I(S,R){return C.dom.getParent(S,\"TABLE\")===C.dom.getParent(R,\"TABLE\")}if(A()&&D(C)){var G=C.selection.getNode();setTimeout(function(){if(H(G)){O(!N.shiftKey&&Q===L.UP,G,N)}},0)}}r.onKeyDown.add(v)}if(!d.isIE){function s(){var w;for(w=r.getBody().lastChild;w&&w.nodeType==3&&!w.nodeValue.length;w=w.previousSibling){}if(w&&w.nodeName==\"TABLE\"){r.dom.add(r.getBody(),\"p\",null,'<br mce_bogus=\"1\" />')}}if(d.isGecko){r.onKeyDown.add(function(z,B){var w,A,C=z.dom;if(B.keyCode==37||B.keyCode==38){w=z.selection.getRng();A=C.getParent(w.startContainer,\"table\");if(A&&z.getBody().firstChild==A){if(c(w,A)){w=C.createRng();w.setStartBefore(A);w.setEndBefore(A);z.selection.setRng(w);B.preventDefault()}}}})}r.onKeyUp.add(s);r.onSetContent.add(s);r.onVisualAid.add(s);r.onPreProcess.add(function(w,A){var z=A.node.lastChild;if(z&&z.childNodes.length==1&&z.firstChild.nodeName==\"BR\"){w.dom.remove(z)}});s();r.startContent=r.getContent({format:\"raw\"})}});e({mceTableSplitCells:function(n){n.split()},mceTableMergeCells:function(o){var p,q,n;n=g.dom.getParent(g.selection.getNode(),\"th,td\");if(n){p=n.rowSpan;q=n.colSpan}if(!g.dom.select(\"td.mceSelected,th.mceSelected\").length){f.open({url:h+\"/merge_cells.htm\",width:240+parseInt(g.getLang(\"table.merge_cells_delta_width\",0)),height:110+parseInt(g.getLang(\"table.merge_cells_delta_height\",0)),inline:1},{rows:p,cols:q,onaction:function(r){o.merge(n,r.cols,r.rows)},plugin_url:h})}else{o.merge()}},mceTableInsertRowBefore:function(n){n.insertRow(true)},mceTableInsertRowAfter:function(n){n.insertRow()},mceTableInsertColBefore:function(n){n.insertCol(true)},mceTableInsertColAfter:function(n){n.insertCol()},mceTableDeleteCol:function(n){n.deleteCols()},mceTableDeleteRow:function(n){n.deleteRows()},mceTableCutRow:function(n){m=n.cutRows()},mceTableCopyRow:function(n){m=n.copyRows()},mceTablePasteRowBefore:function(n){n.pasteRows(m,true)},mceTablePasteRowAfter:function(n){n.pasteRows(m)},mceTableDelete:function(n){n.deleteTable()}},function(o,n){g.addCommand(n,function(){var p=l();if(p){o(p);g.execCommand(\"mceRepaint\");k()}})});e({mceInsertTable:function(n){f.open({url:h+\"/table.htm\",width:400+parseInt(g.getLang(\"table.table_delta_width\",0)),height:320+parseInt(g.getLang(\"table.table_delta_height\",0)),inline:1},{plugin_url:h,action:n?n.action:0})},mceTableRowProps:function(){f.open({url:h+\"/row.htm\",width:400+parseInt(g.getLang(\"table.rowprops_delta_width\",0)),height:295+parseInt(g.getLang(\"table.rowprops_delta_height\",0)),inline:1},{plugin_url:h})},mceTableCellProps:function(){f.open({url:h+\"/cell.htm\",width:400+parseInt(g.getLang(\"table.cellprops_delta_width\",0)),height:295+parseInt(g.getLang(\"table.cellprops_delta_height\",0)),inline:1},{plugin_url:h})}},function(o,n){g.addCommand(n,function(p,q){o(q)})})}});d.PluginManager.add(\"table\",d.plugins.TablePlugin)})(tinymce);","Magento_Tinymce3/tiny_mce/plugins/table/js/row.js":"tinyMCEPopup.requireLangPack();\n\nfunction init() {\n\ttinyMCEPopup.resizeToInnerSize();\n\n\tdocument.getElementById('backgroundimagebrowsercontainer').innerHTML = getBrowserHTML('backgroundimagebrowser','backgroundimage','image','table');\n\tdocument.getElementById('bgcolor_pickcontainer').innerHTML = getColorPickerHTML('bgcolor_pick','bgcolor');\n\n\tvar inst = tinyMCEPopup.editor;\n\tvar dom = inst.dom;\n\tvar trElm = dom.getParent(inst.selection.getStart(), \"tr\");\n\tvar formObj = document.forms[0];\n\tvar st = dom.parseStyle(dom.getAttrib(trElm, \"style\"));\n\n\t// Get table row data\n\tvar rowtype = trElm.parentNode.nodeName.toLowerCase();\n\tvar align = dom.getAttrib(trElm, 'align');\n\tvar valign = dom.getAttrib(trElm, 'valign');\n\tvar height = trimSize(getStyle(trElm, 'height', 'height'));\n\tvar className = dom.getAttrib(trElm, 'class');\n\tvar bgcolor = convertRGBToHex(getStyle(trElm, 'bgcolor', 'backgroundColor'));\n\tvar backgroundimage = getStyle(trElm, 'background', 'backgroundImage').replace(new RegExp(\"url\\\\(['\\\"]?([^'\\\"]*)['\\\"]?\\\\)\", 'gi'), \"$1\");\n\tvar id = dom.getAttrib(trElm, 'id');\n\tvar lang = dom.getAttrib(trElm, 'lang');\n\tvar dir = dom.getAttrib(trElm, 'dir');\n\n\tselectByValue(formObj, 'rowtype', rowtype);\n\n\t// Any cells selected\n\tif (dom.select('td.mceSelected,th.mceSelected', trElm).length == 0) {\n\t\t// Setup form\n\t\taddClassesToList('class', 'table_row_styles');\n\t\tTinyMCE_EditableSelects.init();\n\n\t\tformObj.bgcolor.value = bgcolor;\n\t\tformObj.backgroundimage.value = backgroundimage;\n\t\tformObj.height.value = height;\n\t\tformObj.id.value = id;\n\t\tformObj.lang.value = lang;\n\t\tformObj.style.value = dom.serializeStyle(st);\n\t\tselectByValue(formObj, 'align', align);\n\t\tselectByValue(formObj, 'valign', valign);\n\t\tselectByValue(formObj, 'class', className, true, true);\n\t\tselectByValue(formObj, 'dir', dir);\n\n\t\t// Resize some elements\n\t\tif (isVisible('backgroundimagebrowser'))\n\t\t\tdocument.getElementById('backgroundimage').style.width = '180px';\n\n\t\tupdateColor('bgcolor_pick', 'bgcolor');\n\t} else\n\t\ttinyMCEPopup.dom.hide('action');\n}\n\nfunction updateAction() {\n\tvar inst = tinyMCEPopup.editor, dom = inst.dom, trElm, tableElm, formObj = document.forms[0];\n\tvar action = getSelectValue(formObj, 'action');\n\n\tif (!AutoValidator.validate(formObj)) {\n\t\ttinyMCEPopup.alert(AutoValidator.getErrorMessages(formObj).join('. ') + '.');\n\t\treturn false;\n\t}\n\n\ttinyMCEPopup.restoreSelection();\n\ttrElm = dom.getParent(inst.selection.getStart(), \"tr\");\n\ttableElm = dom.getParent(inst.selection.getStart(), \"table\");\n\n\t// Update all selected rows\n\tif (dom.select('td.mceSelected,th.mceSelected', trElm).length > 0) {\n\t\ttinymce.each(tableElm.rows, function(tr) {\n\t\t\tvar i;\n\n\t\t\tfor (i = 0; i < tr.cells.length; i++) {\n\t\t\t\tif (dom.hasClass(tr.cells[i], 'mceSelected')) {\n\t\t\t\t\tupdateRow(tr, true);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tinst.addVisual();\n\t\tinst.nodeChanged();\n\t\tinst.execCommand('mceEndUndoLevel');\n\t\ttinyMCEPopup.close();\n\t\treturn;\n\t}\n\n\tswitch (action) {\n\t\tcase \"row\":\n\t\t\tupdateRow(trElm);\n\t\t\tbreak;\n\n\t\tcase \"all\":\n\t\t\tvar rows = tableElm.getElementsByTagName(\"tr\");\n\n\t\t\tfor (var i=0; i<rows.length; i++)\n\t\t\t\tupdateRow(rows[i], true);\n\n\t\t\tbreak;\n\n\t\tcase \"odd\":\n\t\tcase \"even\":\n\t\t\tvar rows = tableElm.getElementsByTagName(\"tr\");\n\n\t\t\tfor (var i=0; i<rows.length; i++) {\n\t\t\t\tif ((i % 2 == 0 && action == \"odd\") || (i % 2 != 0 && action == \"even\"))\n\t\t\t\t\tupdateRow(rows[i], true, true);\n\t\t\t}\n\n\t\t\tbreak;\n\t}\n\n\tinst.addVisual();\n\tinst.nodeChanged();\n\tinst.execCommand('mceEndUndoLevel');\n\ttinyMCEPopup.close();\n}\n\nfunction updateRow(tr_elm, skip_id, skip_parent) {\n\tvar inst = tinyMCEPopup.editor;\n\tvar formObj = document.forms[0];\n\tvar dom = inst.dom;\n\tvar curRowType = tr_elm.parentNode.nodeName.toLowerCase();\n\tvar rowtype = getSelectValue(formObj, 'rowtype');\n\tvar doc = inst.getDoc();\n\n\t// Update row element\n\tif (!skip_id)\n\t\tdom.setAttrib(tr_elm, 'id', formObj.id.value);\n\n\tdom.setAttrib(tr_elm, 'align', getSelectValue(formObj, 'align'));\n\tdom.setAttrib(tr_elm, 'vAlign', getSelectValue(formObj, 'valign'));\n\tdom.setAttrib(tr_elm, 'lang', formObj.lang.value);\n\tdom.setAttrib(tr_elm, 'dir', getSelectValue(formObj, 'dir'));\n\tdom.setAttrib(tr_elm, 'style', dom.serializeStyle(dom.parseStyle(formObj.style.value)));\n\tdom.setAttrib(tr_elm, 'class', getSelectValue(formObj, 'class'));\n\n\t// Clear deprecated attributes\n\tdom.setAttrib(tr_elm, 'background', '');\n\tdom.setAttrib(tr_elm, 'bgColor', '');\n\tdom.setAttrib(tr_elm, 'height', '');\n\n\t// Set styles\n\ttr_elm.style.height = getCSSSize(formObj.height.value);\n\ttr_elm.style.backgroundColor = formObj.bgcolor.value;\n\n\tif (formObj.backgroundimage.value != \"\")\n\t\ttr_elm.style.backgroundImage = \"url('\" + formObj.backgroundimage.value + \"')\";\n\telse\n\t\ttr_elm.style.backgroundImage = '';\n\n\t// Setup new rowtype\n\tif (curRowType != rowtype && !skip_parent) {\n\t\t// first, clone the node we are working on\n\t\tvar newRow = tr_elm.cloneNode(1);\n\n\t\t// next, find the parent of its new destination (creating it if necessary)\n\t\tvar theTable = dom.getParent(tr_elm, \"table\");\n\t\tvar dest = rowtype;\n\t\tvar newParent = null;\n\t\tfor (var i = 0; i < theTable.childNodes.length; i++) {\n\t\t\tif (theTable.childNodes[i].nodeName.toLowerCase() == dest)\n\t\t\t\tnewParent = theTable.childNodes[i];\n\t\t}\n\n\t\tif (newParent == null) {\n\t\t\tnewParent = doc.createElement(dest);\n\n\t\t\tif (theTable.firstChild.nodeName == 'CAPTION')\n\t\t\t\tinst.dom.insertAfter(newParent, theTable.firstChild);\n\t\t\telse\n\t\t\t\ttheTable.insertBefore(newParent, theTable.firstChild);\n\t\t}\n\n\t\t// append the row to the new parent\n\t\tnewParent.appendChild(newRow);\n\n\t\t// remove the original\n\t\ttr_elm.parentNode.removeChild(tr_elm);\n\n\t\t// set tr_elm to the new node\n\t\ttr_elm = newRow;\n\t}\n\n\tdom.setAttrib(tr_elm, 'style', dom.serializeStyle(dom.parseStyle(tr_elm.style.cssText)));\n}\n\nfunction changedBackgroundImage() {\n\tvar formObj = document.forms[0], dom = tinyMCEPopup.editor.dom;\n\tvar st = dom.parseStyle(formObj.style.value);\n\n\tst['background-image'] = \"url('\" + formObj.backgroundimage.value + \"')\";\n\n\tformObj.style.value = dom.serializeStyle(st);\n}\n\nfunction changedStyle() {\n\tvar formObj = document.forms[0], dom = tinyMCEPopup.editor.dom;\n\tvar st = dom.parseStyle(formObj.style.value);\n\n\tif (st['background-image'])\n\t\tformObj.backgroundimage.value = st['background-image'].replace(new RegExp(\"url\\\\('?([^']*)'?\\\\)\", 'gi'), \"$1\");\n\telse\n\t\tformObj.backgroundimage.value = '';\n\n\tif (st['height'])\n\t\tformObj.height.value = trimSize(st['height']);\n\n\tif (st['background-color']) {\n\t\tformObj.bgcolor.value = st['background-color'];\n\t\tupdateColor('bgcolor_pick','bgcolor');\n\t}\n}\n\nfunction changedSize() {\n\tvar formObj = document.forms[0], dom = tinyMCEPopup.editor.dom;\n\tvar st = dom.parseStyle(formObj.style.value);\n\n\tvar height = formObj.height.value;\n\tif (height != \"\")\n\t\tst['height'] = getCSSSize(height);\n\telse\n\t\tst['height'] = \"\";\n\n\tformObj.style.value = dom.serializeStyle(st);\n}\n\nfunction changedColor() {\n\tvar formObj = document.forms[0], dom = tinyMCEPopup.editor.dom;\n\tvar st = dom.parseStyle(formObj.style.value);\n\n\tst['background-color'] = formObj.bgcolor.value;\n\n\tformObj.style.value = dom.serializeStyle(st);\n}\n\ntinyMCEPopup.onInit.add(init);\n","Magento_Tinymce3/tiny_mce/plugins/table/js/table.js":"tinyMCEPopup.requireLangPack();\n\nvar action, orgTableWidth, orgTableHeight, dom = tinyMCEPopup.editor.dom;\n\nfunction insertTable() {\n\tvar formObj = document.forms[0];\n\tvar inst = tinyMCEPopup.editor, dom = inst.dom;\n\tvar cols = 2, rows = 2, border = 0, cellpadding = -1, cellspacing = -1, align, width, height, className, caption, frame, rules;\n\tvar html = '', capEl, elm;\n\tvar cellLimit, rowLimit, colLimit;\n\n\ttinyMCEPopup.restoreSelection();\n\n\tif (!AutoValidator.validate(formObj)) {\n\t\ttinyMCEPopup.alert(AutoValidator.getErrorMessages(formObj).join('. ') + '.');\n\t\treturn false;\n\t}\n\n\telm = dom.getParent(inst.selection.getNode(), 'table');\n\n\t// Get form data\n\tcols = formObj.elements['cols'].value;\n\trows = formObj.elements['rows'].value;\n\tborder = formObj.elements['border'].value != \"\" ? formObj.elements['border'].value : 0;\n\tcellpadding = formObj.elements['cellpadding'].value != \"\" ? formObj.elements['cellpadding'].value : \"\";\n\tcellspacing = formObj.elements['cellspacing'].value != \"\" ? formObj.elements['cellspacing'].value : \"\";\n\talign = getSelectValue(formObj, \"align\");\n\tframe = getSelectValue(formObj, \"tframe\");\n\trules = getSelectValue(formObj, \"rules\");\n\twidth = formObj.elements['width'].value;\n\theight = formObj.elements['height'].value;\n\tbordercolor = formObj.elements['bordercolor'].value;\n\tbgcolor = formObj.elements['bgcolor'].value;\n\tclassName = getSelectValue(formObj, \"class\");\n\tid = formObj.elements['id'].value;\n\tsummary = formObj.elements['summary'].value;\n\tstyle = formObj.elements['style'].value;\n\tdir = formObj.elements['dir'].value;\n\tlang = formObj.elements['lang'].value;\n\tbackground = formObj.elements['backgroundimage'].value;\n\tcaption = formObj.elements['caption'].checked;\n\n\tcellLimit = tinyMCEPopup.getParam('table_cell_limit', false);\n\trowLimit = tinyMCEPopup.getParam('table_row_limit', false);\n\tcolLimit = tinyMCEPopup.getParam('table_col_limit', false);\n\n\t// Validate table size\n\tif (colLimit && cols > colLimit) {\n\t\ttinyMCEPopup.alert(inst.getLang('table_dlg.col_limit').replace(/\\{\\$cols\\}/g, colLimit));\n\t\treturn false;\n\t} else if (rowLimit && rows > rowLimit) {\n\t\ttinyMCEPopup.alert(inst.getLang('table_dlg.row_limit').replace(/\\{\\$rows\\}/g, rowLimit));\n\t\treturn false;\n\t} else if (cellLimit && cols * rows > cellLimit) {\n\t\ttinyMCEPopup.alert(inst.getLang('table_dlg.cell_limit').replace(/\\{\\$cells\\}/g, cellLimit));\n\t\treturn false;\n\t}\n\n\t// Update table\n\tif (action == \"update\") {\n\t\tdom.setAttrib(elm, 'cellPadding', cellpadding, true);\n\t\tdom.setAttrib(elm, 'cellSpacing', cellspacing, true);\n\n\t\tif (!isCssSize(border)) {\n\t\t\tdom.setAttrib(elm, 'border', border);\n\t\t} else {\n\t\t\tdom.setAttrib(elm, 'border', '');\n\t\t}\n\n\t\tif (border == '') {\n\t\t\tdom.setStyle(elm, 'border-width', '');\n\t\t\tdom.setStyle(elm, 'border', '');\n\t\t\tdom.setAttrib(elm, 'border', '');\n\t\t}\n\n\t\tdom.setAttrib(elm, 'align', align);\n\t\tdom.setAttrib(elm, 'frame', frame);\n\t\tdom.setAttrib(elm, 'rules', rules);\n\t\tdom.setAttrib(elm, 'class', className);\n\t\tdom.setAttrib(elm, 'style', style);\n\t\tdom.setAttrib(elm, 'id', id);\n\t\tdom.setAttrib(elm, 'summary', summary);\n\t\tdom.setAttrib(elm, 'dir', dir);\n\t\tdom.setAttrib(elm, 'lang', lang);\n\n\t\tcapEl = inst.dom.select('caption', elm)[0];\n\n\t\tif (capEl && !caption)\n\t\t\tcapEl.parentNode.removeChild(capEl);\n\n\t\tif (!capEl && caption) {\n\t\t\tcapEl = elm.ownerDocument.createElement('caption');\n\n\t\t\tif (!tinymce.isIE)\n\t\t\t\tcapEl.innerHTML = '<br data-mce-bogus=\"1\"/>';\n\n\t\t\telm.insertBefore(capEl, elm.firstChild);\n\t\t}\n\n\t\tif (width && inst.settings.inline_styles) {\n\t\t\tdom.setStyle(elm, 'width', width);\n\t\t\tdom.setAttrib(elm, 'width', '');\n\t\t} else {\n\t\t\tdom.setAttrib(elm, 'width', width, true);\n\t\t\tdom.setStyle(elm, 'width', '');\n\t\t}\n\n\t\t// Remove these since they are not valid XHTML\n\t\tdom.setAttrib(elm, 'borderColor', '');\n\t\tdom.setAttrib(elm, 'bgColor', '');\n\t\tdom.setAttrib(elm, 'background', '');\n\n\t\tif (height && inst.settings.inline_styles) {\n\t\t\tdom.setStyle(elm, 'height', height);\n\t\t\tdom.setAttrib(elm, 'height', '');\n\t\t} else {\n\t\t\tdom.setAttrib(elm, 'height', height, true);\n\t\t\tdom.setStyle(elm, 'height', '');\n \t\t}\n\n\t\tif (background != '')\n\t\t\telm.style.backgroundImage = \"url('\" + background + \"')\";\n\t\telse\n\t\t\telm.style.backgroundImage = '';\n\n/*\t\tif (tinyMCEPopup.getParam(\"inline_styles\")) {\n\t\t\tif (width != '')\n\t\t\t\telm.style.width = getCSSSize(width);\n\t\t}*/\n\n\t\tif (bordercolor != \"\") {\n\t\t\telm.style.borderColor = bordercolor;\n\t\t\telm.style.borderStyle = elm.style.borderStyle == \"\" ? \"solid\" : elm.style.borderStyle;\n\t\t\telm.style.borderWidth = cssSize(border);\n\t\t} else\n\t\t\telm.style.borderColor = '';\n\n\t\telm.style.backgroundColor = bgcolor;\n\t\telm.style.height = getCSSSize(height);\n\n\t\tinst.addVisual();\n\n\t\t// Fix for stange MSIE align bug\n\t\t//elm.outerHTML = elm.outerHTML;\n\n\t\tinst.nodeChanged();\n\t\tinst.execCommand('mceEndUndoLevel');\n\n\t\t// Repaint if dimensions changed\n\t\tif (formObj.width.value != orgTableWidth || formObj.height.value != orgTableHeight)\n\t\t\tinst.execCommand('mceRepaint');\n\n\t\ttinyMCEPopup.close();\n\t\treturn true;\n\t}\n\n\t// Create new table\n\thtml += '<table';\n\n\thtml += makeAttrib('id', id);\n\tif (!isCssSize(border)) {\n\t\thtml += makeAttrib('border', border);\n\t}\n\n\thtml += makeAttrib('cellpadding', cellpadding);\n\thtml += makeAttrib('cellspacing', cellspacing);\n\thtml += makeAttrib('data-mce-new', '1');\n\n\tif (width && inst.settings.inline_styles) {\n\t\tif (style)\n\t\t\tstyle += '; ';\n\n\t\t// Force px\n\t\tif (/^[0-9\\.]+$/.test(width))\n\t\t\twidth += 'px';\n\n\t\tstyle += 'width: ' + width;\n\t} else\n\t\thtml += makeAttrib('width', width);\n\n/*\tif (height) {\n\t\tif (style)\n\t\t\tstyle += '; ';\n\n\t\tstyle += 'height: ' + height;\n\t}*/\n\n\t//html += makeAttrib('height', height);\n\t//html += makeAttrib('bordercolor', bordercolor);\n\t//html += makeAttrib('bgcolor', bgcolor);\n\thtml += makeAttrib('align', align);\n\thtml += makeAttrib('frame', frame);\n\thtml += makeAttrib('rules', rules);\n\thtml += makeAttrib('class', className);\n\thtml += makeAttrib('style', style);\n\thtml += makeAttrib('summary', summary);\n\thtml += makeAttrib('dir', dir);\n\thtml += makeAttrib('lang', lang);\n\thtml += '>';\n\n\tif (caption) {\n\t\tif (!tinymce.isIE)\n\t\t\thtml += '<caption><br data-mce-bogus=\"1\"/></caption>';\n\t\telse\n\t\t\thtml += '<caption></caption>';\n\t}\n\n\tfor (var y=0; y<rows; y++) {\n\t\thtml += \"<tr>\";\n\n\t\tfor (var x=0; x<cols; x++) {\n\t\t\tif (!tinymce.isIE)\n\t\t\t\thtml += '<td><br data-mce-bogus=\"1\"/></td>';\n\t\t\telse\n\t\t\t\thtml += '<td></td>';\n\t\t}\n\n\t\thtml += \"</tr>\";\n\t}\n\n\thtml += \"</table>\";\n\n\t// Move table\n\tif (inst.settings.fix_table_elements) {\n\t\tvar patt = '';\n\n\t\tinst.focus();\n\t\tinst.selection.setContent('<br class=\"_mce_marker\" />');\n\n\t\ttinymce.each('h1,h2,h3,h4,h5,h6,p'.split(','), function(n) {\n\t\t\tif (patt)\n\t\t\t\tpatt += ',';\n\n\t\t\tpatt += n + ' ._mce_marker';\n\t\t});\n\n\t\ttinymce.each(inst.dom.select(patt), function(n) {\n\t\t\tinst.dom.split(inst.dom.getParent(n, 'h1,h2,h3,h4,h5,h6,p'), n);\n\t\t});\n\n\t\tdom.setOuterHTML(dom.select('br._mce_marker')[0], html);\n\t} else\n\t\tinst.execCommand('mceInsertContent', false, html);\n\n\ttinymce.each(dom.select('table[data-mce-new]'), function(node) {\n\t\tvar tdorth = dom.select('td,th', node);\n\n\t\ttry {\n\t\t\t// IE9 might fail to do this selection \n\t\t\tinst.selection.setCursorLocation(tdorth[0], 0);\n\t\t} catch (ex) {\n\t\t\t// Ignore\n\t\t}\n\n\t\tdom.setAttrib(node, 'data-mce-new', '');\n\t});\n\n\tinst.addVisual();\n\tinst.execCommand('mceEndUndoLevel');\n\n\ttinyMCEPopup.close();\n}\n\nfunction makeAttrib(attrib, value) {\n\tvar formObj = document.forms[0];\n\tvar valueElm = formObj.elements[attrib];\n\n\tif (typeof(value) == \"undefined\" || value == null) {\n\t\tvalue = \"\";\n\n\t\tif (valueElm)\n\t\t\tvalue = valueElm.value;\n\t}\n\n\tif (value == \"\")\n\t\treturn \"\";\n\n\t// XML encode it\n\tvalue = value.replace(/&/g, '&amp;');\n\tvalue = value.replace(/\\\"/g, '&quot;');\n\tvalue = value.replace(/</g, '&lt;');\n\tvalue = value.replace(/>/g, '&gt;');\n\n\treturn ' ' + attrib + '=\"' + value + '\"';\n}\n\nfunction init() {\n\ttinyMCEPopup.resizeToInnerSize();\n\n\tdocument.getElementById('backgroundimagebrowsercontainer').innerHTML = getBrowserHTML('backgroundimagebrowser','backgroundimage','image','table');\n\tdocument.getElementById('backgroundimagebrowsercontainer').innerHTML = getBrowserHTML('backgroundimagebrowser','backgroundimage','image','table');\n\tdocument.getElementById('bordercolor_pickcontainer').innerHTML = getColorPickerHTML('bordercolor_pick','bordercolor');\n\tdocument.getElementById('bgcolor_pickcontainer').innerHTML = getColorPickerHTML('bgcolor_pick','bgcolor');\n\n\tvar cols = 2, rows = 2, border = tinyMCEPopup.getParam('table_default_border', '0'), cellpadding = tinyMCEPopup.getParam('table_default_cellpadding', ''), cellspacing = tinyMCEPopup.getParam('table_default_cellspacing', '');\n\tvar align = \"\", width = \"\", height = \"\", bordercolor = \"\", bgcolor = \"\", className = \"\";\n\tvar id = \"\", summary = \"\", style = \"\", dir = \"\", lang = \"\", background = \"\", bgcolor = \"\", bordercolor = \"\", rules = \"\", frame = \"\";\n\tvar inst = tinyMCEPopup.editor, dom = inst.dom;\n\tvar formObj = document.forms[0];\n\tvar elm = dom.getParent(inst.selection.getNode(), \"table\");\n\n\taction = tinyMCEPopup.getWindowArg('action');\n\n\tif (!action)\n\t\taction = elm ? \"update\" : \"insert\";\n\n\tif (elm && action != \"insert\") {\n\t\tvar rowsAr = elm.rows;\n\t\tvar cols = 0;\n\t\tfor (var i=0; i<rowsAr.length; i++)\n\t\t\tif (rowsAr[i].cells.length > cols)\n\t\t\t\tcols = rowsAr[i].cells.length;\n\n\t\tcols = cols;\n\t\trows = rowsAr.length;\n\n\t\tst = dom.parseStyle(dom.getAttrib(elm, \"style\"));\n\t\tborder = trimSize(getStyle(elm, 'border', 'borderWidth'));\n\t\tcellpadding = dom.getAttrib(elm, 'cellpadding', \"\");\n\t\tcellspacing = dom.getAttrib(elm, 'cellspacing', \"\");\n\t\twidth = trimSize(getStyle(elm, 'width', 'width'));\n\t\theight = trimSize(getStyle(elm, 'height', 'height'));\n\t\tbordercolor = convertRGBToHex(getStyle(elm, 'bordercolor', 'borderLeftColor'));\n\t\tbgcolor = convertRGBToHex(getStyle(elm, 'bgcolor', 'backgroundColor'));\n\t\talign = dom.getAttrib(elm, 'align', align);\n\t\tframe = dom.getAttrib(elm, 'frame');\n\t\trules = dom.getAttrib(elm, 'rules');\n\t\tclassName = tinymce.trim(dom.getAttrib(elm, 'class').replace(/mceItem.+/g, ''));\n\t\tid = dom.getAttrib(elm, 'id');\n\t\tsummary = dom.getAttrib(elm, 'summary');\n\t\tstyle = dom.serializeStyle(st);\n\t\tdir = dom.getAttrib(elm, 'dir');\n\t\tlang = dom.getAttrib(elm, 'lang');\n\t\tbackground = getStyle(elm, 'background', 'backgroundImage').replace(new RegExp(\"url\\\\(['\\\"]?([^'\\\"]*)['\\\"]?\\\\)\", 'gi'), \"$1\");\n\t\tformObj.caption.checked = elm.getElementsByTagName('caption').length > 0;\n\n\t\torgTableWidth = width;\n\t\torgTableHeight = height;\n\n\t\taction = \"update\";\n\t\tformObj.insert.value = inst.getLang('update');\n\t}\n\n\taddClassesToList('class', \"table_styles\");\n\tTinyMCE_EditableSelects.init();\n\n\t// Update form\n\tselectByValue(formObj, 'align', align);\n\tselectByValue(formObj, 'tframe', frame);\n\tselectByValue(formObj, 'rules', rules);\n\tselectByValue(formObj, 'class', className, true, true);\n\tformObj.cols.value = cols;\n\tformObj.rows.value = rows;\n\tformObj.border.value = border;\n\tformObj.cellpadding.value = cellpadding;\n\tformObj.cellspacing.value = cellspacing;\n\tformObj.width.value = width;\n\tformObj.height.value = height;\n\tformObj.bordercolor.value = bordercolor;\n\tformObj.bgcolor.value = bgcolor;\n\tformObj.id.value = id;\n\tformObj.summary.value = summary;\n\tformObj.style.value = style;\n\tformObj.dir.value = dir;\n\tformObj.lang.value = lang;\n\tformObj.backgroundimage.value = background;\n\n\tupdateColor('bordercolor_pick', 'bordercolor');\n\tupdateColor('bgcolor_pick', 'bgcolor');\n\n\t// Resize some elements\n\tif (isVisible('backgroundimagebrowser'))\n\t\tdocument.getElementById('backgroundimage').style.width = '180px';\n\n\t// Disable some fields in update mode\n\tif (action == \"update\") {\n\t\tformObj.cols.disabled = true;\n\t\tformObj.rows.disabled = true;\n\t}\n}\n\nfunction changedSize() {\n\tvar formObj = document.forms[0];\n\tvar st = dom.parseStyle(formObj.style.value);\n\n/*\tvar width = formObj.width.value;\n\tif (width != \"\")\n\t\tst['width'] = tinyMCEPopup.getParam(\"inline_styles\") ? getCSSSize(width) : \"\";\n\telse\n\t\tst['width'] = \"\";*/\n\n\tvar height = formObj.height.value;\n\tif (height != \"\")\n\t\tst['height'] = getCSSSize(height);\n\telse\n\t\tst['height'] = \"\";\n\n\tformObj.style.value = dom.serializeStyle(st);\n}\n\nfunction isCssSize(value) {\n\treturn /^[0-9.]+(%|in|cm|mm|em|ex|pt|pc|px)$/.test(value);\n}\n\nfunction cssSize(value, def) {\n\tvalue = tinymce.trim(value || def);\n\n\tif (!isCssSize(value)) {\n\t\treturn parseInt(value, 10) + 'px';\n\t}\n\n\treturn value;\n}\n\nfunction changedBackgroundImage() {\n\tvar formObj = document.forms[0];\n\tvar st = dom.parseStyle(formObj.style.value);\n\n\tst['background-image'] = \"url('\" + formObj.backgroundimage.value + \"')\";\n\n\tformObj.style.value = dom.serializeStyle(st);\n}\n\nfunction changedBorder() {\n\tvar formObj = document.forms[0];\n\tvar st = dom.parseStyle(formObj.style.value);\n\n\t// Update border width if the element has a color\n\tif (formObj.border.value != \"\" && (isCssSize(formObj.border.value) || formObj.bordercolor.value != \"\"))\n\t\tst['border-width'] = cssSize(formObj.border.value);\n\telse {\n\t\tif (!formObj.border.value) {\n\t\t\tst['border'] = '';\n\t\t\tst['border-width'] = '';\n\t\t}\n\t}\n\n\tformObj.style.value = dom.serializeStyle(st);\n}\n\nfunction changedColor() {\n\tvar formObj = document.forms[0];\n\tvar st = dom.parseStyle(formObj.style.value);\n\n\tst['background-color'] = formObj.bgcolor.value;\n\n\tif (formObj.bordercolor.value != \"\") {\n\t\tst['border-color'] = formObj.bordercolor.value;\n\n\t\t// Add border-width if it's missing\n\t\tif (!st['border-width'])\n\t\t\tst['border-width'] = cssSize(formObj.border.value, 1);\n\t}\n\n\tformObj.style.value = dom.serializeStyle(st);\n}\n\nfunction changedStyle() {\n\tvar formObj = document.forms[0];\n\tvar st = dom.parseStyle(formObj.style.value);\n\n\tif (st['background-image'])\n\t\tformObj.backgroundimage.value = st['background-image'].replace(new RegExp(\"url\\\\(['\\\"]?([^'\\\"]*)['\\\"]?\\\\)\", 'gi'), \"$1\");\n\telse\n\t\tformObj.backgroundimage.value = '';\n\n\tif (st['width'])\n\t\tformObj.width.value = trimSize(st['width']);\n\n\tif (st['height'])\n\t\tformObj.height.value = trimSize(st['height']);\n\n\tif (st['background-color']) {\n\t\tformObj.bgcolor.value = st['background-color'];\n\t\tupdateColor('bgcolor_pick','bgcolor');\n\t}\n\n\tif (st['border-color']) {\n\t\tformObj.bordercolor.value = st['border-color'];\n\t\tupdateColor('bordercolor_pick','bordercolor');\n\t}\n}\n\ntinyMCEPopup.onInit.add(init);\n","Magento_Tinymce3/tiny_mce/plugins/table/js/merge_cells.js":"tinyMCEPopup.requireLangPack();\n\nvar MergeCellsDialog = {\n\tinit : function() {\n\t\tvar f = document.forms[0];\n\n\t\tf.numcols.value = tinyMCEPopup.getWindowArg('cols', 1);\n\t\tf.numrows.value = tinyMCEPopup.getWindowArg('rows', 1);\n\t},\n\n\tmerge : function() {\n\t\tvar func, f = document.forms[0];\n\n\t\ttinyMCEPopup.restoreSelection();\n\n\t\tfunc = tinyMCEPopup.getWindowArg('onaction');\n\n\t\tfunc({\n\t\t\tcols : f.numcols.value,\n\t\t\trows : f.numrows.value\n\t\t});\n\n\t\ttinyMCEPopup.close();\n\t}\n};\n\ntinyMCEPopup.onInit.add(MergeCellsDialog.init, MergeCellsDialog);\n","Magento_Tinymce3/tiny_mce/plugins/table/js/cell.js":"tinyMCEPopup.requireLangPack();\n\nvar ed;\n\nfunction init() {\n\ted = tinyMCEPopup.editor;\n\ttinyMCEPopup.resizeToInnerSize();\n\n\tdocument.getElementById('backgroundimagebrowsercontainer').innerHTML = getBrowserHTML('backgroundimagebrowser','backgroundimage','image','table');\n\tdocument.getElementById('bordercolor_pickcontainer').innerHTML = getColorPickerHTML('bordercolor_pick','bordercolor');\n\tdocument.getElementById('bgcolor_pickcontainer').innerHTML = getColorPickerHTML('bgcolor_pick','bgcolor')\n\n\tvar inst = ed;\n\tvar tdElm = ed.dom.getParent(ed.selection.getStart(), \"td,th\");\n\tvar formObj = document.forms[0];\n\tvar st = ed.dom.parseStyle(ed.dom.getAttrib(tdElm, \"style\"));\n\n\t// Get table cell data\n\tvar celltype = tdElm.nodeName.toLowerCase();\n\tvar align = ed.dom.getAttrib(tdElm, 'align');\n\tvar valign = ed.dom.getAttrib(tdElm, 'valign');\n\tvar width = trimSize(getStyle(tdElm, 'width', 'width'));\n\tvar height = trimSize(getStyle(tdElm, 'height', 'height'));\n\tvar bordercolor = convertRGBToHex(getStyle(tdElm, 'bordercolor', 'borderLeftColor'));\n\tvar bgcolor = convertRGBToHex(getStyle(tdElm, 'bgcolor', 'backgroundColor'));\n\tvar className = ed.dom.getAttrib(tdElm, 'class');\n\tvar backgroundimage = getStyle(tdElm, 'background', 'backgroundImage').replace(new RegExp(\"url\\\\(['\\\"]?([^'\\\"]*)['\\\"]?\\\\)\", 'gi'), \"$1\");\n\tvar id = ed.dom.getAttrib(tdElm, 'id');\n\tvar lang = ed.dom.getAttrib(tdElm, 'lang');\n\tvar dir = ed.dom.getAttrib(tdElm, 'dir');\n\tvar scope = ed.dom.getAttrib(tdElm, 'scope');\n\n\t// Setup form\n\taddClassesToList('class', 'table_cell_styles');\n\tTinyMCE_EditableSelects.init();\n\n\tif (!ed.dom.hasClass(tdElm, 'mceSelected')) {\n\t\tformObj.bordercolor.value = bordercolor;\n\t\tformObj.bgcolor.value = bgcolor;\n\t\tformObj.backgroundimage.value = backgroundimage;\n\t\tformObj.width.value = width;\n\t\tformObj.height.value = height;\n\t\tformObj.id.value = id;\n\t\tformObj.lang.value = lang;\n\t\tformObj.style.value = ed.dom.serializeStyle(st);\n\t\tselectByValue(formObj, 'align', align);\n\t\tselectByValue(formObj, 'valign', valign);\n\t\tselectByValue(formObj, 'class', className, true, true);\n\t\tselectByValue(formObj, 'celltype', celltype);\n\t\tselectByValue(formObj, 'dir', dir);\n\t\tselectByValue(formObj, 'scope', scope);\n\n\t\t// Resize some elements\n\t\tif (isVisible('backgroundimagebrowser'))\n\t\t\tdocument.getElementById('backgroundimage').style.width = '180px';\n\n\t\tupdateColor('bordercolor_pick', 'bordercolor');\n\t\tupdateColor('bgcolor_pick', 'bgcolor');\n\t} else\n\t\ttinyMCEPopup.dom.hide('action');\n}\n\nfunction updateAction() {\n\tvar el, inst = ed, tdElm, trElm, tableElm, formObj = document.forms[0];\n\n\tif (!AutoValidator.validate(formObj)) {\n\t\ttinyMCEPopup.alert(AutoValidator.getErrorMessages(formObj).join('. ') + '.');\n\t\treturn false;\n\t}\n\n\ttinyMCEPopup.restoreSelection();\n\tel = ed.selection.getStart();\n\ttdElm = ed.dom.getParent(el, \"td,th\");\n\ttrElm = ed.dom.getParent(el, \"tr\");\n\ttableElm = ed.dom.getParent(el, \"table\");\n\n\t// Cell is selected\n\tif (ed.dom.hasClass(tdElm, 'mceSelected')) {\n\t\t// Update all selected sells\n\t\ttinymce.each(ed.dom.select('td.mceSelected,th.mceSelected'), function(td) {\n\t\t\tupdateCell(td);\n\t\t});\n\n\t\ted.addVisual();\n\t\ted.nodeChanged();\n\t\tinst.execCommand('mceEndUndoLevel');\n\t\ttinyMCEPopup.close();\n\t\treturn;\n\t}\n\n\tswitch (getSelectValue(formObj, 'action')) {\n\t\tcase \"cell\":\n\t\t\tvar celltype = getSelectValue(formObj, 'celltype');\n\t\t\tvar scope = getSelectValue(formObj, 'scope');\n\n\t\t\tfunction doUpdate(s) {\n\t\t\t\tif (s) {\n\t\t\t\t\tupdateCell(tdElm);\n\n\t\t\t\t\ted.addVisual();\n\t\t\t\t\ted.nodeChanged();\n\t\t\t\t\tinst.execCommand('mceEndUndoLevel');\n\t\t\t\t\ttinyMCEPopup.close();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (ed.getParam(\"accessibility_warnings\", 1)) {\n\t\t\t\tif (celltype == \"th\" && scope == \"\")\n\t\t\t\t\ttinyMCEPopup.confirm(ed.getLang('table_dlg.missing_scope', '', true), doUpdate);\n\t\t\t\telse\n\t\t\t\t\tdoUpdate(1);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdateCell(tdElm);\n\t\t\tbreak;\n\n\t\tcase \"row\":\n\t\t\tvar cell = trElm.firstChild;\n\n\t\t\tif (cell.nodeName != \"TD\" && cell.nodeName != \"TH\")\n\t\t\t\tcell = nextCell(cell);\n\n\t\t\tdo {\n\t\t\t\tcell = updateCell(cell, true);\n\t\t\t} while ((cell = nextCell(cell)) != null);\n\n\t\t\tbreak;\n\n\t\tcase \"col\":\n\t\t\tvar curr, col = 0, cell = trElm.firstChild, rows = tableElm.getElementsByTagName(\"tr\");\n\n\t\t\tif (cell.nodeName != \"TD\" && cell.nodeName != \"TH\")\n\t\t\t\tcell = nextCell(cell);\n\n\t\t\tdo {\n\t\t\t\tif (cell == tdElm)\n\t\t\t\t\tbreak;\n\t\t\t\tcol += cell.getAttribute(\"colspan\");\n\t\t\t} while ((cell = nextCell(cell)) != null);\n\n\t\t\tfor (var i=0; i<rows.length; i++) {\n\t\t\t\tcell = rows[i].firstChild;\n\n\t\t\t\tif (cell.nodeName != \"TD\" && cell.nodeName != \"TH\")\n\t\t\t\t\tcell = nextCell(cell);\n\n\t\t\t\tcurr = 0;\n\t\t\t\tdo {\n\t\t\t\t\tif (curr == col) {\n\t\t\t\t\t\tcell = updateCell(cell, true);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcurr += cell.getAttribute(\"colspan\");\n\t\t\t\t} while ((cell = nextCell(cell)) != null);\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tcase \"all\":\n\t\t\tvar rows = tableElm.getElementsByTagName(\"tr\");\n\n\t\t\tfor (var i=0; i<rows.length; i++) {\n\t\t\t\tvar cell = rows[i].firstChild;\n\n\t\t\t\tif (cell.nodeName != \"TD\" && cell.nodeName != \"TH\")\n\t\t\t\t\tcell = nextCell(cell);\n\n\t\t\t\tdo {\n\t\t\t\t\tcell = updateCell(cell, true);\n\t\t\t\t} while ((cell = nextCell(cell)) != null);\n\t\t\t}\n\n\t\t\tbreak;\n\t}\n\n\ted.addVisual();\n\ted.nodeChanged();\n\tinst.execCommand('mceEndUndoLevel');\n\ttinyMCEPopup.close();\n}\n\nfunction nextCell(elm) {\n\twhile ((elm = elm.nextSibling) != null) {\n\t\tif (elm.nodeName == \"TD\" || elm.nodeName == \"TH\")\n\t\t\treturn elm;\n\t}\n\n\treturn null;\n}\n\nfunction updateCell(td, skip_id) {\n\tvar inst = ed;\n\tvar formObj = document.forms[0];\n\tvar curCellType = td.nodeName.toLowerCase();\n\tvar celltype = getSelectValue(formObj, 'celltype');\n\tvar doc = inst.getDoc();\n\tvar dom = ed.dom;\n\n\tif (!skip_id)\n\t\tdom.setAttrib(td, 'id', formObj.id.value);\n\n\tdom.setAttrib(td, 'align', formObj.align.value);\n\tdom.setAttrib(td, 'vAlign', formObj.valign.value);\n\tdom.setAttrib(td, 'lang', formObj.lang.value);\n\tdom.setAttrib(td, 'dir', getSelectValue(formObj, 'dir'));\n\tdom.setAttrib(td, 'style', ed.dom.serializeStyle(ed.dom.parseStyle(formObj.style.value)));\n\tdom.setAttrib(td, 'scope', formObj.scope.value);\n\tdom.setAttrib(td, 'class', getSelectValue(formObj, 'class'));\n\n\t// Clear deprecated attributes\n\ted.dom.setAttrib(td, 'width', '');\n\ted.dom.setAttrib(td, 'height', '');\n\ted.dom.setAttrib(td, 'bgColor', '');\n\ted.dom.setAttrib(td, 'borderColor', '');\n\ted.dom.setAttrib(td, 'background', '');\n\n\t// Set styles\n\ttd.style.width = getCSSSize(formObj.width.value);\n\ttd.style.height = getCSSSize(formObj.height.value);\n\tif (formObj.bordercolor.value != \"\") {\n\t\ttd.style.borderColor = formObj.bordercolor.value;\n\t\ttd.style.borderStyle = td.style.borderStyle == \"\" ? \"solid\" : td.style.borderStyle;\n\t\ttd.style.borderWidth = td.style.borderWidth == \"\" ? \"1px\" : td.style.borderWidth;\n\t} else\n\t\ttd.style.borderColor = '';\n\n\ttd.style.backgroundColor = formObj.bgcolor.value;\n\n\tif (formObj.backgroundimage.value != \"\")\n\t\ttd.style.backgroundImage = \"url('\" + formObj.backgroundimage.value + \"')\";\n\telse\n\t\ttd.style.backgroundImage = '';\n\n\tif (curCellType != celltype) {\n\t\t// changing to a different node type\n\t\tvar newCell = doc.createElement(celltype);\n\n\t\tfor (var c=0; c<td.childNodes.length; c++)\n\t\t\tnewCell.appendChild(td.childNodes[c].cloneNode(1));\n\n\t\tfor (var a=0; a<td.attributes.length; a++)\n\t\t\ted.dom.setAttrib(newCell, td.attributes[a].name, ed.dom.getAttrib(td, td.attributes[a].name));\n\n\t\ttd.parentNode.replaceChild(newCell, td);\n\t\ttd = newCell;\n\t}\n\n\tdom.setAttrib(td, 'style', dom.serializeStyle(dom.parseStyle(td.style.cssText)));\n\n\treturn td;\n}\n\nfunction changedBackgroundImage() {\n\tvar formObj = document.forms[0];\n\tvar st = ed.dom.parseStyle(formObj.style.value);\n\n\tst['background-image'] = \"url('\" + formObj.backgroundimage.value + \"')\";\n\n\tformObj.style.value = ed.dom.serializeStyle(st);\n}\n\nfunction changedSize() {\n\tvar formObj = document.forms[0];\n\tvar st = ed.dom.parseStyle(formObj.style.value);\n\n\tvar width = formObj.width.value;\n\tif (width != \"\")\n\t\tst['width'] = getCSSSize(width);\n\telse\n\t\tst['width'] = \"\";\n\n\tvar height = formObj.height.value;\n\tif (height != \"\")\n\t\tst['height'] = getCSSSize(height);\n\telse\n\t\tst['height'] = \"\";\n\n\tformObj.style.value = ed.dom.serializeStyle(st);\n}\n\nfunction changedColor() {\n\tvar formObj = document.forms[0];\n\tvar st = ed.dom.parseStyle(formObj.style.value);\n\n\tst['background-color'] = formObj.bgcolor.value;\n\tst['border-color'] = formObj.bordercolor.value;\n\n\tformObj.style.value = ed.dom.serializeStyle(st);\n}\n\nfunction changedStyle() {\n\tvar formObj = document.forms[0];\n\tvar st = ed.dom.parseStyle(formObj.style.value);\n\n\tif (st['background-image'])\n\t\tformObj.backgroundimage.value = st['background-image'].replace(new RegExp(\"url\\\\('?([^']*)'?\\\\)\", 'gi'), \"$1\");\n\telse\n\t\tformObj.backgroundimage.value = '';\n\n\tif (st['width'])\n\t\tformObj.width.value = trimSize(st['width']);\n\n\tif (st['height'])\n\t\tformObj.height.value = trimSize(st['height']);\n\n\tif (st['background-color']) {\n\t\tformObj.bgcolor.value = st['background-color'];\n\t\tupdateColor('bgcolor_pick','bgcolor');\n\t}\n\n\tif (st['border-color']) {\n\t\tformObj.bordercolor.value = st['border-color'];\n\t\tupdateColor('bordercolor_pick','bordercolor');\n\t}\n}\n\ntinyMCEPopup.onInit.add(init);\n","Magento_Tinymce3/tiny_mce/plugins/table/langs/en_dlg.js":"tinyMCE.addI18n('en.table_dlg',{\"rules_border\":\"border\",\"rules_box\":\"box\",\"rules_vsides\":\"vsides\",\"rules_rhs\":\"rhs\",\"rules_lhs\":\"lhs\",\"rules_hsides\":\"hsides\",\"rules_below\":\"below\",\"rules_above\":\"above\",\"rules_void\":\"void\",rules:\"Rules\",\"frame_all\":\"all\",\"frame_cols\":\"cols\",\"frame_rows\":\"rows\",\"frame_groups\":\"groups\",\"frame_none\":\"none\",frame:\"Frame\",caption:\"Table Caption\",\"missing_scope\":\"Are you sure you want to continue without specifying a scope for this table header cell. Without it, it may be difficult for some users with disabilities to understand the content or data displayed of the table.\",\"cell_limit\":\"You\\'ve exceeded the maximum number of cells of {$cells}.\",\"row_limit\":\"You\\'ve exceeded the maximum number of rows of {$rows}.\",\"col_limit\":\"You\\'ve exceeded the maximum number of columns of {$cols}.\",colgroup:\"Col Group\",rowgroup:\"Row Group\",scope:\"Scope\",tfoot:\"Footer\",tbody:\"Body\",thead:\"Header\",\"row_all\":\"Update All Rows in Table\",\"row_even\":\"Update Even Rows in Table\",\"row_odd\":\"Update Odd Rows in Table\",\"row_row\":\"Update Current Row\",\"cell_all\":\"Update All Cells in Table\",\"cell_row\":\"Update All Cells in Row\",\"cell_cell\":\"Update Current Cell\",th:\"Header\",td:\"Data\",summary:\"Summary\",bgimage:\"Background Image\",rtl:\"Right to Left\",ltr:\"Left to Right\",mime:\"Target MIME Type\",langcode:\"Language Code\",langdir:\"Language Direction\",style:\"Style\",id:\"ID\",\"merge_cells_title\":\"Merge Table Cells\",bgcolor:\"Background Color\",bordercolor:\"Border Color\",\"align_bottom\":\"Bottom\",\"align_top\":\"Top\",valign:\"Vertical Alignment\",\"cell_type\":\"Cell Type\",\"cell_title\":\"Table Cell Properties\",\"row_title\":\"Table Row Properties\",\"align_middle\":\"Center\",\"align_right\":\"Right\",\"align_left\":\"Left\",\"align_default\":\"Default\",align:\"Alignment\",border:\"Border\",cellpadding:\"Cell Padding\",cellspacing:\"Cell Spacing\",rows:\"Rows\",cols:\"Columns\",height:\"Height\",width:\"Width\",title:\"Insert/Edit Table\",rowtype:\"Row Type\",\"advanced_props\":\"Advanced Properties\",\"general_props\":\"General Properties\",\"advanced_tab\":\"Advanced\",\"general_tab\":\"General\",\"cell_col\":\"Update all cells in column\"});","Magento_Tinymce3/tiny_mce/plugins/advlink/editor_plugin_src.js":"/**\n * editor_plugin_src.js\n *\n * Copyright 2009, Moxiecode Systems AB\n * Released under LGPL License.\n *\n * License: http://tinymce.moxiecode.com/license\n * Contributing: http://tinymce.moxiecode.com/contributing\n */\n\n(function() {\n\ttinymce.create('tinymce.plugins.AdvancedLinkPlugin', {\n\t\tinit : function(ed, url) {\n\t\t\tthis.editor = ed;\n\n\t\t\t// Register commands\n\t\t\ted.addCommand('mceAdvLink', function() {\n\t\t\t\tvar se = ed.selection;\n\n\t\t\t\t// No selection and not in link\n\t\t\t\tif (se.isCollapsed() && !ed.dom.getParent(se.getNode(), 'A'))\n\t\t\t\t\treturn;\n\n\t\t\t\ted.windowManager.open({\n\t\t\t\t\tfile : url + '/link.htm',\n\t\t\t\t\twidth : 480 + parseInt(ed.getLang('advlink.delta_width', 0)),\n\t\t\t\t\theight : 400 + parseInt(ed.getLang('advlink.delta_height', 0)),\n\t\t\t\t\tinline : 1\n\t\t\t\t}, {\n\t\t\t\t\tplugin_url : url\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Register buttons\n\t\t\ted.addButton('link', {\n\t\t\t\ttitle : 'advlink.link_desc',\n\t\t\t\tcmd : 'mceAdvLink'\n\t\t\t});\n\n\t\t\ted.addShortcut('ctrl+k', 'advlink.advlink_desc', 'mceAdvLink');\n\n\t\t\ted.onNodeChange.add(function(ed, cm, n, co) {\n\t\t\t\tcm.setDisabled('link', co && n.nodeName != 'A');\n\t\t\t\tcm.setActive('link', n.nodeName == 'A' && !n.name);\n\t\t\t});\n\t\t},\n\n\t\tgetInfo : function() {\n\t\t\treturn {\n\t\t\t\tlongname : 'Advanced link',\n\t\t\t\tauthor : 'Moxiecode Systems AB',\n\t\t\t\tauthorurl : 'http://tinymce.moxiecode.com',\n\t\t\t\tinfourl : 'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advlink',\n\t\t\t\tversion : tinymce.majorVersion + \".\" + tinymce.minorVersion\n\t\t\t};\n\t\t}\n\t});\n\n\t// Register plugin\n\ttinymce.PluginManager.add('advlink', tinymce.plugins.AdvancedLinkPlugin);\n})();","Magento_Tinymce3/tiny_mce/plugins/advlink/editor_plugin.js":"(function(){tinymce.create(\"tinymce.plugins.AdvancedLinkPlugin\",{init:function(a,b){this.editor=a;a.addCommand(\"mceAdvLink\",function(){var c=a.selection;if(c.isCollapsed()&&!a.dom.getParent(c.getNode(),\"A\")){return}a.windowManager.open({file:b+\"/link.htm\",width:480+parseInt(a.getLang(\"advlink.delta_width\",0)),height:400+parseInt(a.getLang(\"advlink.delta_height\",0)),inline:1},{plugin_url:b})});a.addButton(\"link\",{title:\"advlink.link_desc\",cmd:\"mceAdvLink\"});a.addShortcut(\"ctrl+k\",\"advlink.advlink_desc\",\"mceAdvLink\");a.onNodeChange.add(function(d,c,f,e){c.setDisabled(\"link\",e&&f.nodeName!=\"A\");c.setActive(\"link\",f.nodeName==\"A\"&&!f.name)})},getInfo:function(){return{longname:\"Advanced link\",author:\"Moxiecode Systems AB\",authorurl:\"http://tinymce.moxiecode.com\",infourl:\"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advlink\",version:tinymce.majorVersion+\".\"+tinymce.minorVersion}}});tinymce.PluginManager.add(\"advlink\",tinymce.plugins.AdvancedLinkPlugin)})();"}
}});
